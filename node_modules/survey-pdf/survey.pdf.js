/*!
 * surveyjs - SurveyJS PDF library v1.12.16-patch.1
 * Copyright (c) 2015-2024 Devsoft Baltic OÃœ  - http://surveyjs.io/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("survey-core"), require("jspdf"));
	else if(typeof define === 'function' && define.amd)
		define("SurveyPDF", ["survey-core", "jspdf"], factory);
	else if(typeof exports === 'object')
		exports["SurveyPDF"] = factory(require("survey-core"), require("jspdf"));
	else
		root["SurveyPDF"] = factory(root["Survey"], root["jspdf"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_18__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 14);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = __extends;
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return __assign; });
/* unused harmony export __rest */
/* unused harmony export __decorate */
/* harmony export (immutable) */ __webpack_exports__["b"] = __awaiter;
/* harmony export (immutable) */ __webpack_exports__["c"] = __generator;
/* harmony export (immutable) */ __webpack_exports__["d"] = __spreadArray;
var extendStatics = function (d, b) {
    extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b)
            if (Object.prototype.hasOwnProperty.call(b, p))
                d[p] = b[p]; };
    return extendStatics(d, b);
};
function __extends(d, b) {
    if (typeof b !== 'function' && b !== null)
        throw new TypeError('Class extends value ' + String(b) + ' is not a constructor or null');
    extendStatics(d, b);
    function __() { this.constructor = d; }
    // eslint-disable-next-line @typescript-eslint/ban-ts-comment
    // @ts-ignore
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}
var __assign = function () {
    __assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s)
                if (Object.prototype.hasOwnProperty.call(s, p))
                    t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
function __rest(s, e) {
    var t = {};
    for (var p in s)
        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
            t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === 'function')
        for (var i = 0, q = Object.getOwnPropertySymbols(s); i < q.length; i++) {
            if (e.indexOf(q[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, q[i]))
                t[q[i]] = s[q[i]];
        }
    return t;
}
function __decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === 'object' && typeof Reflect.decorate === 'function')
        r = Reflect.decorate(decorators, target, key, desc);
    // eslint-disable-next-line no-cond-assign
    else
        for (var i = decorators.length - 1; i >= 0; i--)
            if (d = decorators[i])
                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try {
            step(generator.next(value));
        }
        catch (e) {
            reject(e);
        } }
        function rejected(value) { try {
            step(generator['throw'](value));
        }
        catch (e) {
            reject(e);
        } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}
function __generator(thisArg, body) {
    var _ = { label: 0, sent: function () { if (t[0] & 1)
            throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), 'throw': verb(1), 'return': verb(2) }, typeof Symbol === 'function' && (g[Symbol.iterator] = function () { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f)
            throw new TypeError('Generator is already executing.');
        while (_)
            try {
                if (f = 1, y && (t = op[0] & 2 ? y['return'] : op[0] ? y['throw'] || ((t = y['return']) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)
                    return t;
                if (y = 0, t)
                    op = [op[0] & 2, t.value];
                switch (op[0]) {
                    case 0:
                    case 1:
                        t = op;
                        break;
                    case 4:
                        _.label++;
                        return { value: op[1], done: false };
                    case 5:
                        _.label++;
                        y = op[1];
                        op = [0];
                        continue;
                    case 7:
                        op = _.ops.pop();
                        _.trys.pop();
                        continue;
                    default:
                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                            _ = 0;
                            continue;
                        }
                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {
                            _.label = op[1];
                            break;
                        }
                        if (op[0] === 6 && _.label < t[1]) {
                            _.label = t[1];
                            t = op;
                            break;
                        }
                        if (t && _.label < t[2]) {
                            _.label = t[2];
                            _.ops.push(op);
                            break;
                        }
                        if (t[2])
                            _.ops.pop();
                        _.trys.pop();
                        continue;
                }
                op = body.call(thisArg, _);
            }
            catch (e) {
                op = [6, e];
                y = 0;
            }
            finally {
                f = t = 0;
            }
        if (op[0] & 5)
            throw op[1];
        return { value: op[0] ? op[1] : void 0, done: true };
    }
}
function __spreadArray(to, from, pack) {
    if (pack || arguments.length === 2)
        for (var i = 0, l = from.length, ar; i < l; i++) {
            if (ar || !(i in from)) {
                if (!ar)
                    ar = Array.prototype.slice.call(from, 0, i);
                ar[i] = from[i];
            }
        }
    return to.concat(ar || Array.prototype.slice.call(from));
}


/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_survey_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__entries_pdf__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__doc_controller__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__flat_layout_flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_text__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_textbold__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pdf_render_pdf_titlepanel__ = __webpack_require__(34);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pdf_render_pdf_description__ = __webpack_require__(60);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__pdf_render_pdf_comment__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__pdf_render_pdf_link__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__pdf_render_pdf_html__ = __webpack_require__(28);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__pdf_render_pdf_image__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__pdf_render_pdf_empty__ = __webpack_require__(12);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__pdf_render_pdf_rowline__ = __webpack_require__(16);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__pdf_render_pdf_composite__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__event_handler_adorners__ = __webpack_require__(35);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SurveyHelper; });

















var SurveyHelper = /** @class */ (function () {
    function SurveyHelper() {
    }
    SurveyHelper.parseWidth = function (width, maxWidth, columnsCount, defaultUnit) {
        if (columnsCount === void 0) { columnsCount = 1; }
        if (width.indexOf('calc') === 0) {
            return maxWidth / columnsCount;
        }
        var value = parseFloat(width);
        var unit = width.replace(/[^A-Za-z%]/g, '') || defaultUnit;
        var k;
        switch (unit) {
            case 'pt':
                k = 1.0;
                break;
            case 'mm':
                k = 72.0 / 25.4;
                break;
            case 'cm':
                k = 72.0 / 2.54;
                break;
            case 'in':
                k = 72.0;
                break;
            case 'px':
                k = 72.0 / 96.0;
                break;
            case 'pc':
                k = 12.0;
                break;
            case 'em':
                k = 12.0;
                break;
            case 'ex':
                k = 6.0;
                break;
            default:
            case '%':
                k = maxWidth / 100.0;
                break;
        }
        return Math.min(value * k, maxWidth);
    };
    SurveyHelper.pxToPt = function (value) {
        if (typeof value === 'string') {
            if (!isNaN(Number(value))) {
                value += 'px';
            }
            return SurveyHelper.parseWidth(value, Number.MAX_VALUE);
        }
        return value * 72.0 / 96.0;
    };
    SurveyHelper.mergeRects = function () {
        var rects = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            rects[_i] = arguments[_i];
        }
        var resultRect = {
            xLeft: rects[0].xLeft,
            xRight: rects[0].xRight,
            yTop: rects[0].yTop,
            yBot: rects[0].yBot
        };
        rects.forEach(function (rect) {
            resultRect.xLeft = Math.min(resultRect.xLeft, rect.xLeft),
                resultRect.xRight = Math.max(resultRect.xRight, rect.xRight),
                resultRect.yTop = Math.min(resultRect.yTop, rect.yTop),
                resultRect.yBot = Math.max(resultRect.yBot, rect.yBot);
        });
        return resultRect;
    };
    SurveyHelper.createPoint = function (rect, isLeft, isTop) {
        if (isLeft === void 0) { isLeft = true; }
        if (isTop === void 0) { isTop = false; }
        return {
            xLeft: isLeft ? rect.xLeft : rect.xRight,
            yTop: isTop ? rect.yTop : rect.yBot
        };
    };
    SurveyHelper.createRect = function (point, width, height) {
        return {
            xLeft: point.xLeft,
            xRight: point.xLeft + width,
            yTop: point.yTop,
            yBot: point.yTop + height
        };
    };
    SurveyHelper.createHeaderRect = function (controller) {
        return {
            xLeft: 0.0,
            xRight: controller.paperWidth,
            yTop: 0.0,
            yBot: controller.margins.top
        };
    };
    SurveyHelper.createFooterRect = function (controller) {
        return {
            xLeft: 0.0,
            xRight: controller.paperWidth,
            yTop: controller.paperHeight - controller.margins.bot,
            yBot: controller.paperHeight
        };
    };
    SurveyHelper.chooseHtmlFont = function (controller) {
        return controller.useCustomFontInHtml ? controller.fontName : this.STANDARD_FONT;
    };
    SurveyHelper.generateCssTextRule = function (fontSize, fontStyle, fontName) {
        return "\"font-size: ".concat(fontSize, "pt; font-weight: ").concat(fontStyle, "; font-family: ").concat(fontName, "; color: ").concat(this.TEXT_COLOR, ";\"");
    };
    SurveyHelper.createHtmlContainerBlock = function (html, controller, renderAs) {
        var font = this.chooseHtmlFont(controller);
        return "<div class=\"__surveypdf_html\" style=".concat(this.generateCssTextRule(controller.fontSize, controller.fontStyle, font), ">") +
            "<style>.__surveypdf_html p { margin: 0; line-height: ".concat(controller.fontSize, "pt } body { margin: 0; }</style>").concat(html, "</div>");
    };
    SurveyHelper.splitHtmlRect = function (controller, htmlBrick) {
        var bricks = [];
        var htmlHeight = htmlBrick.height;
        var minHeight = controller.doc.getFontSize();
        htmlBrick.yBot = htmlBrick.yTop + minHeight;
        var emptyBrickCount = Math.floor(htmlHeight / minHeight) - 1;
        bricks.push(htmlBrick);
        var currPoint = this.createPoint(htmlBrick);
        for (var i = 0; i < emptyBrickCount; i++) {
            bricks.push(new __WEBPACK_IMPORTED_MODULE_13__pdf_render_pdf_empty__["a" /* EmptyBrick */](this.createRect(currPoint, htmlBrick.width, minHeight)));
            currPoint.yTop += minHeight;
        }
        var remainingHeight = htmlHeight - (emptyBrickCount + 1) * minHeight;
        if (remainingHeight > 0) {
            bricks.push(new __WEBPACK_IMPORTED_MODULE_13__pdf_render_pdf_empty__["a" /* EmptyBrick */](this.createRect(currPoint, htmlBrick.width, remainingHeight)));
        }
        return new (__WEBPACK_IMPORTED_MODULE_15__pdf_render_pdf_composite__["a" /* CompositeBrick */].bind.apply(__WEBPACK_IMPORTED_MODULE_15__pdf_render_pdf_composite__["a" /* CompositeBrick */], __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["d" /* __spreadArray */])([void 0], bricks, false)))();
    };
    SurveyHelper.createPlainTextFlat = function (point, question, controller, text, fabric) {
        var _this = this;
        var lines = controller.doc.splitTextToSize(text, controller.paperWidth - controller.margins.right - point.xLeft);
        var currPoint = this.clone(point);
        var composite = new __WEBPACK_IMPORTED_MODULE_15__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
        lines.forEach(function (line) {
            var size = controller.measureText(line);
            composite.addBrick(new fabric(question, controller, _this.createRect(currPoint, size.width, size.height), line));
            currPoint.yTop += size.height;
        });
        return composite;
    };
    SurveyHelper.createTextFlat = function (point, question, controller, text, fabric) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var _a, _b;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!(typeof text === 'string' || !this.hasHtml(text))) return [3 /*break*/, 1];
                        return [2 /*return*/, this.createPlainTextFlat(point, question, controller, typeof text === 'string' ?
                                text : this.getLocString(text), fabric)];
                    case 1:
                        _a = this.splitHtmlRect;
                        _b = [controller];
                        return [4 /*yield*/, this.createHTMLFlat(point, question, controller, this.createHtmlContainerBlock(this.getLocString(text), controller, 'standard'))];
                    case 2: return [2 /*return*/, _a.apply(this, _b.concat([_c.sent()]))];
                }
            });
        });
    };
    SurveyHelper.hasHtml = function (text) {
        var pattern = /<\/?[a-z][\s\S]*>/i;
        return text.hasHtml && (pattern.test(text.renderedText) || pattern.test(text.renderedHtml));
    };
    SurveyHelper.getHtmlMargins = function (controller, point) {
        var width = controller.paperWidth - point.xLeft - controller.margins.right;
        return {
            top: controller.margins.top,
            bottom: controller.margins.bot,
            width: width > controller.unitWidth ? width : controller.unitWidth
        };
    };
    SurveyHelper.createHTMLRect = function (point, controller, margins, resultY) {
        var availablePageHeight = controller.paperHeight - controller.margins.bot - controller.margins.top;
        var height = (controller.helperDoc.getNumberOfPages() - 1) *
            (controller.fontSize * Math.floor(availablePageHeight / controller.fontSize))
            + resultY - margins.top + SurveyHelper.HTML_TAIL_TEXT_SCALE * controller.fontSize;
        var numberOfPages = controller.helperDoc.getNumberOfPages();
        controller.helperDoc.addPage();
        for (var i = 0; i < numberOfPages; i++) {
            controller.helperDoc.deletePage(1);
        }
        return SurveyHelper.createRect(point, margins.width, height);
    };
    SurveyHelper.createHTMLFlat = function (point, question, controller, html) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var margins;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        margins = this.getHtmlMargins(controller, point);
                        return [4 /*yield*/, new Promise(function (resolve) {
                                controller.helperDoc.fromHTML(html, point.xLeft, margins.top, {
                                    pagesplit: true, width: margins.width
                                }, function (result) {
                                    var rect = SurveyHelper.createHTMLRect(point, controller, margins, result.y);
                                    resolve(new __WEBPACK_IMPORTED_MODULE_11__pdf_render_pdf_html__["a" /* HTMLBrick */](question, controller, rect, html));
                                }, margins);
                            })];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    SurveyHelper.generateFontFace = function (fontName, fontBase64, fontWeight) {
        return "@font-face { font-family: ".concat(fontName, "; ") +
            "src: url(data:application/font-woff;charset=utf-8;base64,".concat(fontBase64, ") format('woff'); ") +
            "font-weight: ".concat(fontWeight, "; }");
    };
    SurveyHelper.generateFontFaceWithItalicStyle = function (fontName, fontBase64, fontWeight) {
        return "@font-face { font-family: ".concat(fontName, "; ") +
            "src: url(data:application/font-woff;charset=utf-8;base64,".concat(fontBase64, ") format('woff'); ") +
            "font-weight: ".concat(fontWeight, "; font-style: italic}");
    };
    SurveyHelper.htmlToXml = function (html) {
        var htmlDoc = document.implementation.createHTMLDocument('');
        htmlDoc.write(html.replace(/\#/g, '%23'));
        htmlDoc.documentElement.setAttribute('xmlns', htmlDoc.documentElement.namespaceURI);
        htmlDoc.body.style.margin = 'unset';
        return (new XMLSerializer()).serializeToString(htmlDoc.body).replace(/%23/g, '#');
    };
    SurveyHelper.createSvgContent = function (html, width, controller) {
        var _this = this;
        var style = document.createElement('style');
        style.innerHTML = '.__surveypdf_html p { margin: unset; line-height: 22px; } body { margin: unset; }';
        document.body.appendChild(style);
        var div = document.createElement('div');
        div.className = '__surveypdf_html';
        div.style.display = 'block';
        div.style.position = 'fixed';
        div.style.top = '-10000px';
        div.style.left = '-10000px';
        div.style.width = (width / 72.0 * 96.0) + 'px';
        div.style.boxSizing = 'initial';
        div.style.color = 'initial';
        div.style.fontFamily = 'initial';
        div.style.font = 'initial';
        div.style.lineHeight = 'initial';
        div.insertAdjacentHTML('beforeend', html);
        document.body.appendChild(div);
        var divWidth = div.offsetWidth;
        var divHeight = div.offsetHeight;
        div.remove();
        style.remove();
        var defs = '';
        if (controller.useCustomFontInHtml) {
            defs = "<defs><style>".concat(this.generateFontFace(controller.fontName, controller.base64Normal, 'normal')) +
                " ".concat(this.generateFontFace(controller.fontName, controller.base64Bold, 'bold'), "</style></defs>");
        }
        else {
            Object.keys(__WEBPACK_IMPORTED_MODULE_3__doc_controller__["b" /* DocController */].customFonts).forEach(function (fontName) {
                var font = __WEBPACK_IMPORTED_MODULE_3__doc_controller__["b" /* DocController */].customFonts[fontName];
                Object.keys(font).forEach(function (fontStyle) {
                    if (fontStyle === 'normal' || fontStyle === 'bold') {
                        defs += "".concat(_this.generateFontFace(fontName, font[fontStyle], fontStyle));
                    }
                    else {
                        defs += "".concat(_this.generateFontFaceWithItalicStyle(fontName, font[fontStyle], fontStyle === 'italic' ? 'normal' : 'bold'));
                    }
                });
                defs = '<defs><style>' + defs + '</style></defs>';
            });
        }
        var svg = "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"".concat(divWidth, "px\" height=\"").concat(divHeight, "px\">") + defs +
            '<style>.__surveypdf_html p { margin: unset; line-height: 22px; }</style>' +
            "<foreignObject width=\"".concat(divWidth, "px\" height=\"").concat(divHeight, "px\">") +
            this.htmlToXml(html) + '</foreignObject></svg>';
        return { svg: svg, divWidth: divWidth, divHeight: divHeight };
    };
    SurveyHelper.setCanvas = function (canvas, divWidth, divHeight, img) {
        canvas.width = divWidth * SurveyHelper.HTML_TO_IMAGE_QUALITY;
        canvas.height = divHeight * SurveyHelper.HTML_TO_IMAGE_QUALITY;
        var context = canvas.getContext('2d');
        context.scale(SurveyHelper.HTML_TO_IMAGE_QUALITY, SurveyHelper.HTML_TO_IMAGE_QUALITY);
        context.fillStyle = SurveyHelper.BACKGROUND_COLOR;
        context.fillRect(0, 0, divWidth, divHeight);
        context.drawImage(img, 0, 0);
    };
    SurveyHelper.htmlToImage = function (html, width, controller) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var _a, svg, divWidth, divHeight, data, img;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_b) {
                _a = SurveyHelper.createSvgContent(html, width, controller), svg = _a.svg, divWidth = _a.divWidth, divHeight = _a.divHeight;
                data = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svg)));
                img = new Image();
                img.crossOrigin = 'anonymous';
                img.src = data;
                return [2 /*return*/, new Promise(function (resolve) {
                        img.onload = function () {
                            var canvas = document.createElement('canvas');
                            SurveyHelper.setCanvas(canvas, divWidth, divHeight, img);
                            var url = canvas.toDataURL('image/jpeg', SurveyHelper.HTML_TO_IMAGE_QUALITY);
                            canvas.remove();
                            resolve({ url: url, aspect: divWidth / divHeight });
                        };
                        img.onerror = function () {
                            resolve({ url: 'data:,', aspect: width / this.EPSILON });
                        };
                    })];
            });
        });
    };
    SurveyHelper.createBoldTextFlat = function (point, question, controller, text) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var composite;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        controller.fontStyle = 'bold';
                        return [4 /*yield*/, this.createTextFlat(point, question, controller, text, __WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_textbold__["a" /* TextBoldBrick */])];
                    case 1:
                        composite = _a.sent();
                        controller.fontStyle = 'normal';
                        return [2 /*return*/, composite];
                }
            });
        });
    };
    SurveyHelper.createTitleFlat = function (point, question, controller) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var composite, currPoint, oldFontSize, noText, noFlat, textFlat, requiredText, _a, _b, _c, _d;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        composite = new __WEBPACK_IMPORTED_MODULE_15__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        currPoint = this.clone(point);
                        oldFontSize = controller.fontSize;
                        controller.fontSize *= this.TITLE_FONT_SCALE;
                        if (!question.no) return [3 /*break*/, 5];
                        noText = question.no + ' ';
                        noFlat = void 0;
                        if (!this.hasHtml(question.locTitle)) return [3 /*break*/, 2];
                        controller.fontStyle = 'bold';
                        controller.pushMargins();
                        controller.margins.right = controller.paperWidth -
                            controller.margins.left - controller.measureText(noText, 'bold').width;
                        return [4 /*yield*/, this.createHTMLFlat(currPoint, question, controller, this.createHtmlContainerBlock(noText, controller, 'standard'))];
                    case 1:
                        noFlat = _e.sent();
                        controller.popMargins();
                        controller.fontStyle = 'normal';
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.createBoldTextFlat(currPoint, question, controller, noText)];
                    case 3:
                        noFlat = _e.sent();
                        _e.label = 4;
                    case 4:
                        composite.addBrick(noFlat);
                        currPoint.xLeft = noFlat.xRight;
                        _e.label = 5;
                    case 5:
                        controller.pushMargins();
                        controller.margins.left = currPoint.xLeft;
                        return [4 /*yield*/, this.createBoldTextFlat(currPoint, question, controller, question.locTitle)];
                    case 6:
                        textFlat = _e.sent();
                        composite.addBrick(textFlat);
                        controller.popMargins();
                        if (!question.isRequired) return [3 /*break*/, 10];
                        requiredText = question.requiredText;
                        if (!this.hasHtml(question.locTitle)) return [3 /*break*/, 8];
                        currPoint = this.createPoint(textFlat.unfold()[0], false, false);
                        controller.fontStyle = 'bold';
                        controller.pushMargins();
                        controller.margins.right = controller.paperWidth -
                            controller.margins.left - controller.measureText(requiredText, 'bold').width;
                        _b = (_a = composite).addBrick;
                        return [4 /*yield*/, this.createHTMLFlat(currPoint, question, controller, this.createHtmlContainerBlock(requiredText, controller, 'standard'))];
                    case 7:
                        _b.apply(_a, [_e.sent()]);
                        controller.popMargins();
                        controller.fontStyle = 'normal';
                        return [3 /*break*/, 10];
                    case 8:
                        currPoint = this.createPoint(textFlat.unfold().pop(), false, true);
                        _d = (_c = composite).addBrick;
                        return [4 /*yield*/, this.createBoldTextFlat(currPoint, question, controller, requiredText)];
                    case 9:
                        _d.apply(_c, [_e.sent()]);
                        _e.label = 10;
                    case 10:
                        controller.fontSize = oldFontSize;
                        return [2 /*return*/, composite];
                }
            });
        });
    };
    SurveyHelper.createTitleSurveyPanelFlat = function (point, controller, text, fontSizeScale) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var oldFontSize, titleFlat;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        oldFontSize = controller.fontSize;
                        controller.fontSize = oldFontSize * fontSizeScale;
                        controller.fontStyle = 'bold';
                        return [4 /*yield*/, this.createTextFlat(point, null, controller, text, __WEBPACK_IMPORTED_MODULE_7__pdf_render_pdf_titlepanel__["a" /* TitlePanelBrick */])];
                    case 1:
                        titleFlat = _a.sent();
                        controller.fontStyle = 'normal';
                        controller.fontSize = oldFontSize;
                        return [2 /*return*/, titleFlat];
                }
            });
        });
    };
    SurveyHelper.createTitleSurveyFlat = function (point, controller, text) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.createTitleSurveyPanelFlat(point, controller, text, this.TITLE_SURVEY_FONT_SIZE_SCALE)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    SurveyHelper.createTitlePanelFlat = function (point, controller, text, isPage) {
        if (isPage === void 0) { isPage = false; }
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.createTitleSurveyPanelFlat(point, controller, text, isPage ? this.TITLE_PAGE_FONT_SIZE_SCALE : this.TITLE_PANEL_FONT_SIZE_SCALE)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    SurveyHelper.createDescFlat = function (point, question, controller, text) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var oldFontSize, composite;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        oldFontSize = controller.fontSize;
                        controller.fontSize = oldFontSize * this.DESCRIPTION_FONT_SIZE_SCALE;
                        return [4 /*yield*/, this.createTextFlat(point, question, controller, text, __WEBPACK_IMPORTED_MODULE_8__pdf_render_pdf_description__["a" /* DescriptionBrick */])];
                    case 1:
                        composite = _a.sent();
                        controller.fontSize = oldFontSize;
                        return [2 /*return*/, composite];
                }
            });
        });
    };
    SurveyHelper.getReadonlyRenderAs = function (question, controller) {
        return question.readonlyRenderAs === 'auto' ? controller.readonlyRenderAs : question.readonlyRenderAs;
    };
    SurveyHelper.createCommentFlat = function (point, question, controller, isQuestion, options) {
        var _a, _b, _c;
        if (options === void 0) { options = {}; }
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var rect, textFlat, renderedValue, padding, comment;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        rect = this.createTextFieldRect(point, controller, (_a = options.rows) !== null && _a !== void 0 ? _a : 1);
                        if (!((_b = options.readOnly) !== null && _b !== void 0 ? _b : SurveyHelper.shouldRenderReadOnly(question, controller))) return [3 /*break*/, 2];
                        renderedValue = (_c = options.value) !== null && _c !== void 0 ? _c : this.getQuestionOrCommentValue(question, isQuestion);
                        return [4 /*yield*/, this.createReadOnlyTextFieldTextFlat(point, controller, question, renderedValue)];
                    case 1:
                        textFlat = _d.sent();
                        padding = controller.unitHeight * this.VALUE_READONLY_PADDING_SCALE;
                        if (textFlat.yBot + padding > rect.yBot)
                            rect.yBot = textFlat.yBot + padding;
                        _d.label = 2;
                    case 2:
                        comment = new __WEBPACK_IMPORTED_MODULE_9__pdf_render_pdf_comment__["a" /* CommentBrick */](question, controller, rect, isQuestion, options.index);
                        if (options.readOnly !== null && options.readOnly !== undefined) {
                            comment.isReadOnly = options.readOnly;
                        }
                        if (textFlat) {
                            comment.textBrick = textFlat;
                        }
                        return [2 /*return*/, comment];
                }
            });
        });
    };
    SurveyHelper.getQuestionOrCommentValue = function (question, isQuestion) {
        if (isQuestion === void 0) { isQuestion = true; }
        return isQuestion ? (question.value !== undefined && question.value !== null ? question.value : '') :
            (question.comment !== undefined && question.comment !== null ? question.comment : '');
    };
    SurveyHelper.getQuestionOrCommentDisplayValue = function (question, isQuestion) {
        if (isQuestion === void 0) { isQuestion = true; }
        return isQuestion ? question.displayValue : SurveyHelper.getQuestionOrCommentValue(question, isQuestion);
    };
    Object.defineProperty(SurveyHelper, "hasDocument", {
        get: function () {
            return typeof document !== 'undefined';
        },
        enumerable: false,
        configurable: true
    });
    SurveyHelper.getImageBase64 = function (imageLink) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var image;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                image = new Image();
                image.crossOrigin = 'anonymous';
                return [2 /*return*/, new Promise(function (resolve) {
                        image.onload = function () {
                            var canvas = document.createElement('canvas');
                            var ctx = canvas.getContext('2d');
                            canvas.height = image.naturalHeight;
                            canvas.width = image.naturalWidth;
                            ctx.drawImage(image, 0, 0);
                            var dataUrl = canvas.toDataURL();
                            resolve(dataUrl);
                        };
                        image.onerror = function () {
                            resolve('');
                        };
                        image.src = imageLink;
                    })];
            });
        });
    };
    SurveyHelper.getImageLink = function (controller, imageOptions, applyImageFit) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var ptToPx, url, _a, canvasHtml;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        ptToPx = 96.0 / 72.0;
                        if (!this.shouldConvertImageToPng) return [3 /*break*/, 2];
                        return [4 /*yield*/, SurveyHelper.getImageBase64(imageOptions.link)];
                    case 1:
                        _a = _b.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        _a = imageOptions.link;
                        _b.label = 3;
                    case 3:
                        url = _a;
                        if (!(typeof XMLSerializer === 'function' && applyImageFit)) return [3 /*break*/, 5];
                        canvasHtml = "<div style='overflow: hidden; width: ".concat(imageOptions.width * ptToPx, "px; height: ").concat(imageOptions.height * ptToPx, "px;'>\n                   <img src='").concat(url, "' style='object-fit: ").concat(imageOptions.objectFit, "; width: 100%; height: 100%;'/>\n               </div>");
                        return [4 /*yield*/, SurveyHelper.htmlToImage(canvasHtml, imageOptions.width, controller)];
                    case 4:
                        url = (_b.sent()).url;
                        _b.label = 5;
                    case 5: return [2 /*return*/, url];
                }
            });
        });
    };
    SurveyHelper.createImageFlat = function (point, question, controller, imageOptions, applyImageFit) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var newWidth, html, _a;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!SurveyHelper.inBrowser) return [3 /*break*/, 2];
                        imageOptions.objectFit = !!question && !!question.imageFit ? question.imageFit : (imageOptions.objectFit || 'contain');
                        if (applyImageFit !== null && applyImageFit !== void 0 ? applyImageFit : controller.applyImageFit) {
                            if (imageOptions.width > controller.paperWidth - controller.margins.left - controller.margins.right) {
                                newWidth = controller.paperWidth - controller.margins.left - controller.margins.right;
                                imageOptions.height *= newWidth / imageOptions.width;
                                imageOptions.width = newWidth;
                            }
                        }
                        _a = "<img src='".concat;
                        return [4 /*yield*/, SurveyHelper.getImageLink(controller, imageOptions, applyImageFit !== null && applyImageFit !== void 0 ? applyImageFit : controller.applyImageFit)];
                    case 1:
                        html = _a.apply("<img src='", [_b.sent(), "' width='"]).concat(imageOptions.width, "' height='").concat(imageOptions.height, "'/>");
                        return [2 /*return*/, new __WEBPACK_IMPORTED_MODULE_11__pdf_render_pdf_html__["a" /* HTMLBrick */](question, controller, this.createRect(point, imageOptions.width, imageOptions.height), html, true)];
                    case 2: return [2 /*return*/, new __WEBPACK_IMPORTED_MODULE_12__pdf_render_pdf_image__["a" /* ImageBrick */](question, controller, imageOptions.link, point, imageOptions.width, imageOptions.height)];
                }
            });
        });
    };
    SurveyHelper.canPreviewImage = function (question, item, url) {
        return question.canPreviewImage(item);
        //  &&  await this.getImageSize(url) !== null;
    };
    SurveyHelper.getImageSize = function (url) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!!SurveyHelper.inBrowser) return [3 /*break*/, 2];
                        return [4 /*yield*/, new Promise(function (resolve) {
                                return resolve({ width: undefined, height: undefined });
                            })];
                    case 1: return [2 /*return*/, _a.sent()];
                    case 2: return [4 /*yield*/, new Promise(function (resolve) {
                            var image = new Image();
                            image.src = url;
                            image.onload = function () {
                                return resolve({ width: image.width, height: image.height });
                            };
                            image.onerror = function () { return resolve(null); };
                        })];
                    case 3: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    SurveyHelper.createRowlineFlat = function (point, controller, width, color) {
        var xRight = typeof width === 'undefined' ?
            controller.paperWidth - controller.margins.right :
            point.xLeft + width;
        xRight = xRight > point.xLeft ? xRight : point.xLeft + this.EPSILON;
        return new __WEBPACK_IMPORTED_MODULE_14__pdf_render_pdf_rowline__["a" /* RowlineBrick */](controller, {
            xLeft: point.xLeft,
            xRight: xRight,
            yTop: point.yTop + this.EPSILON,
            yBot: point.yTop + this.EPSILON
        }, typeof color === 'undefined' ? null : color);
    };
    SurveyHelper.createLinkFlat = function (point, question, controller, text, link) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var compositeText, compositeLink;
            var _this = this;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.
                            createTextFlat(point, question, controller, text, __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_text__["a" /* TextBrick */])];
                    case 1:
                        compositeText = _a.sent();
                        compositeLink = new __WEBPACK_IMPORTED_MODULE_15__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        compositeText.unfold().forEach(function (text) {
                            compositeLink.addBrick(new __WEBPACK_IMPORTED_MODULE_10__pdf_render_pdf_link__["a" /* LinkBrick */](text, link));
                            var linePoint = _this.createPoint(compositeLink);
                            compositeLink.addBrick(_this.createRowlineFlat(linePoint, controller, compositeLink.width, __WEBPACK_IMPORTED_MODULE_10__pdf_render_pdf_link__["a" /* LinkBrick */].COLOR));
                        });
                        return [2 /*return*/, compositeLink];
                }
            });
        });
    };
    SurveyHelper.createAcroformRect = function (rect) {
        return [
            rect.xLeft,
            rect.yTop,
            rect.xRight - rect.xLeft,
            rect.yBot - rect.yTop
        ];
    };
    SurveyHelper.createTextFieldRect = function (point, controller, lines) {
        if (lines === void 0) { lines = 1; }
        var width = controller.paperWidth - point.xLeft - controller.margins.right;
        width = Math.max(width, controller.unitWidth);
        var height = controller.unitHeight * lines;
        return this.createRect(point, width, height);
    };
    SurveyHelper.createReadOnlyTextFieldTextFlat = function (point, controller, question, value) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var padding, textFlat;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        padding = controller.unitWidth * this.VALUE_READONLY_PADDING_SCALE;
                        point.yTop += padding;
                        point.xLeft += padding;
                        controller.pushMargins(point.xLeft, controller.margins.right + padding);
                        return [4 /*yield*/, this.createTextFlat(point, question, controller, value.toString(), __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_text__["a" /* TextBrick */])];
                    case 1:
                        textFlat = _a.sent();
                        controller.popMargins();
                        return [2 /*return*/, textFlat];
                }
            });
        });
    };
    SurveyHelper.renderFlatBorders = function (controller, borderOptions) {
        var _a, _b;
        var _c, _d, _e, _f;
        if (!this.FORM_BORDER_VISIBLE)
            return;
        borderOptions.rounded = (_c = borderOptions.rounded) !== null && _c !== void 0 ? _c : true;
        borderOptions.outside = (_d = borderOptions.outside) !== null && _d !== void 0 ? _d : false;
        var minSide = Math.min(borderOptions.width, borderOptions.height);
        var borderWidth = this.getBorderWidth(controller);
        var visibleWidth = controller.unitHeight * this.VISIBLE_BORDER_SCALE * this.BORDER_SCALE;
        var visibleScale = borderOptions.outside ? (minSide + borderWidth) / minSide - visibleWidth / minSide : (minSide - borderWidth) / minSide + visibleWidth / minSide;
        var oldDrawColor = controller.doc.getDrawColor();
        controller.doc.setDrawColor(borderOptions.formBorderColor);
        controller.doc.setLineWidth(visibleWidth);
        var scaledRect = this.scaleRect(borderOptions, visibleScale);
        if (borderOptions.dashStyle) {
            var dashStyle = borderOptions.dashStyle;
            var borderLength = (Math.abs(scaledRect.yTop - scaledRect.yBot) + Math.abs(scaledRect.xLeft - scaledRect.xRight)) * 2;
            var dashWithSpaceSize = dashStyle.dashArray[0] + ((_e = dashStyle.dashArray[1]) !== null && _e !== void 0 ? _e : dashStyle.dashArray[0]);
            var dashSize = dashStyle.dashArray[0] + (borderLength % dashWithSpaceSize) / Math.floor(borderLength / dashWithSpaceSize);
            controller.doc.setLineDashPattern([dashSize, (_f = dashStyle.dashArray[1]) !== null && _f !== void 0 ? _f : dashStyle.dashArray[0]], dashStyle.dashPhase);
        }
        (_a = controller.doc).rect.apply(_a, this.createAcroformRect(scaledRect));
        if (borderOptions.rounded) {
            var unvisibleWidth = controller.unitHeight * this.UNVISIBLE_BORDER_SCALE * this.BORDER_SCALE;
            var unvisibleScale = 1.0 - unvisibleWidth / minSide;
            var unvisibleRadius = this.RADIUS_SCALE * unvisibleWidth;
            controller.doc.setDrawColor(this.BACKGROUND_COLOR);
            controller.doc.setLineWidth(unvisibleWidth);
            (_b = controller.doc).roundedRect.apply(_b, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["d" /* __spreadArray */])(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["d" /* __spreadArray */])([], this.createAcroformRect(this.scaleRect(borderOptions, unvisibleScale)), false), [unvisibleRadius, unvisibleRadius], false));
        }
        if (borderOptions.dashStyle) {
            controller.doc.setLineDashPattern([]);
        }
        controller.doc.setDrawColor(oldDrawColor);
    };
    SurveyHelper.getLocString = function (text) {
        if (this.hasHtml(text))
            return text.renderedHtml;
        return text.renderedText || text.renderedHtml;
    };
    SurveyHelper.getDropdownQuestionValue = function (question) {
        var qDropDown = question;
        if (qDropDown.isOtherSelected) {
            return qDropDown.otherText;
        }
        else if (!!question.displayValue) {
            return question.displayValue;
        }
        else if (qDropDown.showOptionsCaption) {
            return qDropDown.optionsCaption;
        }
        return '';
    };
    SurveyHelper.getContentQuestion = function (question) {
        return !!question.contentQuestion ? question.contentQuestion : question;
    };
    SurveyHelper.getContentQuestionTypeRenderAs = function (question, survey) {
        var renderAs = question.renderAs;
        if (question.getType() === 'boolean' && survey.options.useLegacyBooleanRendering) {
            renderAs = 'checkbox';
        }
        if (renderAs !== 'default') {
            var type = "".concat(question.getType(), "-").concat(renderAs);
            if (__WEBPACK_IMPORTED_MODULE_4__flat_layout_flat_repository__["a" /* FlatRepository */].getInstance().isTypeRegistered(type))
                return type;
        }
        return question.getType();
    };
    SurveyHelper.getContentQuestionType = function (question, survey) {
        if (!!question.customWidget)
            return question.customWidget.pdfQuestionType;
        return !!question.contentQuestion ? 'custom_model' : this.getContentQuestionTypeRenderAs(question, survey);
    };
    SurveyHelper.getRatingMinWidth = function (controller) {
        return controller.measureText(this.RATING_MIN_WIDTH).width;
    };
    SurveyHelper.getRatingItemText = function (question, index, locText) {
        var ratingItemLocText = new __WEBPACK_IMPORTED_MODULE_1_survey_core__["LocalizableString"](locText.owner, locText.useMarkdown);
        ratingItemLocText.text = this.getLocString(locText);
        if (index === 0 && question.minRateDescription) {
            ratingItemLocText.text = question.locMinRateDescription.text + ' ' + this.getLocString(locText);
        }
        else if (index === question.visibleRateValues.length - 1 && question.maxRateDescription) {
            ratingItemLocText.text = this.getLocString(locText) + ' ' + question.locMaxRateDescription.text;
        }
        return ratingItemLocText;
    };
    SurveyHelper.getPageAvailableWidth = function (controller) {
        return controller.paperWidth - controller.margins.left - controller.margins.right;
    };
    SurveyHelper.getImagePickerAvailableWidth = function (controller) {
        var width = (this.getPageAvailableWidth(controller) -
            (this.IMAGEPICKER_COUNT - 1) * controller.unitHeight);
        return width > 0 ? width : controller.unitHeight;
    };
    SurveyHelper.getColumnWidth = function (controller, colCount) {
        return (this.getPageAvailableWidth(controller) - (colCount - 1) *
            controller.unitWidth * this.GAP_BETWEEN_COLUMNS) / colCount;
    };
    SurveyHelper.setColumnMargins = function (controller, colCount, column) {
        var cellWidth = this.getColumnWidth(controller, colCount);
        controller.margins.left = controller.margins.left + column *
            (cellWidth + controller.unitWidth * this.GAP_BETWEEN_COLUMNS);
        controller.margins.right = controller.margins.right + (colCount - column - 1) *
            (cellWidth + controller.unitWidth * this.GAP_BETWEEN_COLUMNS);
    };
    SurveyHelper.moveRect = function (rect, left, top) {
        if (left === void 0) { left = rect.xLeft; }
        if (top === void 0) { top = rect.yTop; }
        return {
            xLeft: left,
            yTop: top,
            xRight: left + rect.xRight - rect.xLeft,
            yBot: top + rect.yBot - rect.yTop
        };
    };
    SurveyHelper.scaleRect = function (rect, scale) {
        var scaleWidth = Math.min(rect.xRight - rect.xLeft, rect.yBot - rect.yTop) * (1.0 - scale) / 2.0;
        return {
            xLeft: rect.xLeft + scaleWidth,
            yTop: rect.yTop + scaleWidth,
            xRight: rect.xRight - scaleWidth,
            yBot: rect.yBot - scaleWidth
        };
    };
    SurveyHelper.getBorderWidth = function (controller) {
        return 2.0 * controller.unitWidth * this.BORDER_SCALE;
    };
    SurveyHelper.formScale = function (controller, flat) {
        var minSide = Math.min(flat.width, flat.height);
        return (minSide - this.getBorderWidth(controller)) / minSide;
    };
    SurveyHelper.generateQuestionFlats = function (survey, controller, question, point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var questionType, flatQuestion, questionFlats, adornersOptions;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        questionType = this.getContentQuestionType(question, survey);
                        flatQuestion = __WEBPACK_IMPORTED_MODULE_4__flat_layout_flat_repository__["a" /* FlatRepository */].getInstance().
                            create(survey, question, controller, questionType);
                        return [4 /*yield*/, flatQuestion.generateFlats(point)];
                    case 1:
                        questionFlats = _a.sent();
                        adornersOptions = new __WEBPACK_IMPORTED_MODULE_16__event_handler_adorners__["c" /* AdornersOptions */](point, questionFlats, question, controller, __WEBPACK_IMPORTED_MODULE_4__flat_layout_flat_repository__["a" /* FlatRepository */].getInstance(), __WEBPACK_IMPORTED_MODULE_2__entries_pdf__);
                        if (question.customWidget && question.customWidget.isFit(question) &&
                            question.customWidget.pdfRender) {
                            survey.onRenderQuestion.unshift(question.customWidget.pdfRender);
                        }
                        return [4 /*yield*/, survey.onRenderQuestion.fire(survey, adornersOptions)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["d" /* __spreadArray */])([], adornersOptions.bricks, true)];
                }
            });
        });
    };
    SurveyHelper.isFontExist = function (controller, fontName) {
        return controller.doc.internal.getFont(fontName).fontName === fontName;
    };
    SurveyHelper.isCustomFont = function (controller, fontName) {
        return controller.doc.internal.getFont(fontName).encoding === this.CUSTOM_FONT_ENCODING;
    };
    SurveyHelper.fixFont = function (controller) {
        if (this.isCustomFont(controller, controller.fontName)) {
            controller.doc.text('load font', 0, 0);
            controller.doc.deletePage(1);
            controller.addPage();
        }
    };
    SurveyHelper.clone = function (src) {
        var target = {};
        for (var prop in src) {
            if (src.hasOwnProperty(prop)) {
                target[prop] = src[prop];
            }
        }
        return target;
    };
    SurveyHelper.shouldRenderReadOnly = function (question, controller, readOnly) {
        return ((!!question && question.isReadOnly || readOnly) && SurveyHelper.getReadonlyRenderAs(question, controller) !== 'acroform') || (controller === null || controller === void 0 ? void 0 : controller.compress);
    };
    SurveyHelper.isSizeEmpty = function (val) {
        return !val || val === 'auto';
    };
    SurveyHelper.isHeightEmpty = function (val) {
        return this.isSizeEmpty(val) || val == '100%';
    };
    SurveyHelper.getCorrectedImageSize = function (controller, imageOptions) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var imageWidth, imageLink, imageHeight, defaultImageWidth, defaultImageHeight, widthPt, heightPt, defaultWidthPt, defaultHeightPt, imageSize;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        imageWidth = imageOptions.imageWidth, imageLink = imageOptions.imageLink, imageHeight = imageOptions.imageHeight, defaultImageWidth = imageOptions.defaultImageWidth, defaultImageHeight = imageOptions.defaultImageHeight;
                        imageWidth = typeof imageWidth === 'number' ? imageWidth.toString() : imageWidth;
                        imageHeight = typeof imageHeight === 'number' ? imageHeight.toString() : imageHeight;
                        widthPt = imageWidth && SurveyHelper.parseWidth(imageWidth, SurveyHelper.getPageAvailableWidth(controller), 1, 'px');
                        heightPt = imageHeight && SurveyHelper.parseWidth(imageHeight, SurveyHelper.getPageAvailableWidth(controller), 1, 'px');
                        defaultImageWidth = typeof defaultImageWidth === 'number' ? defaultImageWidth.toString() : defaultImageWidth;
                        defaultImageHeight = typeof defaultImageHeight === 'number' ? defaultImageHeight.toString() : defaultImageHeight;
                        defaultWidthPt = defaultImageWidth && SurveyHelper.parseWidth(defaultImageWidth, SurveyHelper.getPageAvailableWidth(controller), 1, 'px');
                        defaultHeightPt = defaultImageHeight && SurveyHelper.parseWidth(defaultImageHeight, SurveyHelper.getPageAvailableWidth(controller), 1, 'px');
                        if (!(SurveyHelper.isSizeEmpty(imageWidth) || SurveyHelper.isHeightEmpty(imageHeight))) return [3 /*break*/, 2];
                        return [4 /*yield*/, SurveyHelper.getImageSize(imageLink)];
                    case 1:
                        imageSize = _a.sent();
                        if (!SurveyHelper.isSizeEmpty(imageWidth)) {
                            if (imageSize && imageSize.width) {
                                heightPt = imageSize.height * widthPt / imageSize.width;
                            }
                        }
                        else if (!SurveyHelper.isHeightEmpty(imageHeight)) {
                            if (imageSize && imageSize.height) {
                                widthPt = imageSize.width * heightPt / imageSize.height;
                            }
                        }
                        else if (imageSize && imageSize.height && imageSize.width) {
                            heightPt = SurveyHelper.parseWidth(imageSize.height.toString(), SurveyHelper.getPageAvailableWidth(controller), 1, 'px');
                            widthPt = SurveyHelper.parseWidth(imageSize.width.toString(), SurveyHelper.getPageAvailableWidth(controller), 1, 'px');
                        }
                        _a.label = 2;
                    case 2: return [2 /*return*/, { width: widthPt || defaultWidthPt || 0, height: heightPt || defaultHeightPt || 0 }];
                }
            });
        });
    };
    SurveyHelper.EPSILON = 2.2204460492503130808472633361816e-15;
    SurveyHelper.TITLE_SURVEY_FONT_SIZE_SCALE = 1.7;
    SurveyHelper.TITLE_PAGE_FONT_SIZE_SCALE = 1.3;
    SurveyHelper.TITLE_PANEL_FONT_SIZE_SCALE = 1.3;
    SurveyHelper.DESCRIPTION_FONT_SIZE_SCALE = 2.0 / 3.0;
    SurveyHelper.OTHER_ROWS_COUNT = 2;
    SurveyHelper.RATING_MIN_WIDTH = 3;
    SurveyHelper.RATING_MIN_HEIGHT = 2;
    SurveyHelper.RATING_COLUMN_WIDTH = 5;
    SurveyHelper.MATRIX_COLUMN_WIDTH = 5;
    SurveyHelper.IMAGEPICKER_COUNT = 4;
    SurveyHelper.IMAGEPICKER_RATIO = 4.0 / 3.0;
    SurveyHelper.MULTIPLETEXT_TEXT_PERS = Math.E / 10.0;
    SurveyHelper.HTML_TAIL_TEXT_SCALE = 0.24;
    SurveyHelper.SELECT_ITEM_FLAT_SCALE = 0.95;
    SurveyHelper.GAP_BETWEEN_ROWS = 0.25;
    SurveyHelper.GAP_BETWEEN_COLUMNS = 1.5;
    SurveyHelper.GAP_BETWEEN_ITEM_TEXT = 0.25;
    SurveyHelper.FORM_BORDER_VISIBLE = true;
    SurveyHelper.BORDER_SCALE = 0.1;
    SurveyHelper.VISIBLE_BORDER_SCALE = 0.8;
    SurveyHelper.UNVISIBLE_BORDER_SCALE = 0.2;
    SurveyHelper.RADIUS_SCALE = 3.0;
    SurveyHelper.TITLE_FONT_SCALE = 1.1;
    SurveyHelper.VALUE_READONLY_PADDING_SCALE = 0.3;
    SurveyHelper.HTML_TO_IMAGE_QUALITY = 1.0;
    SurveyHelper.FORM_BORDER_COLOR = '#9f9f9f';
    SurveyHelper.TEXT_COLOR = '#404040';
    SurveyHelper.BACKGROUND_COLOR = '#FFFFFF';
    SurveyHelper.TITLE_LOCATION_MATRIX = 'matrix';
    SurveyHelper.STANDARD_FONT = 'helvetica';
    SurveyHelper.CUSTOM_FONT_ENCODING = 'Identity-H';
    SurveyHelper.inBrowser = typeof Image === 'function';
    SurveyHelper.shouldConvertImageToPng = true;
    return SurveyHelper;
}());



/***/ }),
/* 2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_default__ = __webpack_require__(21);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatRepository; });


var FlatRepository = /** @class */ (function () {
    function FlatRepository() {
        this.questions = {};
    }
    FlatRepository.getInstance = function () {
        return FlatRepository.instance;
    };
    FlatRepository.prototype.register = function (modelType, rendererConstructor) {
        this.questions[modelType] = rendererConstructor;
    };
    FlatRepository.prototype.isTypeRegistered = function (type) {
        return !!this.questions[type];
    };
    FlatRepository.prototype.getRenderer = function (type) {
        return this.questions[type];
    };
    FlatRepository.prototype.create = function (survey, question, docController, type) {
        var _a;
        var questionType = typeof type === 'undefined' ? question.getType() : type;
        var rendererConstructor = this.getRenderer(questionType);
        if (!rendererConstructor) {
            if (!!((_a = question.customWidget) === null || _a === void 0 ? void 0 : _a.pdfRender)) {
                rendererConstructor = __WEBPACK_IMPORTED_MODULE_0__flat_question__["a" /* FlatQuestion */];
            }
            else {
                rendererConstructor = __WEBPACK_IMPORTED_MODULE_1__flat_default__["a" /* FlatQuestionDefault */];
            }
        }
        return new rendererConstructor(survey, question, docController);
    };
    FlatRepository.register = function (type, rendererConstructor) {
        this.getInstance().register(type, rendererConstructor);
    };
    FlatRepository.getRenderer = function (type) {
        return this.getInstance().getRenderer(type);
    };
    FlatRepository.instance = new FlatRepository();
    return FlatRepository;
}());



/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_survey_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_survey__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_text__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatQuestion; });






var FlatQuestion = /** @class */ (function () {
    function FlatQuestion(survey, question, controller) {
        this.survey = survey;
        this.controller = controller;
        this.question = question;
    }
    FlatQuestion.prototype.generateFlatTitle = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createTitleFlat(point, this.question, this.controller)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    FlatQuestion.prototype.generateFlatDescription = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createDescFlat(point, this.question, this.controller, this.question.locDescription)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    FlatQuestion.prototype.generateFlatHeader = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var titleFlat, compositeFlat, descPoint, _a, _b;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.generateFlatTitle(point)];
                    case 1:
                        titleFlat = _c.sent();
                        compositeFlat = new __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__["a" /* CompositeBrick */](titleFlat);
                        if (!this.question.hasDescriptionUnderTitle) return [3 /*break*/, 3];
                        descPoint = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createPoint(titleFlat, true, false);
                        descPoint.yTop += FlatQuestion.DESC_GAP_SCALE * this.controller.unitHeight;
                        descPoint.xLeft += this.controller.unitWidth * FlatQuestion.CONTENT_INDENT_SCALE;
                        _b = (_a = compositeFlat).addBrick;
                        return [4 /*yield*/, this.generateFlatDescription(descPoint)];
                    case 2:
                        _b.apply(_a, [_c.sent()]);
                        _c.label = 3;
                    case 3: return [2 /*return*/, compositeFlat];
                }
            });
        });
    };
    FlatQuestion.prototype.generateFlatsComment = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var text, otherTextFlat, otherPoint, _a, _b;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        text = this.question.locCommentText;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createTextFlat(point, this.question, this.controller, text, __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_text__["a" /* TextBrick */])];
                    case 1:
                        otherTextFlat = _c.sent();
                        otherPoint = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createPoint(otherTextFlat);
                        otherPoint.yTop += this.controller.unitHeight * __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ROWS;
                        _a = __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__["a" /* CompositeBrick */].bind;
                        _b = [void 0, otherTextFlat];
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createCommentFlat(otherPoint, this.question, this.controller, false, { rows: __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].OTHER_ROWS_COUNT })];
                    case 2: return [2 /*return*/, new (_a.apply(__WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__["a" /* CompositeBrick */], _b.concat([_c.sent()])))()];
                }
            });
        });
    };
    FlatQuestion.prototype.generateFlatsComposite = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var contentPanel;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        contentPanel = this.question.contentPanel;
                        if (!!!contentPanel) return [3 /*break*/, 2];
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_2__flat_survey__["a" /* FlatSurvey */].generateFlatsPanel(this.survey, this.controller, contentPanel, point)];
                    case 1: return [2 /*return*/, _a.sent()];
                    case 2:
                        this.question = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].getContentQuestion(this.question);
                        return [4 /*yield*/, this.generateFlatsContent(point)];
                    case 3: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    FlatQuestion.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                return [2 /*return*/, null];
            });
        });
    };
    FlatQuestion.prototype.generateFlatsContentWithOptionalElements = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var flats, contentFlats, getLatestPoint, _a, _b, _c, _d;
            var _this = this;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        flats = [];
                        return [4 /*yield*/, this.generateFlatsComposite(point)];
                    case 1:
                        contentFlats = _e.sent();
                        flats.push.apply(flats, contentFlats);
                        getLatestPoint = function () {
                            var res = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].clone(point);
                            if (contentFlats !== null && contentFlats.length !== 0) {
                                res.yTop = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].mergeRects.apply(__WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */], flats).yBot + _this.controller.unitHeight * __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ROWS;
                            }
                            return res;
                        };
                        if (!this.question.hasComment) return [3 /*break*/, 3];
                        _b = (_a = flats).push;
                        return [4 /*yield*/, this.generateFlatsComment(getLatestPoint())];
                    case 2:
                        _b.apply(_a, [_e.sent()]);
                        _e.label = 3;
                    case 3:
                        if (!this.question.hasDescriptionUnderInput) return [3 /*break*/, 5];
                        _d = (_c = flats).push;
                        return [4 /*yield*/, this.generateFlatDescription(getLatestPoint())];
                    case 4:
                        _d.apply(_c, [_e.sent()]);
                        _e.label = 5;
                    case 5: return [2 /*return*/, flats];
                }
            });
        });
    };
    FlatQuestion.prototype.generateFlats = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var indentPoint, flats, titleLocation, _a, headerFlat, contentPoint, contentFlats, contentPoint, contentFlats, titlePoint, _b, _c, headerFlat, contentPoint, contentFlats, contentPoint, _d, _e, _f;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_g) {
                switch (_g.label) {
                    case 0:
                        this.controller.pushMargins();
                        this.controller.margins.left += this.controller.measureText(this.question.indent).width;
                        indentPoint = {
                            xLeft: point.xLeft + this.controller.measureText(this.question.indent).width,
                            yTop: point.yTop
                        };
                        flats = [];
                        titleLocation = this.question.getTitleLocation();
                        titleLocation = this.question.hasTitle ? titleLocation : 'hidden';
                        _a = titleLocation;
                        switch (_a) {
                            case 'top': return [3 /*break*/, 1];
                            case 'default': return [3 /*break*/, 1];
                            case 'bottom': return [3 /*break*/, 4];
                            case 'left': return [3 /*break*/, 7];
                            case 'hidden': return [3 /*break*/, 10];
                            case __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].TITLE_LOCATION_MATRIX: return [3 /*break*/, 10];
                        }
                        return [3 /*break*/, 10];
                    case 1: return [4 /*yield*/, this.generateFlatHeader(indentPoint)];
                    case 2:
                        headerFlat = _g.sent();
                        contentPoint = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createPoint(headerFlat);
                        contentPoint.xLeft += this.controller.unitWidth * FlatQuestion.CONTENT_INDENT_SCALE;
                        headerFlat.addBrick(__WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createRowlineFlat(__WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createPoint(headerFlat), this.controller));
                        contentPoint.yTop += this.controller.unitHeight *
                            FlatQuestion.CONTENT_GAP_VERT_SCALE + __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].EPSILON;
                        this.controller.pushMargins();
                        this.controller.margins.left += this.controller.unitWidth * FlatQuestion.CONTENT_INDENT_SCALE;
                        return [4 /*yield*/, this.generateFlatsContentWithOptionalElements(contentPoint)];
                    case 3:
                        contentFlats = _g.sent();
                        this.controller.popMargins();
                        if (contentFlats !== null && contentFlats.length !== 0) {
                            headerFlat.addBrick(contentFlats.shift());
                        }
                        flats.push(headerFlat);
                        flats.push.apply(flats, contentFlats);
                        return [3 /*break*/, 12];
                    case 4:
                        contentPoint = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].clone(indentPoint);
                        this.controller.pushMargins();
                        contentPoint.xLeft += this.controller.unitWidth * FlatQuestion.CONTENT_INDENT_SCALE;
                        this.controller.margins.left += this.controller.unitWidth * FlatQuestion.CONTENT_INDENT_SCALE;
                        return [4 /*yield*/, this.generateFlatsContentWithOptionalElements(contentPoint)];
                    case 5:
                        contentFlats = _g.sent();
                        this.controller.popMargins();
                        flats.push.apply(flats, contentFlats);
                        titlePoint = indentPoint;
                        if (flats.length !== 0) {
                            titlePoint.yTop = flats[flats.length - 1].yBot;
                        }
                        titlePoint.yTop += this.controller.unitHeight * FlatQuestion.CONTENT_GAP_VERT_SCALE;
                        _c = (_b = flats).push;
                        return [4 /*yield*/, this.generateFlatHeader(titlePoint)];
                    case 6:
                        _c.apply(_b, [_g.sent()]);
                        return [3 /*break*/, 12];
                    case 7:
                        this.controller.pushMargins(this.controller.margins.left, this.controller.paperWidth - this.controller.margins.left -
                            __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].getPageAvailableWidth(this.controller) *
                                __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].MULTIPLETEXT_TEXT_PERS);
                        return [4 /*yield*/, this.generateFlatHeader(indentPoint)];
                    case 8:
                        headerFlat = _g.sent();
                        contentPoint = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createPoint(headerFlat, false, true);
                        this.controller.popMargins();
                        contentPoint.xLeft += this.controller.unitWidth * FlatQuestion.CONTENT_GAP_HOR_SCALE;
                        this.controller.margins.left = contentPoint.xLeft;
                        return [4 /*yield*/, this.generateFlatsContentWithOptionalElements(contentPoint)];
                    case 9:
                        contentFlats = _g.sent();
                        if (contentFlats !== null && contentFlats.length !== 0) {
                            headerFlat.addBrick(contentFlats.shift());
                        }
                        flats.push(headerFlat);
                        flats.push.apply(flats, contentFlats);
                        return [3 /*break*/, 12];
                    case 10:
                        contentPoint = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].clone(indentPoint);
                        this.controller.pushMargins();
                        if (titleLocation !== __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].TITLE_LOCATION_MATRIX) {
                            contentPoint.xLeft += this.controller.unitWidth * FlatQuestion.CONTENT_INDENT_SCALE;
                            this.controller.margins.left += this.controller.unitWidth * FlatQuestion.CONTENT_INDENT_SCALE;
                        }
                        _e = (_d = flats.push).apply;
                        _f = [flats];
                        return [4 /*yield*/, this.generateFlatsContentWithOptionalElements(contentPoint)];
                    case 11:
                        _e.apply(_d, _f.concat([_g.sent()]));
                        this.controller.popMargins();
                        return [3 /*break*/, 12];
                    case 12:
                        this.controller.popMargins();
                        return [2 /*return*/, flats];
                }
            });
        });
    };
    Object.defineProperty(FlatQuestion.prototype, "shouldRenderAsComment", {
        get: function () {
            return __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].shouldRenderReadOnly(this.question, this.controller);
        },
        enumerable: false,
        configurable: true
    });
    FlatQuestion.CONTENT_GAP_VERT_SCALE = 0.5;
    FlatQuestion.CONTENT_GAP_HOR_SCALE = 1.0;
    FlatQuestion.CONTENT_INDENT_SCALE = 1.0;
    FlatQuestion.DESC_GAP_SCALE = 0.0625;
    return FlatQuestion;
}());

__WEBPACK_IMPORTED_MODULE_1_survey_core__["Serializer"].addProperty('question', {
    name: 'readonlyRenderAs',
    default: 'auto',
    choices: ['auto', 'text', 'acroform'],
    visible: false
});


/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_brick__ = __webpack_require__(7);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TextBrick; });


var TextBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(TextBrick, _super);
    function TextBrick(question, controller, rect, text) {
        var _this = _super.call(this, question, controller, rect) || this;
        _this.text = text;
        _this.align = {
            isInputRtl: false,
            isOutputRtl: controller.isRTL,
            align: controller.isRTL ? 'right' : 'left',
            baseline: 'middle'
        };
        return _this;
    }
    TextBrick.prototype.escapeText = function () {
        while (this.text.indexOf('\t') > -1) {
            this.text = this.text.replace('\t', Array(5).join(String.fromCharCode(160)));
        }
        return this.text;
    };
    TextBrick.prototype.renderInteractive = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var alignPoint, oldFontSize, oldTextColor;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                alignPoint = this.alignPoint(this);
                oldFontSize = this.controller.fontSize;
                this.controller.fontSize = this.fontSize;
                oldTextColor = this.controller.doc.getTextColor();
                this.controller.doc.setTextColor(this.textColor);
                this.controller.doc.text(this.escapeText(), alignPoint.xLeft, alignPoint.yTop, this.align);
                this.controller.doc.setTextColor(oldTextColor);
                this.controller.fontSize = oldFontSize;
                return [2 /*return*/];
            });
        });
    };
    TextBrick.prototype.alignPoint = function (rect) {
        return {
            xLeft: this.controller.isRTL ? rect.xRight : rect.xLeft,
            yTop: rect.yTop + (rect.yBot - rect.yTop) / 2.0
        };
    };
    return TextBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_brick__["a" /* PdfBrick */]));



/***/ }),
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CompositeBrick; });


var CompositeBrick = /** @class */ (function () {
    function CompositeBrick() {
        var bricks = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            bricks[_i] = arguments[_i];
        }
        this.bricks = [];
        this.isPageBreak = false;
        this._xLeft = 0.0;
        this._xRight = 0.0;
        this._yTop = 0.0;
        this._yBot = 0.0;
        this.addBrick.apply(this, bricks);
    }
    Object.defineProperty(CompositeBrick.prototype, "xLeft", {
        get: function () { return this._xLeft; },
        set: function (xLeft) {
            this.shift(xLeft - this.xLeft, 0.0, 0.0, 0.0);
            this._xLeft = xLeft;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CompositeBrick.prototype, "xRight", {
        get: function () { return this._xRight; },
        set: function (xRight) {
            this.shift(0.0, xRight - this.xRight, 0.0, 0.0);
            this._xRight = xRight;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CompositeBrick.prototype, "yTop", {
        get: function () { return this._yTop; },
        set: function (yTop) {
            this.shift(0.0, 0.0, yTop - this.yTop, 0.0);
            this._yTop = yTop;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CompositeBrick.prototype, "yBot", {
        get: function () { return this._yBot; },
        set: function (yBot) {
            this.shift(0.0, 0.0, 0.0, yBot - this.yBot);
            this._yBot = yBot;
        },
        enumerable: false,
        configurable: true
    });
    CompositeBrick.prototype.shift = function (leftShift, rightShift, topShift, botShift) {
        this.bricks.forEach(function (brick) {
            brick.xLeft += leftShift;
            brick.xRight += rightShift;
            brick.yTop += topShift;
            brick.yBot += botShift;
        });
    };
    Object.defineProperty(CompositeBrick.prototype, "width", {
        get: function () {
            return this.xRight - this.xLeft;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CompositeBrick.prototype, "height", {
        get: function () {
            return this.yBot - this.yTop;
        },
        enumerable: false,
        configurable: true
    });
    CompositeBrick.prototype.render = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var i;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < this.bricks.length)) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.bricks[i].render()];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3:
                        i++;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    Object.defineProperty(CompositeBrick.prototype, "isEmpty", {
        get: function () {
            return this.bricks.length === 0;
        },
        enumerable: false,
        configurable: true
    });
    CompositeBrick.prototype.addBrick = function () {
        var _a;
        var bricks = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            bricks[_i] = arguments[_i];
        }
        if (bricks.length != 0) {
            (_a = this.bricks).push.apply(_a, bricks);
            var mergeRect = __WEBPACK_IMPORTED_MODULE_1__helper_survey__["a" /* SurveyHelper */].mergeRects.apply(__WEBPACK_IMPORTED_MODULE_1__helper_survey__["a" /* SurveyHelper */], this.bricks);
            this._xLeft = mergeRect.xLeft;
            this._xRight = mergeRect.xRight;
            this._yTop = mergeRect.yTop;
            this._yBot = mergeRect.yBot;
        }
    };
    CompositeBrick.prototype.unfold = function () {
        var unfoldBricks = [];
        this.bricks.forEach(function (brick) {
            unfoldBricks.push.apply(unfoldBricks, brick.unfold());
        });
        return unfoldBricks;
    };
    CompositeBrick.prototype.translateX = function (func) {
        this.bricks.forEach(function (brick) { return brick.translateX(func); });
        var res = func(this.xLeft, this.xRight);
        this._xLeft = res.xLeft;
        this._xRight = res.xRight;
    };
    return CompositeBrick;
}());



/***/ }),
/* 6 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_6__;

/***/ }),
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__doc_controller__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PdfBrick; });



/**
 * An object that describes a PDF brick&mdash;a simple element with specified content, size, and location. Bricks are fundamental elements used to construct a PDF document.
 *
 * You can access `PdfBrick` objects within functions that handle `SurveyPDF`'s [`onRenderQuestion`](https://surveyjs.io/pdf-generator/documentation/api-reference/surveypdf#onRenderQuestion), [`onRenderPanel`](https://surveyjs.io/pdf-generator/documentation/api-reference/surveypdf#onRenderPanel), and [`onRenderPage`](https://surveyjs.io/pdf-generator/documentation/api-reference/surveypdf#onRenderPage) events.
 *
 * [View Demo](https://surveyjs.io/pdf-generator/examples/add-markup-to-customize-pdf-forms/ (linkStyle))
 */
var PdfBrick = /** @class */ (function () {
    function PdfBrick(question, controller, rect) {
        this.question = question;
        this.controller = controller;
        /**
         * The color of text within the brick.
         *
         * Default value: `"#404040"`
         */
        this.textColor = __WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].TEXT_COLOR;
        this.formBorderColor = __WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].FORM_BORDER_COLOR;
        this.isPageBreak = false;
        this.xLeft = rect.xLeft;
        this.xRight = rect.xRight;
        this.yTop = rect.yTop;
        this.yBot = rect.yBot;
        this.fontSize = !!controller ?
            controller.fontSize : __WEBPACK_IMPORTED_MODULE_1__doc_controller__["b" /* DocController */].FONT_SIZE;
    }
    Object.defineProperty(PdfBrick.prototype, "xLeft", {
        /**
         * An X-coordinate for the left brick edge.
         */
        get: function () {
            return this._xLeft;
        },
        set: function (val) {
            this.setXLeft(val);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PdfBrick.prototype, "xRight", {
        /**
         * An X-coordinate for the right brick edge.
         */
        get: function () {
            return this._xRight;
        },
        set: function (val) {
            this.setXRight(val);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PdfBrick.prototype, "yTop", {
        /**
         * A Y-coordinate for the top brick edge.
         */
        get: function () {
            return this._yTop;
        },
        set: function (val) {
            this.setYTop(val);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PdfBrick.prototype, "yBot", {
        /**
         * A Y-coordinate for the bottom brick edge.
         */
        get: function () {
            return this._yBot;
        },
        set: function (val) {
            this.setYBottom(val);
        },
        enumerable: false,
        configurable: true
    });
    PdfBrick.prototype.translateX = function (func) {
        var res = func(this.xLeft, this.xRight);
        this.xLeft = res.xLeft;
        this.xRight = res.xRight;
    };
    Object.defineProperty(PdfBrick.prototype, "width", {
        /**
         * The brick's width in pixels.
         */
        get: function () {
            return this.xRight - this.xLeft;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PdfBrick.prototype, "height", {
        /**
         * The brick's height in pixels.
         */
        get: function () {
            return this.yBot - this.yTop;
        },
        enumerable: false,
        configurable: true
    });
    PdfBrick.prototype.getShouldRenderReadOnly = function () {
        return __WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].shouldRenderReadOnly(this.question, this.controller);
    };
    PdfBrick.prototype.render = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.getShouldRenderReadOnly()) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.renderReadOnly()];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.renderInteractive()];
                    case 3:
                        _a.sent();
                        _a.label = 4;
                    case 4:
                        this.afterRenderCallback && this.afterRenderCallback();
                        return [2 /*return*/];
                }
            });
        });
    };
    PdfBrick.prototype.renderInteractive = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () { return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
            return [2 /*return*/];
        }); });
    };
    PdfBrick.prototype.renderReadOnly = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.renderInteractive()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * Allows you to get a flat array of nested PDF bricks.
     * @returns A flat array of nested PDF bricks.
     */
    PdfBrick.prototype.unfold = function () {
        return [this];
    };
    PdfBrick.prototype.getCorrectedText = function (val) {
        return this.controller.isRTL ? (val || '').split('').reverse().join('') : val;
    };
    PdfBrick.prototype.setXLeft = function (val) {
        this._xLeft = val;
    };
    PdfBrick.prototype.setXRight = function (val) {
        this._xRight = val;
    };
    PdfBrick.prototype.setYTop = function (val) {
        this._yTop = val;
    };
    PdfBrick.prototype.setYBottom = function (val) {
        this._yBot = val;
    };
    return PdfBrick;
}());



/***/ }),
/* 8 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_jspdf__ = __webpack_require__(18);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_jspdf___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_jspdf__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__helper_survey__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__jspdf_plugins_acroform__ = __webpack_require__(58);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__jspdf_plugins_acroform_js__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__jspdf_plugins_acroform_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__jspdf_plugins_acroform_js__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__jspdf_plugins_from_html_js__ = __webpack_require__(63);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__jspdf_plugins_from_html_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__jspdf_plugins_from_html_js__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DocOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return DocController; });



// import Fonts from './fonts';



var DocOptions = /** @class */ (function () {
    function DocOptions(options) {
        var _this = this;
        this._base64Normal = undefined;
        this._base64Bold = undefined;
        if (typeof options.orientation === 'undefined') {
            if (typeof options.format === 'undefined' ||
                options.format[0] < options.format[1]) {
                this._orientation = 'p';
            }
            else
                this._orientation = 'l';
        }
        else
            this._orientation = options.orientation;
        this._format = options.format || 'a4';
        if (Array.isArray(this._format)) {
            this._format = this._format.map(function (f) { return f * DocOptions.MM_TO_PT; });
        }
        this._fontSize = options.fontSize || DocOptions.FONT_SIZE;
        if (!options.fontName) {
            if (!DocOptions.SEGOE_BOLD && !DocOptions.SEGOE_NORMAL) {
                this._fontName = __WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].STANDARD_FONT;
            }
            else {
                this._fontName = 'segoe';
            }
        }
        else {
            this._fontName = options.fontName;
        }
        if ((typeof options.fontName !== 'undefined' &&
            (typeof options.base64Normal !== 'undefined' ||
                typeof options.base64Bold !== 'undefined'))) {
            this._base64Normal = options.base64Normal || options.base64Bold;
            this._base64Bold = options.base64Bold || options.base64Normal;
        }
        else if (this.fontName === 'segoe') {
            // this._base64Normal = Fonts.SEGOE_NORMAL;
            // this._base64Bold = Fonts.SEGOE_BOLD;
            this._base64Normal = DocOptions.SEGOE_NORMAL;
            this._base64Bold = DocOptions.SEGOE_BOLD;
        }
        this._margins = __WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].clone(options.margins);
        if (typeof this._margins === 'undefined') {
            this._margins = {};
        }
        if (typeof this._margins.top === 'undefined') {
            this._margins.top = 10.0;
        }
        if (typeof this._margins.bot === 'undefined') {
            this._margins.bot = 10.0;
        }
        if (typeof this._margins.left === 'undefined') {
            this._margins.left = 10.0;
        }
        if (typeof this._margins.right === 'undefined') {
            this._margins.right = 10.0;
        }
        Object.keys(this._margins).forEach(function (name) {
            _this._margins[name] = _this._margins[name] * DocOptions.MM_TO_PT;
        });
        this._htmlRenderAs = options.htmlRenderAs || 'auto';
        this._matrixRenderAs = options.matrixRenderAs || 'auto';
        this._readonlyRenderAs = options.readonlyRenderAs || 'auto';
        this._compress = options.compress || false;
        this._applyImageFit = options.applyImageFit || false;
        this._useLegacyBooleanRendering = options.useLegacyBooleanRendering || false;
        this._isRTL = options.isRTL || false;
        this._tagboxSelectedChoicesOnly = options.tagboxSelectedChoicesOnly || false;
    }
    Object.defineProperty(DocOptions.prototype, "leftTopPoint", {
        get: function () {
            return {
                xLeft: this.margins.left,
                yTop: this.margins.top
            };
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocOptions.prototype, "fontSize", {
        get: function () {
            return this._fontSize;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocOptions.prototype, "fontName", {
        get: function () {
            return this._fontName;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocOptions.prototype, "base64Normal", {
        get: function () {
            return this._base64Normal;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocOptions.prototype, "base64Bold", {
        get: function () {
            return this._base64Bold;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocOptions.prototype, "useCustomFontInHtml", {
        get: function () {
            return this._useCustomFontInHtml;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocOptions.prototype, "margins", {
        get: function () {
            return this._margins;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocOptions.prototype, "format", {
        get: function () {
            return this._format;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocOptions.prototype, "orientation", {
        get: function () {
            return this._orientation;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocOptions.prototype, "htmlRenderAs", {
        get: function () {
            return this._htmlRenderAs;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocOptions.prototype, "matrixRenderAs", {
        get: function () {
            return this._matrixRenderAs;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocOptions.prototype, "readonlyRenderAs", {
        get: function () {
            return this._readonlyRenderAs;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocOptions.prototype, "compress", {
        get: function () {
            return this._compress;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocOptions.prototype, "applyImageFit", {
        get: function () {
            return this._applyImageFit;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocOptions.prototype, "useLegacyBooleanRendering", {
        get: function () {
            return this._useLegacyBooleanRendering;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocOptions.prototype, "isRTL", {
        get: function () {
            return this._isRTL;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocOptions.prototype, "tagboxSelectedChoicesOnly", {
        get: function () {
            return this._tagboxSelectedChoicesOnly;
        },
        enumerable: false,
        configurable: true
    });
    DocOptions.MM_TO_PT = 72 / 25.4;
    DocOptions.FONT_SIZE = 14;
    return DocOptions;
}());

/**
 * The `DocController` object includes an API that allows you to configure the resulting PDF document. You can access this object within functions that handle the `SurveyPDF`'s [`onRender...`](https://surveyjs.io/pdf-generator/documentation/api-reference/surveypdf#onRenderFooter) events.
 *
 * [View Demo](https://surveyjs.io/pdf-generator/examples/how-to-use-adorners-in-pdf-forms/ (linkStyle))
 */
var DocController = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(DocController, _super);
    function DocController(options) {
        if (options === void 0) { options = {}; }
        var _this = _super.call(this, options) || this;
        var jspdfOptions = {
            orientation: _this.orientation,
            unit: 'pt',
            format: _this.format,
            compress: _this.compress
        };
        _this._doc = new __WEBPACK_IMPORTED_MODULE_1_jspdf__["jsPDF"](jspdfOptions);
        if (typeof _this.base64Normal !== 'undefined' && !__WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].isFontExist(_this, _this.fontName)) {
            DocController.addFont(_this.fontName, _this.base64Normal, 'normal');
            DocController.addFont(_this.fontName, _this.base64Bold, 'bold');
            _this._doc = new __WEBPACK_IMPORTED_MODULE_1_jspdf__["jsPDF"](jspdfOptions);
        }
        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__jspdf_plugins_acroform__["a" /* default */])(_this._doc);
        _this._useCustomFontInHtml = options.useCustomFontInHtml && __WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].isFontExist(_this, _this.fontName);
        _this._helperDoc = new __WEBPACK_IMPORTED_MODULE_1_jspdf__["jsPDF"](jspdfOptions);
        _this._doc.setFont(_this.fontName);
        _this._helperDoc.setFont(_this.fontName);
        _this._doc.setFontSize(_this.fontSize);
        _this._helperDoc.setFontSize(_this.fontSize);
        _this._fontStyle = 'normal';
        _this.marginsStack = [];
        return _this;
    }
    DocController.addFont = function (fontName, base64, fontStyle) {
        var font = DocController.customFonts[fontName];
        if (!font) {
            font = {};
            DocController.customFonts[fontName] = font;
        }
        font[fontStyle] = base64;
        var addFontCallback = function () {
            var customFont = DocController.customFonts[fontName];
            if (!!customFont && !!customFont[fontStyle]) {
                var fontFile = "".concat(fontName, "-").concat(fontStyle, ".ttf");
                this.addFileToVFS(fontFile, customFont[fontStyle]);
                this.addFont(fontFile, fontName, fontStyle);
            }
        };
        __WEBPACK_IMPORTED_MODULE_1_jspdf__["jsPDF"].API.events.push(['addFonts', addFontCallback]);
    };
    Object.defineProperty(DocController.prototype, "doc", {
        get: function () {
            return this._doc;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocController.prototype, "helperDoc", {
        get: function () {
            return this._helperDoc;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocController.prototype, "fontName", {
        get: function () {
            return this._fontName;
        },
        set: function (fontName) {
            this._fontName = fontName;
            this._doc.setFont(fontName);
            this._helperDoc.setFont(fontName);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocController.prototype, "fontSize", {
        get: function () {
            return this._fontSize;
        },
        set: function (fontSize) {
            this._fontSize = fontSize;
            this._doc.setFontSize(fontSize);
            this._helperDoc.setFontSize(fontSize);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocController.prototype, "fontStyle", {
        get: function () {
            return this._fontStyle;
        },
        set: function (fontStyle) {
            this._fontStyle = fontStyle;
            this._doc.setFont(this._fontName, fontStyle);
            this._helperDoc.setFont(this._fontName, fontStyle);
        },
        enumerable: false,
        configurable: true
    });
    DocController.prototype.measureText = function (text, fontStyle, fontSize) {
        var _this = this;
        if (text === void 0) { text = 1; }
        if (fontStyle === void 0) { fontStyle = this._fontStyle; }
        if (fontSize === void 0) { fontSize = this._fontSize; }
        var oldFontSize = this._helperDoc.getFontSize();
        this._helperDoc.setFontSize(fontSize);
        this._helperDoc.setFont(this._fontName, fontStyle);
        var height = this._helperDoc.getLineHeight() / this._helperDoc.internal.scaleFactor;
        var width = 0.0;
        if (typeof text === 'number') {
            width = height * text;
        }
        else {
            text = typeof text === 'string' ? text : __WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].getLocString(text);
            width = text.split('').reduce(function (sm, cr) {
                return sm + _this._helperDoc.getTextWidth(cr);
            }, 0.0);
        }
        this._helperDoc.setFontSize(oldFontSize);
        this._helperDoc.setFont(this._fontName, 'normal');
        return {
            width: width,
            height: height
        };
    };
    Object.defineProperty(DocController.prototype, "unitWidth", {
        /**
         * The width of one character in pixels.
         */
        get: function () {
            return this.measureText().width;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocController.prototype, "unitHeight", {
        /**
         * The heigth of one character in pixels.
         */
        get: function () {
            return this.measureText().height;
        },
        enumerable: false,
        configurable: true
    });
    DocController.prototype.pushMargins = function (left, right) {
        this.marginsStack.push({ left: this.margins.left, right: this.margins.right });
        if (typeof left !== 'undefined')
            this.margins.left = left;
        if (typeof right !== 'undefined')
            this.margins.right = right;
    };
    DocController.prototype.popMargins = function () {
        var margins = this.marginsStack.pop();
        this.margins.left = margins.left;
        this.margins.right = margins.right;
    };
    Object.defineProperty(DocController.prototype, "paperWidth", {
        /**
         * The width of a PDF page in pixels.
         */
        get: function () {
            return this.doc.internal.pageSize.width;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DocController.prototype, "paperHeight", {
        /**
         * The height of a PDF page in pixels.
         */
        get: function () {
            return this.doc.internal.pageSize.height;
        },
        enumerable: false,
        configurable: true
    });
    DocController.prototype.getNumberOfPages = function () {
        return this.doc.getNumberOfPages();
    };
    DocController.prototype.addPage = function () {
        this.doc.addPage();
    };
    DocController.prototype.getCurrentPageIndex = function () {
        return this.doc.getCurrentPageInfo().pageNumber - 1;
    };
    DocController.prototype.setPage = function (index) {
        this.doc.setPage(index + 1);
    };
    DocController.customFonts = {};
    return DocController;
}(DocOptions));



/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pdf_render_pdf_radioitem__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flat_selectbase__ = __webpack_require__(15);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatRadiogroup; });




var FlatRadiogroup = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatRadiogroup, _super);
    function FlatRadiogroup(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.controller = controller;
        _this.question = question;
        return _this;
    }
    FlatRadiogroup.prototype.isItemSelected = function (item, checked) {
        return (typeof checked === 'undefined') ?
            (item === this.question.otherItem ? this.question.isOtherSelected :
                (item.value === this.question.value ||
                    (typeof this.question.isItemSelected !== 'undefined' &&
                        this.question.isItemSelected(item)))) : checked;
    };
    FlatRadiogroup.prototype.generateFlatItem = function (rect, item, index, key, checked, context) {
        if (context === void 0) { context = {}; }
        if (index === 0) {
            this.radioGroupWrap = new __WEBPACK_IMPORTED_MODULE_2__pdf_render_pdf_radioitem__["b" /* RadioGroupWrap */](this.question.id + ((typeof key === 'undefined') ? '' : key), this.controller, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["e" /* __assign */])({ readOnly: this.question.isReadOnly, question: this.question }, context));
            this.question.pdfRadioGroupWrap = this.radioGroupWrap;
        }
        else if (typeof this.radioGroupWrap === 'undefined') {
            this.radioGroupWrap = this.question.pdfRadioGroupWrap;
        }
        var isChecked = this.isItemSelected(item, checked);
        return new __WEBPACK_IMPORTED_MODULE_2__pdf_render_pdf_radioitem__["a" /* RadioItemBrick */](this.controller, rect, { question: this.question, index: index, checked: isChecked, item: item }, this.radioGroupWrap);
    };
    return FlatRadiogroup;
}(__WEBPACK_IMPORTED_MODULE_3__flat_selectbase__["a" /* FlatSelectBase */]));

__WEBPACK_IMPORTED_MODULE_1__flat_repository__["a" /* FlatRepository */].getInstance().register('radiogroup', FlatRadiogroup);
__WEBPACK_IMPORTED_MODULE_1__flat_repository__["a" /* FlatRepository */].getInstance().register('buttongroup', FlatRadiogroup);


/***/ }),
/* 10 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_survey_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pdf_render_pdf_composite__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_rowline__ = __webpack_require__(16);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__helper_survey__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__event_handler_adorners__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__entries_pdf__ = __webpack_require__(14);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatSurvey; });








var FlatSurvey = /** @class */ (function () {
    function FlatSurvey() {
    }
    FlatSurvey.generateFlatsPanel = function (survey, controller, panel, point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var panelFlats, panelContentPoint, _a, _b, _c, adornersOptions;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        panelFlats = [];
                        panelContentPoint = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].clone(point);
                        controller.pushMargins();
                        controller.margins.left += controller.measureText(panel.innerIndent).width;
                        panelContentPoint.xLeft += controller.measureText(panel.innerIndent).width;
                        _b = (_a = panelFlats.push).apply;
                        _c = [panelFlats];
                        return [4 /*yield*/, this.generateFlatsPagePanel(survey, controller, panel, panelContentPoint)];
                    case 1:
                        _b.apply(_a, _c.concat([_d.sent()]));
                        controller.popMargins();
                        adornersOptions = new __WEBPACK_IMPORTED_MODULE_5__event_handler_adorners__["a" /* AdornersPanelOptions */](point, panelFlats, panel, controller, __WEBPACK_IMPORTED_MODULE_6__entries_pdf__["FlatRepository"].getInstance(), __WEBPACK_IMPORTED_MODULE_6__entries_pdf__);
                        return [4 /*yield*/, survey.onRenderPanel.fire(survey, adornersOptions)];
                    case 2:
                        _d.sent();
                        return [2 /*return*/, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["d" /* __spreadArray */])([], adornersOptions.bricks, true)];
                }
            });
        });
    };
    FlatSurvey.generateFlatsPagePanel = function (survey, controller, pagePanel, point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var pagePanelFlats, currPoint, compositeFlat, noFlat, pagelPanelTitleFlat, pagePanelDescFlat, rowLinePoint, _i, _a, row, width, nextMarginLeft, rowFlats, visibleElements, i, element, persWidth, _b, _c, _d, _e, _f, _g;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_h) {
                switch (_h.label) {
                    case 0:
                        if (!pagePanel.isVisible)
                            return [2 /*return*/];
                        pagePanel.onFirstRendering();
                        pagePanelFlats = [];
                        currPoint = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].clone(point);
                        if (!(pagePanel.getType() !== 'page' || survey.showPageTitles)) return [3 /*break*/, 7];
                        compositeFlat = new __WEBPACK_IMPORTED_MODULE_2__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        if (!pagePanel.title) return [3 /*break*/, 4];
                        if (!(pagePanel instanceof __WEBPACK_IMPORTED_MODULE_1_survey_core__["PanelModel"] && pagePanel.no)) return [3 /*break*/, 2];
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createTitlePanelFlat(currPoint, controller, pagePanel.no, pagePanel.getType() === 'page')];
                    case 1:
                        noFlat = _h.sent();
                        compositeFlat.addBrick(noFlat);
                        currPoint.xLeft = noFlat.xRight + controller.measureText(' ').width;
                        _h.label = 2;
                    case 2: return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createTitlePanelFlat(currPoint, controller, pagePanel.locTitle, pagePanel.getType() === 'page')];
                    case 3:
                        pagelPanelTitleFlat = _h.sent();
                        compositeFlat.addBrick(pagelPanelTitleFlat);
                        currPoint = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createPoint(pagelPanelTitleFlat);
                        _h.label = 4;
                    case 4:
                        if (!pagePanel.description) return [3 /*break*/, 6];
                        if (pagePanel.title) {
                            currPoint.yTop += controller.unitWidth * FlatSurvey.PANEL_DESC_GAP_SCALE;
                        }
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createDescFlat(currPoint, null, controller, pagePanel.locDescription)];
                    case 5:
                        pagePanelDescFlat = _h.sent();
                        compositeFlat.addBrick(pagePanelDescFlat);
                        currPoint = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createPoint(pagePanelDescFlat);
                        _h.label = 6;
                    case 6:
                        if (!compositeFlat.isEmpty) {
                            rowLinePoint = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createPoint(compositeFlat);
                            compositeFlat.addBrick(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createRowlineFlat(rowLinePoint, controller));
                            pagePanelFlats.push(compositeFlat);
                            currPoint.yTop += controller.unitHeight * FlatSurvey.PANEL_CONT_GAP_SCALE + __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].EPSILON;
                        }
                        _h.label = 7;
                    case 7:
                        _i = 0, _a = pagePanel.rows;
                        _h.label = 8;
                    case 8:
                        if (!(_i < _a.length)) return [3 /*break*/, 16];
                        row = _a[_i];
                        if (!row.visible)
                            return [3 /*break*/, 15];
                        controller.pushMargins();
                        width = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].getPageAvailableWidth(controller);
                        nextMarginLeft = controller.margins.left;
                        rowFlats = [];
                        visibleElements = row.elements.filter(function (el) { return el.isVisible; });
                        i = 0;
                        _h.label = 9;
                    case 9:
                        if (!(i < visibleElements.length)) return [3 /*break*/, 14];
                        element = visibleElements[i];
                        if (!element.isVisible)
                            return [3 /*break*/, 13];
                        persWidth = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].parseWidth(element.renderWidth, width - (visibleElements.length - 1) * controller.unitWidth, visibleElements.length);
                        controller.margins.left = nextMarginLeft + ((i !== 0) ? controller.unitWidth : 0);
                        controller.margins.right = controller.paperWidth - controller.margins.left - persWidth;
                        currPoint.xLeft = controller.margins.left;
                        nextMarginLeft = controller.margins.left + persWidth;
                        if (!(element instanceof __WEBPACK_IMPORTED_MODULE_1_survey_core__["PanelModel"])) return [3 /*break*/, 11];
                        _c = (_b = rowFlats.push).apply;
                        _d = [rowFlats];
                        return [4 /*yield*/, this.generateFlatsPanel(survey, controller, element, currPoint)];
                    case 10:
                        _c.apply(_b, _d.concat([_h.sent()]));
                        return [3 /*break*/, 13];
                    case 11:
                        _f = (_e = rowFlats.push).apply;
                        _g = [rowFlats];
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].generateQuestionFlats(survey, controller, element, currPoint)];
                    case 12:
                        _f.apply(_e, _g.concat([_h.sent()]));
                        _h.label = 13;
                    case 13:
                        i++;
                        return [3 /*break*/, 9];
                    case 14:
                        controller.popMargins();
                        currPoint.xLeft = controller.margins.left;
                        if (rowFlats.length !== 0) {
                            currPoint.yTop = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].mergeRects.apply(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */], rowFlats).yBot;
                            currPoint.xLeft = point.xLeft;
                            currPoint.yTop += controller.unitHeight * FlatSurvey.QUES_GAP_VERT_SCALE;
                            pagePanelFlats.push.apply(pagePanelFlats, rowFlats);
                            pagePanelFlats.push(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createRowlineFlat(currPoint, controller));
                            currPoint.yTop += __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].EPSILON;
                        }
                        _h.label = 15;
                    case 15:
                        _i++;
                        return [3 /*break*/, 8];
                    case 16: return [2 /*return*/, pagePanelFlats];
                }
            });
        });
    };
    FlatSurvey.popRowlines = function (flats) {
        while (flats.length > 0 && flats[flats.length - 1] instanceof __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_rowline__["a" /* RowlineBrick */]) {
            flats.pop();
        }
    };
    FlatSurvey.generateFlatTitle = function (survey, controller, point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var compositeFlat, surveyTitleFlat, _a, _b;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        compositeFlat = new __WEBPACK_IMPORTED_MODULE_2__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        if (!survey.showTitle) return [3 /*break*/, 4];
                        if (!survey.title) return [3 /*break*/, 2];
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createTitleSurveyFlat(point, controller, survey.locTitle)];
                    case 1:
                        surveyTitleFlat = _c.sent();
                        compositeFlat.addBrick(surveyTitleFlat);
                        point = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createPoint(surveyTitleFlat);
                        _c.label = 2;
                    case 2:
                        if (!survey.description) return [3 /*break*/, 4];
                        if (survey.title) {
                            point.yTop += controller.unitWidth * FlatSurvey.PANEL_DESC_GAP_SCALE;
                        }
                        _b = (_a = compositeFlat).addBrick;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createDescFlat(point, null, controller, survey.locDescription)];
                    case 3:
                        _b.apply(_a, [_c.sent()]);
                        _c.label = 4;
                    case 4: return [2 /*return*/, compositeFlat];
                }
            });
        });
    };
    FlatSurvey.generateFlatLogoImage = function (survey, controller, point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var logoUrl, logoSize, logoFlat, shift;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        logoUrl = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].getLocString(survey.locLogo);
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].getCorrectedImageSize(controller, { imageLink: logoUrl, imageHeight: survey.logoHeight, imageWidth: survey.logoWidth })];
                    case 1:
                        logoSize = _a.sent();
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createImageFlat(point, null, controller, { link: logoUrl,
                                width: logoSize.width, height: logoSize.height })];
                    case 2:
                        logoFlat = _a.sent();
                        shift = 0;
                        if (survey.logoPosition === 'right') {
                            shift = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].getPageAvailableWidth(controller) - logoFlat.width;
                        }
                        else if (survey.logoPosition !== 'left') {
                            shift = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].getPageAvailableWidth(controller) / 2.0 - logoFlat.width / 2.0;
                        }
                        logoFlat.xLeft += shift;
                        logoFlat.xRight += shift;
                        return [2 /*return*/, logoFlat];
                }
            });
        });
    };
    FlatSurvey.generateFlats = function (survey, controller) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var flats, titleFlat, logoFlat, titlePoint, titleFlat, logoFlat, titleFlat, titleFlat, logoPoint, logoFlat, point, i, pageFlats, _a, _b, _c, adornersOptions;
            var _d;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        flats = [];
                        if (!!survey.hasLogo) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.generateFlatTitle(survey, controller, controller.leftTopPoint)];
                    case 1:
                        titleFlat = _e.sent();
                        if (!titleFlat.isEmpty)
                            flats.push([titleFlat]);
                        return [3 /*break*/, 11];
                    case 2:
                        if (!survey.isLogoBefore) return [3 /*break*/, 5];
                        return [4 /*yield*/, this.generateFlatLogoImage(survey, controller, controller.leftTopPoint)];
                    case 3:
                        logoFlat = _e.sent();
                        flats.push([logoFlat]);
                        titlePoint = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createPoint(logoFlat, survey.logoPosition === 'top', survey.logoPosition !== 'top');
                        if (survey.logoPosition !== 'top') {
                            controller.pushMargins();
                            titlePoint.xLeft += controller.unitWidth;
                            controller.margins.left += logoFlat.width + controller.unitWidth;
                        }
                        else {
                            titlePoint.xLeft = controller.leftTopPoint.xLeft;
                            titlePoint.yTop += controller.unitHeight / 2.0;
                        }
                        return [4 /*yield*/, this.generateFlatTitle(survey, controller, titlePoint)];
                    case 4:
                        titleFlat = _e.sent();
                        if (survey.logoPosition !== 'top')
                            controller.popMargins();
                        if (!titleFlat.isEmpty)
                            flats[0].push(titleFlat);
                        return [3 /*break*/, 11];
                    case 5:
                        if (!(survey.logoPosition === 'right')) return [3 /*break*/, 8];
                        return [4 /*yield*/, this.generateFlatLogoImage(survey, controller, controller.leftTopPoint)];
                    case 6:
                        logoFlat = _e.sent();
                        flats.push([logoFlat]);
                        controller.pushMargins();
                        controller.margins.right += logoFlat.width + controller.unitWidth;
                        return [4 /*yield*/, this.generateFlatTitle(survey, controller, controller.leftTopPoint)];
                    case 7:
                        titleFlat = _e.sent();
                        if (!titleFlat.isEmpty)
                            flats[0].unshift(titleFlat);
                        controller.popMargins();
                        return [3 /*break*/, 11];
                    case 8: return [4 /*yield*/, this.generateFlatTitle(survey, controller, controller.leftTopPoint)];
                    case 9:
                        titleFlat = _e.sent();
                        logoPoint = controller.leftTopPoint;
                        if (!titleFlat.isEmpty) {
                            flats.push([titleFlat]);
                            logoPoint = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createPoint(titleFlat);
                            logoPoint.yTop += controller.unitHeight / 2.0;
                        }
                        return [4 /*yield*/, this.generateFlatLogoImage(survey, controller, logoPoint)];
                    case 10:
                        logoFlat = _e.sent();
                        if (flats.length !== 0)
                            flats[0].push(logoFlat);
                        else
                            flats.push([logoFlat]);
                        _e.label = 11;
                    case 11:
                        point = controller.leftTopPoint;
                        if (flats.length !== 0) {
                            point.yTop = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createPoint(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].mergeRects.apply(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */], flats[0])).yTop;
                            flats[0].push(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createRowlineFlat(point, controller));
                            point.yTop += controller.unitHeight * FlatSurvey.PANEL_CONT_GAP_SCALE + __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].EPSILON;
                        }
                        i = 0;
                        _e.label = 12;
                    case 12:
                        if (!(i < survey.visiblePages.length)) return [3 /*break*/, 16];
                        survey.currentPage = survey.visiblePages[i];
                        pageFlats = [];
                        _b = (_a = pageFlats.push).apply;
                        _c = [pageFlats];
                        return [4 /*yield*/, this.generateFlatsPagePanel(survey, controller, survey.visiblePages[i], point)];
                    case 13:
                        _b.apply(_a, _c.concat([_e.sent()]));
                        adornersOptions = new __WEBPACK_IMPORTED_MODULE_5__event_handler_adorners__["b" /* AdornersPageOptions */](point, pageFlats, survey.visiblePages[i], controller, __WEBPACK_IMPORTED_MODULE_6__entries_pdf__["FlatRepository"].getInstance(), __WEBPACK_IMPORTED_MODULE_6__entries_pdf__);
                        return [4 /*yield*/, survey.onRenderPage.fire(survey, adornersOptions)];
                    case 14:
                        _e.sent();
                        pageFlats = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["d" /* __spreadArray */])([], adornersOptions.bricks, true);
                        if (i === 0 && flats.length !== 0) {
                            (_d = flats[0]).push.apply(_d, pageFlats);
                        }
                        else
                            flats.push(pageFlats);
                        this.popRowlines(flats[flats.length - 1]);
                        point.yTop = controller.leftTopPoint.yTop;
                        _e.label = 15;
                    case 15:
                        i++;
                        return [3 /*break*/, 12];
                    case 16: return [2 /*return*/, flats];
                }
            });
        });
    };
    FlatSurvey.QUES_GAP_VERT_SCALE = 1.5;
    FlatSurvey.PANEL_CONT_GAP_SCALE = 1.0;
    FlatSurvey.PANEL_DESC_GAP_SCALE = 0.25;
    return FlatSurvey;
}());



/***/ }),
/* 11 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_brick__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pdf_text__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CheckItemBrick; });




var CheckItemBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(CheckItemBrick, _super);
    function CheckItemBrick(controller, rect, fieldName, context) {
        var _this = _super.call(this, context.question, controller, rect) || this;
        _this.fieldName = fieldName;
        _this.context = context;
        _this.question = _this.context.question;
        _this.textColor = _this.formBorderColor;
        return _this;
    }
    CheckItemBrick.prototype.getShouldRenderReadOnly = function () {
        return this.context.readOnly && __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].getReadonlyRenderAs(this.question, this.controller) !== 'acroform' || this.controller.compress;
    };
    CheckItemBrick.prototype.renderInteractive = function () {
        var _a;
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var checkBox, formScale, options;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_b) {
                checkBox = new this.controller.doc.AcroFormCheckBox();
                formScale = __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].formScale(this.controller, this);
                options = {};
                options.maxFontSize = this.height * formScale * CheckItemBrick.FONT_SIZE_SCALE;
                options.caption = CheckItemBrick.CHECKMARK_READONLY_SYMBOL;
                options.textAlign = 'center';
                options.fieldName = this.fieldName;
                options.readOnly = this.context.readOnly;
                options.color = this.formBorderColor;
                options.value = this.context.checked ? 'On' : false;
                options.AS = this.context.checked ? '/On' : '/Off';
                options.context = this.context;
                options.Rect = __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].createAcroformRect(__WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].scaleRect(this, formScale));
                this.controller.doc.addField(checkBox);
                (_a = this.question.survey) === null || _a === void 0 ? void 0 : _a.getUpdatedCheckItemAcroformOptions(options);
                checkBox.maxFontSize = options.maxFontSize;
                checkBox.caption = options.caption;
                checkBox.textAlign = options.textAlign;
                checkBox.fieldName = options.fieldName;
                checkBox.readOnly = options.readOnly;
                checkBox.color = options.color;
                checkBox.value = options.value;
                checkBox.AS = options.AS;
                checkBox.Rect = options.Rect;
                __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].renderFlatBorders(this.controller, this);
                return [2 /*return*/];
            });
        });
    };
    CheckItemBrick.prototype.renderReadOnly = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var checkmarkPoint, oldFontName, oldFontSize, checkmarkSize, checkmarkFlat;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].renderFlatBorders(this.controller, this);
                        if (!this.context.checked) return [3 /*break*/, 3];
                        checkmarkPoint = __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].createPoint(this, true, true);
                        oldFontName = this.controller.fontName;
                        this.controller.fontName = CheckItemBrick.CHECKMARK_READONLY_FONT;
                        oldFontSize = this.controller.fontSize;
                        this.controller.fontSize = oldFontSize *
                            CheckItemBrick.CHECKMARK_READONLY_FONT_SIZE_SCALE;
                        checkmarkSize = this.controller.measureText(CheckItemBrick.CHECKMARK_READONLY_SYMBOL);
                        checkmarkPoint.xLeft += this.width / 2.0 - checkmarkSize.width / 2.0;
                        checkmarkPoint.yTop += this.height / 2.0 - checkmarkSize.height / 2.0;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].createTextFlat(checkmarkPoint, this.question, this.controller, CheckItemBrick.CHECKMARK_READONLY_SYMBOL, __WEBPACK_IMPORTED_MODULE_2__pdf_text__["a" /* TextBrick */])];
                    case 1:
                        checkmarkFlat = _a.sent();
                        checkmarkFlat.unfold()[0].textColor = this.textColor;
                        this.controller.fontSize = oldFontSize;
                        return [4 /*yield*/, checkmarkFlat.render()];
                    case 2:
                        _a.sent();
                        this.controller.fontName = oldFontName;
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    CheckItemBrick.FONT_SIZE_SCALE = 0.7;
    CheckItemBrick.CHECKMARK_READONLY_SYMBOL = '3';
    CheckItemBrick.CHECKMARK_READONLY_FONT = 'zapfdingbats';
    CheckItemBrick.CHECKMARK_READONLY_FONT_SIZE_SCALE = 1.0 - Math.E / 10.0;
    return CheckItemBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_brick__["a" /* PdfBrick */]));



/***/ }),
/* 12 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_brick__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EmptyBrick; });



var EmptyBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(EmptyBrick, _super);
    function EmptyBrick(rect, controller, isBorderVisible) {
        if (controller === void 0) { controller = null; }
        if (isBorderVisible === void 0) { isBorderVisible = false; }
        var _this = _super.call(this, null, controller, rect) || this;
        _this.controller = controller;
        _this.isBorderVisible = false;
        _this.isBorderVisible = isBorderVisible;
        return _this;
    }
    EmptyBrick.prototype.resizeBorder = function (isIncrease) {
        var coef = isIncrease ? 1 : -1;
        var borderPadding = this.controller.doc.getFontSize() * __WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].VALUE_READONLY_PADDING_SCALE;
        this.xLeft -= coef * borderPadding;
        this.xRight += coef * borderPadding;
        this.yBot += coef * borderPadding;
    };
    EmptyBrick.prototype.renderInteractive = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                if (this.isBorderVisible) {
                    this.resizeBorder(true);
                    __WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].renderFlatBorders(this.controller, this);
                    this.resizeBorder(false);
                }
                return [2 /*return*/];
            });
        });
    };
    return EmptyBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_brick__["a" /* PdfBrick */]));



/***/ }),
/* 13 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_text__ = __webpack_require__(4);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TextBoldBrick; });


var TextBoldBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(TextBoldBrick, _super);
    function TextBoldBrick(question, controller, rect, text) {
        return _super.call(this, question, controller, rect, text) || this;
    }
    TextBoldBrick.prototype.renderInteractive = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.controller.fontStyle = 'bold';
                        return [4 /*yield*/, _super.prototype.renderInteractive.call(this)];
                    case 1:
                        _a.sent();
                        this.controller.fontStyle = 'normal';
                        return [2 /*return*/];
                }
            });
        });
    };
    return TextBoldBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_text__["a" /* TextBrick */]));



/***/ }),
/* 14 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__survey__ = __webpack_require__(55);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "SurveyPDF", function() { return __WEBPACK_IMPORTED_MODULE_0__survey__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__helper_survey__ = __webpack_require__(1);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "SurveyHelper", function() { return __WEBPACK_IMPORTED_MODULE_1__helper_survey__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__doc_controller__ = __webpack_require__(8);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "DocOptions", function() { return __WEBPACK_IMPORTED_MODULE_2__doc_controller__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "DocController", function() { return __WEBPACK_IMPORTED_MODULE_2__doc_controller__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flat_layout_flat_repository__ = __webpack_require__(2);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatRepository", function() { return __WEBPACK_IMPORTED_MODULE_3__flat_layout_flat_repository__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__flat_layout_flat_question__ = __webpack_require__(3);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatQuestion", function() { return __WEBPACK_IMPORTED_MODULE_4__flat_layout_flat_question__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__flat_layout_flat_default__ = __webpack_require__(21);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatQuestionDefault", function() { return __WEBPACK_IMPORTED_MODULE_5__flat_layout_flat_default__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__flat_layout_flat_boolean__ = __webpack_require__(36);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatBoolean", function() { return __WEBPACK_IMPORTED_MODULE_6__flat_layout_flat_boolean__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__flat_layout_flat_checkbox__ = __webpack_require__(37);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatCheckbox", function() { return __WEBPACK_IMPORTED_MODULE_7__flat_layout_flat_checkbox__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__flat_layout_flat_custom_model__ = __webpack_require__(39);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatCustomModel", function() { return __WEBPACK_IMPORTED_MODULE_8__flat_layout_flat_custom_model__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__flat_layout_flat_comment__ = __webpack_require__(38);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatComment", function() { return __WEBPACK_IMPORTED_MODULE_9__flat_layout_flat_comment__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__flat_layout_flat_dropdown__ = __webpack_require__(40);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatDropdown", function() { return __WEBPACK_IMPORTED_MODULE_10__flat_layout_flat_dropdown__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__flat_layout_flat_expression__ = __webpack_require__(41);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatExpression", function() { return __WEBPACK_IMPORTED_MODULE_11__flat_layout_flat_expression__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__flat_layout_flat_file__ = __webpack_require__(42);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatFile", function() { return __WEBPACK_IMPORTED_MODULE_12__flat_layout_flat_file__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__flat_layout_flat_html__ = __webpack_require__(43);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatHTML", function() { return __WEBPACK_IMPORTED_MODULE_13__flat_layout_flat_html__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__flat_layout_flat_image__ = __webpack_require__(44);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatImage", function() { return __WEBPACK_IMPORTED_MODULE_14__flat_layout_flat_image__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__flat_layout_flat_imagepicker__ = __webpack_require__(45);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatImagePicker", function() { return __WEBPACK_IMPORTED_MODULE_15__flat_layout_flat_imagepicker__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__flat_layout_flat_paneldynamic__ = __webpack_require__(49);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatPanelDynamic", function() { return __WEBPACK_IMPORTED_MODULE_16__flat_layout_flat_paneldynamic__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__flat_layout_flat_radiogroup__ = __webpack_require__(9);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatRadiogroup", function() { return __WEBPACK_IMPORTED_MODULE_17__flat_layout_flat_radiogroup__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__flat_layout_flat_ranking__ = __webpack_require__(50);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatRanking", function() { return __WEBPACK_IMPORTED_MODULE_18__flat_layout_flat_ranking__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__flat_layout_flat_rating__ = __webpack_require__(51);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatRating", function() { return __WEBPACK_IMPORTED_MODULE_19__flat_layout_flat_rating__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__flat_layout_flat_selectbase__ = __webpack_require__(15);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatSelectBase", function() { return __WEBPACK_IMPORTED_MODULE_20__flat_layout_flat_selectbase__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__flat_layout_flat_signaturepad__ = __webpack_require__(52);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatSignaturePad", function() { return __WEBPACK_IMPORTED_MODULE_21__flat_layout_flat_signaturepad__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__flat_layout_flat_textbox__ = __webpack_require__(53);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatTextbox", function() { return __WEBPACK_IMPORTED_MODULE_22__flat_layout_flat_textbox__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__flat_layout_flat_survey__ = __webpack_require__(10);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatSurvey", function() { return __WEBPACK_IMPORTED_MODULE_23__flat_layout_flat_survey__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__flat_layout_flat_matrix__ = __webpack_require__(46);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatMatrix", function() { return __WEBPACK_IMPORTED_MODULE_24__flat_layout_flat_matrix__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__flat_layout_flat_matrixmultiple__ = __webpack_require__(22);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatMatrixMultiple", function() { return __WEBPACK_IMPORTED_MODULE_25__flat_layout_flat_matrixmultiple__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__flat_layout_flat_matrixdynamic__ = __webpack_require__(47);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatMatrixDynamic", function() { return __WEBPACK_IMPORTED_MODULE_26__flat_layout_flat_matrixdynamic__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__flat_layout_flat_multipletext__ = __webpack_require__(48);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "FlatMultipleText", function() { return __WEBPACK_IMPORTED_MODULE_27__flat_layout_flat_multipletext__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__page_layout_page_packer__ = __webpack_require__(23);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "PagePacker", function() { return __WEBPACK_IMPORTED_MODULE_28__page_layout_page_packer__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__event_handler_event_handler__ = __webpack_require__(20);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "EventHandler", function() { return __WEBPACK_IMPORTED_MODULE_29__event_handler_event_handler__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__event_handler_draw_canvas__ = __webpack_require__(19);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "HorizontalAlign", function() { return __WEBPACK_IMPORTED_MODULE_30__event_handler_draw_canvas__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "VerticalAlign", function() { return __WEBPACK_IMPORTED_MODULE_30__event_handler_draw_canvas__["b"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "DrawCanvas", function() { return __WEBPACK_IMPORTED_MODULE_30__event_handler_draw_canvas__["c"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__pdf_render_pdf_brick__ = __webpack_require__(7);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "PdfBrick", function() { return __WEBPACK_IMPORTED_MODULE_31__pdf_render_pdf_brick__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32__pdf_render_pdf_booleanitem__ = __webpack_require__(24);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "BooleanItemBrick", function() { return __WEBPACK_IMPORTED_MODULE_32__pdf_render_pdf_booleanitem__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_33__pdf_render_pdf_checkboxitem__ = __webpack_require__(25);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "CheckboxItemBrick", function() { return __WEBPACK_IMPORTED_MODULE_33__pdf_render_pdf_checkboxitem__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_34__pdf_render_pdf_checkitem__ = __webpack_require__(11);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "CheckItemBrick", function() { return __WEBPACK_IMPORTED_MODULE_34__pdf_render_pdf_checkitem__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_35__pdf_render_pdf_comment__ = __webpack_require__(26);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "CommentBrick", function() { return __WEBPACK_IMPORTED_MODULE_35__pdf_render_pdf_comment__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_36__pdf_render_pdf_composite__ = __webpack_require__(5);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "CompositeBrick", function() { return __WEBPACK_IMPORTED_MODULE_36__pdf_render_pdf_composite__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_37__pdf_render_pdf_custom__ = __webpack_require__(54);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "CustomBrick", function() { return __WEBPACK_IMPORTED_MODULE_37__pdf_render_pdf_custom__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_38__pdf_render_pdf_dropdown__ = __webpack_require__(27);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "DropdownBrick", function() { return __WEBPACK_IMPORTED_MODULE_38__pdf_render_pdf_dropdown__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_39__pdf_render_pdf_empty__ = __webpack_require__(12);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "EmptyBrick", function() { return __WEBPACK_IMPORTED_MODULE_39__pdf_render_pdf_empty__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_40__pdf_render_pdf_html__ = __webpack_require__(28);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "HTMLBrick", function() { return __WEBPACK_IMPORTED_MODULE_40__pdf_render_pdf_html__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_41__pdf_render_pdf_image__ = __webpack_require__(29);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "ImageBrick", function() { return __WEBPACK_IMPORTED_MODULE_41__pdf_render_pdf_image__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_42__pdf_render_pdf_link__ = __webpack_require__(30);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "LinkBrick", function() { return __WEBPACK_IMPORTED_MODULE_42__pdf_render_pdf_link__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_43__pdf_render_pdf_radioitem__ = __webpack_require__(31);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "RadioItemBrick", function() { return __WEBPACK_IMPORTED_MODULE_43__pdf_render_pdf_radioitem__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_44__pdf_render_pdf_rankingitem__ = __webpack_require__(32);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "RankingItemBrick", function() { return __WEBPACK_IMPORTED_MODULE_44__pdf_render_pdf_rankingitem__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_45__pdf_render_pdf_rowline__ = __webpack_require__(16);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "RowlineBrick", function() { return __WEBPACK_IMPORTED_MODULE_45__pdf_render_pdf_rowline__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_46__pdf_render_pdf_textfield__ = __webpack_require__(33);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "TextFieldBrick", function() { return __WEBPACK_IMPORTED_MODULE_46__pdf_render_pdf_textfield__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_47__pdf_render_pdf_textbold__ = __webpack_require__(13);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "TextBoldBrick", function() { return __WEBPACK_IMPORTED_MODULE_47__pdf_render_pdf_textbold__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_48__pdf_render_pdf_textbox__ = __webpack_require__(17);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "TextBoxBrick", function() { return __WEBPACK_IMPORTED_MODULE_48__pdf_render_pdf_textbox__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_49__pdf_render_pdf_text__ = __webpack_require__(4);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "TextBrick", function() { return __WEBPACK_IMPORTED_MODULE_49__pdf_render_pdf_text__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_50__pdf_render_pdf_titlepanel__ = __webpack_require__(34);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "TitlePanelBrick", function() { return __WEBPACK_IMPORTED_MODULE_50__pdf_render_pdf_titlepanel__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_51_survey_core__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_51_survey_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_51_survey_core__);




















































__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_51_survey_core__["checkLibraryVersion"])("".concat("1.12.16-patch.1"), 'survey-pdf');


/***/ }),
/* 15 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pdf_render_pdf_text__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_composite__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatSelectBase; });





var FlatSelectBase = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatSelectBase, _super);
    function FlatSelectBase(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.controller = controller;
        _this.question = question;
        return _this;
    }
    FlatSelectBase.prototype.generateFlatComposite = function (point, item, index) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var compositeFlat, itemRect, itemFlat, textPoint, _a, _b, otherPoint, _c, _d;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        compositeFlat = new __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        itemRect = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createRect(point, this.controller.unitWidth, this.controller.unitHeight);
                        itemFlat = this.generateFlatItem(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].moveRect(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].scaleRect(itemRect, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].SELECT_ITEM_FLAT_SCALE), point.xLeft), item, index);
                        compositeFlat.addBrick(itemFlat);
                        textPoint = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].clone(point);
                        textPoint.xLeft = itemFlat.xRight + this.controller.unitWidth * __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ITEM_TEXT;
                        if (!(item.locText.renderedHtml !== null)) return [3 /*break*/, 2];
                        _b = (_a = compositeFlat).addBrick;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createTextFlat(textPoint, this.question, this.controller, item.locText, __WEBPACK_IMPORTED_MODULE_2__pdf_render_pdf_text__["a" /* TextBrick */])];
                    case 1:
                        _b.apply(_a, [_e.sent()]);
                        _e.label = 2;
                    case 2:
                        if (!(item === this.question.otherItem && (item.value === this.question.value ||
                            (typeof this.question.isOtherSelected !== 'undefined' && this.question.isOtherSelected)))) return [3 /*break*/, 4];
                        otherPoint = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createPoint(compositeFlat);
                        otherPoint.yTop += this.controller.unitHeight * __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ROWS;
                        _d = (_c = compositeFlat).addBrick;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createCommentFlat(otherPoint, this.question, this.controller, false, { index: index, rows: __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].OTHER_ROWS_COUNT })];
                    case 3:
                        _d.apply(_c, [_e.sent()]);
                        _e.label = 4;
                    case 4: return [2 /*return*/, compositeFlat];
                }
            });
        });
    };
    FlatSelectBase.prototype.getVisibleChoices = function () {
        return this.question.visibleChoices;
    };
    FlatSelectBase.prototype.getColCount = function () {
        return this.question.colCount;
    };
    FlatSelectBase.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var colCount, visibleChoices, currentColCount, _a;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        colCount = this.getColCount();
                        visibleChoices = this.getVisibleChoices();
                        currentColCount = colCount;
                        if (colCount == 0) {
                            currentColCount = Math.floor(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].getPageAvailableWidth(this.controller)
                                / this.controller.measureText(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].MATRIX_COLUMN_WIDTH).width) || 1;
                            if (visibleChoices.length < currentColCount) {
                                currentColCount = visibleChoices.length;
                            }
                        }
                        else if (colCount > 1) {
                            currentColCount = (__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].getColumnWidth(this.controller, colCount) <
                                this.controller.measureText(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].MATRIX_COLUMN_WIDTH).width) ? 1 : colCount;
                        }
                        if (!(currentColCount == 1)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.generateVerticallyItems(point, visibleChoices)];
                    case 1:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.generateHorisontallyItems(point, currentColCount)];
                    case 3:
                        _a = _b.sent();
                        _b.label = 4;
                    case 4: return [2 /*return*/, _a];
                }
            });
        });
    };
    FlatSelectBase.prototype.generateVerticallyItems = function (point, itemValues) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var currPoint, flats, i, itemFlat;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        currPoint = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].clone(point);
                        flats = [];
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < itemValues.length)) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.generateFlatComposite(currPoint, itemValues[i], i)];
                    case 2:
                        itemFlat = _a.sent();
                        currPoint.yTop = itemFlat.yBot + __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ROWS * this.controller.unitHeight;
                        flats.push(itemFlat);
                        _a.label = 3;
                    case 3:
                        i++;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/, flats];
                }
            });
        });
    };
    FlatSelectBase.prototype.generateHorisontallyItems = function (point, colCount) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var visibleChoices, currPoint, flats, row, i, itemFlat, rowLineFlat;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        visibleChoices = this.getVisibleChoices();
                        currPoint = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].clone(point);
                        flats = [];
                        row = new __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < visibleChoices.length)) return [3 /*break*/, 4];
                        this.controller.pushMargins(this.controller.margins.left, this.controller.margins.right);
                        __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].setColumnMargins(this.controller, colCount, i % colCount);
                        currPoint.xLeft = this.controller.margins.left;
                        return [4 /*yield*/, this.generateFlatComposite(currPoint, visibleChoices[i], i)];
                    case 2:
                        itemFlat = _a.sent();
                        row.addBrick(itemFlat);
                        this.controller.popMargins();
                        if (i % colCount === colCount - 1 || i === visibleChoices.length - 1) {
                            rowLineFlat = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createRowlineFlat(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createPoint(row), this.controller);
                            currPoint.yTop = rowLineFlat.yBot +
                                __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ROWS * this.controller.unitHeight;
                            flats.push(row, rowLineFlat);
                            row = new __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        }
                        _a.label = 3;
                    case 3:
                        i++;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/, flats];
                }
            });
        });
    };
    return FlatSelectBase;
}(__WEBPACK_IMPORTED_MODULE_1__flat_question__["a" /* FlatQuestion */]));



/***/ }),
/* 16 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RowlineBrick; });

var RowlineBrick = /** @class */ (function () {
    function RowlineBrick(controller, rect, color) {
        this.controller = controller;
        this.color = color;
        this.isPageBreak = false;
        this.xLeft = rect.xLeft;
        this.xRight = rect.xRight;
        this.yTop = rect.yTop;
        this.yBot = rect.yBot;
    }
    Object.defineProperty(RowlineBrick.prototype, "width", {
        get: function () {
            return this.xRight - this.xLeft;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RowlineBrick.prototype, "height", {
        get: function () {
            return this.yBot - this.yTop;
        },
        enumerable: false,
        configurable: true
    });
    RowlineBrick.prototype.render = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var oldDrawColor;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                if (this.color !== null) {
                    oldDrawColor = this.controller.doc.getDrawColor();
                    this.controller.doc.setDrawColor(this.color);
                    this.controller.doc.line(this.xLeft, this.yTop, this.xRight, this.yTop);
                    this.controller.doc.setDrawColor(oldDrawColor);
                }
                return [2 /*return*/];
            });
        });
    };
    RowlineBrick.prototype.unfold = function () {
        return [this];
    };
    RowlineBrick.prototype.translateX = function (_) { };
    return RowlineBrick;
}());



/***/ }),
/* 17 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_textfield__ = __webpack_require__(33);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TextBoxBrick; });



var TextBoxBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(TextBoxBrick, _super);
    function TextBoxBrick(question, controller, rect, isQuestion, isMultiline, index) {
        if (isQuestion === void 0) { isQuestion = true; }
        if (isMultiline === void 0) { isMultiline = false; }
        if (index === void 0) { index = 0; }
        var _this = _super.call(this, question, controller, rect, isQuestion, question.id + (isQuestion ? '' : '_comment' + index), __WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].getQuestionOrCommentValue(question, isQuestion), isQuestion && question.locPlaceHolder ? __WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].getLocString(question.locPlaceHolder) : '', question.isReadOnly, isMultiline, question.inputType) || this;
        _this.isQuestion = isQuestion;
        _this.isMultiline = isMultiline;
        return _this;
    }
    return TextBoxBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_textfield__["a" /* TextFieldBrick */]));



/***/ }),
/* 18 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_18__;

/***/ }),
/* 19 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__doc_controller__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pdf_render_pdf_text__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_textbold__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HorizontalAlign; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return VerticalAlign; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return DrawCanvas; });





/**
 * Horizontal alignment types in onRenderHeader and onRenderFooter events
 */
var HorizontalAlign;
(function (HorizontalAlign) {
    HorizontalAlign["NotSet"] = "notset";
    HorizontalAlign["Left"] = "left";
    HorizontalAlign["Center"] = "center";
    HorizontalAlign["Right"] = "right";
})(HorizontalAlign || (HorizontalAlign = {}));
/**
 * Vertical alignment types in onRenderHeader and onRenderFooter events
 */
var VerticalAlign;
(function (VerticalAlign) {
    VerticalAlign["NotSet"] = "notset";
    VerticalAlign["Top"] = "top";
    VerticalAlign["Middle"] = "middle";
    VerticalAlign["Bottom"] = "bottom";
})(VerticalAlign || (VerticalAlign = {}));
/**
 * An object that describes a drawing area and enables you to draw an image or a piece of text within the area. You can access this object within functions that handle `SurveyPDF`'s [`onRenderHeader`](https://surveyjs.io/pdf-generator/documentation/api-reference/surveypdf#onRenderHeader) and [`onRenderFooter`](https://surveyjs.io/pdf-generator/documentation/api-reference/surveypdf#onRenderFooter) events.
 *
 * [View Demo](https://surveyjs.io/pdf-generator/examples/customize-header-and-footer-of-pdf-form/ (linkStyle))
 */
var DrawCanvas = /** @class */ (function () {
    function DrawCanvas(packs, controller, _rect, _countPages, _pageNumber) {
        this.packs = packs;
        this.controller = controller;
        this._rect = _rect;
        this._countPages = _countPages;
        this._pageNumber = _pageNumber;
    }
    Object.defineProperty(DrawCanvas.prototype, "pageCount", {
        /**
         * A total number of pages in the document.
         */
        get: function () {
            return this._countPages;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DrawCanvas.prototype, "countPages", {
        get: function () {
            return this._countPages;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DrawCanvas.prototype, "pageNumber", {
        /**
         * The number of the page that contains the drawing area. Enumeration starts with 1.
         */
        get: function () {
            return this._pageNumber;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DrawCanvas.prototype, "rect", {
        /**
         * An object with coordinates of a rectangle that limits the drawing area. This object contain the following fields: `xLeft`, `xRight`, `yTop`, `yBot`.
         */
        get: function () {
            return this._rect;
        },
        enumerable: false,
        configurable: true
    });
    DrawCanvas.prototype.alignRect = function (rectOptions, itemSize) {
        if (typeof rectOptions.margins === 'undefined') {
            rectOptions.margins = { left: 0.0, right: 0.0, top: 0.0, bot: 0.0 };
        }
        else {
            if (typeof rectOptions.margins.left === 'undefined') {
                rectOptions.margins.left = 0.0;
            }
            if (typeof rectOptions.margins.right === 'undefined') {
                rectOptions.margins.right = 0.0;
            }
            if (typeof rectOptions.margins.top === 'undefined') {
                rectOptions.margins.top = 0.0;
            }
            if (typeof rectOptions.margins.bot === 'undefined') {
                rectOptions.margins.bot = 0.0;
            }
        }
        if (typeof rectOptions.rect === 'undefined') {
            if (typeof rectOptions.horizontalAlign === 'undefined' ||
                rectOptions.horizontalAlign === HorizontalAlign.NotSet) {
                rectOptions.horizontalAlign = HorizontalAlign.Center;
            }
            if (typeof rectOptions.verticalAlign === 'undefined' ||
                rectOptions.verticalAlign === VerticalAlign.NotSet) {
                rectOptions.verticalAlign = VerticalAlign.Middle;
            }
        }
        var rect = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].clone(this.rect);
        if (typeof rectOptions.horizontalAlign !== 'undefined') {
            switch (rectOptions.horizontalAlign) {
                case HorizontalAlign.Left:
                    rect.xLeft = this.rect.xLeft + rectOptions.margins.left;
                    rect.xRight = Math.min(this.rect.xRight - rectOptions.margins.right, this.rect.xLeft + rectOptions.margins.left + itemSize.width);
                    break;
                case HorizontalAlign.Center:
                    rect.xLeft = Math.max(this.rect.xLeft + rectOptions.margins.left, (this.rect.xLeft + this.rect.xRight - itemSize.width) / 2.0);
                    rect.xRight = Math.min(this.rect.xRight - rectOptions.margins.right, (this.rect.xLeft + this.rect.xRight + itemSize.width) / 2.0);
                    break;
                case HorizontalAlign.Right:
                    rect.xLeft = Math.max(this.rect.xLeft + rectOptions.margins.left, this.rect.xRight - rectOptions.margins.right - itemSize.width);
                    rect.xRight = this.rect.xRight - rectOptions.margins.right;
                    break;
            }
        }
        else {
            rect.xLeft = rectOptions.rect.xLeft || this.rect.xLeft;
            rect.xRight = rectOptions.rect.xRight || this.rect.xRight;
        }
        if (typeof rectOptions.verticalAlign !== 'undefined') {
            switch (rectOptions.verticalAlign) {
                case VerticalAlign.Top:
                    rect.yTop = this.rect.yTop + rectOptions.margins.top;
                    rect.yBot = Math.min(this.rect.yBot - rectOptions.margins.bot, this.rect.yTop + rectOptions.margins.top + itemSize.height);
                    break;
                case VerticalAlign.Middle:
                    rect.yTop = Math.max(this.rect.yTop + rectOptions.margins.top, (this.rect.yTop + this.rect.yBot - itemSize.height) / 2.0);
                    rect.yBot = Math.min(this.rect.yBot - rectOptions.margins.bot, (this.rect.yTop + this.rect.yBot + itemSize.height) / 2.0);
                    break;
                case VerticalAlign.Bottom:
                    rect.yTop = Math.max(this.rect.yTop + rectOptions.margins.top, this.rect.yBot - rectOptions.margins.bot - itemSize.height);
                    rect.yBot = this.rect.yBot - rectOptions.margins.bot;
                    break;
            }
        }
        else {
            rect.yTop = rectOptions.rect.yTop || this.rect.yTop;
            rect.yBot = rectOptions.rect.yBot || this.rect.yBot;
        }
        return rect;
    };
    /**
     * Draws a piece of text within the drawing area.
     * @param textOptions An [`IDrawTextOptions`](https://surveyjs.io/pdf-generator/documentation/api-reference/idrawtextoptions) object that configures the drawing.
     */
    DrawCanvas.prototype.drawText = function (textOptions) {
        textOptions = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].clone(textOptions);
        if (typeof textOptions.fontSize === 'undefined') {
            textOptions.fontSize = __WEBPACK_IMPORTED_MODULE_1__doc_controller__["a" /* DocOptions */].FONT_SIZE;
        }
        if (typeof textOptions.isBold === 'undefined') {
            textOptions.isBold = false;
        }
        var textSize = this.controller.measureText(textOptions.text, textOptions.isBold ? 'bold' : 'normal', textOptions.fontSize);
        var textRect = this.alignRect(textOptions, textSize);
        if (!textOptions.isBold) {
            this.packs.push(new __WEBPACK_IMPORTED_MODULE_2__pdf_render_pdf_text__["a" /* TextBrick */](null, this.controller, textRect, textOptions.text));
        }
        else {
            this.packs.push(new __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_textbold__["a" /* TextBoldBrick */](null, this.controller, textRect, textOptions.text));
        }
        this.packs[this.packs.length - 1].fontSize = textOptions.fontSize;
    };
    /**
     * Draws an image within the drawing area.
     * @param imageOptions An [`IDrawImageOptions`](https://surveyjs.io/pdf-generator/documentation/api-reference/idrawimageoptions) object that configures drawing.
     */
    DrawCanvas.prototype.drawImage = function (imageOptions) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var imageSize, imageRect, _a, _b;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        imageOptions = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].clone(imageOptions);
                        if (typeof imageOptions.width === 'undefined') {
                            imageOptions.width = this.rect.xRight - this.rect.xLeft;
                        }
                        if (typeof imageOptions.height === 'undefined') {
                            imageOptions.height = this.rect.yBot - this.rect.yTop;
                        }
                        imageSize = {
                            width: imageOptions.width,
                            height: imageOptions.height
                        };
                        imageRect = this.alignRect(imageOptions, imageSize);
                        this.controller.pushMargins(0, 0);
                        _b = (_a = this.packs).push;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createImageFlat(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createPoint(imageRect, true, true), null, this.controller, { link: imageOptions.base64,
                                width: imageRect.xRight - imageRect.xLeft,
                                height: imageRect.yBot - imageRect.yTop, objectFit: imageOptions.imageFit }, !!imageOptions.imageFit || this.controller.applyImageFit)];
                    case 1:
                        _b.apply(_a, [_c.sent()]);
                        this.controller.popMargins();
                        return [2 /*return*/];
                }
            });
        });
    };
    return DrawCanvas;
}());



/***/ }),
/* 20 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_survey_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__draw_canvas__ = __webpack_require__(19);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return EventAsync; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EventHandler; });




var EventAsync = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(EventAsync, _super);
    function EventAsync() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    EventAsync.prototype.unshift = function (func) {
        if (this.hasFunc(func))
            return;
        if (this.callbacks == null) {
            this.callbacks = new Array();
        }
        this.callbacks.unshift(func);
    };
    EventAsync.prototype.fire = function (sender, options) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var i;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.callbacks == null)
                            return [2 /*return*/];
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < this.callbacks.length)) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.callbacks[i](sender, options)];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3:
                        i++;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    return EventAsync;
}(__WEBPACK_IMPORTED_MODULE_1_survey_core__["EventBase"]));

var EventHandler = /** @class */ (function () {
    function EventHandler() {
    }
    EventHandler.process_header_events = function (survey, controller, packs) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var i;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!survey.haveCommercialLicense) {
                            survey.onRenderHeader.add(function (_, canvas) {
                                canvas.drawText({
                                    text: 'SurveyJS PDF | Please purchase a SurveyJS PDF developer license to use it in your app | https://surveyjs.io/Buy',
                                    fontSize: 10
                                });
                            });
                        }
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < packs.length)) return [3 /*break*/, 5];
                        return [4 /*yield*/, survey.onRenderHeader.fire(survey, new __WEBPACK_IMPORTED_MODULE_2__draw_canvas__["c" /* DrawCanvas */](packs[i], controller, __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].createHeaderRect(controller), packs.length, i + 1))];
                    case 2:
                        _a.sent();
                        return [4 /*yield*/, survey.onRenderFooter.fire(survey, new __WEBPACK_IMPORTED_MODULE_2__draw_canvas__["c" /* DrawCanvas */](packs[i], controller, __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].createFooterRect(controller), packs.length, i + 1))];
                    case 3:
                        _a.sent();
                        _a.label = 4;
                    case 4:
                        i++;
                        return [3 /*break*/, 1];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    return EventHandler;
}());



/***/ }),
/* 21 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__helper_survey__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pdf_render_pdf_text__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flat_question__ = __webpack_require__(3);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatQuestionDefault; });




var FlatQuestionDefault = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatQuestionDefault, _super);
    function FlatQuestionDefault() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    FlatQuestionDefault.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var valueBrick;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_1__helper_survey__["a" /* SurveyHelper */].createTextFlat(point, this.question, this.controller, "".concat(this.question.displayValue), __WEBPACK_IMPORTED_MODULE_2__pdf_render_pdf_text__["a" /* TextBrick */])];
                    case 1:
                        valueBrick = _a.sent();
                        return [2 /*return*/, [valueBrick]];
                }
            });
        });
    };
    return FlatQuestionDefault;
}(__WEBPACK_IMPORTED_MODULE_3__flat_question__["a" /* FlatQuestion */]));



/***/ }),
/* 22 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_survey_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_text__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_composite__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__helper_survey__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__flat_survey__ = __webpack_require__(10);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatMatrixMultiple; });








var FlatMatrixMultiple = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatMatrixMultiple, _super);
    function FlatMatrixMultiple(survey, question, controller, isMultiple) {
        if (isMultiple === void 0) { isMultiple = true; }
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.isMultiple = isMultiple;
        _this.question = question;
        return _this;
    }
    Object.defineProperty(FlatMatrixMultiple.prototype, "visibleRows", {
        get: function () {
            if (!this.visibleRowsValue) {
                this.visibleRowsValue = this.question.renderedTable.rows.filter(function (row) { return row.visible; });
            }
            return this.visibleRowsValue;
        },
        enumerable: false,
        configurable: true
    });
    FlatMatrixMultiple.prototype.generateFlatsCellTitle = function (point, locTitle) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var composite, _a, _b;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        composite = new __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        _b = (_a = composite).addBrick;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].createTextFlat(point, this.question, this.controller, locTitle, __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_text__["a" /* TextBrick */])];
                    case 1:
                        _b.apply(_a, [_c.sent()]);
                        return [2 /*return*/, composite];
                }
            });
        });
    };
    FlatMatrixMultiple.prototype.generateFlatsCell = function (point, cell, location, isWide) {
        if (isWide === void 0) { isWide = true; }
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var composite, flatMultipleColumnsQuestion, itemRect, _a, _b, _c, _d, _e, _f, _g;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_h) {
                switch (_h.label) {
                    case 0:
                        composite = new __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        if (!cell.hasQuestion) return [3 /*break*/, 5];
                        if (!(location == 'footer' && !cell.question.isAnswered)) return [3 /*break*/, 1];
                        return [3 /*break*/, 4];
                    case 1:
                        if (!(isWide && cell.isChoice)) return [3 /*break*/, 2];
                        flatMultipleColumnsQuestion = __WEBPACK_IMPORTED_MODULE_3__flat_repository__["a" /* FlatRepository */].getInstance().create(this.survey, cell.question, this.controller, cell.question.getType());
                        itemRect = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].moveRect(__WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].scaleRect(__WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].createRect(point, this.controller.unitHeight, this.controller.unitHeight), __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].SELECT_ITEM_FLAT_SCALE), point.xLeft);
                        composite.addBrick(flatMultipleColumnsQuestion
                            .generateFlatItem(itemRect, cell.item, cell.choiceIndex));
                        return [3 /*break*/, 4];
                    case 2:
                        cell.question.titleLocation = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].TITLE_LOCATION_MATRIX;
                        _b = (_a = composite.addBrick).apply;
                        _c = [composite];
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].generateQuestionFlats(this.survey, this.controller, cell.question, point)];
                    case 3:
                        _b.apply(_a, _c.concat([_h.sent()]));
                        _h.label = 4;
                    case 4: return [3 /*break*/, 9];
                    case 5:
                        if (!cell.hasTitle) return [3 /*break*/, 9];
                        if (!(location == 'header')) return [3 /*break*/, 7];
                        _e = (_d = composite).addBrick;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].createBoldTextFlat(point, this.question, this.controller, cell.locTitle)];
                    case 6:
                        _e.apply(_d, [_h.sent()]);
                        return [3 /*break*/, 9];
                    case 7:
                        _g = (_f = composite).addBrick;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].createTextFlat(point, this.question, this.controller, cell.locTitle, __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_text__["a" /* TextBrick */])];
                    case 8:
                        _g.apply(_f, [_h.sent()]);
                        _h.label = 9;
                    case 9: return [2 /*return*/, composite];
                }
            });
        });
    };
    Object.defineProperty(FlatMatrixMultiple.prototype, "hasDetailPanel", {
        get: function () {
            var _this = this;
            return this.visibleRows.some(function (renderedRow) { return renderedRow.row && _this.question.hasDetailPanel(renderedRow.row); });
        },
        enumerable: false,
        configurable: true
    });
    FlatMatrixMultiple.prototype.ignoreCell = function (cell, index, location, isWide) {
        if (isWide === void 0) { isWide = true; }
        if (!isWide && location == 'footer' && cell.hasQuestion && !cell.question.isAnswered)
            return true;
        return !(cell.hasQuestion || cell.hasTitle || (this.isMultiple && (this.hasDetailPanel ? index == 1 : index == 0)));
    };
    FlatMatrixMultiple.prototype.getRowLocation = function (row) {
        return row === this.question.renderedTable.headerRow ? 'header' : (this.question.renderedTable.footerRow === row ? 'footer' : undefined);
    };
    FlatMatrixMultiple.prototype.generateFlatsRowHorisontal = function (point, row, columnWidth) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var composite, currPoint, lastRightMargin, cnt, rowLocation, i, cellContent;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        composite = new __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        currPoint = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].clone(point);
                        lastRightMargin = this.controller.paperWidth - this.controller.margins.left +
                            this.controller.unitWidth * __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_COLUMNS;
                        this.controller.pushMargins();
                        cnt = 0;
                        rowLocation = this.getRowLocation(row);
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < row.cells.length)) return [3 /*break*/, 4];
                        if (this.ignoreCell(row.cells[i], i, rowLocation))
                            return [3 /*break*/, 3];
                        this.controller.margins.left = this.controller.paperWidth - lastRightMargin +
                            this.controller.unitWidth * __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_COLUMNS;
                        this.controller.margins.right = this.controller.paperWidth -
                            this.controller.margins.left - columnWidth[cnt];
                        lastRightMargin = this.controller.margins.right;
                        currPoint.xLeft = this.controller.margins.left;
                        return [4 /*yield*/, this.generateFlatsCell(currPoint, row.cells[i], rowLocation)];
                    case 2:
                        cellContent = _a.sent();
                        if (!cellContent.isEmpty) {
                            composite.addBrick(cellContent);
                        }
                        cnt++;
                        _a.label = 3;
                    case 3:
                        i++;
                        return [3 /*break*/, 1];
                    case 4:
                        this.controller.popMargins();
                        return [2 /*return*/, composite];
                }
            });
        });
    };
    FlatMatrixMultiple.prototype.generateFlatsRowVertical = function (point, row) {
        var _a, _b;
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var composite, currPoint, rowLocation, i, _c, _d, _e, _f;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_g) {
                switch (_g.label) {
                    case 0:
                        composite = new __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        currPoint = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].clone(point);
                        rowLocation = this.getRowLocation(row);
                        i = 0;
                        _g.label = 1;
                    case 1:
                        if (!(i < row.cells.length)) return [3 /*break*/, 6];
                        if (this.ignoreCell(row.cells[i], i, rowLocation, false))
                            return [3 /*break*/, 5];
                        if (!(this.question.renderedTable.showHeader && (!this.isMultiple || i > 0) && ((_b = (_a = row.cells[i].cell) === null || _a === void 0 ? void 0 : _a.column) === null || _b === void 0 ? void 0 : _b.locTitle))) return [3 /*break*/, 3];
                        _d = (_c = composite).addBrick;
                        return [4 /*yield*/, this.generateFlatsCellTitle(currPoint, row.cells[i].cell.column.locTitle)];
                    case 2:
                        _d.apply(_c, [_g.sent()]);
                        currPoint.yTop = composite.yBot + FlatMatrixMultiple.GAP_BETWEEN_ROWS * this.controller.unitHeight;
                        _g.label = 3;
                    case 3:
                        _f = (_e = composite).addBrick;
                        return [4 /*yield*/, this.generateFlatsCell(currPoint, row.cells[i], rowLocation, false)];
                    case 4:
                        _f.apply(_e, [_g.sent()]);
                        currPoint.yTop = composite.yBot + FlatMatrixMultiple.GAP_BETWEEN_ROWS * this.controller.unitHeight;
                        _g.label = 5;
                    case 5:
                        i++;
                        return [3 /*break*/, 1];
                    case 6: return [2 /*return*/, composite];
                }
            });
        });
    };
    FlatMatrixMultiple.prototype.getAvalableWidth = function (colCount) {
        return __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].getPageAvailableWidth(this.controller) -
            (colCount - 1) * this.controller.unitWidth * __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_COLUMNS;
    };
    FlatMatrixMultiple.prototype.calculateColumnWidth = function (rows, colCount) {
        var _this = this;
        var availableWidth = this.getAvalableWidth(colCount);
        var remainWidth = availableWidth;
        var remainColCount = colCount;
        var columnWidth = [];
        var unsetCells = [];
        var cells = rows[0].cells.filter(function (cell, index) { return !_this.ignoreCell(cell, index); });
        for (var i = 0; i < colCount; i++) {
            var width = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].parseWidth(cells[i].width, availableWidth, colCount) || 0.0;
            remainWidth -= width;
            if (width !== 0.0) {
                remainColCount--;
            }
            else {
                unsetCells.push(cells[i]);
            }
            columnWidth.push(width);
        }
        if (remainColCount === 0)
            return columnWidth;
        var heuristicWidth = this.controller.measureText(__WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].MATRIX_COLUMN_WIDTH).width;
        unsetCells.sort(function (cell1, cell2) {
            var minWidth1 = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].parseWidth(cell1.minWidth, availableWidth, colCount) || 0.0;
            var minWidth2 = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].parseWidth(cell2.minWidth, availableWidth, colCount) || 0.0;
            return minWidth2 > minWidth1 ? 1 : -1;
        }).forEach(function (cell) {
            var equalWidth = remainWidth / remainColCount;
            var columnMinWidth = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].parseWidth(cell.minWidth, availableWidth, colCount) || 0.0;
            if (columnMinWidth > equalWidth && columnMinWidth > heuristicWidth) {
                remainWidth -= columnMinWidth;
                remainColCount--;
            }
            columnWidth[cells.indexOf(cell)] = Math.max(heuristicWidth, columnMinWidth, equalWidth);
        });
        return columnWidth;
    };
    FlatMatrixMultiple.prototype.generateOneRow = function (point, row, isWide, columnWidth) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!isWide) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.generateFlatsRowHorisontal(point, row, columnWidth)];
                    case 1: return [2 /*return*/, _a.sent()];
                    case 2: return [4 /*yield*/, this.generateFlatsRowVertical(point, row)];
                    case 3: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    FlatMatrixMultiple.prototype.generateFlatsRows = function (point, rows, colCount, isWide) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var currPoint, rowsFlats, i, rowFlat, currentDetailPanel, j, panelBricks, currComposite, header, currYTop;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        currPoint = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].clone(point);
                        rowsFlats = [];
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < rows.length)) return [3 /*break*/, 6];
                        return [4 /*yield*/, this.generateOneRow(currPoint, rows[i], isWide, this.calculateColumnWidth(rows, colCount))];
                    case 2:
                        rowFlat = _a.sent();
                        if (rowFlat.isEmpty && !(rows[i].row && rows[i].row.hasPanel))
                            return [3 /*break*/, 5];
                        if (!rowFlat.isEmpty) {
                            if (i !== rows.length - 1) {
                                currPoint.yTop = rowFlat.yBot;
                                rowFlat.addBrick(__WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].createRowlineFlat(currPoint, this.controller));
                            }
                            rowsFlats.push(rowFlat);
                            currPoint.yTop = rowFlat.yBot + FlatMatrixMultiple.GAP_BETWEEN_ROWS * this.controller.unitHeight;
                        }
                        if (!(!!rows[i].row && rows[i].row.hasPanel)) return [3 /*break*/, 5];
                        rows[i].row.showDetailPanel();
                        currentDetailPanel = rows[i].row.detailPanel;
                        for (j = 0; j < currentDetailPanel.questions.length; j++) {
                            currentDetailPanel.questions[j].id += '_' + i;
                        }
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_7__flat_survey__["a" /* FlatSurvey */].generateFlatsPanel(this.survey, this.controller, currentDetailPanel, currPoint)];
                    case 3:
                        panelBricks = _a.sent();
                        currComposite = new __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        currComposite.addBrick.apply(currComposite, panelBricks);
                        currPoint.yTop = currComposite.yBot + FlatMatrixMultiple.GAP_BETWEEN_ROWS * this.controller.unitHeight;
                        rowsFlats.push(currComposite);
                        if (!(i !== rows.length - 1 && this.question.renderedTable.showHeader && isWide)) return [3 /*break*/, 5];
                        return [4 /*yield*/, this.generateOneRow(currPoint, rows[0], isWide, this.calculateColumnWidth(rows, colCount))];
                    case 4:
                        header = _a.sent();
                        currYTop = currComposite.yBot;
                        if (!header.isEmpty) {
                            currYTop = header.yBot;
                            rowsFlats.push(header);
                        }
                        currPoint.yTop = currYTop + FlatMatrixMultiple.GAP_BETWEEN_ROWS * this.controller.unitHeight;
                        _a.label = 5;
                    case 5:
                        i++;
                        return [3 /*break*/, 1];
                    case 6: return [2 /*return*/, rowsFlats];
                }
            });
        });
    };
    FlatMatrixMultiple.prototype.calculateIsWide = function (table, colCount) {
        var rows = [];
        if (table.showHeader) {
            rows.push(table.headerRow);
        }
        rows.push.apply(rows, this.visibleRows);
        if (rows.length === 0)
            return true;
        var columnWidthSum = this.calculateColumnWidth(rows, colCount).reduce(function (widthSum, width) { return widthSum += width; }, 0);
        return this.question.renderAs !== 'list' && this.controller.matrixRenderAs !== 'list' && Math.floor(columnWidthSum) <= Math.floor(this.getAvalableWidth(colCount));
    };
    FlatMatrixMultiple.prototype.getRowsToRender = function (table, isVertical, isWide) {
        var rows = [];
        var renderedRows = this.visibleRows;
        if (table.showHeader && isWide)
            rows.push(table.headerRow);
        rows.push.apply(rows, renderedRows);
        if (table.hasRemoveRows && isVertical)
            rows.pop();
        if (table.showFooter)
            rows.push(table.footerRow);
        return rows;
    };
    FlatMatrixMultiple.prototype.getColCount = function (table, renderedRows) {
        var _this = this;
        if (!!renderedRows[0]) {
            return renderedRows[0].cells.filter(function (cell, index) { return !_this.ignoreCell(cell, index); }).length;
        }
        else {
            return table.showHeader && table.headerRow ? table.headerRow.cells.length :
                table.showFooter && table.footerRow ? table.footerRow.cells.length : 0;
        }
    };
    FlatMatrixMultiple.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var table, isVertical, colCount, isWide, rows;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        table = this.question.renderedTable;
                        isVertical = this.question.columnLayout === 'vertical';
                        colCount = this.getColCount(table, this.visibleRows);
                        if (colCount === 0 && !this.hasDetailPanel) {
                            return [2 /*return*/, [new __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_composite__["a" /* CompositeBrick */](__WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].createRowlineFlat(point, this.controller))]];
                        }
                        isWide = this.calculateIsWide(table, colCount);
                        if (!isWide) {
                            this.question.isMobile = true;
                            isVertical = false;
                            table = this.question.renderedTable;
                            this.visibleRowsValue = undefined;
                            colCount = this.getColCount(table, this.visibleRows);
                        }
                        rows = this.getRowsToRender(table, isVertical, isWide);
                        return [4 /*yield*/, this.generateFlatsRows(point, rows, colCount, isWide)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    FlatMatrixMultiple.GAP_BETWEEN_ROWS = 0.5;
    return FlatMatrixMultiple;
}(__WEBPACK_IMPORTED_MODULE_2__flat_question__["a" /* FlatQuestion */]));

__WEBPACK_IMPORTED_MODULE_1_survey_core__["Serializer"].removeProperty('matrixdropdown', 'renderAs');
__WEBPACK_IMPORTED_MODULE_1_survey_core__["Serializer"].addProperty('matrixdropdown', {
    name: 'renderAs',
    default: 'auto',
    visible: false,
    choices: ['auto', 'list']
});
__WEBPACK_IMPORTED_MODULE_3__flat_repository__["a" /* FlatRepository */].getInstance().register('matrixdropdown', FlatMatrixMultiple);


/***/ }),
/* 23 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_node_interval_tree__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_node_interval_tree___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_node_interval_tree__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PagePacker; });


var PagePacker = /** @class */ (function () {
    function PagePacker() {
    }
    PagePacker.findBotInterval = function (tree, xLeft, xRight, options) {
        var intervals = tree.search(xLeft, xRight);
        intervals.push({
            pageIndex: 0, xLeft: options.margins.left, xRight: options.margins.left,
            yBot: options.margins.top, absBot: options.margins.top
        });
        return intervals.reduce(function (mx, cr) {
            if (Math.abs(cr.xRight - xLeft) < __WEBPACK_IMPORTED_MODULE_1__helper_survey__["a" /* SurveyHelper */].EPSILON ||
                Math.abs(cr.xLeft - xRight) < __WEBPACK_IMPORTED_MODULE_1__helper_survey__["a" /* SurveyHelper */].EPSILON)
                return mx;
            if (cr.pageIndex < mx.pageIndex)
                return mx;
            if (cr.pageIndex > mx.pageIndex)
                return cr;
            return cr.yBot > mx.yBot ? cr : mx;
        }, intervals[intervals.length - 1]);
    };
    PagePacker.addPack = function (packs, index, brick) {
        for (var i = packs.length; i <= index; i++) {
            packs.push([]);
        }
        packs[index].push(brick);
    };
    PagePacker.pack = function (flats, controller) {
        var pageHeight = controller.paperHeight -
            controller.margins.top - controller.margins.bot;
        var unfoldFlats = [];
        flats.forEach(function (flatsPage) {
            unfoldFlats.push([]);
            flatsPage.forEach(function (flat) {
                var _a;
                if (flat.height > pageHeight + __WEBPACK_IMPORTED_MODULE_1__helper_survey__["a" /* SurveyHelper */].EPSILON) {
                    (_a = unfoldFlats[unfoldFlats.length - 1]).push.apply(_a, flat.unfold());
                }
                else
                    unfoldFlats[unfoldFlats.length - 1].push(flat);
            });
        });
        unfoldFlats.forEach(function (unfoldFlatsPage) {
            unfoldFlatsPage.sort(function (a, b) {
                if (a.yTop < b.yTop)
                    return -1;
                if (a.yTop > b.yTop)
                    return 1;
                if (a.xLeft > b.xLeft)
                    return 1;
                if (a.xLeft < b.xLeft)
                    return -1;
                return 0;
            });
        });
        var pageIndexModel = 0;
        var packs = [];
        var pageBot = controller.paperHeight - controller.margins.bot;
        unfoldFlats.forEach(function (unfoldFlatsPage) {
            var tree = new __WEBPACK_IMPORTED_MODULE_0_node_interval_tree___default.a();
            var pageIndexShift = 0;
            unfoldFlatsPage.forEach(function (flat) {
                var _a = PagePacker.findBotInterval(tree, flat.xLeft, flat.xRight, controller), pageIndex = _a.pageIndex, yBot = _a.yBot, absBot = _a.absBot;
                var height = flat.height;
                flat.yTop = yBot + flat.yTop - absBot;
                if (Math.abs(flat.yTop - controller.margins.top) > __WEBPACK_IMPORTED_MODULE_1__helper_survey__["a" /* SurveyHelper */].EPSILON &&
                    flat.yTop + height > pageBot + __WEBPACK_IMPORTED_MODULE_1__helper_survey__["a" /* SurveyHelper */].EPSILON || flat.isPageBreak) {
                    flat.yTop = controller.margins.top;
                    pageIndex++;
                    pageIndexShift = Math.max(pageIndexShift, pageIndex);
                }
                tree.insert(flat.xLeft, flat.xRight, {
                    pageIndex: pageIndex,
                    xLeft: flat.xLeft, xRight: flat.xRight,
                    yBot: flat.yTop + height, absBot: flat.yBot
                });
                flat.yBot = flat.yTop + height;
                PagePacker.addPack(packs, pageIndexModel + pageIndex, flat);
            });
            pageIndexModel += pageIndexShift + 1;
        });
        return packs;
    };
    return PagePacker;
}());



/***/ }),
/* 24 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_checkitem__ = __webpack_require__(11);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BooleanItemBrick; });


var BooleanItemBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(BooleanItemBrick, _super);
    function BooleanItemBrick(question, controller, rect) {
        return _super.call(this, controller, rect, question.id, { question: question, readOnly: question.isReadOnly, checked: question.checkedValue }) || this;
    }
    return BooleanItemBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_checkitem__["a" /* CheckItemBrick */]));



/***/ }),
/* 25 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_checkitem__ = __webpack_require__(11);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CheckboxItemBrick; });


var CheckboxItemBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(CheckboxItemBrick, _super);
    function CheckboxItemBrick(question, controller, rect, item, index) {
        return _super.call(this, controller, rect, question.id + 'index' + index, { question: question, readOnly: question.isReadOnly || !item.isEnabled, item: item, checked: question.isItemSelected(item), index: index }) || this;
    }
    return CheckboxItemBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_checkitem__["a" /* CheckItemBrick */]));



/***/ }),
/* 26 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_survey_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pdf_textbox__ = __webpack_require__(17);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommentBrick; });



var CommentBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(CommentBrick, _super);
    function CommentBrick(question, controller, rect, isQuestion, index) {
        if (index === void 0) { index = 0; }
        var _this = _super.call(this, question, controller, rect, isQuestion, true, index) || this;
        _this.controller = controller;
        return _this;
    }
    CommentBrick.prototype.shouldRenderFlatBorders = function () {
        if (this.isQuestion && this.question.getType() !== 'comment')
            return _super.prototype.shouldRenderFlatBorders.call(this);
        return __WEBPACK_IMPORTED_MODULE_1_survey_core__["settings"].readOnlyCommentRenderMode === 'textarea';
    };
    return CommentBrick;
}(__WEBPACK_IMPORTED_MODULE_2__pdf_textbox__["a" /* TextBoxBrick */]));



/***/ }),
/* 27 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_brick__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DropdownBrick; });



var DropdownBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(DropdownBrick, _super);
    function DropdownBrick(question, controller, rect) {
        var _this = _super.call(this, question, controller, rect) || this;
        _this.controller = controller;
        _this.question = question;
        return _this;
    }
    DropdownBrick.prototype.renderInteractive = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var comboBox, options;
            var _this = this;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                comboBox = new this.controller.doc.AcroFormComboBox();
                comboBox.fieldName = this.question.id;
                comboBox.Rect = __WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].createAcroformRect(__WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].scaleRect(this, __WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].formScale(this.controller, this)));
                comboBox.edit = false;
                comboBox.color = this.textColor;
                options = [];
                if (this.question.showOptionsCaption) {
                    options.push(this.getCorrectedText(this.question.optionsCaption));
                }
                this.question.visibleChoices.forEach(function (item) {
                    options.push(_this.getCorrectedText(__WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].getLocString(item.locText)));
                });
                comboBox.setOptions(options);
                comboBox.fontName = this.controller.fontName;
                comboBox.fontSize = this.fontSize;
                comboBox.readOnly = this.question.isReadOnly;
                comboBox.isUnicode = __WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].isCustomFont(this.controller, comboBox.fontName);
                comboBox.V = this.getCorrectedText(__WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].getDropdownQuestionValue(this.question));
                this.controller.doc.addField(comboBox);
                __WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].renderFlatBorders(this.controller, this);
                return [2 /*return*/];
            });
        });
    };
    return DropdownBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_brick__["a" /* PdfBrick */]));



/***/ }),
/* 28 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_brick__ = __webpack_require__(7);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HTMLBrick; });


var HTMLBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(HTMLBrick, _super);
    function HTMLBrick(question, controller, rect, html, isImage) {
        if (isImage === void 0) { isImage = false; }
        var _this = _super.call(this, question, controller, rect) || this;
        _this.html = html;
        if (isImage) {
            _this.margins = {
                top: 0.0,
                bottom: 0.0
            };
        }
        else {
            _this.margins = {
                top: controller.margins.top,
                bottom: controller.margins.bot
            };
        }
        return _this;
    }
    HTMLBrick.prototype.renderInteractive = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var oldFontSize;
            var _this = this;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        oldFontSize = this.controller.fontSize;
                        this.controller.fontSize = this.fontSize;
                        return [4 /*yield*/, new Promise(function (resolve) {
                                _this.controller.doc.fromHTML(_this.html, _this.xLeft, _this.yTop, {
                                    width: _this.width, pagesplit: true,
                                }, function () {
                                    [].slice.call(document.querySelectorAll('.sjs-pdf-hidden-html-div')).forEach(function (el) {
                                        el.parentNode.removeChild(el);
                                    });
                                    resolve();
                                }, _this.margins);
                            })];
                    case 1:
                        _a.sent();
                        this.controller.fontSize = oldFontSize;
                        return [2 /*return*/];
                }
            });
        });
    };
    return HTMLBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_brick__["a" /* PdfBrick */]));



/***/ }),
/* 29 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_brick__ = __webpack_require__(7);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ImageBrick; });


var ImageBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(ImageBrick, _super);
    function ImageBrick(question, controller, image, point, originalWidth, originalHeight) {
        var _this = _super.call(this, question, controller, {
            xLeft: point.xLeft,
            xRight: point.xLeft + (originalWidth || 0),
            yTop: point.yTop,
            yBot: point.yTop + (originalHeight || 0)
        }) || this;
        _this.image = image;
        _this.originalWidth = originalWidth;
        _this.originalHeight = originalHeight;
        _this.isPageBreak = _this.originalHeight === undefined;
        return _this;
    }
    ImageBrick.prototype.renderInteractive = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var _this = this;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, new Promise(function (resolve) {
                            try {
                                _this.controller.doc.addImage(_this.image, 'PNG', _this.xLeft, _this.yTop, _this.originalWidth, _this.originalHeight);
                            }
                            finally {
                                resolve();
                            }
                        })];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return ImageBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_brick__["a" /* PdfBrick */]));



/***/ }),
/* 30 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_text__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LinkBrick; });



var LinkBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(LinkBrick, _super);
    function LinkBrick(textFlat, link) {
        var _this = _super.call(this, textFlat.question, textFlat.controller, textFlat, textFlat.text) || this;
        _this.link = link;
        _this.textColor = LinkBrick.COLOR;
        return _this;
    }
    LinkBrick.prototype.renderInteractive = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var oldTextColor, descent, yTopLink;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        oldTextColor = this.controller.doc.getTextColor();
                        this.controller.doc.setTextColor(__WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].BACKGROUND_COLOR);
                        descent = this.controller.unitHeight *
                            (this.controller.doc.getLineHeightFactor() -
                                LinkBrick.SCALE_FACTOR_MAGIC);
                        yTopLink = this.yTop +
                            (this.yBot - this.yTop) - descent;
                        this.controller.doc.textWithLink(this.text, this.xLeft, yTopLink, { url: this.link });
                        return [4 /*yield*/, _super.prototype.renderInteractive.call(this)];
                    case 1:
                        _a.sent();
                        this.controller.doc.setTextColor(oldTextColor);
                        return [2 /*return*/];
                }
            });
        });
    };
    LinkBrick.prototype.renderReadOnly = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (__WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].getReadonlyRenderAs(this.question, this.controller) !== 'text') {
                            return [2 /*return*/, this.renderInteractive()];
                        }
                        return [4 /*yield*/, _super.prototype.renderInteractive.call(this)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    LinkBrick.SCALE_FACTOR_MAGIC = 0.955;
    LinkBrick.COLOR = '#0000EE';
    return LinkBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_text__["a" /* TextBrick */]));



/***/ }),
/* 31 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_brick__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pdf_text__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return RadioGroupWrap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RadioItemBrick; });




var RadioGroupWrap = /** @class */ (function () {
    function RadioGroupWrap(name, controller, context) {
        this.name = name;
        this.controller = controller;
        this.context = context;
    }
    RadioGroupWrap.prototype.addToPdf = function (color) {
        var _a;
        this._radioGroup = new this.controller.doc.AcroFormRadioButton();
        var options = {};
        options.fieldName = this.name;
        options.readOnly = this.readOnly;
        options.color = color;
        options.context = this.context;
        (_a = this.context.question.survey) === null || _a === void 0 ? void 0 : _a.getUpdatedRadioGroupWrapOptions(options);
        this._radioGroup.fieldName = options.fieldName;
        this._radioGroup.readOnly = options.readOnly;
        this._radioGroup.color = options.color;
        this._radioGroup.value = '';
        this.controller.doc.addField(this._radioGroup);
    };
    Object.defineProperty(RadioGroupWrap.prototype, "radioGroup", {
        get: function () {
            return this._radioGroup;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RadioGroupWrap.prototype, "readOnly", {
        get: function () {
            return this.context.readOnly;
        },
        enumerable: false,
        configurable: true
    });
    return RadioGroupWrap;
}());

var RadioItemBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(RadioItemBrick, _super);
    function RadioItemBrick(controller, rect, context, radioGroupWrap) {
        var _this = _super.call(this, context.question, controller, rect) || this;
        _this.context = context;
        _this.radioGroupWrap = radioGroupWrap;
        _this.textColor = _this.formBorderColor;
        return _this;
    }
    RadioItemBrick.prototype.getShouldRenderReadOnly = function () {
        return this.radioGroupWrap.readOnly && __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].getReadonlyRenderAs(this.question, this.controller) !== 'acroform' || this.controller.compress;
    };
    RadioItemBrick.prototype.renderInteractive = function () {
        var _a;
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var options, formScale, radioButton;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_b) {
                if (this.context.index == 0) {
                    this.radioGroupWrap.addToPdf(this.formBorderColor);
                }
                options = {};
                options.fieldName = this.radioGroupWrap.name + 'index' + this.context.index;
                formScale = __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].formScale(this.controller, this);
                options.Rect = __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].createAcroformRect(__WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].scaleRect(this, formScale));
                options.color = this.formBorderColor;
                options.appearance = this.controller.doc.AcroForm.Appearance.RadioButton.Circle;
                options.radioGroup = this.radioGroupWrap.radioGroup;
                options.context = this.context;
                (_a = this.context.question.survey) === null || _a === void 0 ? void 0 : _a.getUpdatedRadioItemAcroformOptions(options);
                radioButton = this.radioGroupWrap.radioGroup.createOption(options.fieldName);
                if (this.context.checked) {
                    if (!options.AS) {
                        radioButton.AS = '/' + options.fieldName;
                    }
                    if (!this.radioGroupWrap.radioGroup.value) {
                        this.radioGroupWrap.radioGroup.value = options.fieldName;
                    }
                }
                else {
                    if (!options.AS) {
                        options.AS = '/Off';
                    }
                }
                radioButton.Rect = options.Rect;
                radioButton.color = options.color;
                __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].renderFlatBorders(this.controller, this);
                this.radioGroupWrap.radioGroup.setAppearance(options.appearance);
                return [2 /*return*/];
            });
        });
    };
    RadioItemBrick.prototype.renderReadOnly = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var radiomarkerPoint, oldFontSize, oldFontName, radiomarkerSize, radiomarkerFlat;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].renderFlatBorders(this.controller, this);
                        if (!this.context.checked) return [3 /*break*/, 3];
                        radiomarkerPoint = __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].createPoint(this, true, true);
                        oldFontSize = this.controller.fontSize;
                        oldFontName = this.controller.fontName;
                        this.controller.fontName = RadioItemBrick.RADIOMARKER_READONLY_FONT;
                        this.controller.fontSize = oldFontSize *
                            RadioItemBrick.RADIOMARKER_READONLY_FONT_SIZE_SCALE;
                        radiomarkerSize = this.controller.measureText(RadioItemBrick.RADIOMARKER_READONLY_SYMBOL);
                        radiomarkerPoint.xLeft += this.width / 2.0 - radiomarkerSize.width / 2.0;
                        radiomarkerPoint.yTop += this.height / 2.0 - radiomarkerSize.height / 2.0;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].createTextFlat(radiomarkerPoint, this.question, this.controller, RadioItemBrick.RADIOMARKER_READONLY_SYMBOL, __WEBPACK_IMPORTED_MODULE_2__pdf_text__["a" /* TextBrick */])];
                    case 1:
                        radiomarkerFlat = _a.sent();
                        radiomarkerFlat.unfold()[0].textColor = this.textColor;
                        return [4 /*yield*/, radiomarkerFlat.render()];
                    case 2:
                        _a.sent();
                        this.controller.fontSize = oldFontSize;
                        this.controller.fontName = oldFontName;
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    RadioItemBrick.RADIOMARKER_READONLY_SYMBOL = 'l';
    RadioItemBrick.RADIOMARKER_READONLY_FONT = 'zapfdingbats';
    RadioItemBrick.RADIOMARKER_READONLY_FONT_SIZE_SCALE = 1.0 - ((2.0 + Math.E) / 10.0);
    return RadioItemBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_brick__["a" /* PdfBrick */]));



/***/ }),
/* 32 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_brick__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pdf_text__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pdf_checkitem__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RankingItemBrick; });





var RankingItemBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(RankingItemBrick, _super);
    function RankingItemBrick(question, controller, rect, mark) {
        var _this = _super.call(this, question, controller, rect) || this;
        _this.mark = mark;
        _this.question = question;
        _this.textColor = _this.formBorderColor;
        return _this;
    }
    RankingItemBrick.prototype.renderInteractive = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var markPoint, oldFontSize, markSize, markFlat;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].renderFlatBorders(this.controller, this);
                        markPoint = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createPoint(this, true, true);
                        oldFontSize = this.controller.fontSize;
                        this.controller.fontSize = oldFontSize *
                            __WEBPACK_IMPORTED_MODULE_3__pdf_checkitem__["a" /* CheckItemBrick */].CHECKMARK_READONLY_FONT_SIZE_SCALE;
                        markSize = this.controller.measureText(this.mark);
                        markPoint.xLeft += this.width / 2.0 - markSize.width / 2.0;
                        markPoint.yTop += this.height / 2.0 - markSize.height / 2.0;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createTextFlat(markPoint, this.question, this.controller, this.mark, __WEBPACK_IMPORTED_MODULE_2__pdf_text__["a" /* TextBrick */])];
                    case 1:
                        markFlat = _a.sent();
                        markFlat.unfold()[0].textColor = this.textColor;
                        this.controller.fontSize = oldFontSize;
                        return [4 /*yield*/, markFlat.render()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return RankingItemBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_brick__["a" /* PdfBrick */]));



/***/ }),
/* 33 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_survey_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pdf_brick__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__helper_survey__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pdf_composite__ = __webpack_require__(5);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TextFieldBrick; });





var TextFieldBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(TextFieldBrick, _super);
    function TextFieldBrick(question, controller, rect, isQuestion, fieldName, value, placeholder, isReadOnly, isMultiline, inputType) {
        var _this = _super.call(this, question, controller, rect) || this;
        _this.isQuestion = isQuestion;
        _this.fieldName = fieldName;
        _this.value = value;
        _this.placeholder = placeholder;
        _this.isReadOnly = isReadOnly;
        _this.isMultiline = isMultiline;
        _this.inputType = inputType;
        _this.question = question;
        return _this;
    }
    TextFieldBrick.prototype.renderColorQuestion = function () {
        var oldFillColor = this.controller.doc.getFillColor();
        this.controller.doc.setFillColor(this.question.value || 'black');
        this.controller.doc.rect(this.xLeft, this.yTop, this.width, this.height, 'F');
        this.controller.doc.setFillColor(oldFillColor);
    };
    TextFieldBrick.prototype.renderInteractive = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var inputField, formScale;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                if (this.inputType === 'color') {
                    this.renderColorQuestion();
                    return [2 /*return*/];
                }
                inputField = this.inputType === 'password' ?
                    new this.controller.doc.AcroFormPasswordField() :
                    new this.controller.doc.AcroFormTextField();
                inputField.fieldName = this.fieldName;
                inputField.fontName = this.controller.fontName;
                inputField.fontSize = this.fontSize;
                inputField.isUnicode = __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].isCustomFont(this.controller, inputField.fontName);
                if (this.inputType !== 'password') {
                    inputField.V = ' ' + this.getCorrectedText(this.value);
                    inputField.DV = ' ' + this.getCorrectedText(this.placeholder);
                }
                else
                    inputField.value = '';
                inputField.multiline = this.isMultiline;
                inputField.readOnly = this.isReadOnly;
                inputField.color = this.textColor;
                formScale = __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].formScale(this.controller, this);
                inputField.maxFontSize = this.controller.fontSize * formScale;
                inputField.Rect = __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].createAcroformRect(__WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].scaleRect(this, formScale));
                this.controller.doc.addField(inputField);
                __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].renderFlatBorders(this.controller, this);
                return [2 /*return*/];
            });
        });
    };
    TextFieldBrick.prototype.shouldRenderFlatBorders = function () {
        return __WEBPACK_IMPORTED_MODULE_1_survey_core__["settings"].readOnlyTextRenderMode === 'input';
    };
    TextFieldBrick.prototype.getShouldRenderReadOnly = function () {
        return __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].shouldRenderReadOnly(this.question, this.controller, this.isReadOnly);
    };
    Object.defineProperty(TextFieldBrick.prototype, "textBrick", {
        get: function () {
            return this._textBrick;
        },
        set: function (val) {
            var _this = this;
            this._textBrick = val;
            var unFoldedBricks = val.unfold();
            var bricksCount = unFoldedBricks.length;
            var renderedBricksCount = 0;
            var bricksByPage = {};
            var afterRenderTextBrickCallback = function (brick) {
                if (_this.shouldRenderFlatBorders()) {
                    renderedBricksCount++;
                    var currentPageNumber_1 = _this.controller.getCurrentPageIndex();
                    if (!bricksByPage[currentPageNumber_1]) {
                        bricksByPage[currentPageNumber_1] = [];
                    }
                    bricksByPage[currentPageNumber_1].push(brick);
                    if (renderedBricksCount >= bricksCount) {
                        var keys = Object.keys(bricksByPage);
                        var renderedOnOnePage_1 = keys.length == 1;
                        keys.forEach(function (key) {
                            var compositeBrick = new __WEBPACK_IMPORTED_MODULE_4__pdf_composite__["a" /* CompositeBrick */]();
                            bricksByPage[key].forEach(function (brick) {
                                compositeBrick.addBrick(brick);
                            });
                            var padding = _this.controller.unitHeight * __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].VALUE_READONLY_PADDING_SCALE;
                            var borderRect = {
                                xLeft: _this.xLeft,
                                xRight: _this.xRight,
                                width: _this.width,
                                yTop: renderedOnOnePage_1 ? _this.yTop : compositeBrick.yTop - padding,
                                yBot: renderedOnOnePage_1 ? _this.yBot : compositeBrick.yBot + padding,
                                height: renderedOnOnePage_1 ? _this.height : compositeBrick.height + 2 * padding,
                                formBorderColor: _this.formBorderColor,
                            };
                            _this.controller.setPage(Number(key));
                            __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].renderFlatBorders(_this.controller, borderRect);
                            _this.controller.setPage(currentPageNumber_1);
                        });
                    }
                }
            };
            unFoldedBricks.forEach(function (brick) {
                brick.afterRenderCallback = afterRenderTextBrickCallback.bind(_this, brick);
            });
        },
        enumerable: false,
        configurable: true
    });
    TextFieldBrick.prototype.renderReadOnly = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.controller.pushMargins(this.xLeft, this.controller.paperWidth - this.xRight);
                        if (!(this.inputType === 'color')) return [3 /*break*/, 1];
                        this.renderColorQuestion();
                        return [3 /*break*/, 3];
                    case 1: return [4 /*yield*/, this.textBrick.render()];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3:
                        this.controller.popMargins();
                        return [2 /*return*/];
                }
            });
        });
    };
    TextFieldBrick.prototype.unfold = function () {
        if (this.getShouldRenderReadOnly() && this.inputType !== 'color') {
            return this.textBrick.unfold();
        }
        else {
            return _super.prototype.unfold.call(this);
        }
    };
    TextFieldBrick.prototype.translateX = function (func) {
        var res = func(this.xLeft, this.xRight);
        this._xLeft = res.xLeft;
        this._xRight = res.xRight;
        if (this.textBrick) {
            this.textBrick.translateX(func);
        }
    };
    TextFieldBrick.prototype.setXLeft = function (val) {
        var delta = val - this._xLeft;
        _super.prototype.setXLeft.call(this, val);
        if (this.textBrick) {
            this.textBrick.xLeft = this.textBrick.xLeft + delta;
        }
    };
    TextFieldBrick.prototype.setXRight = function (val) {
        var delta = val - this._xRight;
        _super.prototype.setXRight.call(this, val);
        if (this.textBrick) {
            this.textBrick.xRight = this.textBrick.xRight + delta;
        }
    };
    TextFieldBrick.prototype.setYTop = function (val) {
        var delta = val - this._yTop;
        _super.prototype.setYTop.call(this, val);
        if (this.textBrick) {
            this.textBrick.yTop = this.textBrick.yTop + delta;
        }
    };
    TextFieldBrick.prototype.setYBottom = function (val) {
        var delta = val - this._yBot;
        _super.prototype.setYBottom.call(this, val);
        if (this.textBrick) {
            this.textBrick.yBot = this.textBrick.yBot + delta;
        }
    };
    return TextFieldBrick;
}(__WEBPACK_IMPORTED_MODULE_2__pdf_brick__["a" /* PdfBrick */]));



/***/ }),
/* 34 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_textbold__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TitlePanelBrick; });



var TitlePanelBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(TitlePanelBrick, _super);
    function TitlePanelBrick(question, controller, rect, text) {
        return _super.call(this, question, controller, rect, text) || this;
    }
    TitlePanelBrick.prototype.renderInteractive = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var oldFontSize;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        oldFontSize = this.controller.fontSize;
                        this.controller.fontSize = oldFontSize * __WEBPACK_IMPORTED_MODULE_2__helper_survey__["a" /* SurveyHelper */].TITLE_PANEL_FONT_SIZE_SCALE;
                        return [4 /*yield*/, _super.prototype.renderInteractive.call(this)];
                    case 1:
                        _a.sent();
                        this.controller.fontSize = oldFontSize;
                        return [2 /*return*/];
                }
            });
        });
    };
    return TitlePanelBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_textbold__["a" /* TextBoldBrick */]));



/***/ }),
/* 35 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* unused harmony export AdornersBaseOptions */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return AdornersOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AdornersPanelOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return AdornersPageOptions; });

var AdornersBaseOptions = /** @class */ (function () {
    function AdornersBaseOptions(point, bricks, controller, repository, module) {
        this.point = point;
        this.bricks = bricks;
        this.controller = controller;
        this.repository = repository;
        this.module = module;
    }
    return AdornersBaseOptions;
}());

var AdornersOptions = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(AdornersOptions, _super);
    function AdornersOptions(point, bricks, question, controller, repository, module) {
        var _this = _super.call(this, point, bricks, controller, repository, module) || this;
        _this.question = question;
        return _this;
    }
    return AdornersOptions;
}(AdornersBaseOptions));

var AdornersPanelOptions = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(AdornersPanelOptions, _super);
    function AdornersPanelOptions(point, bricks, panel, controller, repository, module) {
        var _this = _super.call(this, point, bricks, controller, repository, module) || this;
        _this.panel = panel;
        return _this;
    }
    return AdornersPanelOptions;
}(AdornersBaseOptions));

var AdornersPageOptions = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(AdornersPageOptions, _super);
    function AdornersPageOptions(point, bricks, page, controller, repository, module) {
        var _this = _super.call(this, point, bricks, controller, repository, module) || this;
        _this.page = page;
        return _this;
    }
    return AdornersPageOptions;
}(AdornersBaseOptions));



/***/ }),
/* 36 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_survey_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_text__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_booleanitem__ = __webpack_require__(24);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_composite__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__helper_survey__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__flat_radiogroup__ = __webpack_require__(9);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatBooleanCheckbox; });
/* unused harmony export FlatBoolean */









var FlatBooleanCheckbox = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatBooleanCheckbox, _super);
    function FlatBooleanCheckbox(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.controller = controller;
        _this.question = question;
        return _this;
    }
    FlatBooleanCheckbox.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var compositeFlat, height, itemFlat, textPoint, locLabelText, _a, _b;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        compositeFlat = new __WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        height = this.controller.unitHeight;
                        itemFlat = new __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_booleanitem__["a" /* BooleanItemBrick */](this.question, this.controller, __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].moveRect(__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].scaleRect(__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createRect(point, height, height), __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].SELECT_ITEM_FLAT_SCALE), point.xLeft));
                        compositeFlat.addBrick(itemFlat);
                        textPoint = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].clone(point);
                        textPoint.xLeft = itemFlat.xRight + this.controller.unitWidth * __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ITEM_TEXT;
                        locLabelText = this.question.isIndeterminate ? null :
                            this.question.checkedValue ? this.question.locLabelTrue : this.question.locLabelFalse;
                        if (!(locLabelText !== null && locLabelText.renderedHtml !== null)) return [3 /*break*/, 2];
                        _b = (_a = compositeFlat).addBrick;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createTextFlat(textPoint, this.question, this.controller, locLabelText, __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_text__["a" /* TextBrick */])];
                    case 1:
                        _b.apply(_a, [_c.sent()]);
                        _c.label = 2;
                    case 2: return [2 /*return*/, [compositeFlat]];
                }
            });
        });
    };
    return FlatBooleanCheckbox;
}(__WEBPACK_IMPORTED_MODULE_2__flat_question__["a" /* FlatQuestion */]));

var FlatBoolean = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatBoolean, _super);
    function FlatBoolean(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.controller = controller;
        _this.buildItems();
        return _this;
    }
    FlatBoolean.prototype.buildItems = function () {
        var question = this.question;
        var falseChoice = new __WEBPACK_IMPORTED_MODULE_1_survey_core__["ItemValue"](question.valueFalse !== undefined ? question.valueFalse : false);
        var trueChoice = new __WEBPACK_IMPORTED_MODULE_1_survey_core__["ItemValue"](question.valueTrue !== undefined ? question.valueTrue : true);
        falseChoice.locOwner = question;
        falseChoice.setLocText(question.locLabelFalse);
        trueChoice.locOwner = question;
        trueChoice.setLocText(question.locLabelTrue);
        this.items = [falseChoice, trueChoice];
    };
    FlatBoolean.prototype.getVisibleChoices = function () {
        return this.items;
    };
    FlatBoolean.prototype.getColCount = function () {
        return 0;
    };
    return FlatBoolean;
}(__WEBPACK_IMPORTED_MODULE_8__flat_radiogroup__["a" /* FlatRadiogroup */]));

__WEBPACK_IMPORTED_MODULE_3__flat_repository__["a" /* FlatRepository */].getInstance().register('boolean', FlatBoolean);
__WEBPACK_IMPORTED_MODULE_3__flat_repository__["a" /* FlatRepository */].getInstance().register('boolean-checkbox', FlatBooleanCheckbox);


/***/ }),
/* 37 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_selectbase__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_checkboxitem__ = __webpack_require__(25);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatCheckbox; });
/* unused harmony export FlatTagbox */




var FlatCheckbox = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatCheckbox, _super);
    function FlatCheckbox(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.controller = controller;
        _this.question = question;
        return _this;
    }
    FlatCheckbox.prototype.generateFlatItem = function (rect, item, index) {
        return new __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_checkboxitem__["a" /* CheckboxItemBrick */](this.question, this.controller, rect, item, index);
    };
    return FlatCheckbox;
}(__WEBPACK_IMPORTED_MODULE_1__flat_selectbase__["a" /* FlatSelectBase */]));

var FlatTagbox = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatTagbox, _super);
    function FlatTagbox(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.controller = controller;
        _this.question = question;
        return _this;
    }
    FlatTagbox.prototype.getVisibleChoices = function () {
        if (this.controller.tagboxSelectedChoicesOnly) {
            return this.question.selectedChoices;
        }
        else {
            return _super.prototype.getVisibleChoices.call(this);
        }
    };
    return FlatTagbox;
}(FlatCheckbox));

__WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().register('tagbox', FlatTagbox);
__WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().register('checkbox', FlatCheckbox);


/***/ }),
/* 38 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatComment; });




var FlatComment = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatComment, _super);
    function FlatComment(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.controller = controller;
        _this.question = question;
        return _this;
    }
    FlatComment.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].createCommentFlat(point, this.question, this.controller, true, { rows: this.question.rows })];
                    case 1: return [2 /*return*/, [_a.sent()]];
                }
            });
        });
    };
    return FlatComment;
}(__WEBPACK_IMPORTED_MODULE_1__flat_question__["a" /* FlatQuestion */]));

__WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().register('comment', FlatComment);


/***/ }),
/* 39 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_repository__ = __webpack_require__(2);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatCustomModel; });



var FlatCustomModel = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatCustomModel, _super);
    function FlatCustomModel(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.controller = controller;
        return _this;
    }
    FlatCustomModel.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var flat;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                flat = __WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().create(this.survey, this.question, this.controller, this.question.getType());
                return [2 /*return*/, flat.generateFlatsContent(point)];
            });
        });
    };
    return FlatCustomModel;
}(__WEBPACK_IMPORTED_MODULE_1__flat_question__["a" /* FlatQuestion */]));

__WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().register('custom_model', FlatCustomModel);


/***/ }),
/* 40 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_dropdown__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatDropdown; });






var FlatDropdown = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatDropdown, _super);
    function FlatDropdown(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.controller = controller;
        _this.question = question;
        return _this;
    }
    FlatDropdown.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var valueBrick, _a, compositeFlat, otherPoint, _b, _c;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        if (!!this.shouldRenderAsComment) return [3 /*break*/, 1];
                        _a = new __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_dropdown__["a" /* DropdownBrick */](this.question, this.controller, __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createTextFieldRect(point, this.controller));
                        return [3 /*break*/, 3];
                    case 1: return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createCommentFlat(point, this.question, this.controller, true, { value: __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].getDropdownQuestionValue(this.question) })];
                    case 2:
                        _a = _d.sent();
                        _d.label = 3;
                    case 3:
                        valueBrick = _a;
                        compositeFlat = new __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__["a" /* CompositeBrick */](valueBrick);
                        if (!this.question.isOtherSelected) return [3 /*break*/, 5];
                        otherPoint = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createPoint(compositeFlat);
                        otherPoint.yTop += this.controller.unitHeight * __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ROWS;
                        _c = (_b = compositeFlat).addBrick;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createCommentFlat(otherPoint, this.question, this.controller, false, { rows: __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].OTHER_ROWS_COUNT })];
                    case 4:
                        _c.apply(_b, [_d.sent()]);
                        _d.label = 5;
                    case 5: return [2 /*return*/, [compositeFlat]];
                }
            });
        });
    };
    return FlatDropdown;
}(__WEBPACK_IMPORTED_MODULE_1__flat_question__["a" /* FlatQuestion */]));

__WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().register('dropdown', FlatDropdown);


/***/ }),
/* 41 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatExpression; });




var FlatExpression = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatExpression, _super);
    function FlatExpression(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.question = question;
        return _this;
    }
    FlatExpression.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].createCommentFlat(point, this.question, this.controller, true, { value: this.question.displayValue, readOnly: true })];
                    case 1: return [2 /*return*/, [_a.sent()]];
                }
            });
        });
    };
    return FlatExpression;
}(__WEBPACK_IMPORTED_MODULE_1__flat_question__["a" /* FlatQuestion */]));

__WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().register('expression', FlatExpression);


/***/ }),
/* 42 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_text__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatFile; });






var FlatFile = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatFile, _super);
    function FlatFile(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.question = question;
        return _this;
    }
    FlatFile.prototype.generateFlatItem = function (point, item) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var compositeFlat, _a, imagePoint, _b, _c;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        _a = __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__["a" /* CompositeBrick */].bind;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createLinkFlat(point, this.question, this.controller, item.name === undefined ? 'image' : item.name, item.content)];
                    case 1:
                        compositeFlat = new (_a.apply(__WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__["a" /* CompositeBrick */], [void 0, _d.sent()]))();
                        if (!__WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].canPreviewImage(this.question, item, item.content)) return [3 /*break*/, 3];
                        imagePoint = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createPoint(compositeFlat);
                        imagePoint.yTop += this.controller.unitHeight * FlatFile.IMAGE_GAP_SCALE;
                        _c = (_b = compositeFlat).addBrick;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createImageFlat(imagePoint, this.question, this.controller, { link: item.content, width: item.imageSize.width, height: item.imageSize.height, objectFit: FlatFile.DEFAULT_IMAGE_FIT })];
                    case 2:
                        _c.apply(_b, [_d.sent()]);
                        _d.label = 3;
                    case 3: return [2 /*return*/, compositeFlat];
                }
            });
        });
    };
    FlatFile.prototype.addLine = function (rowsFlats, currPoint, index) {
        if (index !== this.question.previewValue.length - 1) {
            rowsFlats[rowsFlats.length - 1].addBrick(__WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createRowlineFlat(currPoint, this.controller));
            currPoint.yTop += __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].EPSILON;
            rowsFlats.push(new __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__["a" /* CompositeBrick */]());
        }
    };
    FlatFile.prototype.getImagePreviewContentWidth = function (item) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                return [2 /*return*/, Math.max(item.imageSize.width, FlatFile.TEXT_MIN_SCALE * this.controller.unitWidth)];
            });
        });
    };
    FlatFile.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var rowsFlats, currPoint, yBot, i, item, canPreviewImage, _a, availableWidth, compositeWidth, itemFlat, itemFlat;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!(this.question.previewValue.length === 0)) return [3 /*break*/, 2];
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createTextFlat(point, this.question, this.controller, this.question.noFileChosenCaption, __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_text__["a" /* TextBrick */])];
                    case 1: return [2 /*return*/, [_b.sent()]];
                    case 2:
                        rowsFlats = [new __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__["a" /* CompositeBrick */]()];
                        currPoint = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].clone(point);
                        yBot = currPoint.yTop;
                        i = 0;
                        _b.label = 3;
                    case 3:
                        if (!(i < this.question.previewValue.length)) return [3 /*break*/, 12];
                        item = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["e" /* __assign */])({}, this.question.previewValue[i]);
                        canPreviewImage = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].canPreviewImage(this.question, item, item.content);
                        if (!canPreviewImage) return [3 /*break*/, 5];
                        _a = item;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].getCorrectedImageSize(this.controller, { imageWidth: this.question.imageWidth, imageHeight: this.question.imageHeight, imageLink: this.question.previewValue[i].content, defaultImageWidth: 200, defaultImageHeight: 150 })];
                    case 4:
                        _a.imageSize = _b.sent();
                        _b.label = 5;
                    case 5:
                        availableWidth = this.controller.paperWidth -
                            this.controller.margins.right - currPoint.xLeft;
                        if (!canPreviewImage) return [3 /*break*/, 8];
                        return [4 /*yield*/, this.getImagePreviewContentWidth(item)];
                    case 6:
                        compositeWidth = _b.sent();
                        if (availableWidth < compositeWidth) {
                            currPoint.xLeft = point.xLeft;
                            currPoint.yTop = yBot;
                            this.addLine(rowsFlats, currPoint, i);
                        }
                        this.controller.pushMargins(currPoint.xLeft, this.controller.paperWidth - currPoint.xLeft - compositeWidth);
                        return [4 /*yield*/, this.generateFlatItem(currPoint, item)];
                    case 7:
                        itemFlat = _b.sent();
                        rowsFlats[rowsFlats.length - 1].addBrick(itemFlat);
                        currPoint.xLeft += itemFlat.width;
                        yBot = Math.max(yBot, itemFlat.yBot);
                        this.controller.popMargins();
                        return [3 /*break*/, 10];
                    case 8:
                        if (availableWidth < this.controller.unitWidth) {
                            currPoint.xLeft = point.xLeft;
                            currPoint.yTop = yBot;
                            this.addLine(rowsFlats, currPoint, i);
                        }
                        return [4 /*yield*/, this.generateFlatItem(currPoint, item)];
                    case 9:
                        itemFlat = _b.sent();
                        rowsFlats[rowsFlats.length - 1].addBrick(itemFlat);
                        currPoint.xLeft += itemFlat.xRight - itemFlat.xLeft;
                        yBot = Math.max(yBot, itemFlat.yBot);
                        _b.label = 10;
                    case 10:
                        currPoint.xLeft += this.controller.unitWidth;
                        _b.label = 11;
                    case 11:
                        i++;
                        return [3 /*break*/, 3];
                    case 12: return [2 /*return*/, rowsFlats];
                }
            });
        });
    };
    FlatFile.IMAGE_GAP_SCALE = 0.195;
    FlatFile.TEXT_MIN_SCALE = 5.0;
    FlatFile.DEFAULT_IMAGE_FIT = 'contain';
    return FlatFile;
}(__WEBPACK_IMPORTED_MODULE_1__flat_question__["a" /* FlatQuestion */]));

__WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().register('file', FlatFile);


/***/ }),
/* 43 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_survey_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__helper_survey__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_empty__ = __webpack_require__(12);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatHTML; });






var FlatHTML = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatHTML, _super);
    function FlatHTML(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        return _this;
    }
    FlatHTML.prototype.chooseRender = function (html) {
        if (/<[^>]*style[^<]*>/.test(html) ||
            /<[^>]*table[^<]*>/.test(html) ||
            /&\w+;/.test(html)) {
            return 'image';
        }
        return 'standard';
    };
    FlatHTML.prototype.correctHtml = function (html) {
        FlatHTML.correctHtmlRules.forEach(function (rule) {
            html = html.replace(rule.searchRegExp, rule.replaceString);
        });
        return html;
    };
    FlatHTML.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var renderAs, html, width, _a, url, aspect, height, _b, _c, _d;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        renderAs = this.question.renderAs;
                        if (!__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].hasDocument) {
                            return [2 /*return*/, [new __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_empty__["a" /* EmptyBrick */](__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createRect(point, 0, 0))]];
                        }
                        if (renderAs === 'auto')
                            renderAs = this.controller.htmlRenderAs;
                        if (renderAs === 'auto')
                            renderAs = this.chooseRender(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].getLocString(this.question.locHtml));
                        html = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createHtmlContainerBlock(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].getLocString(this.question.locHtml), this.controller, renderAs);
                        if (!(renderAs === 'image')) return [3 /*break*/, 3];
                        width = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].getPageAvailableWidth(this.controller);
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].htmlToImage(html, width, this.controller)];
                    case 1:
                        _a = _e.sent(), url = _a.url, aspect = _a.aspect;
                        height = width / aspect;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createImageFlat(point, this.question, this.controller, { link: url, width: width, height: height })];
                    case 2: return [2 /*return*/, [_e.sent()]];
                    case 3:
                        _c = (_b = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */]).splitHtmlRect;
                        _d = [this.controller];
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createHTMLFlat(point, this.question, this.controller, this.correctHtml(html))];
                    case 4: return [2 /*return*/, [_c.apply(_b, _d.concat([_e.sent()]))]];
                }
            });
        });
    };
    FlatHTML.correctHtmlRules = [
        { searchRegExp: /(<\/?br\s*?\/?\s*?>\s*){2,}/g, replaceString: '<br>' }
    ];
    return FlatHTML;
}(__WEBPACK_IMPORTED_MODULE_2__flat_question__["a" /* FlatQuestion */]));

__WEBPACK_IMPORTED_MODULE_1_survey_core__["Serializer"].removeProperty('html', 'renderAs');
__WEBPACK_IMPORTED_MODULE_1_survey_core__["Serializer"].addProperty('html', {
    name: 'renderAs',
    default: 'auto',
    visible: false,
    choices: ['auto', 'standard', 'image']
});
__WEBPACK_IMPORTED_MODULE_3__flat_repository__["a" /* FlatRepository */].getInstance().register('html', FlatHTML);


/***/ }),
/* 44 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatImage; });




var FlatImage = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatImage, _super);
    function FlatImage(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.question = question;
        return _this;
    }
    FlatImage.prototype.getCorrectImageSize = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].getCorrectedImageSize(this.controller, { imageWidth: this.question.imageWidth, imageHeight: this.question.imageHeight, imageLink: this.question.imageLink })];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    FlatImage.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var imageSize;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getCorrectImageSize()];
                    case 1:
                        imageSize = _a.sent();
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].createImageFlat(point, this.question, this.controller, { link: this.question.imageLink, width: imageSize.width, height: imageSize.height })];
                    case 2: return [2 /*return*/, [_a.sent()]];
                }
            });
        });
    };
    return FlatImage;
}(__WEBPACK_IMPORTED_MODULE_1__flat_question__["a" /* FlatQuestion */]));

__WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().register('image', FlatImage);


/***/ }),
/* 45 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_text__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__flat_radiogroup__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_checkitem__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_composite__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatImagePicker; });








var FlatImagePicker = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatImagePicker, _super);
    function FlatImagePicker(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.question = question;
        return _this;
    }
    FlatImagePicker.prototype.generateFlatItem = function (point, item, index) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var pageAvailableWidth, imageFlat, compositeFlat, buttonPoint, labelFlat, height, buttonRect;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        pageAvailableWidth = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].getPageAvailableWidth(this.controller);
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createImageFlat(point, this.question, this.controller, { link: item.imageLink, width: pageAvailableWidth, height: pageAvailableWidth / __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].IMAGEPICKER_RATIO })];
                    case 1:
                        imageFlat = _a.sent();
                        compositeFlat = new __WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_composite__["a" /* CompositeBrick */](imageFlat);
                        buttonPoint = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createPoint(compositeFlat);
                        if (!this.question.showLabel) return [3 /*break*/, 3];
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createTextFlat(buttonPoint, this.question, this.controller, item.text || item.value, __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_text__["a" /* TextBrick */])];
                    case 2:
                        labelFlat = _a.sent();
                        compositeFlat.addBrick(labelFlat);
                        buttonPoint = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createPoint(labelFlat);
                        _a.label = 3;
                    case 3:
                        height = this.controller.unitHeight;
                        buttonRect = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createRect(buttonPoint, pageAvailableWidth, height);
                        if (this.question.multiSelect) {
                            compositeFlat.addBrick(new __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_checkitem__["a" /* CheckItemBrick */](this.controller, buttonRect, this.question.id + 'index' + index, { readOnly: this.question.isReadOnly || !item.isEnabled, question: this.question, item: item, checked: this.question.value.indexOf(item.value) !== -1, index: index }));
                        }
                        else {
                            compositeFlat.addBrick(this.radio.generateFlatItem(buttonRect, item, index));
                        }
                        return [2 /*return*/, compositeFlat];
                }
            });
        });
    };
    FlatImagePicker.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var rowsFlats, colWidth, cols, count, rows, currPoint, i, yBot, currMarginLeft, j, index, itemFlat;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.radio = this.question.multiSelect ? null :
                            new __WEBPACK_IMPORTED_MODULE_4__flat_radiogroup__["a" /* FlatRadiogroup */](this.survey, this.question, this.controller);
                        rowsFlats = [new __WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_composite__["a" /* CompositeBrick */]()];
                        colWidth = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].getImagePickerAvailableWidth(this.controller) / __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].IMAGEPICKER_COUNT;
                        cols = ~~(__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].
                            getPageAvailableWidth(this.controller) / colWidth) || 1;
                        count = this.question.visibleChoices.length;
                        cols = cols <= count ? cols : count;
                        rows = ~~(Math.ceil(count / cols));
                        currPoint = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].clone(point);
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < rows)) return [3 /*break*/, 7];
                        yBot = currPoint.yTop;
                        this.controller.pushMargins();
                        currMarginLeft = this.controller.margins.left;
                        j = 0;
                        _a.label = 2;
                    case 2:
                        if (!(j < cols)) return [3 /*break*/, 5];
                        index = i * cols + j;
                        if (index == count)
                            return [3 /*break*/, 5];
                        this.controller.margins.left = currMarginLeft;
                        this.controller.margins.right = this.controller.paperWidth -
                            currMarginLeft - colWidth;
                        currMarginLeft = this.controller.paperWidth -
                            this.controller.margins.right + this.controller.unitWidth;
                        currPoint.xLeft = this.controller.margins.left;
                        return [4 /*yield*/, this.generateFlatItem(currPoint, this.question.visibleChoices[index], index)];
                    case 3:
                        itemFlat = _a.sent();
                        rowsFlats[rowsFlats.length - 1].addBrick(itemFlat);
                        yBot = Math.max(yBot, itemFlat.yBot);
                        _a.label = 4;
                    case 4:
                        j++;
                        return [3 /*break*/, 2];
                    case 5:
                        this.controller.popMargins();
                        currPoint.xLeft = point.xLeft;
                        currPoint.yTop = yBot;
                        if (i !== rows - 1) {
                            rowsFlats[rowsFlats.length - 1].addBrick(__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createRowlineFlat(currPoint, this.controller));
                            currPoint.yTop += __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].EPSILON;
                            rowsFlats.push(new __WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_composite__["a" /* CompositeBrick */]());
                        }
                        _a.label = 6;
                    case 6:
                        i++;
                        return [3 /*break*/, 1];
                    case 7: return [2 /*return*/, rowsFlats];
                }
            });
        });
    };
    return FlatImagePicker;
}(__WEBPACK_IMPORTED_MODULE_1__flat_question__["a" /* FlatQuestion */]));

__WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().register('imagepicker', FlatImagePicker);


/***/ }),
/* 46 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_survey_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flat_radiogroup__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_text__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_composite__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatMatrix; });
/* unused harmony export FlatMatrixRow */








var FlatMatrix = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatMatrix, _super);
    function FlatMatrix(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.controller = controller;
        _this.question = question;
        return _this;
    }
    FlatMatrix.prototype.generateFlatsHeader = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var headers, currPoint, i, _a, _b, compositeBrick;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        headers = [];
                        currPoint = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].clone(point);
                        if (this.question.hasRows) {
                            currPoint.xLeft += this.rowTitleWidth + this.controller.unitWidth * __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_COLUMNS;
                        }
                        i = 0;
                        _c.label = 1;
                    case 1:
                        if (!(i < this.question.visibleColumns.length)) return [3 /*break*/, 4];
                        this.controller.pushMargins();
                        this.controller.margins.left = currPoint.xLeft;
                        this.controller.margins.right += (__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].getPageAvailableWidth(this.controller) - this.columnWidth);
                        _b = (_a = headers).push;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createBoldTextFlat(currPoint, this.question, this.controller, this.question.visibleColumns[i].locText)];
                    case 2:
                        _b.apply(_a, [_c.sent()]);
                        currPoint.xLeft += this.columnWidth + this.controller.unitWidth * __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_COLUMNS;
                        this.controller.popMargins();
                        _c.label = 3;
                    case 3:
                        i++;
                        return [3 /*break*/, 1];
                    case 4:
                        compositeBrick = new (__WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_composite__["a" /* CompositeBrick */].bind.apply(__WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_composite__["a" /* CompositeBrick */], __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["d" /* __spreadArray */])([void 0], headers, false)))();
                        return [2 /*return*/, [compositeBrick, __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createRowlineFlat(__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createPoint(compositeBrick), this.controller)]];
                }
            });
        });
    };
    FlatMatrix.prototype.generateFlatsRows = function (point, isVertical) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var cells, currPoint, i, key, flatsRow;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        cells = [];
                        currPoint = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].clone(point);
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < this.question.visibleRows.length)) return [3 /*break*/, 4];
                        key = 'row' + i;
                        return [4 /*yield*/, new FlatMatrixRow(this.survey, this.question, this.controller, this.question.visibleRows[i], i, key, i == 0, isVertical, this.rowTitleWidth, this.columnWidth).generateFlatsContent(currPoint)];
                    case 2:
                        flatsRow = _a.sent();
                        currPoint = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createPoint(__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].mergeRects.apply(__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */], flatsRow));
                        currPoint.yTop += this.controller.unitHeight * FlatMatrix.GAP_BETWEEN_ROWS;
                        cells.push.apply(cells, flatsRow);
                        _a.label = 3;
                    case 3:
                        i++;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/, cells];
                }
            });
        });
    };
    FlatMatrix.prototype.calculateColumnsWidthes = function () {
        var availableWidth = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].getPageAvailableWidth(this.controller);
        if (this.question.hasRows && this.question.rowTitleWidth) {
            this.controller.pushMargins();
            this.rowTitleWidth = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].parseWidth(this.question.rowTitleWidth, availableWidth);
            this.controller.margins.left += (this.rowTitleWidth + this.controller.unitWidth * __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_COLUMNS);
            this.columnWidth = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].getColumnWidth(this.controller, this.question.visibleColumns.length);
            this.controller.popMargins();
        }
        else {
            this.columnWidth = this.rowTitleWidth = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].getColumnWidth(this.controller, this.question.visibleColumns.length + (this.question.hasRows ? 1 : 0));
        }
    };
    FlatMatrix.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var isVertical, currPoint, cells, headers, _a, _b, _c;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        this.calculateColumnsWidthes();
                        isVertical = this.question.renderAs === 'list' || this.controller.matrixRenderAs === 'list' ||
                            this.columnWidth < this.controller.measureText(__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].MATRIX_COLUMN_WIDTH).width;
                        currPoint = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].clone(point);
                        cells = [];
                        if (!(!isVertical && this.question.showHeader && this.question.visibleColumns.length != 0)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.generateFlatsHeader(currPoint)];
                    case 1:
                        headers = _d.sent();
                        currPoint = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createPoint(__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].mergeRects.apply(__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */], headers));
                        currPoint.yTop += FlatMatrix.GAP_BETWEEN_ROWS * this.controller.unitHeight;
                        cells.push.apply(cells, headers);
                        _d.label = 2;
                    case 2:
                        _b = (_a = cells.push).apply;
                        _c = [cells];
                        return [4 /*yield*/, this.generateFlatsRows(currPoint, isVertical)];
                    case 3:
                        _b.apply(_a, _c.concat([_d.sent()]));
                        return [2 /*return*/, cells];
                }
            });
        });
    };
    FlatMatrix.GAP_BETWEEN_ROWS = 0.5;
    return FlatMatrix;
}(__WEBPACK_IMPORTED_MODULE_2__flat_question__["a" /* FlatQuestion */]));

var FlatMatrixRow = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatMatrixRow, _super);
    function FlatMatrixRow(survey, question, controller, row, rowIndex, key, isFirst, isVertical, rowTitleWidth, columnWidth) {
        if (isFirst === void 0) { isFirst = false; }
        if (isVertical === void 0) { isVertical = false; }
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.controller = controller;
        _this.row = row;
        _this.rowIndex = rowIndex;
        _this.key = key;
        _this.isFirst = isFirst;
        _this.isVertical = isVertical;
        _this.rowTitleWidth = rowTitleWidth;
        _this.columnWidth = columnWidth;
        _this.questionMatrix = question;
        return _this;
    }
    FlatMatrixRow.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var _a;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!this.isVertical) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.generateFlatsVerticallyCells(point)];
                    case 1:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.generateFlatsHorizontallyCells(point)];
                    case 3:
                        _a = _b.sent();
                        _b.label = 4;
                    case 4: return [2 /*return*/, _a];
                }
            });
        });
    };
    FlatMatrixRow.prototype.generateTextComposite = function (point, column, index) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var currPoint, checked, itemRect, radioFlat, cellTextFlat;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        currPoint = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].clone(point);
                        checked = this.row.value == column.value;
                        itemRect = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createRect(currPoint, __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].getPageAvailableWidth(this.controller), this.controller.unitHeight);
                        radioFlat = this.generateFlatItem(itemRect, column, index, this.key, checked, { row: this.row, rowIndex: this.rowIndex });
                        currPoint.yTop = radioFlat.yBot + this.controller.unitHeight * __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ITEM_TEXT;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createTextFlat(currPoint, this.questionMatrix, this.controller, this.questionMatrix.getCellDisplayLocText(this.row.name, column), __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_text__["a" /* TextBrick */])];
                    case 1:
                        cellTextFlat = _a.sent();
                        return [2 /*return*/, new __WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_composite__["a" /* CompositeBrick */](radioFlat, cellTextFlat)];
                }
            });
        });
    };
    FlatMatrixRow.prototype.generateItemCompoiste = function (point, column, index) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var currPoint, checked, itemRect, radioFlat, radioText;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        currPoint = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].clone(point);
                        checked = this.row.value == column.value;
                        itemRect = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createRect(currPoint, this.controller.unitHeight, this.controller.unitHeight);
                        radioFlat = this.generateFlatItem(__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].moveRect(__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].scaleRect(itemRect, __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].SELECT_ITEM_FLAT_SCALE), itemRect.xLeft), column, index, this.key, checked, { row: this.row, rowIndex: this.rowIndex });
                        currPoint.xLeft = radioFlat.xRight + this.controller.unitWidth * __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ITEM_TEXT;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createTextFlat(currPoint, this.questionMatrix, this.controller, column.locText, __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_text__["a" /* TextBrick */])];
                    case 1:
                        radioText = _a.sent();
                        return [2 /*return*/, new __WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_composite__["a" /* CompositeBrick */](radioFlat, radioText)];
                }
            });
        });
    };
    FlatMatrixRow.prototype.generateFlatsHorizontallyCells = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var cells, currPoint, _a, _b, i, column, checked, _c, _d, itemRect, compositeBrick;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        cells = [];
                        currPoint = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].clone(point);
                        if (!this.questionMatrix.hasRows) return [3 /*break*/, 2];
                        this.controller.pushMargins();
                        currPoint.xLeft = this.controller.margins.left;
                        this.controller.margins.right += (__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].getPageAvailableWidth(this.controller) - this.rowTitleWidth);
                        _b = (_a = cells).push;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createTextFlat(currPoint, this.questionMatrix, this.controller, this.row.locText, __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_text__["a" /* TextBrick */])];
                    case 1:
                        _b.apply(_a, [_e.sent()]);
                        currPoint.xLeft += this.rowTitleWidth + this.controller.unitWidth * __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_COLUMNS;
                        this.controller.popMargins();
                        _e.label = 2;
                    case 2:
                        i = 0;
                        _e.label = 3;
                    case 3:
                        if (!(i < this.questionMatrix.visibleColumns.length)) return [3 /*break*/, 8];
                        column = this.questionMatrix.visibleColumns[i];
                        checked = this.row.value == column.value;
                        this.controller.pushMargins();
                        this.controller.margins.left = currPoint.xLeft;
                        this.controller.margins.right += (__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].getPageAvailableWidth(this.controller) - this.columnWidth);
                        if (!this.questionMatrix.hasCellText) return [3 /*break*/, 5];
                        _d = (_c = cells).push;
                        return [4 /*yield*/, this.generateTextComposite(currPoint, column, i)];
                    case 4:
                        _d.apply(_c, [_e.sent()]);
                        return [3 /*break*/, 6];
                    case 5:
                        itemRect = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createRect(currPoint, this.controller.unitHeight, this.controller.unitHeight);
                        cells.push(this.generateFlatItem(__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].moveRect(__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].scaleRect(itemRect, __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].SELECT_ITEM_FLAT_SCALE), currPoint.xLeft), column, i, this.key, checked, { row: this.row, rowIndex: this.rowIndex }));
                        _e.label = 6;
                    case 6:
                        currPoint.xLeft += this.columnWidth + this.controller.unitWidth * __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_COLUMNS;
                        this.controller.popMargins();
                        _e.label = 7;
                    case 7:
                        i++;
                        return [3 /*break*/, 3];
                    case 8:
                        compositeBrick = new (__WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_composite__["a" /* CompositeBrick */].bind.apply(__WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_composite__["a" /* CompositeBrick */], __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["d" /* __spreadArray */])([void 0], cells, false)))();
                        return [2 /*return*/, [compositeBrick, __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createRowlineFlat(__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createPoint(compositeBrick), this.controller)]];
                }
            });
        });
    };
    FlatMatrixRow.prototype.generateFlatsVerticallyCells = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var cells, currPoint, rowTextFlat, _a, _b, _c, compositeBrick;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        cells = [];
                        currPoint = __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].clone(point);
                        if (!this.questionMatrix.hasRows) return [3 /*break*/, 2];
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createTextFlat(currPoint, this.questionMatrix, this.controller, this.row.locText, __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_text__["a" /* TextBrick */])];
                    case 1:
                        rowTextFlat = _d.sent();
                        currPoint.yTop = rowTextFlat.yBot + __WEBPACK_IMPORTED_MODULE_2__flat_question__["a" /* FlatQuestion */].CONTENT_GAP_VERT_SCALE * this.controller.unitHeight;
                        cells.push(rowTextFlat);
                        _d.label = 2;
                    case 2:
                        this.generateFlatComposite = (this.questionMatrix.hasCellText) ? this.generateTextComposite : this.generateItemCompoiste;
                        _b = (_a = cells.push).apply;
                        _c = [cells];
                        return [4 /*yield*/, this.generateVerticallyItems(currPoint, this.questionMatrix.visibleColumns)];
                    case 3:
                        _b.apply(_a, _c.concat([_d.sent()]));
                        compositeBrick = new (__WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_composite__["a" /* CompositeBrick */].bind.apply(__WEBPACK_IMPORTED_MODULE_6__pdf_render_pdf_composite__["a" /* CompositeBrick */], __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["d" /* __spreadArray */])([void 0], cells, false)))();
                        return [2 /*return*/, [compositeBrick, __WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createRowlineFlat(__WEBPACK_IMPORTED_MODULE_7__helper_survey__["a" /* SurveyHelper */].createPoint(compositeBrick), this.controller)]];
                }
            });
        });
    };
    return FlatMatrixRow;
}(__WEBPACK_IMPORTED_MODULE_3__flat_radiogroup__["a" /* FlatRadiogroup */]));

__WEBPACK_IMPORTED_MODULE_1_survey_core__["Serializer"].removeProperty('matrix', 'renderAs');
__WEBPACK_IMPORTED_MODULE_1_survey_core__["Serializer"].addProperty('matrix', {
    name: 'renderAs',
    default: 'auto',
    visible: false,
    choices: ['auto', 'list']
});
__WEBPACK_IMPORTED_MODULE_4__flat_repository__["a" /* FlatRepository */].getInstance().register('matrix', FlatMatrix);


/***/ }),
/* 47 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_survey_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flat_matrixmultiple__ = __webpack_require__(22);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatMatrixDynamic; });




var FlatMatrixDynamic = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatMatrixDynamic, _super);
    function FlatMatrixDynamic(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller, false) || this;
        _this.survey = survey;
        return _this;
    }
    return FlatMatrixDynamic;
}(__WEBPACK_IMPORTED_MODULE_3__flat_matrixmultiple__["a" /* FlatMatrixMultiple */]));

__WEBPACK_IMPORTED_MODULE_1_survey_core__["Serializer"].removeProperty('matrixdynamic', 'renderAs');
__WEBPACK_IMPORTED_MODULE_1_survey_core__["Serializer"].addProperty('matrixdynamic', {
    name: 'renderAs',
    default: 'auto',
    visible: false,
    choices: ['auto', 'list']
});
__WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().register('matrixdynamic', FlatMatrixDynamic);


/***/ }),
/* 48 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_composite__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatMultipleText; });





var FlatMultipleText = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatMultipleText, _super);
    function FlatMultipleText(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.controller = controller;
        _this.question = question;
        return _this;
    }
    FlatMultipleText.prototype.getVisibleRows = function () {
        return this.question.getRows().filter(function (row) { return row.isVisible; });
    };
    FlatMultipleText.prototype.generateFlatItem = function (point, row_index, col_index, item) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var colWidth, compositeFlat, _a, flatMultipleTextItemQuestion, itemPoint, _b, _c, _d;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        colWidth = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].getPageAvailableWidth(this.controller);
                        this.controller.pushMargins();
                        this.controller.margins.right = this.controller.paperWidth -
                            this.controller.margins.left - colWidth * __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].MULTIPLETEXT_TEXT_PERS;
                        _a = __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_composite__["a" /* CompositeBrick */].bind;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].
                                createBoldTextFlat(point, this.question, this.controller, item.locTitle)];
                    case 1:
                        compositeFlat = new (_a.apply(__WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_composite__["a" /* CompositeBrick */], [void 0, _e.sent()]))();
                        this.controller.popMargins();
                        flatMultipleTextItemQuestion = __WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().create(this.survey, item.editor, this.controller, 'text');
                        itemPoint = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createTextFieldRect({
                            xLeft: point.xLeft + colWidth * __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].MULTIPLETEXT_TEXT_PERS, yTop: point.yTop
                        }, this.controller);
                        _c = (_b = compositeFlat.addBrick).apply;
                        _d = [compositeFlat];
                        return [4 /*yield*/, flatMultipleTextItemQuestion.generateFlatsContent(itemPoint)];
                    case 2:
                        _c.apply(_b, _d.concat([_e.sent()]));
                        return [2 /*return*/, compositeFlat];
                }
            });
        });
    };
    FlatMultipleText.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var rowsFlats, currPoint, rows, i, yBot, j, itemFlat;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        rowsFlats = [];
                        currPoint = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].clone(point);
                        rows = this.getVisibleRows();
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < rows.length)) return [3 /*break*/, 7];
                        rowsFlats.push(new __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_composite__["a" /* CompositeBrick */]());
                        yBot = currPoint.yTop;
                        this.controller.pushMargins();
                        j = 0;
                        _a.label = 2;
                    case 2:
                        if (!(j < rows[i].cells.length)) return [3 /*break*/, 5];
                        this.controller.pushMargins();
                        __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].setColumnMargins(this.controller, this.question.colCount, j);
                        currPoint.xLeft = this.controller.margins.left;
                        return [4 /*yield*/, this.generateFlatItem(currPoint, i, j, rows[i].cells[j].item)];
                    case 3:
                        itemFlat = _a.sent();
                        rowsFlats[rowsFlats.length - 1].addBrick(itemFlat);
                        yBot = Math.max(yBot, itemFlat.yBot);
                        this.controller.popMargins();
                        _a.label = 4;
                    case 4:
                        j++;
                        return [3 /*break*/, 2];
                    case 5:
                        this.controller.popMargins();
                        currPoint.xLeft = point.xLeft;
                        currPoint.yTop = yBot;
                        rowsFlats[rowsFlats.length - 1].addBrick(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createRowlineFlat(currPoint, this.controller));
                        currPoint.yTop += __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].EPSILON;
                        currPoint.yTop += this.controller.unitHeight * FlatMultipleText.ROWS_GAP_SCALE;
                        _a.label = 6;
                    case 6:
                        i++;
                        return [3 /*break*/, 1];
                    case 7: return [2 /*return*/, rowsFlats];
                }
            });
        });
    };
    FlatMultipleText.ROWS_GAP_SCALE = 0.195;
    return FlatMultipleText;
}(__WEBPACK_IMPORTED_MODULE_1__flat_question__["a" /* FlatQuestion */]));

__WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().register('multipletext', FlatMultipleText);


/***/ }),
/* 49 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_survey__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatPanelDynamic; });





var FlatPanelDynamic = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatPanelDynamic, _super);
    function FlatPanelDynamic(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.controller = controller;
        _this.question = question;
        return _this;
    }
    FlatPanelDynamic.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var flats, currPoint, _i, _a, panel, panelFlats;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        flats = [];
                        currPoint = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].clone(point);
                        _i = 0, _a = this.question.panels;
                        _b.label = 1;
                    case 1:
                        if (!(_i < _a.length)) return [3 /*break*/, 4];
                        panel = _a[_i];
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_1__flat_survey__["a" /* FlatSurvey */].generateFlatsPanel(this.survey, this.controller, panel, currPoint)];
                    case 2:
                        panelFlats = _b.sent();
                        if (panelFlats.length !== 0) {
                            currPoint.yTop = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].mergeRects.apply(__WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */], panelFlats).yBot;
                            currPoint.yTop += this.controller.unitHeight * FlatPanelDynamic.GAP_BETWEEN_PANELS;
                            flats.push.apply(flats, panelFlats);
                        }
                        _b.label = 3;
                    case 3:
                        _i++;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/, flats];
                }
            });
        });
    };
    FlatPanelDynamic.GAP_BETWEEN_PANELS = 0.75;
    return FlatPanelDynamic;
}(__WEBPACK_IMPORTED_MODULE_2__flat_question__["a" /* FlatQuestion */]));

__WEBPACK_IMPORTED_MODULE_3__flat_repository__["a" /* FlatRepository */].getInstance().register('paneldynamic', FlatPanelDynamic);


/***/ }),
/* 50 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_text__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_rankingitem__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_composite__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__helper_survey__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pdf_render_pdf_coloredbrick__ = __webpack_require__(59);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatRanking; });








var FlatRanking = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatRanking, _super);
    function FlatRanking(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.controller = controller;
        _this.question = question;
        return _this;
    }
    FlatRanking.prototype.generateFlatComposite = function (point, item, index, unrankedItem) {
        if (unrankedItem === void 0) { unrankedItem = false; }
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var itemRect, itemScaledRect, itemFlat, textPoint, textFlat;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        itemRect = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].createRect(point, this.controller.unitWidth, this.controller.unitHeight);
                        itemScaledRect = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].moveRect(__WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].scaleRect(itemRect, __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].SELECT_ITEM_FLAT_SCALE), point.xLeft);
                        itemFlat = new __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_rankingitem__["a" /* RankingItemBrick */](this.question, this.controller, itemScaledRect, unrankedItem ? '-' : this.question.getNumberByIndex(index));
                        textPoint = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].clone(point);
                        textPoint.xLeft = itemFlat.xRight + this.controller.unitWidth * __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ITEM_TEXT;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].createTextFlat(textPoint, this.question, this.controller, item.locText, __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_text__["a" /* TextBrick */])];
                    case 1:
                        textFlat = _a.sent();
                        return [2 /*return*/, new __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_composite__["a" /* CompositeBrick */](itemFlat, textFlat)];
                }
            });
        });
    };
    FlatRanking.prototype.generateChoicesColumn = function (point, choices, unrankedChoices) {
        if (unrankedChoices === void 0) { unrankedChoices = false; }
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var currPoint, flats, i, itemFlat;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        currPoint = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].clone(point);
                        flats = [];
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < choices.length)) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.generateFlatComposite(currPoint, choices[i], i, unrankedChoices)];
                    case 2:
                        itemFlat = _a.sent();
                        currPoint.yTop = itemFlat.yBot + __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ROWS * this.controller.unitHeight;
                        flats.push(itemFlat);
                        _a.label = 3;
                    case 3:
                        i++;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/, flats];
                }
            });
        });
    };
    FlatRanking.prototype.generateSelectToRankItemsVertically = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var currPoint, flats, _a, _b, _c, separatorRect, _d, _e, _f;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_g) {
                switch (_g.label) {
                    case 0:
                        currPoint = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].clone(point);
                        flats = [];
                        if (!(this.question.rankingChoices.length !== 0)) return [3 /*break*/, 2];
                        _b = (_a = flats.push).apply;
                        _c = [flats];
                        return [4 /*yield*/, this.generateChoicesColumn(currPoint, this.question.rankingChoices)];
                    case 1:
                        _b.apply(_a, _c.concat([_g.sent()]));
                        currPoint.yTop = flats[flats.length - 1].yBot + 2 * (__WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ROWS * this.controller.unitHeight);
                        _g.label = 2;
                    case 2:
                        separatorRect = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].createRect({
                            xLeft: currPoint.xLeft,
                            yTop: currPoint.yTop - (__WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ROWS * this.controller.unitHeight) - 0.5,
                        }, this.controller.paperWidth - this.controller.margins.right - currPoint.xLeft, 1);
                        flats.push(new __WEBPACK_IMPORTED_MODULE_7__pdf_render_pdf_coloredbrick__["a" /* ColoredBrick */](this.controller, separatorRect, __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].FORM_BORDER_COLOR));
                        _e = (_d = flats.push).apply;
                        _f = [flats];
                        return [4 /*yield*/, this.generateChoicesColumn(currPoint, this.question.unRankingChoices, true)];
                    case 3:
                        _e.apply(_d, _f.concat([_g.sent()]));
                        return [2 /*return*/, flats];
                }
            });
        });
    };
    FlatRanking.prototype.generateSelectToRankItemsHorizontally = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var colCount, currPoint, flats, rowsCount, row, i, colIndex, _i, _a, item, itemFlat, rowLineFlat, separatorRect;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        colCount = 2;
                        currPoint = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].clone(point);
                        flats = [];
                        rowsCount = Math.max(this.question.unRankingChoices.length, this.question.rankingChoices.length);
                        row = new __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        i = 0;
                        _b.label = 1;
                    case 1:
                        if (!(i < rowsCount)) return [3 /*break*/, 8];
                        colIndex = 0;
                        _i = 0, _a = [this.question.unRankingChoices[i], this.question.rankingChoices[i]];
                        _b.label = 2;
                    case 2:
                        if (!(_i < _a.length)) return [3 /*break*/, 6];
                        item = _a[_i];
                        if (!!!item) return [3 /*break*/, 4];
                        this.controller.pushMargins(this.controller.margins.left, this.controller.margins.right);
                        __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].setColumnMargins(this.controller, colCount, colIndex);
                        currPoint.xLeft = this.controller.margins.left;
                        return [4 /*yield*/, this.generateFlatComposite(currPoint, item, i, colIndex == 0)];
                    case 3:
                        itemFlat = _b.sent();
                        row.addBrick(itemFlat);
                        this.controller.popMargins();
                        _b.label = 4;
                    case 4:
                        colIndex++;
                        _b.label = 5;
                    case 5:
                        _i++;
                        return [3 /*break*/, 2];
                    case 6:
                        rowLineFlat = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].createRowlineFlat(__WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].createPoint(row), this.controller);
                        flats.push(row, rowLineFlat);
                        separatorRect = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].createRect({
                            xLeft: this.controller.margins.left + __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].getPageAvailableWidth(this.controller) / 2 - 0.5,
                            yTop: currPoint.yTop,
                        }, 0, 0);
                        row.addBrick(new __WEBPACK_IMPORTED_MODULE_7__pdf_render_pdf_coloredbrick__["a" /* ColoredBrick */](this.controller, separatorRect, __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].FORM_BORDER_COLOR, 1, rowLineFlat.yBot - currPoint.yTop + (i !== rowsCount - 1 ?
                            __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ROWS * this.controller.unitHeight : 0)));
                        currPoint.yTop = rowLineFlat.yBot +
                            __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ROWS * this.controller.unitHeight;
                        row = new __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        _b.label = 7;
                    case 7:
                        i++;
                        return [3 /*break*/, 1];
                    case 8: return [2 /*return*/, flats];
                }
            });
        });
    };
    FlatRanking.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                if (!this.question.selectToRankEnabled) {
                    return [2 /*return*/, this.generateChoicesColumn(point, this.question.rankingChoices)];
                }
                else if (this.question.selectToRankAreasLayout == 'vertical') {
                    return [2 /*return*/, this.generateSelectToRankItemsVertically(point)];
                }
                else {
                    return [2 /*return*/, this.generateSelectToRankItemsHorizontally(point)];
                }
                return [2 /*return*/];
            });
        });
    };
    return FlatRanking;
}(__WEBPACK_IMPORTED_MODULE_1__flat_question__["a" /* FlatQuestion */]));

__WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().register('ranking', FlatRanking);


/***/ }),
/* 51 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_radiogroup__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_text__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatRating; });






var FlatRating = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatRating, _super);
    function FlatRating(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.controller = controller;
        _this.questionRating = question;
        return _this;
    }
    FlatRating.prototype.generateFlatHorisontalComposite = function (point, item, index) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var itemText, halfWidth, textPoint, compositeFlat, _a, textWidth, radioPoint;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        itemText = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].getRatingItemText(this.questionRating, index, item.locText);
                        this.controller.pushMargins();
                        halfWidth = this.controller.unitWidth / 2.0;
                        this.controller.margins.left += halfWidth;
                        this.controller.margins.right += halfWidth;
                        textPoint = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].clone(point);
                        textPoint.xLeft += halfWidth;
                        _a = __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__["a" /* CompositeBrick */].bind;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].
                                createBoldTextFlat(textPoint, this.questionRating, this.controller, itemText)];
                    case 1:
                        compositeFlat = new (_a.apply(__WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__["a" /* CompositeBrick */], [void 0, _b.sent()]))();
                        this.controller.popMargins();
                        textWidth = compositeFlat.width;
                        if (textWidth < __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].getRatingMinWidth(this.controller)) {
                            compositeFlat.xLeft += (__WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].getRatingMinWidth(this.controller) - textWidth) / 2.0 - halfWidth;
                            textWidth = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].getRatingMinWidth(this.controller);
                        }
                        else {
                            textWidth += this.controller.unitWidth;
                        }
                        radioPoint = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createPoint(compositeFlat);
                        radioPoint.xLeft = point.xLeft;
                        compositeFlat.addBrick(this.generateFlatItem(__WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createRect(radioPoint, textWidth, this.controller.unitHeight), item, index, undefined, this.question.value == item.value));
                        return [2 /*return*/, compositeFlat];
                }
            });
        });
    };
    FlatRating.prototype.generateFlatComposite = function (point, item, index) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var compositeFlat, itemRect, itemFlat, textPoint, itemText, _a, _b, _c;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        compositeFlat = new __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        itemRect = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createRect(point, this.controller.unitHeight, this.controller.unitHeight);
                        itemFlat = this.generateFlatItem(__WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].moveRect(__WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].scaleRect(itemRect, __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].SELECT_ITEM_FLAT_SCALE), point.xLeft), item, index, undefined, this.question.value == item.value);
                        compositeFlat.addBrick(itemFlat);
                        textPoint = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].clone(point);
                        textPoint.xLeft = itemFlat.xRight + this.controller.unitWidth * __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].GAP_BETWEEN_ITEM_TEXT;
                        itemText = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].getRatingItemText(this.questionRating, index, item.locText);
                        _a = itemText == null;
                        if (_a) return [3 /*break*/, 2];
                        _c = (_b = compositeFlat).addBrick;
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createTextFlat(textPoint, this.question, this.controller, itemText, __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_text__["a" /* TextBrick */])];
                    case 1:
                        _a = _c.apply(_b, [_d.sent()]);
                        _d.label = 2;
                    case 2:
                        _a;
                        return [2 /*return*/, compositeFlat];
                }
            });
        });
    };
    FlatRating.prototype.generateHorisontallyItems = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var rowsFlats, currPoint, i, itemFlat, leftWidth;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        rowsFlats = [new __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__["a" /* CompositeBrick */]()];
                        currPoint = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].clone(point);
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < this.questionRating.visibleRateValues.length)) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.generateFlatHorisontalComposite(currPoint, this.questionRating.visibleRateValues[i], i)];
                    case 2:
                        itemFlat = _a.sent();
                        rowsFlats[rowsFlats.length - 1].addBrick(itemFlat);
                        leftWidth = this.controller.paperWidth -
                            this.controller.margins.right - itemFlat.xRight;
                        if (__WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].getRatingMinWidth(this.controller) <= leftWidth + __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].EPSILON) {
                            currPoint.xLeft = itemFlat.xRight;
                        }
                        else {
                            currPoint.xLeft = point.xLeft;
                            currPoint.yTop = itemFlat.yBot;
                            if (i !== this.questionRating.visibleRateValues.length - 1) {
                                rowsFlats[rowsFlats.length - 1].addBrick(__WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].createRowlineFlat(currPoint, this.controller));
                                currPoint.yTop += __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].EPSILON;
                                rowsFlats.push(new __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_composite__["a" /* CompositeBrick */]());
                            }
                        }
                        _a.label = 3;
                    case 3:
                        i++;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/, rowsFlats];
                }
            });
        });
    };
    FlatRating.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var isVertical, i, itemText;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                isVertical = false;
                for (i = 0; i < this.questionRating.visibleRateValues.length; i++) {
                    itemText = __WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].getRatingItemText(this.questionRating, i, this.questionRating.visibleRateValues[i].locText);
                    if (this.controller.measureText(itemText).width > this.controller.measureText(__WEBPACK_IMPORTED_MODULE_5__helper_survey__["a" /* SurveyHelper */].RATING_COLUMN_WIDTH).width) {
                        isVertical = true;
                    }
                }
                return [2 /*return*/, isVertical ? this.generateVerticallyItems(point, this.questionRating.visibleRateValues) : this.generateHorisontallyItems(point)];
            });
        });
    };
    return FlatRating;
}(__WEBPACK_IMPORTED_MODULE_1__flat_radiogroup__["a" /* FlatRadiogroup */]));

__WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().register('rating', FlatRating);


/***/ }),
/* 52 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__helper_survey__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_empty__ = __webpack_require__(12);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_composite__ = __webpack_require__(5);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatSignaturePad; });






var FlatSignaturePad = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatSignaturePad, _super);
    function FlatSignaturePad(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.question = question;
        return _this;
    }
    FlatSignaturePad.prototype.generateBackgroundImage = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].createImageFlat(point, this.question, this.controller, { link: this.question.backgroundImage, width: __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].pxToPt(this.question.signatureWidth), height: __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].pxToPt(this.question.signatureHeight), objectFit: 'cover' }, true)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    FlatSignaturePad.prototype.getSignImageUrl = function () {
        return this.question.storeDataAsText || !this.question.loadedData ? this.question.value : this.question.loadedData;
    };
    FlatSignaturePad.prototype.generateSign = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var width, height, brick;
            var _this = this;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        width = __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].pxToPt(this.question.signatureWidth);
                        height = __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].pxToPt(this.question.signatureHeight);
                        if (!this.question.value) return [3 /*break*/, 2];
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].createImageFlat(point, this.question, this.controller, { link: this.getSignImageUrl(),
                                width: width,
                                height: height }, false)];
                    case 1:
                        brick = (_a.sent());
                        return [3 /*break*/, 3];
                    case 2:
                        brick = new __WEBPACK_IMPORTED_MODULE_4__pdf_render_pdf_empty__["a" /* EmptyBrick */](__WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].createRect(point, width, height));
                        _a.label = 3;
                    case 3:
                        if (FlatSignaturePad.BORDER_STYLE !== 'none') {
                            brick.afterRenderCallback = function () {
                                var borderOptions = {
                                    height: brick.width,
                                    width: brick.width,
                                    yTop: brick.yTop,
                                    yBot: brick.yBot,
                                    xLeft: brick.xLeft,
                                    xRight: brick.xRight,
                                    formBorderColor: brick.formBorderColor,
                                    rounded: false,
                                    outside: true,
                                    dashStyle: FlatSignaturePad.BORDER_STYLE == 'dashed' ? {
                                        dashArray: [5],
                                        dashPhase: 0
                                    } : undefined
                                };
                                __WEBPACK_IMPORTED_MODULE_3__helper_survey__["a" /* SurveyHelper */].renderFlatBorders(_this.controller, borderOptions);
                            };
                        }
                        return [2 /*return*/, brick];
                }
            });
        });
    };
    FlatSignaturePad.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var compositeBrick, _a, _b, _c, _d;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        compositeBrick = new __WEBPACK_IMPORTED_MODULE_5__pdf_render_pdf_composite__["a" /* CompositeBrick */]();
                        if (!this.question.backgroundImage) return [3 /*break*/, 2];
                        _b = (_a = compositeBrick).addBrick;
                        return [4 /*yield*/, this.generateBackgroundImage(point)];
                    case 1:
                        _b.apply(_a, [_e.sent()]);
                        _e.label = 2;
                    case 2:
                        _d = (_c = compositeBrick).addBrick;
                        return [4 /*yield*/, this.generateSign(point)];
                    case 3:
                        _d.apply(_c, [_e.sent()]);
                        return [2 /*return*/, [compositeBrick]];
                }
            });
        });
    };
    FlatSignaturePad.BORDER_STYLE = 'dashed';
    return FlatSignaturePad;
}(__WEBPACK_IMPORTED_MODULE_1__flat_question__["a" /* FlatQuestion */]));

__WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().register('signaturepad', FlatSignaturePad);


/***/ }),
/* 53 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flat_question__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flat_repository__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_textbox__ = __webpack_require__(17);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlatTextbox; });





var FlatTextbox = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(FlatTextbox, _super);
    function FlatTextbox(survey, question, controller) {
        var _this = _super.call(this, survey, question, controller) || this;
        _this.survey = survey;
        _this.question = question;
        return _this;
    }
    FlatTextbox.prototype.generateFlatsContent = function (point) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var rect;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.shouldRenderAsComment) {
                            rect = __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createTextFieldRect(point, this.controller);
                            return [2 /*return*/, [new __WEBPACK_IMPORTED_MODULE_3__pdf_render_pdf_textbox__["a" /* TextBoxBrick */](this.question, this.controller, rect)]];
                        }
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_4__helper_survey__["a" /* SurveyHelper */].createCommentFlat(point, this.question, this.controller, true, { rows: FlatTextbox.MULTILINE_TEXT_ROWS_COUNT })];
                    case 1: return [2 /*return*/, [_a.sent()]];
                }
            });
        });
    };
    FlatTextbox.MULTILINE_TEXT_ROWS_COUNT = 1;
    return FlatTextbox;
}(__WEBPACK_IMPORTED_MODULE_1__flat_question__["a" /* FlatQuestion */]));

__WEBPACK_IMPORTED_MODULE_2__flat_repository__["a" /* FlatRepository */].getInstance().register('text', FlatTextbox);


/***/ }),
/* 54 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_brick__ = __webpack_require__(7);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CustomBrick; });


var CustomBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(CustomBrick, _super);
    function CustomBrick(question, controller, renderFunc) {
        var _this = _super.call(this, question, controller, renderFunc(controller.helperDoc, question, 0, 0)) || this;
        _this.renderFunc = renderFunc;
        return _this;
    }
    CustomBrick.prototype.renderInteractive = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var _this = this;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, new Promise(function (resolve) {
                            _this.renderFunc(_this.controller.doc, _this.question, _this.xLeft, _this.yTop);
                            resolve();
                        })];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return CustomBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_brick__["a" /* PdfBrick */]));



/***/ }),
/* 55 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_survey_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_survey_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__doc_controller__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flat_layout_flat_survey__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__page_layout_page_packer__ = __webpack_require__(23);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__event_handler_event_handler__ = __webpack_require__(20);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__helper_survey__ = __webpack_require__(1);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SurveyPDF; });








/**
 * The `SurveyPDF` object enables you to export your surveys and forms to PDF documents.
 *
 * [View Demo](https://surveyjs.io/pdf-generator/examples/ (linkStyle))
 */
var SurveyPDF = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(SurveyPDF, _super);
    function SurveyPDF(jsonObject, options) {
        var _this = _super.call(this, jsonObject) || this;
        /**
         * An event that is raised when SurveyJS PDF Generator renders a page header. Handle this event to customize the header.
         *
         * Parameters:
         *
         * - `sender`: `SurveyPDF`\
         * A SurveyPDF instance that raised the event.
         *
         * - `canvas`: [`DrawCanvas`](https://surveyjs.io/pdf-generator/documentation/api-reference/drawcanvas)\
         * An object that you can use to draw text and images in the page header.
         *
         * [View Demo](https://surveyjs.io/pdf-generator/examples/customize-header-and-footer-of-pdf-form/ (linkStyle))
         */
        _this.onRenderHeader = new __WEBPACK_IMPORTED_MODULE_5__event_handler_event_handler__["b" /* EventAsync */]();
        /**
         * An event that is raised when SurveyJS PDF Generator renders a page footer. Handle this event to customize the footer.
         *
         * Parameters:
         *
         * - `sender`: `SurveyPDF`\
         * A SurveyPDF instance that raised the event.
         *
         * - `canvas`: [`DrawCanvas`](https://surveyjs.io/pdf-generator/documentation/api-reference/drawcanvas)\
         * An object that you can use to draw text and images in the page footer.
         *
         * [View Demo](https://surveyjs.io/pdf-generator/examples/customize-header-and-footer-of-pdf-form/ (linkStyle))
         */
        _this.onRenderFooter = new __WEBPACK_IMPORTED_MODULE_5__event_handler_event_handler__["b" /* EventAsync */]();
        /**
         * An event that is raised when SurveyJS PDF Generator renders a survey question. Handle this event to customize question rendering.
         *
         * Parameters:
         *
         * - `sender`: `SurveyPDF`\
         * A SurveyPDF instance that raised the event.
         *
         * - `options.question`: [`Question`](https://surveyjs.io/form-library/documentation/api-reference/question)\
         * A survey question that is being rendered.
         *
         * - `options.point`: `IPoint`\
         * An object with coordinates of the top-left corner of the element being rendered. This object contains the following properties: `{ xLeft: number, yTop: number }`.
         *
         * - `options.bricks`: [`PdfBrick[]`](https://surveyjs.io/pdf-generator/documentation/api-reference/pdfbrick)\
         * An array of [bricks](https://surveyjs.io/pdf-generator/documentation/customize-survey-question-rendering-in-pdf-form#custom-rendering) used to render the element.
         *
         * - `options.controller`: [`DocController`](https://surveyjs.io/pdf-generator/documentation/api-reference/doccontroller)\
         * An object that provides access to main PDF document properties (font, margins, page width and height) and allows you to modify them.
         *
         * - `options.repository`: `FlatRepository`\
         * A repository with classes that render elements to PDF. Use its `create` method if you need to create a new instance of a rendering class.
         *
         * [View Demo](https://surveyjs.io/pdf-generator/examples/how-to-use-adorners-in-pdf-forms/ (linkStyle))
         */
        _this.onRenderQuestion = new __WEBPACK_IMPORTED_MODULE_5__event_handler_event_handler__["b" /* EventAsync */]();
        /**
         * An event that is raised when SurveyJS PDF Generator renders a panel. Handle this event to customize panel rendering.
         *
         * Parameters:
         *
         * - `sender`: `SurveyPDF`\
         * A SurveyPDF instance that raised the event.
         *
         * - `options.panel`: [`PanelModel`](https://surveyjs.io/form-library/documentation/api-reference/panel-model)\
         * A panel that is being rendered.
         *
         * - `options.point`: `IPoint`\
         * An object with coordinates of the top-left corner of the element being rendered. This object contains the following properties: `{ xLeft: number, yTop: number }`.
         *
         * - `options.bricks`: [`PdfBrick[]`](https://surveyjs.io/pdf-generator/documentation/api-reference/pdfbrick)\
         * An array of [bricks](https://surveyjs.io/pdf-generator/documentation/customize-survey-question-rendering-in-pdf-form#custom-rendering) used to render the element.
         *
         * - `options.controller`: [`DocController`](https://surveyjs.io/pdf-generator/documentation/api-reference/doccontroller)\
         * An object that provides access to main PDF document properties (font, margins, page width and height) and allows you to modify them.
         *
         * - `options.repository`: `FlatRepository`\
         * A repository with classes that render elements to PDF. Use its `create` method if you need to create a new instance of a rendering class.
         *
         * [View Demo](https://surveyjs.io/pdf-generator/examples/how-to-use-adorners-in-pdf-forms/ (linkStyle))
         */
        _this.onRenderPanel = new __WEBPACK_IMPORTED_MODULE_5__event_handler_event_handler__["b" /* EventAsync */]();
        /**
         * An event that is raised when SurveyJS PDF Generator renders a page. Handle this event to customize page rendering.
         *
         * Parameters:
         *
         * - `sender`: `SurveyPDF`\
         * A SurveyPDF instance that raised the event.
         *
         * - `options.page`: [`PageModel`](https://surveyjs.io/form-library/documentation/api-reference/page-model)\
         * A page that is being rendered.
         *
         * - `options.point`: `IPoint`\
         * An object with coordinates of the top-left corner of the element being rendered. This object contains the following properties: `{ xLeft: number, yTop: number }`.
         *
         * - `options.bricks`: [`PdfBrick[]`](https://surveyjs.io/pdf-generator/documentation/api-reference/pdfbrick)\
         * An array of [bricks](https://surveyjs.io/pdf-generator/documentation/customize-survey-question-rendering-in-pdf-form#custom-rendering) used to render the element.
         *
         * - `options.controller`: [`DocController`](https://surveyjs.io/pdf-generator/documentation/api-reference/doccontroller)\
         * An object that provides access to main PDF document properties (font, margins, page width and height) and allows you to modify them.
         *
         * - `options.repository`: `FlatRepository`\
         * A repository with classes that render elements to PDF. Use its `create` method if you need to create a new instance of a rendering class.
         *
         * [View Demo](https://surveyjs.io/pdf-generator/examples/how-to-use-adorners-in-pdf-forms/ (linkStyle))
         */
        _this.onRenderPage = new __WEBPACK_IMPORTED_MODULE_5__event_handler_event_handler__["b" /* EventAsync */]();
        _this.onDocControllerCreated = new __WEBPACK_IMPORTED_MODULE_1_survey_core__["EventBase"]();
        _this.onRenderCheckItemAcroform = new __WEBPACK_IMPORTED_MODULE_5__event_handler_event_handler__["b" /* EventAsync */]();
        _this.onRenderRadioGroupWrapAcroform = new __WEBPACK_IMPORTED_MODULE_5__event_handler_event_handler__["b" /* EventAsync */]();
        _this.onRenderRadioItemAcroform = new __WEBPACK_IMPORTED_MODULE_5__event_handler_event_handler__["b" /* EventAsync */]();
        if (typeof options === 'undefined') {
            options = {};
        }
        _this.options = __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].clone(options);
        return _this;
    }
    Object.defineProperty(SurveyPDF.prototype, "haveCommercialLicense", {
        get: function () {
            var f = __WEBPACK_IMPORTED_MODULE_1_survey_core__["hasLicense"];
            return !!f && f(2);
        },
        set: function (val) {
            // eslint-disable-next-line no-console
            console.error('As of v1.9.101, the haveCommercialLicense property is not supported. To activate your license, use the setLicenseKey(key) method as shown on the following page: https://surveyjs.io/remove-alert-banner');
        },
        enumerable: false,
        configurable: true
    });
    SurveyPDF.prototype.waitForQuestionIsReady = function (question) {
        return new Promise(function (resolve) {
            if (question.isReady) {
                resolve();
            }
            else {
                var readyCallback_1 = function (_, options) {
                    if (options.isReady) {
                        question.onReadyChanged.remove(readyCallback_1);
                        resolve();
                    }
                };
                question.onReadyChanged.add(readyCallback_1);
            }
        });
    };
    SurveyPDF.prototype.waitForCoreIsReady = function () {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var _i, _a, question, list, _b, list_1, innerQuestion;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _i = 0, _a = this.getAllQuestions();
                        _c.label = 1;
                    case 1:
                        if (!(_i < _a.length)) return [3 /*break*/, 9];
                        question = _a[_i];
                        if (!!!question.contentPanel) return [3 /*break*/, 6];
                        list = [];
                        question.contentPanel.addQuestionsToList(list);
                        _b = 0, list_1 = list;
                        _c.label = 2;
                    case 2:
                        if (!(_b < list_1.length)) return [3 /*break*/, 5];
                        innerQuestion = list_1[_b];
                        return [4 /*yield*/, this.waitForQuestionIsReady(innerQuestion)];
                    case 3:
                        _c.sent();
                        _c.label = 4;
                    case 4:
                        _b++;
                        return [3 /*break*/, 2];
                    case 5: return [3 /*break*/, 8];
                    case 6: return [4 /*yield*/, this.waitForQuestionIsReady(__WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].getContentQuestion(question))];
                    case 7:
                        _c.sent();
                        _c.label = 8;
                    case 8:
                        _i++;
                        return [3 /*break*/, 1];
                    case 9: return [2 /*return*/];
                }
            });
        });
    };
    SurveyPDF.prototype.getUpdatedCheckItemAcroformOptions = function (options) {
        this.onRenderCheckItemAcroform.fire(this, options);
    };
    SurveyPDF.prototype.getUpdatedRadioGroupWrapOptions = function (options) {
        this.onRenderRadioGroupWrapAcroform.fire(this, options);
    };
    SurveyPDF.prototype.getUpdatedRadioItemAcroformOptions = function (options) {
        this.onRenderRadioItemAcroform.fire(this, options);
    };
    SurveyPDF.prototype.correctBricksPosition = function (controller, flats) {
        if (controller.isRTL) {
            flats.forEach(function (flatsArr) {
                flatsArr.forEach(function (flat) {
                    flat.translateX(function (xLeft, xRight) {
                        var shiftWidth = controller.paperWidth - xLeft - xRight;
                        return { xLeft: xLeft + shiftWidth, xRight: xRight + shiftWidth };
                    });
                });
            });
        }
    };
    SurveyPDF.prototype.renderSurvey = function (controller) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var flats, packs, i, j;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.visiblePages.forEach(function (page) { return page.onFirstRendering(); });
                        return [4 /*yield*/, this.waitForCoreIsReady()];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_3__flat_layout_flat_survey__["a" /* FlatSurvey */].generateFlats(this, controller)];
                    case 2:
                        flats = _a.sent();
                        this.correctBricksPosition(controller, flats);
                        packs = __WEBPACK_IMPORTED_MODULE_4__page_layout_page_packer__["a" /* PagePacker */].pack(flats, controller);
                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_5__event_handler_event_handler__["a" /* EventHandler */].process_header_events(this, controller, packs)];
                    case 3:
                        _a.sent();
                        i = 0;
                        _a.label = 4;
                    case 4:
                        if (!(i < packs.length)) return [3 /*break*/, 9];
                        j = 0;
                        _a.label = 5;
                    case 5:
                        if (!(j < packs[i].length)) return [3 /*break*/, 8];
                        if (controller.getNumberOfPages() === i) {
                            controller.addPage();
                        }
                        controller.setPage(i);
                        //gizmos bricks borders for debug
                        // packs[i][j].unfold().forEach((rect: IPdfBrick) => {
                        //     controller.doc.setDrawColor('green');
                        //     controller.doc.rect(...SurveyHelper.createAcroformRect(rect));
                        //     controller.doc.setDrawColor('black');
                        //   }
                        // );
                        return [4 /*yield*/, packs[i][j].render()];
                    case 6:
                        //gizmos bricks borders for debug
                        // packs[i][j].unfold().forEach((rect: IPdfBrick) => {
                        //     controller.doc.setDrawColor('green');
                        //     controller.doc.rect(...SurveyHelper.createAcroformRect(rect));
                        //     controller.doc.setDrawColor('black');
                        //   }
                        // );
                        _a.sent();
                        _a.label = 7;
                    case 7:
                        j++;
                        return [3 /*break*/, 5];
                    case 8:
                        i++;
                        return [3 /*break*/, 4];
                    case 9: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * An asynchronous method that starts download of the generated PDF file in the web browser.
     *
     * @param fileName *(Optional)* A file name with the ".pdf" extension. Default value: `"survey_result.pdf"`.
     */
    SurveyPDF.prototype.save = function (fileName) {
        if (fileName === void 0) { fileName = 'survey_result.pdf'; }
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var controller, promise;
            var _this = this;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!!SurveyPDF.currentlySaving) return [3 /*break*/, 2];
                        controller = new __WEBPACK_IMPORTED_MODULE_2__doc_controller__["b" /* DocController */](this.options);
                        this.onDocControllerCreated.fire(this, { controller: controller });
                        SurveyPDF.currentlySaving = true;
                        __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].fixFont(controller);
                        return [4 /*yield*/, this.renderSurvey(controller)];
                    case 1:
                        _a.sent();
                        promise = controller.doc.save(fileName, { returnPromise: true });
                        promise.then(function () {
                            SurveyPDF.currentlySaving = false;
                            var saveFunc = SurveyPDF.saveQueue.shift();
                            if (!!saveFunc) {
                                saveFunc();
                            }
                        });
                        return [2 /*return*/, promise];
                    case 2:
                        SurveyPDF.saveQueue.push(function () {
                            _this.save(fileName);
                        });
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * An asynchronous method that allows you to get PDF content in different formats.
     *
     * [View Demo](https://surveyjs.io/pdf-generator/examples/convert-pdf-form-blob-base64-raw-pdf-javascript/ (linkStyle))
     *
     * @param type *(Optional)* One of `"blob"`, `"bloburl"`, `"dataurlstring"`. Do not specify this parameter if you want to get raw PDF content as a string value.
     *
     */
    SurveyPDF.prototype.raw = function (type) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var controller;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        controller = new __WEBPACK_IMPORTED_MODULE_2__doc_controller__["b" /* DocController */](this.options);
                        this.onDocControllerCreated.fire(this, { controller: controller });
                        __WEBPACK_IMPORTED_MODULE_6__helper_survey__["a" /* SurveyHelper */].fixFont(controller);
                        return [4 /*yield*/, this.renderSurvey(controller)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, controller.doc.output(type)];
                }
            });
        });
    };
    SurveyPDF.currentlySaving = false;
    SurveyPDF.saveQueue = [];
    return SurveyPDF;
}(__WEBPACK_IMPORTED_MODULE_1_survey_core__["SurveyModel"]));



/***/ }),
/* 56 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// An augmented AVL Tree where each node maintains a list of records and their search intervals.
// Record is composed of an interval and its underlying data, sent by a client. This allows the
// interval tree to have the same interval inserted multiple times, as long its data is different.
// Both insertion and deletion require O(log n) time. Searching requires O(k*logn) time, where `k`
// is the number of intervals in the output list.
Object.defineProperty(exports, "__esModule", { value: true });
var isSame = __webpack_require__(57);
function height(node) {
    if (node === undefined) {
        return -1;
    }
    else {
        return node.height;
    }
}
var Node = /** @class */ (function () {
    function Node(intervalTree, record) {
        this.intervalTree = intervalTree;
        this.records = [];
        this.height = 0;
        this.key = record.low;
        this.max = record.high;
        // Save the array of all records with the same key for this node
        this.records.push(record);
    }
    // Gets the highest record.high value for this node
    Node.prototype.getNodeHigh = function () {
        var high = this.records[0].high;
        for (var i = 1; i < this.records.length; i++) {
            if (this.records[i].high > high) {
                high = this.records[i].high;
            }
        }
        return high;
    };
    // Updates height value of the node. Called during insertion, rebalance, removal
    Node.prototype.updateHeight = function () {
        this.height = Math.max(height(this.left), height(this.right)) + 1;
    };
    // Updates the max value of all the parents after inserting into already existing node, as well as
    // removing the node completely or removing the record of an already existing node. Starts with
    // the parent of an affected node and bubbles up to root
    Node.prototype.updateMaxOfParents = function () {
        if (this === undefined) {
            return;
        }
        var thisHigh = this.getNodeHigh();
        if (this.left !== undefined && this.right !== undefined) {
            this.max = Math.max(Math.max(this.left.max, this.right.max), thisHigh);
        }
        else if (this.left !== undefined && this.right === undefined) {
            this.max = Math.max(this.left.max, thisHigh);
        }
        else if (this.left === undefined && this.right !== undefined) {
            this.max = Math.max(this.right.max, thisHigh);
        }
        else {
            this.max = thisHigh;
        }
        if (this.parent) {
            this.parent.updateMaxOfParents();
        }
    };
    /*
    Left-Left case:
  
           z                                      y
          / \                                   /   \
         y   T4      Right Rotate (z)          x     z
        / \          - - - - - - - - ->       / \   / \
       x   T3                                T1 T2 T3 T4
      / \
    T1   T2
  
    Left-Right case:
  
         z                               z                           x
        / \                             / \                        /   \
       y   T4  Left Rotate (y)         x  T4  Right Rotate(z)     y     z
      / \      - - - - - - - - ->     / \      - - - - - - - ->  / \   / \
    T1   x                           y  T3                      T1 T2 T3 T4
        / \                         / \
      T2   T3                      T1 T2
    */
    // Handles Left-Left case and Left-Right case after rebalancing AVL tree
    Node.prototype._updateMaxAfterRightRotate = function () {
        var parent = this.parent;
        var left = parent.left;
        // Update max of left sibling (x in first case, y in second)
        var thisParentLeftHigh = left.getNodeHigh();
        if (left.left === undefined && left.right !== undefined) {
            left.max = Math.max(thisParentLeftHigh, left.right.max);
        }
        else if (left.left !== undefined && left.right === undefined) {
            left.max = Math.max(thisParentLeftHigh, left.left.max);
        }
        else if (left.left === undefined && left.right === undefined) {
            left.max = thisParentLeftHigh;
        }
        else {
            left.max = Math.max(Math.max(left.left.max, left.right.max), thisParentLeftHigh);
        }
        // Update max of itself (z)
        var thisHigh = this.getNodeHigh();
        if (this.left === undefined && this.right !== undefined) {
            this.max = Math.max(thisHigh, this.right.max);
        }
        else if (this.left !== undefined && this.right === undefined) {
            this.max = Math.max(thisHigh, this.left.max);
        }
        else if (this.left === undefined && this.right === undefined) {
            this.max = thisHigh;
        }
        else {
            this.max = Math.max(Math.max(this.left.max, this.right.max), thisHigh);
        }
        // Update max of parent (y in first case, x in second)
        parent.max = Math.max(Math.max(parent.left.max, parent.right.max), parent.getNodeHigh());
    };
    /*
    Right-Right case:
  
      z                               y
     / \                            /   \
    T1  y     Left Rotate(z)       z     x
       / \   - - - - - - - ->     / \   / \
      T2  x                      T1 T2 T3 T4
         / \
        T3 T4
  
    Right-Left case:
  
       z                            z                            x
      / \                          / \                         /   \
     T1  y   Right Rotate (y)     T1  x      Left Rotate(z)   z     y
        / \  - - - - - - - - ->      / \   - - - - - - - ->  / \   / \
       x  T4                        T2  y                   T1 T2 T3 T4
      / \                              / \
    T2   T3                           T3 T4
    */
    // Handles Right-Right case and Right-Left case in rebalancing AVL tree
    Node.prototype._updateMaxAfterLeftRotate = function () {
        var parent = this.parent;
        var right = parent.right;
        // Update max of right sibling (x in first case, y in second)
        var thisParentRightHigh = right.getNodeHigh();
        if (right.left === undefined && right.right !== undefined) {
            right.max = Math.max(thisParentRightHigh, right.right.max);
        }
        else if (right.left !== undefined && right.right === undefined) {
            right.max = Math.max(thisParentRightHigh, right.left.max);
        }
        else if (right.left === undefined && right.right === undefined) {
            right.max = thisParentRightHigh;
        }
        else {
            right.max = Math.max(Math.max(right.left.max, right.right.max), thisParentRightHigh);
        }
        // Update max of itself (z)
        var thisHigh = this.getNodeHigh();
        if (this.left === undefined && this.right !== undefined) {
            this.max = Math.max(thisHigh, this.right.max);
        }
        else if (this.left !== undefined && this.right === undefined) {
            this.max = Math.max(thisHigh, this.left.max);
        }
        else if (this.left === undefined && this.right === undefined) {
            this.max = thisHigh;
        }
        else {
            this.max = Math.max(Math.max(this.left.max, this.right.max), thisHigh);
        }
        // Update max of parent (y in first case, x in second)
        parent.max = Math.max(Math.max(parent.left.max, right.max), parent.getNodeHigh());
    };
    Node.prototype._leftRotate = function () {
        var rightChild = this.right;
        rightChild.parent = this.parent;
        if (rightChild.parent === undefined) {
            this.intervalTree.root = rightChild;
        }
        else {
            if (rightChild.parent.left === this) {
                rightChild.parent.left = rightChild;
            }
            else if (rightChild.parent.right === this) {
                rightChild.parent.right = rightChild;
            }
        }
        this.right = rightChild.left;
        if (this.right !== undefined) {
            this.right.parent = this;
        }
        rightChild.left = this;
        this.parent = rightChild;
        this.updateHeight();
        rightChild.updateHeight();
    };
    Node.prototype._rightRotate = function () {
        var leftChild = this.left;
        leftChild.parent = this.parent;
        if (leftChild.parent === undefined) {
            this.intervalTree.root = leftChild;
        }
        else {
            if (leftChild.parent.left === this) {
                leftChild.parent.left = leftChild;
            }
            else if (leftChild.parent.right === this) {
                leftChild.parent.right = leftChild;
            }
        }
        this.left = leftChild.right;
        if (this.left !== undefined) {
            this.left.parent = this;
        }
        leftChild.right = this;
        this.parent = leftChild;
        this.updateHeight();
        leftChild.updateHeight();
    };
    // Rebalances the tree if the height value between two nodes of the same parent is greater than
    // two. There are 4 cases that can happen which are outlined in the graphics above
    Node.prototype._rebalance = function () {
        if (height(this.left) >= 2 + height(this.right)) {
            var left = this.left;
            if (height(left.left) >= height(left.right)) {
                // Left-Left case
                this._rightRotate();
                this._updateMaxAfterRightRotate();
            }
            else {
                // Left-Right case
                left._leftRotate();
                this._rightRotate();
                this._updateMaxAfterRightRotate();
            }
        }
        else if (height(this.right) >= 2 + height(this.left)) {
            var right = this.right;
            if (height(right.right) >= height(right.left)) {
                // Right-Right case
                this._leftRotate();
                this._updateMaxAfterLeftRotate();
            }
            else {
                // Right-Left case
                right._rightRotate();
                this._leftRotate();
                this._updateMaxAfterLeftRotate();
            }
        }
    };
    Node.prototype.insert = function (record) {
        if (record.low < this.key) {
            // Insert into left subtree
            if (this.left === undefined) {
                this.left = new Node(this.intervalTree, record);
                this.left.parent = this;
            }
            else {
                this.left.insert(record);
            }
        }
        else {
            // Insert into right subtree
            if (this.right === undefined) {
                this.right = new Node(this.intervalTree, record);
                this.right.parent = this;
            }
            else {
                this.right.insert(record);
            }
        }
        // Update the max value of this ancestor if needed
        if (this.max < record.high) {
            this.max = record.high;
        }
        // Update height of each node
        this.updateHeight();
        // Rebalance the tree to ensure all operations are executed in O(logn) time. This is especially
        // important in searching, as the tree has a high chance of degenerating without the rebalancing
        this._rebalance();
    };
    Node.prototype._getOverlappingRecords = function (currentNode, low, high) {
        if (currentNode.key <= high && low <= currentNode.getNodeHigh()) {
            // Nodes are overlapping, check if individual records in the node are overlapping
            var tempResults = [];
            for (var i = 0; i < currentNode.records.length; i++) {
                if (currentNode.records[i].high >= low) {
                    tempResults.push(currentNode.records[i]);
                }
            }
            return tempResults;
        }
        return [];
    };
    Node.prototype.search = function (low, high) {
        // Don't search nodes that don't exist
        if (this === undefined) {
            return [];
        }
        var leftSearch = [];
        var ownSearch = [];
        var rightSearch = [];
        // If interval is to the right of the rightmost point of any interval in this node and all its
        // children, there won't be any matches
        if (low > this.max) {
            return [];
        }
        // Search left children
        if (this.left !== undefined && this.left.max >= low) {
            leftSearch = this.left.search(low, high);
        }
        // Check this node
        ownSearch = this._getOverlappingRecords(this, low, high);
        // If interval is to the left of the start of this interval, then it can't be in any child to
        // the right
        if (high < this.key) {
            return leftSearch.concat(ownSearch);
        }
        // Otherwise, search right children
        if (this.right !== undefined) {
            rightSearch = this.right.search(low, high);
        }
        // Return accumulated results, if any
        return leftSearch.concat(ownSearch, rightSearch);
    };
    // Searches for a node by a `key` value
    Node.prototype.searchExisting = function (low) {
        if (this === undefined) {
            return undefined;
        }
        if (this.key === low) {
            return this;
        }
        else if (low < this.key) {
            if (this.left !== undefined) {
                return this.left.searchExisting(low);
            }
        }
        else {
            if (this.right !== undefined) {
                return this.right.searchExisting(low);
            }
        }
        return undefined;
    };
    // Returns the smallest node of the subtree
    Node.prototype._minValue = function () {
        if (this.left === undefined) {
            return this;
        }
        else {
            return this.left._minValue();
        }
    };
    Node.prototype.remove = function (node) {
        var parent = this.parent;
        if (node.key < this.key) {
            // Node to be removed is on the left side
            if (this.left !== undefined) {
                return this.left.remove(node);
            }
            else {
                return undefined;
            }
        }
        else if (node.key > this.key) {
            // Node to be removed is on the right side
            if (this.right !== undefined) {
                return this.right.remove(node);
            }
            else {
                return undefined;
            }
        }
        else {
            if (this.left !== undefined && this.right !== undefined) {
                // Node has two children
                var minValue = this.right._minValue();
                this.key = minValue.key;
                this.records = minValue.records;
                return this.right.remove(this);
            }
            else if (parent.left === this) {
                // One child or no child case on left side
                if (this.right !== undefined) {
                    parent.left = this.right;
                    this.right.parent = parent;
                }
                else {
                    parent.left = this.left;
                    if (this.left !== undefined) {
                        this.left.parent = parent;
                    }
                }
                parent.updateMaxOfParents();
                parent.updateHeight();
                parent._rebalance();
                return this;
            }
            else if (parent.right === this) {
                // One child or no child case on right side
                if (this.right !== undefined) {
                    parent.right = this.right;
                    this.right.parent = parent;
                }
                else {
                    parent.right = this.left;
                    if (this.left !== undefined) {
                        this.left.parent = parent;
                    }
                }
                parent.updateMaxOfParents();
                parent.updateHeight();
                parent._rebalance();
                return this;
            }
        }
    };
    return Node;
}());
exports.Node = Node;
var IntervalTree = /** @class */ (function () {
    function IntervalTree() {
        this.count = 0;
    }
    IntervalTree.prototype.insert = function (record) {
        if (record.low > record.high) {
            throw new Error('`low` value must be lower or equal to `high` value');
        }
        if (this.root === undefined) {
            // Base case: Tree is empty, new node becomes root
            this.root = new Node(this, record);
            this.count++;
            return true;
        }
        else {
            // Otherwise, check if node already exists with the same key
            var node = this.root.searchExisting(record.low);
            if (node !== undefined) {
                // Check the records in this node if there already is the one with same low, high, data
                for (var i = 0; i < node.records.length; i++) {
                    if (isSame(node.records[i], record)) {
                        // This record is same as the one we're trying to insert; return false to indicate
                        // nothing has been inserted
                        return false;
                    }
                }
                // Add the record to the node
                node.records.push(record);
                // Update max of the node and its parents if necessary
                if (record.high > node.max) {
                    node.max = record.high;
                    if (node.parent) {
                        node.parent.updateMaxOfParents();
                    }
                }
                this.count++;
                return true;
            }
            else {
                // Node with this key doesn't already exist. Call insert function on root's node
                this.root.insert(record);
                this.count++;
                return true;
            }
        }
    };
    IntervalTree.prototype.search = function (low, high) {
        if (this.root === undefined) {
            // Tree is empty; return empty array
            return [];
        }
        else {
            return this.root.search(low, high);
        }
    };
    IntervalTree.prototype.remove = function (record) {
        if (this.root === undefined) {
            // Tree is empty; nothing to remove
            return false;
        }
        else {
            var node = this.root.searchExisting(record.low);
            if (node === undefined) {
                return false;
            }
            else if (node.records.length > 1) {
                var removedRecord = void 0;
                // Node with this key has 2 or more records. Find the one we need and remove it
                for (var i = 0; i < node.records.length; i++) {
                    if (isSame(node.records[i], record)) {
                        removedRecord = node.records[i];
                        node.records.splice(i, 1);
                        break;
                    }
                }
                if (removedRecord) {
                    removedRecord = undefined;
                    // Update max of that node and its parents if necessary
                    if (record.high === node.max) {
                        var nodeHigh = node.getNodeHigh();
                        if (node.left !== undefined && node.right !== undefined) {
                            node.max = Math.max(Math.max(node.left.max, node.right.max), nodeHigh);
                        }
                        else if (node.left !== undefined && node.right === undefined) {
                            node.max = Math.max(node.left.max, nodeHigh);
                        }
                        else if (node.left === undefined && node.right !== undefined) {
                            node.max = Math.max(node.right.max, nodeHigh);
                        }
                        else {
                            node.max = nodeHigh;
                        }
                        if (node.parent) {
                            node.parent.updateMaxOfParents();
                        }
                    }
                    this.count--;
                    return true;
                }
                else {
                    return false;
                }
            }
            else if (node.records.length === 1) {
                // Node with this key has only 1 record. Check if the remaining record in this node is
                // actually the one we want to remove
                if (isSame(node.records[0], record)) {
                    // The remaining record is the one we want to remove. Remove the whole node from the tree
                    if (this.root.key === node.key) {
                        // We're removing the root element. Create a dummy node that will temporarily take
                        // root's parent role
                        var rootParent = new Node(this, { low: record.low, high: record.low });
                        rootParent.left = this.root;
                        this.root.parent = rootParent;
                        var removedNode = this.root.remove(node);
                        this.root = rootParent.left;
                        if (this.root !== undefined) {
                            this.root.parent = undefined;
                        }
                        if (removedNode) {
                            removedNode = undefined;
                            this.count--;
                            return true;
                        }
                        else {
                            return false;
                        }
                    }
                    else {
                        var removedNode = this.root.remove(node);
                        if (removedNode) {
                            removedNode = undefined;
                            this.count--;
                            return true;
                        }
                        else {
                            return false;
                        }
                    }
                }
                else {
                    // The remaining record is not the one we want to remove
                    return false;
                }
            }
            else {
                // No records at all in this node?! Shouldn't happen
                return false;
            }
        }
    };
    IntervalTree.prototype.inOrder = function () {
        return new InOrder(this.root);
    };
    IntervalTree.prototype.preOrder = function () {
        return new PreOrder(this.root);
    };
    return IntervalTree;
}());
exports.IntervalTree = IntervalTree;
var DataIntervalTree = /** @class */ (function () {
    function DataIntervalTree() {
        this.tree = new IntervalTree();
    }
    DataIntervalTree.prototype.insert = function (low, high, data) {
        return this.tree.insert({ low: low, high: high, data: data });
    };
    DataIntervalTree.prototype.remove = function (low, high, data) {
        return this.tree.remove({ low: low, high: high, data: data });
    };
    DataIntervalTree.prototype.search = function (low, high) {
        return this.tree.search(low, high).map(function (v) { return v.data; });
    };
    DataIntervalTree.prototype.inOrder = function () {
        return this.tree.inOrder();
    };
    DataIntervalTree.prototype.preOrder = function () {
        return this.tree.preOrder();
    };
    Object.defineProperty(DataIntervalTree.prototype, "count", {
        get: function () {
            return this.tree.count;
        },
        enumerable: true,
        configurable: true
    });
    return DataIntervalTree;
}());
exports.default = DataIntervalTree;
var InOrder = /** @class */ (function () {
    function InOrder(startNode) {
        this.stack = [];
        if (startNode !== undefined) {
            this.push(startNode);
        }
    }
    InOrder.prototype.next = function () {
        // Will only happen if stack is empty and pop is called
        if (this.currentNode === undefined) {
            return {
                done: true,
                value: undefined,
            };
        }
        // Process this node
        if (this.i < this.currentNode.records.length) {
            return {
                done: false,
                value: this.currentNode.records[this.i++],
            };
        }
        if (this.currentNode.right !== undefined) {
            this.push(this.currentNode.right);
        }
        else {
            // Might pop the last and set this.currentNode = undefined
            this.pop();
        }
        return this.next();
    };
    InOrder.prototype.push = function (node) {
        this.currentNode = node;
        this.i = 0;
        while (this.currentNode.left !== undefined) {
            this.stack.push(this.currentNode);
            this.currentNode = this.currentNode.left;
        }
    };
    InOrder.prototype.pop = function () {
        this.currentNode = this.stack.pop();
        this.i = 0;
    };
    return InOrder;
}());
exports.InOrder = InOrder;
if (typeof Symbol === 'function') {
    InOrder.prototype[Symbol.iterator] = function () { return this; };
}
var PreOrder = /** @class */ (function () {
    function PreOrder(startNode) {
        this.stack = [];
        this.i = 0;
        this.currentNode = startNode;
    }
    PreOrder.prototype.next = function () {
        // Will only happen if stack is empty and pop is called,
        // which only happens if there is no right node (i.e we are done)
        if (this.currentNode === undefined) {
            return {
                done: true,
                value: undefined,
            };
        }
        // Process this node
        if (this.i < this.currentNode.records.length) {
            return {
                done: false,
                value: this.currentNode.records[this.i++],
            };
        }
        if (this.currentNode.right !== undefined) {
            this.push(this.currentNode.right);
        }
        if (this.currentNode.left !== undefined) {
            this.push(this.currentNode.left);
        }
        this.pop();
        return this.next();
    };
    PreOrder.prototype.push = function (node) {
        this.stack.push(node);
    };
    PreOrder.prototype.pop = function () {
        this.currentNode = this.stack.pop();
        this.i = 0;
    };
    return PreOrder;
}());
exports.PreOrder = PreOrder;
if (typeof Symbol === 'function') {
    PreOrder.prototype[Symbol.iterator] = function () { return this; };
}
//# sourceMappingURL=index.js.map

/***/ }),
/* 57 */
/***/ (function(module, exports) {

//

module.exports = function shallowEqual(objA, objB, compare, compareContext) {
  var ret = compare ? compare.call(compareContext, objA, objB) : void 0;

  if (ret !== void 0) {
    return !!ret;
  }

  if (objA === objB) {
    return true;
  }

  if (typeof objA !== "object" || !objA || typeof objB !== "object" || !objB) {
    return false;
  }

  var keysA = Object.keys(objA);
  var keysB = Object.keys(objB);

  if (keysA.length !== keysB.length) {
    return false;
  }

  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);

  // Test for A's keys different from B.
  for (var idx = 0; idx < keysA.length; idx++) {
    var key = keysA[idx];

    if (!bHasOwnProperty(key)) {
      return false;
    }

    var valueA = objA[key];
    var valueB = objB[key];

    ret = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;

    if (ret === false || (ret === void 0 && valueA !== valueB)) {
      return false;
    }
  }

  return true;
};


/***/ }),
/* 58 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = setRadioAppearance;
function setRadioAppearance(doc) {
    var oldAppearanceFuncition = doc.AcroFormAppearance.RadioButton.Circle.YesNormal;
    doc.AcroFormAppearance.RadioButton.Circle.YesNormal = function (formObject) {
        var xobj = oldAppearanceFuncition(formObject);
        var stream = xobj.stream.split('\n');
        var encodeColor = doc.__private__.encodeColorString(formObject.color);
        stream[0] = stream[0] + '\n' + encodeColor + '\n' + encodeColor.toUpperCase();
        xobj.stream = stream.join('\n');
        return xobj;
    };
}


/***/ }),
/* 59 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_brick__ = __webpack_require__(7);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ColoredBrick; });


var ColoredBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(ColoredBrick, _super);
    function ColoredBrick(controller, rect, color, renderWidth, renderHeight) {
        var _this = _super.call(this, undefined, controller, rect) || this;
        _this.color = color;
        _this.renderWidth = renderWidth;
        _this.renderHeight = renderHeight;
        return _this;
    }
    ColoredBrick.prototype.renderInteractive = function () {
        var _a, _b;
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __awaiter */])(this, void 0, void 0, function () {
            var oldFillColor;
            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["c" /* __generator */])(this, function (_c) {
                oldFillColor = this.controller.doc.getFillColor();
                this.controller.doc.setFillColor(this.color || 'black');
                this.controller.doc.rect(this.xLeft, this.yTop, (_a = this.renderWidth) !== null && _a !== void 0 ? _a : this.width, (_b = this.renderHeight) !== null && _b !== void 0 ? _b : this.height, 'F');
                this.controller.doc.setFillColor(oldFillColor);
                return [2 /*return*/];
            });
        });
    };
    return ColoredBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_brick__["a" /* PdfBrick */]));



/***/ }),
/* 60 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pdf_text__ = __webpack_require__(4);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DescriptionBrick; });


var DescriptionBrick = /** @class */ (function (_super) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */])(DescriptionBrick, _super);
    function DescriptionBrick(question, controller, rect, text) {
        return _super.call(this, question, controller, rect, text) || this;
    }
    return DescriptionBrick;
}(__WEBPACK_IMPORTED_MODULE_1__pdf_text__["a" /* TextBrick */]));



/***/ }),
/* 61 */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || Function("return this")() || (1,eval)("this");
} catch(e) {
	// This works if the window reference is available
	if(typeof window === "object")
		g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),
/* 62 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {/* global jsPDF */
/**
 * @license
 * Copyright (c) 2016 Alexander Weidt,
 * https://github.com/BiggA94
 * 
 * Licensed under the MIT License. http://opensource.org/licenses/mit-license
 */

/** 
* jsPDF AcroForm Plugin
* @module AcroForm
*/
var jspdf = __webpack_require__(18);
(function (jsPDF, globalObj) {
    'use strict';

    var jsPDFAPI = jsPDF.API;
    var scope;
    var scaleFactor = 1;
    function toUnicode(str) {
        var unicodeString = '';
        for (var i = 0; i < str.length; i++) {
            var theUnicode = str.charCodeAt(i).toString(16).toUpperCase();
            while (theUnicode.length < 4) {
                theUnicode = '0' + theUnicode;
            };
            unicodeString += theUnicode;
        }
        return '<FEFF' + unicodeString + '>';
    }
    var pdfEscape = function (value) { return value.replace(/\\/g, '\\\\').replace(/\(/g, '\\(').replace(/\)/g, '\\)') };
    var pdfUnescape = function (value) { return value.replace(/\\\\/g, '\\').replace(/\\\(/g, '(').replace(/\\\)/g, ')'); };
    function arrayToPdfUnicodeArray(value) {
        var result = '[ ';
        for (var i = 0; i < value.length; i++) {
            result += toUnicode(value[i]);
        }
        result += ' ]'
        return result;
    }
    var f2 = function (number) {
        return number.toFixed(2); // Ie, %.2f
    };

    var f5 = function (number) {
        return number.toFixed(5); // Ie, %.2f
    };

    jsPDFAPI.__acroform__ = {};
    var inherit = function (child, parent) {
        child.prototype = Object.create(parent.prototype);
        child.prototype.constructor = child;
    };

    var scale = function (x) {
        return (x * scaleFactor);
    };
    var antiScale = function (x) {
        return (x / scaleFactor);
    };

    var createFormXObject = function (formObject) {
        var xobj = new AcroFormXObject();
        var height = AcroFormAppearance.internal.getHeight(formObject) || 0;
        var width = AcroFormAppearance.internal.getWidth(formObject) || 0;
        xobj.BBox = [0, 0, Number(f2(width)), Number(f2(height))];
        return xobj;
    };

    /**
    * Bit-Operations
    */
    var setBit = jsPDFAPI.__acroform__.setBit = function (number, bitPosition) {
        number = number || 0;
        bitPosition = bitPosition || 0;

        if (isNaN(number) || isNaN(bitPosition)) {
            throw new Error('Invalid arguments passed to jsPDF.API.__acroform__.setBit');
        }
        var bitMask = 1 << bitPosition;

        number |= bitMask;

        return number;
    };

    var clearBit = jsPDFAPI.__acroform__.clearBit = function (number, bitPosition) {
        number = number || 0;
        bitPosition = bitPosition || 0;

        if (isNaN(number) || isNaN(bitPosition)) {
            throw new Error('Invalid arguments passed to jsPDF.API.__acroform__.clearBit');
        }
        var bitMask = 1 << bitPosition;

        number &= ~bitMask;

        return number;
    };

    var getBit = jsPDFAPI.__acroform__.getBit = function (number, bitPosition) {
        if (isNaN(number) || isNaN(bitPosition)) {
            throw new Error('Invalid arguments passed to jsPDF.API.__acroform__.getBit');
        }
        return (number & (1 << bitPosition)) === 0 ? 0 : 1;
    };

    /*
    * Ff starts counting the bit position at 1 and not like javascript at 0
    */
    var getBitForPdf = jsPDFAPI.__acroform__.getBitForPdf = function (number, bitPosition) {
        if (isNaN(number) || isNaN(bitPosition)) {
            throw new Error('Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf');
        }
        return getBit(number, bitPosition - 1);
    };

    var setBitForPdf = jsPDFAPI.__acroform__.setBitForPdf = function (number, bitPosition) {
        if (isNaN(number) || isNaN(bitPosition)) {
            throw new Error('Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf');
        }
        return setBit(number, bitPosition - 1);
    };

    var clearBitForPdf = jsPDFAPI.__acroform__.clearBitForPdf = function (number, bitPosition) {
        if (isNaN(number) || isNaN(bitPosition)) {
            throw new Error('Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf');
        }
        return clearBit(number, bitPosition - 1);
    };

    var calculateCoordinates = jsPDFAPI.__acroform__.calculateCoordinates = function (args) {
        var getHorizontalCoordinate = this.internal.getHorizontalCoordinate;
        var getVerticalCoordinate = this.internal.getVerticalCoordinate;
        var x = args[0];
        var y = args[1];
        var w = args[2];
        var h = args[3];

        var coordinates = {};

        coordinates.lowerLeft_X = getHorizontalCoordinate(x) || 0;
        coordinates.lowerLeft_Y = getVerticalCoordinate(y + h) || 0;
        coordinates.upperRight_X = getHorizontalCoordinate(x + w) || 0;
        coordinates.upperRight_Y = getVerticalCoordinate(y) || 0;

        return [Number(f2(coordinates.lowerLeft_X)), Number(f2(coordinates.lowerLeft_Y)), Number(f2(coordinates.upperRight_X)), Number(f2(coordinates.upperRight_Y))];
    };

    var calculateAppearanceStream = function (formObject) {
        if (formObject.appearanceStreamContent) {
            return formObject.appearanceStreamContent;
        }

        if (!formObject.V && !formObject.DV) {
            return;
        }

        // else calculate it

        var stream = [];
        var text = formObject.V || formObject.DV;
        var calcRes = calculateX(formObject, text);
        var fontKey = scope.internal.getFont(formObject.fontName, formObject.fontStyle).id;

        //PDF 32000-1:2008, page 444
        stream.push('/Tx BMC');
        stream.push('q');
        stream.push('BT'); // Begin Text
        stream.push(scope.__private__.encodeColorString(formObject.color));
        stream.push('/' + fontKey + ' ' + f2(calcRes.fontSize) + ' Tf');
        stream.push('1 0 0 1 0 0 Tm');// Transformation Matrix
        stream.push(calcRes.text);
        stream.push('ET'); // End Text    
        stream.push('Q');
        stream.push('EMC');

        var appearanceStreamContent = new createFormXObject(formObject);
        appearanceStreamContent.stream = stream.join("\n");
        return appearanceStreamContent;
    };

    var calculateX = function (formObject, text) {
        if (formObject.isUnicode) text = formObject.trueValue;
         var maxFontSize =
            formObject.fontSize === 0 ? formObject.maxFontSize : formObject.fontSize;
        var returnValue = {
            text: "",
            fontSize: ""
        };
        // Remove Brackets
        text = text.substr(0, 1) == "(" ? text.substr(1) : text;
        text =
            text.substr(text.length - 1) == ")"
            ? text.substr(0, text.length - 1)
            : text;
        // split into array of words
        var textSplit = text.split(" ");
        textSplit = textSplit.map(function (word) {
            return word.split("\n");
        });
        if (!formObject.multiline) {
            textSplit = textSplit.map(function (arr) {
                return [arr.join(" ")]
            });
        }

        var fontSize = maxFontSize; // The Starting fontSize (The Maximum)
        var lineSpacing = 2;
        var borderPadding = 2;

        var height = AcroFormAppearance.internal.getHeight(formObject) || 0;
        height = height < 0 ? -height : height;
        var width = AcroFormAppearance.internal.getWidth(formObject) || 0;
        width = width < 0 ? -width : width;

        var isSmallerThanWidth = function(i, lastLine, fontSize) {
            if (i + 1 < textSplit.length) {
            var tmp = lastLine + " " + textSplit[i + 1][0];
            var TextWidth = calculateFontSpace(tmp, formObject, fontSize).width;
            var FieldWidth = width - 2 * borderPadding;
            return TextWidth <= FieldWidth;
            } else {
            return false;
            }
        };

        fontSize++;
        FontSize: while (fontSize > 0) {
            text = "";
            fontSize--;
            var textHeight = calculateFontSpace("3", formObject, fontSize).height;
            var startY = formObject.multiline
            ? height - fontSize
            : (height - textHeight) / 2;
            startY += lineSpacing;
            var startX;

            var lastY = startY;
            var firstWordInLine = 0,
            lastWordInLine = 0;
            var lastLength;
            var currWord = 0;

            if (fontSize <= 0) {
            // In case, the Text doesn't fit at all
            fontSize = 12;
            text = "(...) Tj\n";
            text +=
                "% Width of Text: " +
                calculateFontSpace(text, formObject, fontSize).width +
                ", FieldWidth:" +
                width +
                "\n";
            break;
            }

            var lastLine = "";
            var lineCount = 0;
            Line: for (var i = 0; i < textSplit.length; i++) {
            if (textSplit.hasOwnProperty(i)) {
                var isWithNewLine = false;
                if (textSplit[i].length !== 1 && currWord !== textSplit[i].length - 1) {
                if (
                    (textHeight + lineSpacing) * (lineCount + 2) + lineSpacing >
                    height
                ) {
                    continue FontSize;
                }

                lastLine += textSplit[i][currWord];
                isWithNewLine = true;
                lastWordInLine = i;
                i--;
                } else {
                lastLine += textSplit[i][currWord] + " ";
                lastLine =
                    lastLine.substr(lastLine.length - 1) == " "
                    ? lastLine.substr(0, lastLine.length - 1)
                    : lastLine;
                var key = parseInt(i);
                var nextLineIsSmaller = isSmallerThanWidth(key, lastLine, fontSize);
                var isLastWord = i >= textSplit.length - 1;

                if (nextLineIsSmaller && !isLastWord) {
                    lastLine += " ";
                    currWord = 0;
                    continue; // Line
                } else if (!nextLineIsSmaller && !isLastWord) {
                    if (!formObject.multiline) {
                    continue FontSize;
                    } else {
                    if (
                        (textHeight + lineSpacing) * (lineCount + 2) + lineSpacing >
                        height
                    ) {
                        // If the Text is higher than the
                        // FieldObject
                        continue FontSize;
                    }
                    lastWordInLine = key;
                    // go on
                    }
                } else if (isLastWord) {
                    lastWordInLine = key;
                } else {
                    if (
                    formObject.multiline &&
                    (textHeight + lineSpacing) * (lineCount + 2) + lineSpacing >
                        height
                    ) {
                    // If the Text is higher than the FieldObject
                    continue FontSize;
                    }
                }
                }
                // Remove last blank

                var line = "";

                for (var x = firstWordInLine; x <= lastWordInLine; x++) {
                    var currLine = textSplit[x];
                    if (formObject.multiline) {
                        if (x === lastWordInLine) {
                        line += currLine[currWord] + " ";
                        currWord = (currWord + 1) % currLine.length;
                        continue;
                        }
                        if (x === firstWordInLine) {
                        line += currLine[currLine.length - 1] + " ";
                        continue;
                        }
                    }
                    line += currLine[0] + " ";
                }

                // Remove last blank
                line =
                line.substr(line.length - 1) == " "
                    ? line.substr(0, line.length - 1)
                    : line;
                // lastLength -= blankSpace.width;
                lastLength = calculateFontSpace(line, formObject, fontSize).width;

                // Calculate startX
                switch (formObject.textAlign) {
                case "right":
                    startX = width - lastLength - borderPadding;
                    break;
                case "center":
                    startX = (width - lastLength) / 2;
                    break;
                case "left":
                default:
                    startX = borderPadding;
                    break;
                }
                text += f2(startX) + " " + f2(lastY) + " Td\n";

                if (formObject.isUnicode) {
                    var fontList = {};
                    fontList[scope.internal.getFont().id] = scope.internal.getFont();
                    var payload = {
                        text: line,
                        x: null,
                        y: null,
                        options: {
                            lang: null
                        },
                        mutex: {
                            pdfEscape: pdfEscape,
                            activeFontKey: scope.internal.getFont().id,
                            fonts: fontList,
                            activeFontSize: formObject.fontSize
                        }
                    };
                    scope.internal.events.publish('postProcessText', payload);
                    text += '<' + payload.text + '> Tj\n';
                }
                else {
                    text += '(' + pdfEscape(line) + ') Tj\n';
                }
                // reset X in PDF
                text += -f2(startX) + " 0 Td\n";

                // After a Line, adjust y position
                lastY = -(fontSize + lineSpacing);

                // Reset for next iteration step
                lastLength = 0;
                firstWordInLine = isWithNewLine ? lastWordInLine : lastWordInLine + 1;
                lineCount++;

                lastLine = "";
                continue Line;
            }
            }
            break;
        }

        returnValue.text = text;
        returnValue.fontSize = fontSize;

        return returnValue;
    };

    /**
    * Small workaround for calculating the TextMetric approximately.
    * 
    * @param text
    * @param fontsize
    * @returns {TextMetrics} (Has Height and Width)
    */
    var calculateFontSpace = function (text, formObject, fontSize) {
        var font = scope.internal.getFont(formObject.fontName, formObject.fontStyle);
        var width = scope.getStringUnitWidth(text, { font: font, fontSize: parseFloat(fontSize), charSpace: 0 }) * parseFloat(fontSize);
        var height = scope.getStringUnitWidth("3", { font: font, fontSize: parseFloat(fontSize), charSpace: 0 }) * parseFloat(fontSize) * 1.5;
        return { height: height, width: width };
    };

    var acroformPluginTemplate = {
        fields: [],
        xForms: [],
        /**
        * acroFormDictionaryRoot contains information about the AcroForm
        * Dictionary 0: The Event-Token, the AcroFormDictionaryCallback has
        * 1: The Object ID of the Root
        */
        acroFormDictionaryRoot: null,
        /**
        * After the PDF gets evaluated, the reference to the root has to be
        * reset, this indicates, whether the root has already been printed
        * out
        */
        printedOut: false,
        internal: null,
        isInitialized: false
    };

    var annotReferenceCallback = function () {
        //set objId to undefined and force it to get a new objId on buildDocument
        scope.internal.acroformPlugin.acroFormDictionaryRoot.objId = undefined;
        var fields = scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields;
        for (var i in fields) {
            if (fields.hasOwnProperty(i)) {
                var formObject = fields[i];
                //set objId to undefined and force it to get a new objId on buildDocument
                formObject.objId = undefined;
                // add Annot Reference!
                if (formObject.hasAnnotation) {
                    // If theres an Annotation Widget in the Form Object, put the
                    // Reference in the /Annot array
                    createAnnotationReference.call(scope, formObject);
                }
            }
        }
    };

    var putForm = function (formObject) {
        if (scope.internal.acroformPlugin.printedOut) {
            scope.internal.acroformPlugin.printedOut = false;
            scope.internal.acroformPlugin.acroFormDictionaryRoot = null;
        }
        if (!scope.internal.acroformPlugin.acroFormDictionaryRoot) {
            initializeAcroForm.call(scope);
        }
        scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(formObject);
    };
    /**
    * Create the Reference to the widgetAnnotation, so that it gets referenced
    * in the Annot[] int the+ (Requires the Annotation Plugin)
    */
    var createAnnotationReference = function (object) {
        var options = {
            type: 'reference',
            object: object
        };
        var findEntry = function (entry) { return (entry.type === options.type && entry.object === options.object); };
        if (scope.internal.getPageInfo(object.page).pageContext.annotations.find(findEntry) === undefined) {
            scope.internal.getPageInfo(object.page).pageContext.annotations.push(options);
        }
    };

    // Callbacks

    var putCatalogCallback = function () {
        // Put reference to AcroForm to DocumentCatalog
        if (typeof scope.internal.acroformPlugin.acroFormDictionaryRoot != 'undefined') {
            // for safety, shouldn't normally be the case
            scope.internal.write('/AcroForm ' + scope.internal.acroformPlugin.acroFormDictionaryRoot.objId + ' ' + 0 + ' R');
        } else {
            throw new Error('putCatalogCallback: Root missing.');
        }
    };

    /**
    * Adds /Acroform X 0 R to Document Catalog, and creates the AcroForm
    * Dictionary
    */
    var AcroFormDictionaryCallback = function () {
        // Remove event
        scope.internal.events.unsubscribe(scope.internal.acroformPlugin.acroFormDictionaryRoot._eventID);
        delete scope.internal.acroformPlugin.acroFormDictionaryRoot._eventID;
        scope.internal.acroformPlugin.printedOut = true;
    };

    /**
    * Creates the single Fields and writes them into the Document
    * 
    * If fieldArray is set, use the fields that are inside it instead of the
    * fields from the AcroRoot (for the FormXObjects...)
    */
    var createFieldCallback = function (fieldArray) {
        var standardFields = (!fieldArray);

        if (!fieldArray) {
            // in case there is no fieldArray specified, we want to print out
            // the Fields of the AcroForm
            // Print out Root
            scope.internal.newObjectDeferredBegin(scope.internal.acroformPlugin.acroFormDictionaryRoot.objId, true);
            scope.internal.acroformPlugin.acroFormDictionaryRoot.putStream();
        }

        fieldArray = fieldArray || scope.internal.acroformPlugin.acroFormDictionaryRoot.Kids;

        for (var i in fieldArray) {
            if (fieldArray.hasOwnProperty(i)) {
                var fieldObject = fieldArray[i];
                var keyValueList = [];
                var oldRect = fieldObject.Rect;

                if (fieldObject.Rect) {
                    fieldObject.Rect = calculateCoordinates.call(this, fieldObject.Rect);
                }

                // Start Writing the Object
                scope.internal.newObjectDeferredBegin(fieldObject.objId, true);

                fieldObject.DA = AcroFormAppearance.createDefaultAppearanceStream(fieldObject);

                if (typeof fieldObject === "object" && typeof fieldObject.getKeyValueListForStream === "function") {
                    keyValueList = fieldObject.getKeyValueListForStream();
                }

                fieldObject.Rect = oldRect;

                if (fieldObject.hasAppearanceStream && !fieldObject.appearanceStreamContent) {
                    // Calculate Appearance
                    var appearance = calculateAppearanceStream.call(this, fieldObject);
                    keyValueList.push({ key: 'AP', value: "<</N " + appearance + ">>" });

                    scope.internal.acroformPlugin.xForms.push(appearance);
                }

                // Assume AppearanceStreamContent is a Array with N,R,D (at least
                // one of them!)
                if (fieldObject.appearanceStreamContent) {
                    var appearanceStreamString = "";
                    // Iterate over N,R and D
                    for (var k in fieldObject.appearanceStreamContent) {
                        if (fieldObject.appearanceStreamContent.hasOwnProperty(k)) {
                            var value = fieldObject.appearanceStreamContent[k];
                            appearanceStreamString += ("/" + k + " ");
                            appearanceStreamString += "<<";
                            if (Object.keys(value).length >= 1 || Array.isArray(value)) {
                                // appearanceStream is an Array or Object!
                                for (var i in value) {
                                    if (value.hasOwnProperty(i)) {
                                        var obj = value[i];
                                        if (typeof obj === 'function') {
                                            // if Function is referenced, call it in order
                                            // to get the FormXObject
                                            obj = obj.call(this, fieldObject);
                                        }
                                        appearanceStreamString += ("/" + i + " " + obj + " ");

                                        // In case the XForm is already used, e.g. OffState
                                        // of CheckBoxes, don't add it
                                        if (!(scope.internal.acroformPlugin.xForms.indexOf(obj) >= 0))
                                            scope.internal.acroformPlugin.xForms.push(obj);

                                    }
                                }
                            } else {
                                obj = value;
                                if (typeof obj === 'function') {
                                    // if Function is referenced, call it in order to
                                    // get the FormXObject
                                    obj = obj.call(this, fieldObject);
                                }
                                appearanceStreamString += ("/" + i + " " + obj);
                                if (!(scope.internal.acroformPlugin.xForms.indexOf(obj) >= 0))
                                    scope.internal.acroformPlugin.xForms.push(obj);
                            }
                            appearanceStreamString += ">>";
                        }
                    }

                    // appearance stream is a normal Object..
                    keyValueList.push({ key: 'AP', value: "<<\n" + appearanceStreamString + ">>" });
                }

                scope.internal.putStream({ additionalKeyValues: keyValueList });

                scope.internal.out("endobj");

            }
        }
        if (standardFields) {
            createXFormObjectCallback.call(this, scope.internal.acroformPlugin.xForms);
        }
    };

    var createXFormObjectCallback = function (fieldArray) {
        for (var i in fieldArray) {
            if (fieldArray.hasOwnProperty(i)) {
                var key = i;
                var fieldObject = fieldArray[i];
                // Start Writing the Object
                scope.internal.newObjectDeferredBegin(fieldObject && fieldObject.objId, true);

                if (typeof fieldObject === "object" && typeof fieldObject.putStream === "function") {
                    fieldObject.putStream();
                }
                delete fieldArray[key];
            }
        }
    };

    var initializeAcroForm = function () {
        if (this.internal !== undefined && (this.internal.acroformPlugin === undefined || this.internal.acroformPlugin.isInitialized === false)) {

            scope = this;

            AcroFormField.FieldNum = 0;
            this.internal.acroformPlugin = JSON.parse(JSON.stringify(acroformPluginTemplate));
            if (this.internal.acroformPlugin.acroFormDictionaryRoot) {
                throw new Error("Exception while creating AcroformDictionary");
            }
            scaleFactor = scope.internal.scaleFactor;
            // The Object Number of the AcroForm Dictionary
            scope.internal.acroformPlugin.acroFormDictionaryRoot = new AcroFormDictionary();

            // add Callback for creating the AcroForm Dictionary
            scope.internal.acroformPlugin.acroFormDictionaryRoot._eventID = scope.internal.events.subscribe('postPutResources', AcroFormDictionaryCallback);

            scope.internal.events.subscribe('buildDocument', annotReferenceCallback); // buildDocument

            // Register event, that is triggered when the DocumentCatalog is
            // written, in order to add /AcroForm
            scope.internal.events.subscribe('putCatalog', putCatalogCallback);

            // Register event, that creates all Fields
            scope.internal.events.subscribe('postPutPages', createFieldCallback);

            scope.internal.acroformPlugin.isInitialized = true;
        }
    };

    //PDF 32000-1:2008, page 26, 7.3.6
    var arrayToPdfArray = jsPDFAPI.__acroform__.arrayToPdfArray = function (array) {
        if (Array.isArray(array)) {
            var content = '[';
            for (var i = 0; i < array.length; i++) {
                if (i !== 0) {
                    content += ' ';
                }
                switch (typeof array[i]) {
                    case 'boolean':
                    case 'number':
                    case 'object':
                        content += array[i].toString();
                        break;
                    case 'string':
                        if (array[i].substr(0, 1) !== '/') {
                            content += '(' + pdfEscape(array[i].toString()) + ')';
                        } else {
                            content += array[i].toString();
                        }
                        break;
                }
            }
            content += ']';
            return content;
        }
        throw new Error('Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray');
    };
    function getMatches(string, regex, index) {
        index || (index = 1); // default to the first capturing group
        var matches = [];
        var match;
        while (match = regex.exec(string)) {
            matches.push(match[index]);
        }
        return matches;
    }
    var pdfArrayToStringArray = function (array) {
        var result = [];
        if (typeof array === "string") {
            result = getMatches(array, /\((.*?)\)/g);
        }
        return result;
    };

    var toPdfString = function (string) {
        string = string || "";
        string.toString();
        string = '(' + pdfEscape(string) + ')';
        return string;
    };

    // ##########################
    // Classes
    // ##########################

    /**
    * @class AcroFormPDFObject
    * @classdesc A AcroFormPDFObject
    */
    var AcroFormPDFObject = function () {
        var _objId;

        /**
        * @name AcroFormPDFObject#objId
        * @type {any}
        */
        Object.defineProperty(this, 'objId', {
            configurable: true,
            get: function () {
                if (!_objId) {
                    _objId = scope.internal.newObjectDeferred();
                }
                return _objId
            },
            set: function (value) {
                _objId = value;
            }
        });
    };

    /**
    * @function AcroFormPDFObject.toString
    */
    AcroFormPDFObject.prototype.toString = function () {
        return this.objId + " 0 R";
    };

    AcroFormPDFObject.prototype.putStream = function () {
        var keyValueList = this.getKeyValueListForStream();
        scope.internal.putStream({ data: this.stream, additionalKeyValues: keyValueList });
        scope.internal.out("endobj");
    };

    /**
    * Returns an key-value-List of all non-configurable Variables from the Object
    * 
    * @name getKeyValueListForStream
    * @returns {string}
    */
    AcroFormPDFObject.prototype.getKeyValueListForStream = function () {
        var createKeyValueListFromFieldObject = function (fieldObject) {
            var keyValueList = [];
            var keys = Object.getOwnPropertyNames(fieldObject).filter(function (key) {
                return (key != 'content' && key != 'appearanceStreamContent' && key.substring(0, 1) != "_");
            });

            for (var i in keys) {
                var propertyDescriptor = Object.getOwnPropertyDescriptor(fieldObject, keys[i]);
                if (propertyDescriptor && propertyDescriptor.configurable === false) {
                    var key = keys[i];
                    var value = fieldObject[key];
                    if (value) {
                        if (Array.isArray(value)) {
                            keyValueList.push({ key: key, value: arrayToPdfArray(value) });
                        } else if (value instanceof AcroFormPDFObject) {
                            // In case it is a reference to another PDFObject,
                            // take the reference number
                            keyValueList.push({ key: key, value: value.objId + " 0 R" });
                        } else if (typeof value !== "function") {
                            keyValueList.push({ key: key, value: value });
                        }
                    }
                }
            }
            return keyValueList;
        };

        return createKeyValueListFromFieldObject(this);
    };

    var AcroFormXObject = function () {
        AcroFormPDFObject.call(this);


        Object.defineProperty(this, 'Type', {
            value: "/XObject",
            configurable: false,
            writeable: true
        });

        Object.defineProperty(this, 'Subtype', {
            value: "/Form",
            configurable: false,
            writeable: true
        });

        Object.defineProperty(this, 'FormType', {
            value: 1,
            configurable: false,
            writeable: true
        });

        var _BBox = [];
        Object.defineProperty(this, 'BBox', {
            configurable: false,
            writeable: true,
            get: function () {
                return _BBox;
            },
            set: function (value) {
                _BBox = value;
            }
        });

        Object.defineProperty(this, 'Resources', {
            value: "2 0 R",
            configurable: false,
            writeable: true
        });

        var _stream;
        Object.defineProperty(this, 'stream', {
            enumerable: false,
            configurable: true,
            set: function (value) {
                _stream = value.trim();
            },
            get: function () {
                if (_stream) {
                    return _stream;
                } else {
                    return null;
                }
            }
        });
    };

    inherit(AcroFormXObject, AcroFormPDFObject);

    var AcroFormDictionary = function () {
        AcroFormPDFObject.call(this);

        var _Kids = [];

        Object.defineProperty(this, 'Kids', {
            enumerable: false,
            configurable: true,
            get: function () {
                if (_Kids.length > 0) {
                    return _Kids;
                } else {
                    return undefined;
                }
            }
        });
        Object.defineProperty(this, 'Fields', {
            enumerable: false,
            configurable: false,
            get: function () {
                return _Kids;
            }
        });

        // Default Appearance
        var _DA;
        Object.defineProperty(this, 'DA', {
            enumerable: false,
            configurable: false,
            get: function () {
                if (!_DA) {
                    return undefined;
                }
                return '(' + _DA + ')'
            },
            set: function (value) {
                _DA = value;
            }
        });
    };

    inherit(AcroFormDictionary, AcroFormPDFObject);

    /**
    * The Field Object contains the Variables, that every Field needs
    * 
    * @class AcroFormField
    * @classdesc An AcroForm FieldObject
    */
    var AcroFormField = function () {
        AcroFormPDFObject.call(this);

        //Annotation-Flag See Table 165
        var _F = 4;
        this.isUnicode = false;
        this.trueValue = '';
        Object.defineProperty(this, 'F', {
            enumerable: false,
            configurable: false,
            get: function () {
                return _F;
            },
            set: function (value) {
                if (!isNaN(value)) {
                    _F = value;
                } else {
                    throw new Error('Invalid value "' + value + '" for attribute F supplied.');
                }
            }
        });

        /**
        * (PDF 1.2) If set, print the annotation when the page is printed. If clear, never print the annotation, regardless of wether is is displayed on the screen. 
        * NOTE 2 This can be useful for annotations representing interactive pushbuttons, which would serve no meaningful purpose on the printed page.
        *
        * @name AcroFormField#showWhenPrinted
        * @default true
        * @type {boolean}
        */
        Object.defineProperty(this, 'showWhenPrinted', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(_F, 3));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.F = setBitForPdf(_F, 3);
                } else {
                    this.F = clearBitForPdf(_F, 3);
                }
            }
        });

        var _Ff = 0;
        Object.defineProperty(this, 'Ff', {
            enumerable: false,
            configurable: false,
            get: function () {
                return _Ff;
            },
            set: function (value) {
                if (!isNaN(value)) {
                    _Ff = value;
                } else {
                    throw new Error('Invalid value "' + value + '" for attribute Ff supplied.');
                }
            }
        });

        var _Rect = [];
        Object.defineProperty(this, 'Rect', {
            enumerable: false,
            configurable: false,
            get: function () {
                if (_Rect.length === 0) {
                    return undefined;
                }
                return _Rect;
            },
            set: function (value) {
                if (typeof value !== "undefined") {
                    _Rect = value;
                } else {
                    _Rect = [];
                }
            }
        });

        /**
        * The x-position of the field.
        *
        * @name AcroFormField#x
        * @default null
        * @type {number}
        */
        Object.defineProperty(this, 'x', {
            enumerable: true,
            configurable: true,
            get: function () {
                if (!_Rect || isNaN(_Rect[0])) {
                    return 0;
                }
                return antiScale(_Rect[0]);
            },
            set: function (value) {
                _Rect[0] = scale(value);
            }
        });

        /**
        * The y-position of the field.
        *
        * @name AcroFormField#y
        * @default null
        * @type {number}
        */
        Object.defineProperty(this, 'y', {
            enumerable: true,
            configurable: true,
            get: function () {
                if (!_Rect || isNaN(_Rect[1])) {
                    return 0;
                }
                return antiScale(_Rect[1]);
            },
            set: function (value) {
                _Rect[1] = scale(value);
            }
        });

        /**
        * The width of the field.
        *
        * @name AcroFormField#width
        * @default null
        * @type {number}
        */
        Object.defineProperty(this, 'width', {
            enumerable: true,
            configurable: true,
            get: function () {
                if (!_Rect || isNaN(_Rect[2])) {
                    return 0;
                }
                return antiScale(_Rect[2]);
            },
            set: function (value) {
                _Rect[2] = scale(value);
            }
        });

        /**
        * The height of the field.
        *
        * @name AcroFormField#height
        * @default null
        * @type {number}
        */
        Object.defineProperty(this, 'height', {
            enumerable: true,
            configurable: true,
            get: function () {
                if (!_Rect || isNaN(_Rect[3])) {
                    return 0;
                }
                return antiScale(_Rect[3]);
            },
            set: function (value) {
                _Rect[3] = scale(value);
            }
        });

        var _FT = "";
        Object.defineProperty(this, 'FT', {
            enumerable: true,
            configurable: false,
            get: function () {
                return _FT
            },
            set: function (value) {
                switch (value) {
                    case '/Btn':
                    case '/Tx':
                    case '/Ch':
                    case '/Sig':
                        _FT = value;
                        break;
                    default:
                        throw new Error('Invalid value "' + value + '" for attribute FT supplied.');
                }
            }
        });

        var _T = null;

        Object.defineProperty(this, 'T', {
            enumerable: true,
            configurable: false,
            get: function () {
                if (!_T || _T.length < 1) {
                    // In case of a Child from a RadioÂ´Group, you don't need a FieldName
                    if (this instanceof AcroFormChildClass) {
                        return undefined;
                    }
                    _T = "FieldObject" + (AcroFormField.FieldNum++);
                }
                return '(' + pdfEscape(_T) + ')';
            },
            set: function (value) {
                _T = value.toString();
            }
        });

        /**
        * (Optional) The partial field name (see 12.7.3.2, â€œField Namesâ€).
        *
        * @name AcroFormField#fieldName
        * @default null
        * @type {string}
        */
        Object.defineProperty(this, 'fieldName', {
            configurable: true,
            enumerable: true,
            get: function () {
                return _T;
            },
            set: function (value) {
                _T = value;
            }
        });

        var _fontName = 'helvetica';
        /**
        * The fontName of the font to be used.
        *
        * @name AcroFormField#fontName
        * @default 'helvetica'
        * @type {string}
        */
        Object.defineProperty(this, 'fontName', {
            enumerable: true,
            configurable: true,
            get: function () {
                return _fontName;
            },
            set: function (value) {
                _fontName = value;
            }
        });

        var _fontStyle = 'normal';
        /**
        * The fontStyle of the font to be used.
        *
        * @name AcroFormField#fontStyle
        * @default 'normal'
        * @type {string}
        */
        Object.defineProperty(this, 'fontStyle', {
            enumerable: true,
            configurable: true,
            get: function () {
                return _fontStyle;
            },
            set: function (value) {
                _fontStyle = value;
            }
        });

        var _fontSize = 0;
        /**
        * The fontSize of the font to be used.
        *
        * @name AcroFormField#fontSize
        * @default 0 (for auto)
        * @type {number}
        */
        Object.defineProperty(this, 'fontSize', {
            enumerable: true,
            configurable: true,
            get: function () {
                return antiScale(_fontSize);
            },
            set: function (value) {
                _fontSize = scale(value);
            }
        });

        var _maxFontSize = 50;
        /**
        * The maximum fontSize of the font to be used.
        *
        * @name AcroFormField#maxFontSize
        * @default 0 (for auto)
        * @type {number}
        */
        Object.defineProperty(this, 'maxFontSize', {
            enumerable: true,
            configurable: true,
            get: function () {
                return antiScale(_maxFontSize);
            },
            set: function (value) {
                _maxFontSize = scale(value);
            }
        });

        var _color = 'black';
        /**
        * The color of the text
        *
        * @name AcroFormField#color
        * @default 'black'
        * @type {string|rgba}
        */
        Object.defineProperty(this, 'color', {
            enumerable: true,
            configurable: true,
            get: function () {
                return _color;
            },
            set: function (value) {
                _color = value;
            }
        });

        var _DA = '/F1 0 Tf 0 g';
        // Defines the default appearance (Needed for variable Text)
        Object.defineProperty(this, 'DA', {
            enumerable: true,
            configurable: false,
            get: function () {
                if (!_DA
                    || this instanceof AcroFormChildClass
                    || this instanceof AcroFormTextField) {
                    return undefined;
                }
                return toPdfString(_DA);
            },
            set: function (value) {
                value = value.toString();
                _DA = value;
            }
        });


        var _DV = null;
        Object.defineProperty(this, 'DV', {
            enumerable: false,
            configurable: false,
            get: function () {
                if (!_DV) {
                    return undefined;
                }
                if ((this instanceof AcroFormButton === false)) {
                    return toPdfString(_DV);
                }
                return _DV;
            },
            set: function (value) {
                value = value.toString();
                if ((this instanceof AcroFormButton === false)) {
                    if (value.substr(0, 1) === '(') {
                        _DV = pdfUnescape(value.substr(1, value.length - 2));
                    } else {
                        _DV = pdfUnescape(value);
                    }
                } else {
                    _DV = value;
                }
            }
        });

        /**
        * (Optional; inheritable) The default value to which the field reverts when a reset-form action is executed (see 12.7.5.3, â€œReset-Form Actionâ€). The format of this value is the same as that of value. 
        *
        * @name AcroFormField#defaultValue
        * @default null
        * @type {any}
        */
        Object.defineProperty(this, 'defaultValue', {
            enumerable: true,
            configurable: true,
            get: function () {
                if ((this instanceof AcroFormButton === true)) {
                    return pdfUnescape(_DV.substr(1, _DV.length - 1));
                } else {
                    return _DV;
                }
            },
            set: function (value) {
                value = value.toString();
                if ((this instanceof AcroFormButton === true)) {
                    _DV = '/' + value;
                } else {
                    _DV = value;
                }
            }
        });

        var _V = null;
        Object.defineProperty(this, 'V', {
            enumerable: false,
            configurable: false,
            get: function () {
                if (this.isUnicode) {
                    return _V;
                }
                if (!_V) {
                    return undefined;
                }
                if ((this instanceof AcroFormButton === false)) {
                    return toPdfString(_V);
                }
                return _V;
            },
            set: function (value) {
                value = value.toString();
                if (this.isUnicode) {
                    _V = toUnicode(value);
                    this.trueValue = value;
                }
                else {
                    if ((this instanceof AcroFormButton === false)) {
                        if (value.substr(0, 1) === '(') {
                            _V = pdfUnescape(value.substr(1, value.length - 2));
                        } else {
                            _V = pdfUnescape(value);
                        }
                    } else {
                        _V = value;
                    }
                }
            }
        });

        /**
        * (Optional; inheritable) The fieldâ€™s value, whose format varies depending on the field type. See the descriptions of individual field types for further information. 
        *
        * @name AcroFormField#value
        * @default null
        * @type {any}
        */
        Object.defineProperty(this, 'value', {
            enumerable: true,
            configurable: true,
            get: function () {
                if ((this instanceof AcroFormButton === true)) {
                    return pdfUnescape(_V.substr(1, _V.length - 1));
                } else {
                    return _V;
                }
            },
            set: function (value) {
                value = value.toString();
                if ((this instanceof AcroFormButton === true)) {
                    _V = '/' + value;
                } else {
                    _V = value;
                }
            }
        });

        /**
        * Check if field has annotations
        *
        * @name AcroFormField#hasAnnotation
        * @readonly
        * @type {boolean}
        */
        Object.defineProperty(this, 'hasAnnotation', {
            enumerable: true,
            configurable: true,
            get: function () {
                return (this.Rect);
            }
        });

        Object.defineProperty(this, 'Type', {
            enumerable: true,
            configurable: false,
            get: function () {
                return (this.hasAnnotation) ? "/Annot" : null;
            }
        });

        Object.defineProperty(this, 'Subtype', {
            enumerable: true,
            configurable: false,
            get: function () {
                return (this.hasAnnotation) ? "/Widget" : null;
            }
        });

        var _hasAppearanceStream = false;
        /**
        * true if field has an appearanceStream
        *
        * @name AcroFormField#hasAppearanceStream
        * @readonly
        * @type {boolean}
        */
        Object.defineProperty(this, 'hasAppearanceStream', {
            enumerable: true,
            configurable: true,
            writeable: true,
            get: function () {
                return _hasAppearanceStream;
            },
            set: function (value) {
                value = Boolean(value);
                _hasAppearanceStream = value;
            }
        });

        /**
        * The page on which the AcroFormField is placed
        *
        * @name AcroFormField#page
        * @type {number}
        */
        var _page;
        Object.defineProperty(this, 'page', {
            enumerable: true,
            configurable: true,
            writeable: true,
            get: function () {
                if (!_page) {
                    return undefined;
                }
                return _page
            },
            set: function (value) {
                _page = value;
            }
        });

        /**
        * If set, the user may not change the value of the field. Any associated widget annotations will not interact with the user; that is, they will not respond to mouse clicks or change their appearance in response to mouse motions. This flag is useful for fields whose values are computed or imported from a database. 
        *
        * @name AcroFormField#readOnly
        * @default false
        * @type {boolean}
        */
        Object.defineProperty(this, 'readOnly', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 1));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 1);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 1);
                }
            }
        });

        /**
        * If set, the field shall have a value at the time it is exported by a submitform action (see 12.7.5.2, â€œSubmit-Form Actionâ€). 
        *
        * @name AcroFormField#required
        * @default false
        * @type {boolean}
        */
        Object.defineProperty(this, 'required', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 2));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 2);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 2);
                }
            }
        });

        /**
        * If set, the field shall not be exported by a submit-form action (see 12.7.5.2, â€œSubmit-Form Actionâ€)
        *
        * @name AcroFormField#noExport
        * @default false
        * @type {boolean}
        */
        Object.defineProperty(this, 'noExport', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 3));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 3);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 3);
                }
            }
        });


        var _Q = null;
        Object.defineProperty(this, 'Q', {
            enumerable: true,
            configurable: false,
            get: function () {
                if (_Q === null) {
                    return undefined;
                }
                return _Q;
            },
            set: function (value) {
                if ([0, 1, 2].indexOf(value) !== -1) {
                    _Q = value;
                } else {
                    throw new Error('Invalid value "' + value + '" for attribute Q supplied.');
                }
            }
        });

        /**
        * (Optional; inheritable) A code specifying the form of quadding (justification) that shall be used in displaying the text:
        * 'left', 'center', 'right'
        *
        * @name AcroFormField#textAlign
        * @default 'left'
        * @type {string}
        */
        Object.defineProperty(this, 'textAlign', {
            get: function () {
                var result;
                switch (_Q) {
                    case 0:
                    default:
                        result = 'left';
                        break;
                    case 1:
                        result = 'center';
                        break;
                    case 2:
                        result = 'right';
                        break;
                }
                return result;
            },
            configurable: true,
            enumerable: true,
            set: function (value) {
                switch (value) {
                    case 'right':
                    case 2:
                        _Q = 2;
                        break;
                    case 'center':
                    case 1:
                        _Q = 1;
                        break;
                    case 'left':
                    case 0:
                    default:
                        _Q = 0;
                }
            }
        });

    };

    inherit(AcroFormField, AcroFormPDFObject);

    /**
    * @class AcroFormChoiceField
    * @extends AcroFormField
    */
    var AcroFormChoiceField = function () {
        AcroFormField.call(this);
        // Field Type = Choice Field
        this.FT = "/Ch";
        // options
        this.V = '()';

        this.fontName = 'zapfdingbats';
        // Top Index
        var _TI = 0;

        Object.defineProperty(this, 'TI', {
            enumerable: true,
            configurable: false,
            get: function () {
                return _TI;
            },
            set: function (value) {
                _TI = value;
            }
        });

        // MK fix for Acrobat
        var _MK = '<< /BG [ 0.975 0.975 0.975 ]  >>';
        Object.defineProperty(this, 'MK', {
            enumerable: true,
            configurable: false,
            get: function () {
                return _MK;
            },
            set: function (value) {
                _MK = value;
            }
        });

        /**
        * (Optional) For scrollable list boxes, the top index (the index in the Opt array of the first option visible in the list). Default value: 0.
        * 
        * @name AcroFormChoiceField#topIndex
        * @default 0
        * @type {number}
        */
        Object.defineProperty(this, 'topIndex', {
            enumerable: true,
            configurable: true,
            get: function () {
                return _TI;
            },
            set: function (value) {
                _TI = value;
            }
        });

        var _Opt = [];
        Object.defineProperty(this, 'Opt', {
            enumerable: true,
            configurable: false,
            get: function () {
                if (this.isUnicode) {
                    return arrayToPdfUnicodeArray(_Opt);
                }
                return arrayToPdfArray(_Opt);
            },
            set: function (value) {
                _Opt = pdfArrayToStringArray(value);
            }
        });


        /**
        * @memberof AcroFormChoiceField
        * @name getOptions
        * @function
        * @instance
        * @returns {array} array of Options
        */
        this.getOptions = function () {
            return _Opt;
        }

        /**
        * @memberof AcroFormChoiceField
        * @name setOptions
        * @function
        * @instance
        * @param {array} value
        */
        this.setOptions = function (value) {
            _Opt = value;
            if (this.sort) {
                _Opt.sort();
            }
        }

        /**
        * @memberof AcroFormChoiceField
        * @name addOption
        * @function
        * @instance
        * @param {string} value
        */
        this.addOption = function (value) {
            value = value || "";
            value = value.toString();
            _Opt.push(value);
            if (this.sort) {
                _Opt.sort();
            }
        }

        /**
        * @memberof AcroFormChoiceField
        * @name removeOption
        * @function
        * @instance
        * @param {string} value
        * @param {boolean} allEntries (default: false)
        */
        this.removeOption = function (value, allEntries) {
            allEntries = allEntries || false
            value = value || "";
            value = value.toString();

            while (_Opt.indexOf(value) !== -1) {
                _Opt.splice(_Opt.indexOf(value), 1);
                if (allEntries === false) {
                    break;
                }
            }
        };

        /**
        * If set, the field is a combo box; if clear, the field is a list box. 
        *
        * @name AcroFormChoiceField#combo
        * @default false
        * @type {boolean}
        */
        Object.defineProperty(this, 'combo', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 18));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 18);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 18);
                }
            }
        });

        /**
        * If set, the combo box shall include an editable text box as well as a drop-down list; if clear, it shall include only a drop-down list. This flag shall be used only if the Combo flag is set. 
        *
        * @name AcroFormChoiceField#edit
        * @default false
        * @type {boolean}
        */
        Object.defineProperty(this, 'edit', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 19));
            },
            set: function (value) {
                //PDF 32000-1:2008, page 444
                if (this.combo === true) {
                    if (Boolean(value) === true) {
                        this.Ff = setBitForPdf(this.Ff, 19);
                    } else {
                        this.Ff = clearBitForPdf(this.Ff, 19);
                    }
                }
            }
        });

        /**
        * If set, the fieldâ€™s option items shall be sorted alphabetically. This flag is intended for use by writers, not by readers. Conforming readers shall display the options in the order in which they occur in the Opt array (see Table 231). 
        *
        * @name AcroFormChoiceField#sort
        * @default false
        * @type {boolean}
        */
        Object.defineProperty(this, 'sort', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 20));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 20);
                    _Opt.sort();
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 20);
                }
            }
        });

        /**
        * (PDF 1.4) If set, more than one of the fieldâ€™s option items may be selected simultaneously; if clear, at most one item shall be selected 
        *
        * @name AcroFormChoiceField#multiSelect
        * @default false
        * @type {boolean}
        */
        Object.defineProperty(this, 'multiSelect', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 22));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 22);

                } else {
                    this.Ff = clearBitForPdf(this.Ff, 22);
                }
            }
        });

        /**
        * (PDF 1.4) If set, text entered in the field shall not be spellchecked. This flag shall not be used unless the Combo and Edit flags are both set. 
        *
        * @name AcroFormChoiceField#doNotSpellCheck
        * @default false
        * @type {boolean}
        */
        Object.defineProperty(this, 'doNotSpellCheck', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 23));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 23);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 23);
                }
            }
        });

        /**
        * (PDF 1.5) If set, the new value shall be committed as soon as a selection is made (commonly with the pointing device). In this case, supplying a value for a field involves three actions: selecting the field for fill-in, selecting a choice for the fill-in value, and leaving that field, which finalizes or â€œcommitsâ€ the data choice and triggers any actions associated with the entry or changing of this data. If this flag is on, then processing does not wait for leaving the field action to occur, but immediately proceeds to the third step.
        * This option enables applications to perform an action once a selection is made, without requiring the user to exit the field. If clear, the new value is not committed until the user exits the field.
        *
        * @name AcroFormChoiceField#commitOnSelChange
        * @default false
        * @type {boolean}
        */
        Object.defineProperty(this, 'commitOnSelChange', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 27));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 27);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 27);
                }
            }
        });


        this.hasAppearanceStream = false;
    };
    inherit(AcroFormChoiceField, AcroFormField);

    /**
    * @class AcroFormListBox
    * @extends AcroFormChoiceField
    * @extends AcroFormField
    */
    var AcroFormListBox = function () {
        AcroFormChoiceField.call(this);
        this.fontName = 'helvetica';

        //PDF 32000-1:2008, page 444
        this.combo = false;
    };
    inherit(AcroFormListBox, AcroFormChoiceField);

    /**
    * @class AcroFormComboBox 
    * @extends AcroFormListBox
    * @extends AcroFormChoiceField
    * @extends AcroFormField
    */
    var AcroFormComboBox = function () {
        AcroFormListBox.call(this);
        this.combo = true;
    };
    inherit(AcroFormComboBox, AcroFormListBox);

    /**
    * @class AcroFormEditBox 
    * @extends AcroFormComboBox
    * @extends AcroFormListBox
    * @extends AcroFormChoiceField
    * @extends AcroFormField
    */
    var AcroFormEditBox = function () {
        AcroFormComboBox.call(this);
        this.edit = true;
    };
    inherit(AcroFormEditBox, AcroFormComboBox);

    /**
    * @class AcroFormButton
    * @extends AcroFormField
    */
    var AcroFormButton = function () {
        AcroFormField.call(this);
        this.FT = "/Btn";

        /**
        * (Radio buttons only) If set, exactly one radio button shall be selected at all times; selecting the currently selected button has no effect. If clear, clicking the selected button deselects it, leaving no button selected.
        * 
        * @name AcroFormButton#noToggleToOff
        * @type {boolean}
        */
        Object.defineProperty(this, 'noToggleToOff', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 15));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 15);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 15);
                }
            }
        });

        /**
        * If set, the field is a set of radio buttons; if clear, the field is a checkbox. This flag may be set only if the Pushbutton flag is clear. 
        * 
        * @name AcroFormButton#radio
        * @type {boolean}
        */
        Object.defineProperty(this, 'radio', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 16));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 16);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 16);
                }
            }
        });

        /**
        * If set, the field is a pushbutton that does not retain a permanent value. 
        *
        * @name AcroFormButton#pushButton
        * @type {boolean}
        */
        Object.defineProperty(this, 'pushButton', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 17));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 17);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 17);
                }
            }
        });

        /**
        * (PDF 1.5) If set, a group of radio buttons within a radio button field that use the same value for the on state will turn on and off in unison; that is if one is checked, they are all checked. If clear, the buttons are mutually exclusive (the same behavior as HTML radio buttons).
        *
        * @name AcroFormButton#radioIsUnison
        * @type {boolean}
        */
        Object.defineProperty(this, 'radioIsUnison', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 26));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 26);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 26);
                }
            }
        });

        var _MK = {};
        Object.defineProperty(this, 'MK', {
            enumerable: false,
            configurable: false,
            get: function () {
                if (Object.keys(_MK).length !== 0) {
                    var result = [];
                    result.push('<<');
                    var key;
                    for (key in _MK) {
                        result.push('/' + key + ' (' + _MK[key] + ')');
                    }
                    result.push('>>');
                    return result.join('\n');
                }
                return undefined;
            },
            set: function (value) {
                if (typeof value === "object") {
                    _MK = value
                }
            }
        });

        /**
        * From the PDF reference:
        * (Optional, button fields only) The widget annotation's normal caption which shall be displayed when it is not interacting with the user. 
        * Unlike the remaining entries listed in this Table which apply only to widget annotations associated with pushbutton fields (see Pushbuttons in 12.7.4.2, "Button Fields"), the CA entry may be used with any type of button field, including check boxes (see Check Boxes in 12.7.4.2, "Button Fields") and radio buttons (Radio Buttons in 12.7.4.2, "Button Fields").
        *
        * - '8' = Cross, 
        * - 'l' =  Circle,
        * - '' = nothing
        * @name AcroFormButton#caption
        * @type {string}
        */
        Object.defineProperty(this, 'caption', {
            enumerable: true,
            configurable: true,
            get: function () {
                return _MK.CA || '';
            },
            set: function (value) {
                if (typeof value === "string") {
                    _MK.CA = value;
                }
            }
        });

        var _AS;
        Object.defineProperty(this, 'AS', {
            enumerable: false,
            configurable: false,
            get: function () {
                return _AS;
            },
            set: function (value) {
                _AS = value;
            }
        });


        /**
        * (Required if the appearance dictionary AP contains one or more subdictionaries; PDF 1.2) The annotation's appearance state, which selects the applicable appearance stream from an appearance subdictionary (see Section 12.5.5, "Appearance Streams")
        *
        * @name AcroFormButton#appearanceState
        * @type {any}
        */
        Object.defineProperty(this, 'appearanceState', {
            enumerable: true,
            configurable: true,
            get: function () {
                return _AS.substr(1, _AS.length - 1);
            },
            set: function (value) {
                _AS = '/' + value;
            }
        });

    };
    inherit(AcroFormButton, AcroFormField);

    /**
    * @class AcroFormPushButton
    * @extends AcroFormButton
    * @extends AcroFormField
    */
    var AcroFormPushButton = function () {
        AcroFormButton.call(this);
        this.pushButton = true;
    };
    inherit(AcroFormPushButton, AcroFormButton);

    /**
    * @class AcroFormRadioButton
    * @extends AcroFormButton
    * @extends AcroFormField
    */
    var AcroFormRadioButton = function () {
        AcroFormButton.call(this);
        this.radio = true;
        this.pushButton = false;

        var _Kids = [];
        Object.defineProperty(this, 'Kids', {
            enumerable: true,
            configurable: false,
            get: function () {
                return _Kids;
            },
            set: function (value) {
                if (typeof value !== "undefined") {
                    _Kids = value;
                } else {
                    _Kids = [];
                }
            }
        });
    };
    inherit(AcroFormRadioButton, AcroFormButton);

    /**
    * The Child class of a RadioButton (the radioGroup) -> The single Buttons
    * 
    * @class AcroFormChildClass
    * @extends AcroFormField
    * @ignore
    */
    var AcroFormChildClass = function () {
        AcroFormField.call(this);

        var _parent;
        Object.defineProperty(this, 'Parent', {
            enumerable: false,
            configurable: false,
            get: function () {
                return _parent;
            },
            set: function (value) {
                _parent = value;
            }
        });

        var _optionName;
        Object.defineProperty(this, 'optionName', {
            enumerable: false,
            configurable: true,
            get: function () {
                return _optionName;
            },
            set: function (value) {
                _optionName = value;
            }
        });

        var _MK = {};
        Object.defineProperty(this, 'MK', {
            enumerable: false,
            configurable: false,
            get: function () {
                var result = [];
                result.push('<<');
                var key;
                for (key in _MK) {
                    result.push('/' + key + ' (' + _MK[key] + ')');
                }
                result.push('>>');
                return result.join('\n');
            },
            set: function (value) {
                if (typeof value === "object") {
                    _MK = value
                }
            }
        });

        /**
        * From the PDF reference:
        * (Optional, button fields only) The widget annotation's normal caption which shall be displayed when it is not interacting with the user. 
        * Unlike the remaining entries listed in this Table which apply only to widget annotations associated with pushbutton fields (see Pushbuttons in 12.7.4.2, "Button Fields"), the CA entry may be used with any type of button field, including check boxes (see Check Boxes in 12.7.4.2, "Button Fields") and radio buttons (Radio Buttons in 12.7.4.2, "Button Fields").
        *
        * - '8' = Cross, 
        * - 'l' =  Circle,
        * - '' = nothing
        * @name AcroFormButton#caption
        * @type {string}
        */
        Object.defineProperty(this, 'caption', {
            enumerable: true,
            configurable: true,
            get: function () {
                return _MK.CA || '';
            },
            set: function (value) {
                if (typeof value === "string") {
                    _MK.CA = value;
                }
            }
        });

        var _AS;
        Object.defineProperty(this, 'AS', {
            enumerable: false,
            configurable: false,
            get: function () {
                return _AS;
            },
            set: function (value) {
                _AS = value;
            }
        });

        /**
        * (Required if the appearance dictionary AP contains one or more subdictionaries; PDF 1.2) The annotation's appearance state, which selects the applicable appearance stream from an appearance subdictionary (see Section 12.5.5, "Appearance Streams")
        *
        * @name AcroFormButton#appearanceState
        * @type {any}
        */
        Object.defineProperty(this, 'appearanceState', {
            enumerable: true,
            configurable: true,
            get: function () {
                return _AS.substr(1, _AS.length - 1);
            },
            set: function (value) {
                _AS = '/' + value;
            }
        });
        this.caption = 'l';
        this.appearanceState = 'Off';
        // todo: set AppearanceType as variable that can be set from the
        // outside...
        this._AppearanceType = AcroFormAppearance.RadioButton.Circle;
        // The Default appearanceType is the Circle
        this.appearanceStreamContent = this._AppearanceType.createAppearanceStream(this.optionName);
    };
    inherit(AcroFormChildClass, AcroFormField);

    AcroFormRadioButton.prototype.setAppearance = function (appearance) {
        if (!('createAppearanceStream' in appearance && 'getCA' in appearance)) {
            throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");
        }
        for (var objId in this.Kids) {
            if (this.Kids.hasOwnProperty(objId)) {
                var child = this.Kids[objId];
                child.appearanceStreamContent = appearance.createAppearanceStream(child.optionName);
                child.caption = appearance.getCA();
            }
        }
    };

    AcroFormRadioButton.prototype.createOption = function (name) {
        // Create new Child for RadioGroup
        var child = new AcroFormChildClass();
        child.Parent = this;
        child.optionName = name;
        // Add to Parent
        this.Kids.push(child);

        addField.call(this, child);

        return child;
    };

    /**
    * @class AcroFormCheckBox
    * @extends AcroFormButton
    * @extends AcroFormField
    */
    var AcroFormCheckBox = function () {
        AcroFormButton.call(this);

        this.fontName = 'zapfdingbats';
        this.caption = '3';
        this.appearanceState = 'On';
        this.value = "On";
        this.textAlign = 'center';
        this.appearanceStreamContent = AcroFormAppearance.CheckBox.createAppearanceStream();
    };
    inherit(AcroFormCheckBox, AcroFormButton);

    /**
    * @class AcroFormTextField
    * @extends AcroFormField
    */
    var AcroFormTextField = function () {
        AcroFormField.call(this);
        this.FT = '/Tx';

        /**
        * If set, the field may contain multiple lines of text; if clear, the fieldâ€™s text shall be restricted to a single line. 
        *
        * @name AcroFormTextField#multiline
        * @type {boolean}
        */
        Object.defineProperty(this, 'multiline', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 13));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 13);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 13);
                }
            }
        });

        /**
        * (PDF 1.4) If set, the text entered in the field represents the pathname of a file whose contents shall be submitted as the value of the field. 
        * 
        * @name AcroFormTextField#fileSelect
        * @type {boolean}
        */
        Object.defineProperty(this, 'fileSelect', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 21));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 21);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 21);
                }
            }
        });

        /**
        * (PDF 1.4) If set, text entered in the field shall not be spell-checked. 
        *
        * @name AcroFormTextField#doNotSpellCheck
        * @type {boolean}
        */
        Object.defineProperty(this, 'doNotSpellCheck', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 23));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 23);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 23);
                }
            }
        });

        /**
        * (PDF 1.4) If set, the field shall not scroll (horizontally for single-line fields, vertically for multiple-line fields) to accommodate more text than fits within its annotation rectangle. Once the field is full, no further text shall be accepted for interactive form filling; for noninteractive form filling, the filler should take care not to add more character than will visibly fit in the defined area. 
        * 
        * @name AcroFormTextField#doNotScroll
        * @type {boolean}
        */
        Object.defineProperty(this, 'doNotScroll', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 24));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 24);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 24);
                }
            }
        });

        /**
        * (PDF 1.5) May be set only if the MaxLen entry is present in the text field dictionary (see Table 229) and if the Multiline, Password, and FileSelect flags are clear. If set, the field shall be automatically divided into as many equally spaced positions, or combs, as the value of MaxLen, and the text is laid out into those combs.
        * 
        * @name AcroFormTextField#comb
        * @type {boolean}
        */
        Object.defineProperty(this, 'comb', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 25));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 25);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 25);
                }
            }
        });

        /**
        * (PDF 1.5) If set, the value of this field shall be a rich text string (see 12.7.3.4, â€œRich Text Stringsâ€). If the field has a value, the RV entry of the field dictionary (Table 222) shall specify the rich text string.
        * 
        * @name AcroFormTextField#richText
        * @type {boolean}
        */
        Object.defineProperty(this, 'richText', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 26));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 26);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 26);
                }
            }
        });

        var _MaxLen = null;
        Object.defineProperty(this, 'MaxLen', {
            enumerable: true,
            configurable: false,
            get: function () {
                return _MaxLen;
            },
            set: function (value) {
                _MaxLen = value;
            }
        });

        /**
        * (Optional; inheritable) The maximum length of the fieldâ€™s text, in characters. 
        *
        * @name AcroFormTextField#maxLength
        * @type {number}
        */
        Object.defineProperty(this, 'maxLength', {
            enumerable: true,
            configurable: true,
            get: function () {
                return _MaxLen;
            },
            set: function (value) {
                if (Number.isInteger(value)) {
                    _MaxLen = value;
                }
            }
        });


        Object.defineProperty(this, 'hasAppearanceStream', {
            enumerable: true,
            configurable: true,
            get: function () {
                return (this.V || this.DV);
            }
        });

    };
    inherit(AcroFormTextField, AcroFormField);

    /**
    * @class AcroFormPasswordField
    * @extends AcroFormTextField
    * @extends AcroFormField
    */
    var AcroFormPasswordField = function () {
        AcroFormTextField.call(this);

        /**
        * If set, the field is intended for entering a secure password that should not be echoed visibly to the screen. Characters typed from the keyboard shall instead be echoed in some unreadable form, such as asterisks or bullet characters.
        * NOTE To protect password confidentiality, readers should never store the value of the text field in the PDF file if this flag is set. 
        *
        * @name AcroFormTextField#password
        * @type {boolean}
        */
        Object.defineProperty(this, 'password', {
            enumerable: true,
            configurable: true,
            get: function () {
                return Boolean(getBitForPdf(this.Ff, 14));
            },
            set: function (value) {
                if (Boolean(value) === true) {
                    this.Ff = setBitForPdf(this.Ff, 14);
                } else {
                    this.Ff = clearBitForPdf(this.Ff, 14);
                }
            }
        });
        this.password = true;
    };
    inherit(AcroFormPasswordField, AcroFormTextField);


    // Contains Methods for creating standard appearances
    var AcroFormAppearance = {
        CheckBox: {
            createAppearanceStream: function () {
                var appearance = {
                    N: {
                        On: AcroFormAppearance.CheckBox.YesNormal
                    },
                    D: {
                        On: AcroFormAppearance.CheckBox.YesPushDown,
                        Off: AcroFormAppearance.CheckBox.OffPushDown
                    }
                };

                return appearance;
            },
            /**
              * Returns the standard On Appearance for a CheckBox
              * 
              * @returns {AcroFormXObject}
              */
            YesPushDown: function (formObject) {
                var xobj = new createFormXObject(formObject);
                var stream = [];
                var fontKey = scope.internal.getFont(formObject.fontName, formObject.fontStyle).id;
                var encodedColor = scope.__private__.encodeColorString(formObject.color);
                var calcRes = calculateX(formObject, formObject.caption);
                stream.push("0.749023 g");
                stream.push("0 0 " + f2(AcroFormAppearance.internal.getWidth(formObject)) + " " + f2(AcroFormAppearance.internal.getHeight(formObject)) + " re");
                stream.push("f");
                stream.push("BMC");
                stream.push("q");
                stream.push("0 0 1 rg");
                stream.push("/" + fontKey + " " + f2(calcRes.fontSize) + " Tf " + encodedColor);
                stream.push("BT");
                stream.push(calcRes.text);
                stream.push("ET");
                stream.push("Q");
                stream.push("EMC");
                xobj.stream = stream.join("\n");
                return xobj;
            },

            YesNormal: function (formObject) {
                var xobj = new createFormXObject(formObject);
                var fontKey = scope.internal.getFont(formObject.fontName, formObject.fontStyle).id;
                var encodedColor = scope.__private__.encodeColorString(formObject.color);
                var stream = [];
                var height = AcroFormAppearance.internal.getHeight(formObject);
                var width = AcroFormAppearance.internal.getWidth(formObject);
                var calcRes = calculateX(formObject, formObject.caption);
                stream.push("1 g");
                stream.push("0 0 " + f2(width) + " " + f2(height) + " re");
                stream.push("f");
                stream.push("q");
                stream.push("0 0 1 rg");
                stream.push("0 0 " + f2(width - 1) + " " + f2(height - 1) + " re");
                stream.push("W");
                stream.push("n");
                stream.push("0 g");
                stream.push("BT");
                stream.push("/" + fontKey + " " + f2(calcRes.fontSize) + " Tf " + encodedColor);
                stream.push(calcRes.text);
                stream.push("ET");
                stream.push("Q");
                xobj.stream = stream.join("\n");
                return xobj;
            },

            /**
              * Returns the standard Off Appearance for a CheckBox
              * 
              * @returns {AcroFormXObject}
              */
            OffPushDown: function (formObject) {
                var xobj = new createFormXObject(formObject);
                var stream = [];
                stream.push("0.749023 g");
                stream.push("0 0 " + f2(AcroFormAppearance.internal.getWidth(formObject)) + " " + f2(AcroFormAppearance.internal.getHeight(formObject)) + " re");
                stream.push("f");
                xobj.stream = stream.join("\n");
                return xobj;
            }
        },

        RadioButton: {
            Circle: {
                createAppearanceStream: function (name) {
                    var appearanceStreamContent = {
                        D: {
                            'Off': AcroFormAppearance.RadioButton.Circle.OffPushDown
                        },
                        N: {}
                    };
                    appearanceStreamContent.N[name] = AcroFormAppearance.RadioButton.Circle.YesNormal;
                    appearanceStreamContent.D[name] = AcroFormAppearance.RadioButton.Circle.YesPushDown;
                    return appearanceStreamContent;
                },
                getCA: function () {
                    return 'l';
                },

                YesNormal: function (formObject) {
                    var xobj = new createFormXObject(formObject);
                    var stream = [];
                    // Make the Radius of the Circle relative to min(height, width) of formObject
                    var DotRadius = (AcroFormAppearance.internal.getWidth(formObject) <= AcroFormAppearance.internal.getHeight(formObject)) ? AcroFormAppearance.internal.getWidth(formObject) / 4 : AcroFormAppearance.internal.getHeight(formObject) / 4;
                    // The Borderpadding...
                    DotRadius = Number((DotRadius * 0.9).toFixed(5));
                    var c = AcroFormAppearance.internal.Bezier_C;
                    var DotRadiusBezier = Number((DotRadius * c).toFixed(5));
                    /*
                      * The Following is a Circle created with Bezier-Curves.
                      */
                    stream.push("q");
                    stream.push("1 0 0 1 " + f5(AcroFormAppearance.internal.getWidth(formObject) / 2) + " " + f5(AcroFormAppearance.internal.getHeight(formObject) / 2) + " cm");
                    stream.push(DotRadius + " 0 m");
                    stream.push(DotRadius + " " + DotRadiusBezier + " " + DotRadiusBezier + " " + DotRadius + " 0 " + DotRadius + " c");
                    stream.push("-" + DotRadiusBezier + " " + DotRadius + " -" + DotRadius + " " + DotRadiusBezier + " -" + DotRadius + " 0 c");
                    stream.push("-" + DotRadius + " -" + DotRadiusBezier + " -" + DotRadiusBezier + " -" + DotRadius + " 0 -" + DotRadius + " c");
                    stream.push(DotRadiusBezier + " -" + DotRadius + " " + DotRadius + " -" + DotRadiusBezier + " " + DotRadius + " 0 c");
                    stream.push("f");
                    stream.push("Q");
                    xobj.stream = stream.join("\n");
                    return xobj;
                },
                YesPushDown: function (formObject) {
                    var xobj = new createFormXObject(formObject);
                    var stream = [];
                    var DotRadius = (AcroFormAppearance.internal.getWidth(formObject) <= AcroFormAppearance.internal.getHeight(formObject)) ?
                        AcroFormAppearance.internal.getWidth(formObject) / 4 : AcroFormAppearance.internal.getHeight(formObject) / 4;
                    // The Borderpadding...
                    var DotRadius = Number((DotRadius * 0.9).toFixed(5));
                    // Save results for later use; no need to waste
                    // processor ticks on doing math
                    var k = Number((DotRadius * 2).toFixed(5));
                    var kc = Number((k * AcroFormAppearance.internal.Bezier_C).toFixed(5));
                    var dc = Number((DotRadius * AcroFormAppearance.internal.Bezier_C).toFixed(5));

                    stream.push("0.749023 g");
                    stream.push("q");
                    stream.push("1 0 0 1 " + f5(AcroFormAppearance.internal.getWidth(formObject) / 2) + " " + f5(AcroFormAppearance.internal.getHeight(formObject) / 2) + " cm");
                    stream.push(k + " 0 m");
                    stream.push(k + " " + kc + " " + kc + " " + k + " 0 " + k + " c");
                    stream.push("-" + kc + " " + k + " -" + k + " " + kc + " -" + k + " 0 c");
                    stream.push("-" + k + " -" + kc + " -" + kc + " -" + k + " 0 -" + k + " c");
                    stream.push(kc + " -" + k + " " + k + " -" + kc + " " + k + " 0 c");
                    stream.push("f");
                    stream.push("Q");
                    stream.push("0 g");
                    stream.push("q");
                    stream.push("1 0 0 1 " + f5(AcroFormAppearance.internal.getWidth(formObject) / 2) + " " + f5(AcroFormAppearance.internal.getHeight(formObject) / 2) + " cm");
                    stream.push(DotRadius + " 0 m");
                    stream.push("" + DotRadius + " " + dc + " " + dc + " " + DotRadius + " 0 " + DotRadius + " c");
                    stream.push("-" + dc + " " + DotRadius + " -" + DotRadius + " " + dc + " -" + DotRadius + " 0 c");
                    stream.push("-" + DotRadius + " -" + dc + " -" + dc + " -" + DotRadius + " 0 -" + DotRadius + " c");
                    stream.push(dc + " -" + DotRadius + " " + DotRadius + " -" + dc + " " + DotRadius + " 0 c");
                    stream.push("f");
                    stream.push("Q");
                    xobj.stream = stream.join("\n");
                    return xobj;
                },
                OffPushDown: function (formObject) {
                    var xobj = new createFormXObject(formObject);
                    var stream = [];
                    var DotRadius = (AcroFormAppearance.internal.getWidth(formObject) <= AcroFormAppearance.internal.getHeight(formObject)) ?
                        AcroFormAppearance.internal.getWidth(formObject) / 4 : AcroFormAppearance.internal.getHeight(formObject) / 4;
                    // The Borderpadding...
                    DotRadius = Number((DotRadius * 0.9).toFixed(5));
                    // Save results for later use; no need to waste
                    // processor ticks on doing math
                    var k = Number((DotRadius * 2).toFixed(5));
                    var kc = Number((k * AcroFormAppearance.internal.Bezier_C).toFixed(5));

                    stream.push("0.749023 g");
                    stream.push("q");
                    stream.push("1 0 0 1 " + f5(AcroFormAppearance.internal.getWidth(formObject) / 2) + " " + f5(AcroFormAppearance.internal.getHeight(formObject) / 2) + " cm");
                    stream.push(k + " 0 m");
                    stream.push(k + " " + kc + " " + kc + " " + k + " 0 " + k + " c");
                    stream.push("-" + kc + " " + k + " -" + k + " " + kc + " -" + k + " 0 c");
                    stream.push("-" + k + " -" + kc + " -" + kc + " -" + k + " 0 -" + k + " c");
                    stream.push(kc + " -" + k + " " + k + " -" + kc + " " + k + " 0 c");
                    stream.push("f");
                    stream.push("Q");
                    xobj.stream = stream.join("\n");
                    return xobj;
                },
            },

            Cross: {
                /**
                  * Creates the Actual AppearanceDictionary-References
                  * 
                  * @param {string} name
                  * @returns {Object}
                  * @ignore
                  */
                createAppearanceStream: function (name) {
                    var appearanceStreamContent = {
                        D: {
                            'Off': AcroFormAppearance.RadioButton.Cross.OffPushDown
                        },
                        N: {}
                    };
                    appearanceStreamContent.N[name] = AcroFormAppearance.RadioButton.Cross.YesNormal;
                    appearanceStreamContent.D[name] = AcroFormAppearance.RadioButton.Cross.YesPushDown;
                    return appearanceStreamContent;
                },
                getCA: function () {
                    return '8'
                },


                YesNormal: function (formObject) {
                    var xobj = new createFormXObject(formObject);
                    var stream = [];
                    var cross = AcroFormAppearance.internal.calculateCross(formObject);
                    stream.push("q");
                    stream.push("1 1 " + f2(AcroFormAppearance.internal.getWidth(formObject) - 2) + " " + f2(AcroFormAppearance.internal.getHeight(formObject) - 2) + " re");
                    stream.push("W");
                    stream.push("n");
                    stream.push(f2(cross.x1.x) + " " + f2(cross.x1.y) + " m");
                    stream.push(f2(cross.x2.x) + " " + f2(cross.x2.y) + " l");
                    stream.push(f2(cross.x4.x) + " " + f2(cross.x4.y) + " m");
                    stream.push(f2(cross.x3.x) + " " + f2(cross.x3.y) + " l");
                    stream.push("s");
                    stream.push("Q");
                    xobj.stream = stream.join("\n");
                    return xobj;
                },
                YesPushDown: function (formObject) {
                    var xobj = new createFormXObject(formObject);
                    var cross = AcroFormAppearance.internal.calculateCross(formObject);
                    var stream = [];
                    stream.push("0.749023 g");
                    stream.push("0 0 " + f2(AcroFormAppearance.internal.getWidth(formObject)) + " " + f2(AcroFormAppearance.internal.getHeight(formObject)) + " re");
                    stream.push("f");
                    stream.push("q");
                    stream.push("1 1 " + f2(AcroFormAppearance.internal.getWidth(formObject) - 2) + " " + f2(AcroFormAppearance.internal.getHeight(formObject) - 2) + " re");
                    stream.push("W");
                    stream.push("n");
                    stream.push(f2(cross.x1.x) + " " + f2(cross.x1.y) + " m");
                    stream.push(f2(cross.x2.x) + " " + f2(cross.x2.y) + " l");
                    stream.push(f2(cross.x4.x) + " " + f2(cross.x4.y) + " m");
                    stream.push(f2(cross.x3.x) + " " + f2(cross.x3.y) + " l");
                    stream.push("s");
                    stream.push("Q");
                    xobj.stream = stream.join("\n");
                    return xobj;
                },
                OffPushDown: function (formObject) {
                    var xobj = new createFormXObject(formObject);
                    var stream = [];
                    stream.push("0.749023 g");
                    stream.push("0 0 " + f2(AcroFormAppearance.internal.getWidth(formObject)) + " " + f2(AcroFormAppearance.internal.getHeight(formObject)) + " re");
                    stream.push("f");
                    xobj.stream = stream.join("\n");
                    return xobj;
                }
            },
        },

        /**
          * Returns the standard Appearance
          * 
          * @returns {AcroFormXObject}
          */
        createDefaultAppearanceStream: function (formObject) {
            // Set Helvetica to Standard Font (size: auto)
            // Color: Black
            var fontKey = scope.internal.getFont(formObject.fontName, formObject.fontStyle).id;
            var encodedColor = scope.__private__.encodeColorString(formObject.color);
            var fontSize = formObject.fontSize;
            var result = '/' + fontKey + ' ' + fontSize + ' Tf ' + encodedColor;
            return result;
        }
    };

    AcroFormAppearance.internal = {
        Bezier_C: 0.551915024494,

        calculateCross: function (formObject) {

            var width = AcroFormAppearance.internal.getWidth(formObject);
            var height = AcroFormAppearance.internal.getHeight(formObject);
            var a = Math.min(width, height);

            var cross = {
                x1: { // upperLeft
                    x: (width - a) / 2,
                    y: ((height - a) / 2) + a,// height - borderPadding
                },
                x2: { // lowerRight
                    x: ((width - a) / 2) + a,
                    y: ((height - a) / 2)// borderPadding
                },
                x3: { // lowerLeft
                    x: (width - a) / 2,
                    y: ((height - a) / 2)// borderPadding
                },
                x4: { // upperRight
                    x: ((width - a) / 2) + a,
                    y: ((height - a) / 2) + a,// height - borderPadding
                }
            };

            return cross;
        },
    };
    AcroFormAppearance.internal.getWidth = function (formObject) {
        var result = 0;
        if (typeof formObject === "object") {
            result = scale(formObject.Rect[2]);
        }
        return result;
    };
    AcroFormAppearance.internal.getHeight = function (formObject) {
        var result = 0;
        if (typeof formObject === "object") {
            result = scale(formObject.Rect[3]);
        }
        return result;
    };

    // Public:

    /**
    * Add an AcroForm-Field to the jsPDF-instance
    *
    * @name addField
    * @function 
    * @instance
    * @param {Object} fieldObject
    * @returns {jsPDF}
    */
    var addField = jsPDFAPI.addField = function (fieldObject) {
        initializeAcroForm.call(this);

        if (fieldObject instanceof AcroFormField) {
            putForm.call(this, fieldObject);
        } else {
            throw new Error('Invalid argument passed to jsPDF.addField.');
        }
        fieldObject.page = scope.internal.getCurrentPageInfo().pageNumber;
        return this;
    };

    /**
    * @name addButton
    * @function
    * @instance
    * @param {AcroFormButton} options
    * @returns {jsPDF}
    * @deprecated
    */
    jsPDFAPI.addButton = function (button) {
        if (button instanceof AcroFormButton === false) {
            throw new Error('Invalid argument passed to jsPDF.addButton.');
        }
        return addField.call(this, button);
    };

    /**
    * @name addTextField
    * @function
    * @instance
    * @param {AcroFormTextField} textField
    * @returns {jsPDF}
    * @deprecated
    */
    jsPDFAPI.addTextField = function (textField) {
        if (textField instanceof AcroFormTextField === false) {
            throw new Error('Invalid argument passed to jsPDF.addTextField.');
        }
        return addField.call(this, textField);
    };

    /**
    * @name addChoiceField
    * @function
    * @instance
    * @param {AcroFormChoiceField} 
    * @returns {jsPDF}
    * @deprecated
    */
    jsPDFAPI.addChoiceField = function (choiceField) {
        if (choiceField instanceof AcroFormChoiceField === false) {
            throw new Error('Invalid argument passed to jsPDF.addChoiceField.');
        }
        return addField.call(this, choiceField);
    };

    if (typeof globalObj == "object" &&
        typeof (globalObj["ChoiceField"]) === "undefined" &&
        typeof (globalObj["ListBox"]) === "undefined" &&
        typeof (globalObj["ComboBox"]) === "undefined" &&
        typeof (globalObj["EditBox"]) === "undefined" &&
        typeof (globalObj["Button"]) === "undefined" &&
        typeof (globalObj["PushButton"]) === "undefined" &&
        typeof (globalObj["RadioButton"]) === "undefined" &&
        typeof (globalObj["CheckBox"]) === "undefined" &&
        typeof (globalObj["TextField"]) === "undefined" &&
        typeof (globalObj["PasswordField"]) === "undefined"
    ) {
        globalObj["ChoiceField"] = AcroFormChoiceField;
        globalObj["ListBox"] = AcroFormListBox;
        globalObj["ComboBox"] = AcroFormComboBox;
        globalObj["EditBox"] = AcroFormEditBox;
        globalObj["Button"] = AcroFormButton;
        globalObj["PushButton"] = AcroFormPushButton;
        globalObj["RadioButton"] = AcroFormRadioButton;
        globalObj["CheckBox"] = AcroFormCheckBox;
        globalObj["TextField"] = AcroFormTextField;
        globalObj["PasswordField"] = AcroFormPasswordField;

        // backwardsCompatibility
        globalObj["AcroForm"] = { Appearance: AcroFormAppearance };
    } else {
        // eslint-disable-next-line no-console
        // console.warn("AcroForm-Classes are not populated into global-namespace, because the class-Names exist already. This avoids conflicts with the already used framework.");
    }

    jsPDFAPI.AcroFormChoiceField = AcroFormChoiceField;
    jsPDFAPI.AcroFormListBox = AcroFormListBox;
    jsPDFAPI.AcroFormComboBox = AcroFormComboBox;
    jsPDFAPI.AcroFormEditBox = AcroFormEditBox;
    jsPDFAPI.AcroFormButton = AcroFormButton;
    jsPDFAPI.AcroFormPushButton = AcroFormPushButton;
    jsPDFAPI.AcroFormRadioButton = AcroFormRadioButton;
    jsPDFAPI.AcroFormCheckBox = AcroFormCheckBox;
    jsPDFAPI.AcroFormTextField = AcroFormTextField;
    jsPDFAPI.AcroFormPasswordField = AcroFormPasswordField;
    jsPDFAPI.AcroFormAppearance = AcroFormAppearance;

    jsPDFAPI.AcroForm = {
        ChoiceField: AcroFormChoiceField,
        ListBox: AcroFormListBox,
        ComboBox: AcroFormComboBox,
        EditBox: AcroFormEditBox,
        Button: AcroFormButton,
        PushButton: AcroFormPushButton,
        RadioButton: AcroFormRadioButton,
        CheckBox: AcroFormCheckBox,
        TextField: AcroFormTextField,
        PasswordField: AcroFormPasswordField,
        Appearance: AcroFormAppearance
    };

    jsPDF.AcroForm = {
        ChoiceField: AcroFormChoiceField,
        ListBox: AcroFormListBox,
        ComboBox: AcroFormComboBox,
        EditBox: AcroFormEditBox,
        Button: AcroFormButton,
        PushButton: AcroFormPushButton,
        RadioButton: AcroFormRadioButton,
        CheckBox: AcroFormCheckBox,
        TextField: AcroFormTextField,
        PasswordField: AcroFormPasswordField,
        Appearance: AcroFormAppearance
    };
})(jspdf.jsPDF, (typeof window !== 'undefined' && window || typeof global !== 'undefined' && global));
/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61)))

/***/ }),
/* 63 */
/***/ (function(module, exports, __webpack_require__) {

  /**
   * jsPDF fromHTML plugin. BETA stage. API subject to change. Needs browser
   * Copyright (c) 2012 Willow Systems Corporation, willow-systems.com
   *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
   *               2014 Diego Casorran, https://github.com/diegocr
   *               2014 Daniel Husar, https://github.com/danielhusar
   *               2014 Wolfgang Gassler, https://github.com/woolfg
   *               2014 Steven Spungin, https://github.com/flamenco
   *
   * @license
   * 
   * ====================================================================
   */
  var jspdf = __webpack_require__(18);

  (function (jsPDFAPI) {
    var clone, _DrillForContent, FontNameDB, FontStyleMap, TextAlignMap, FontWeightMap, FloatMap, ClearMap, GetCSS, PurgeWhiteSpace, Renderer, ResolveFont, ResolveUnitedNumber, UnitedNumberMap, elementHandledElsewhere, images, loadImgs, checkForFooter, process, tableToJson;

    clone = function () {
      return function (obj) {
        Clone.prototype = obj;
        return new Clone();
      };

      function Clone() {}
    }();

    PurgeWhiteSpace = function PurgeWhiteSpace(array) {
      var fragment, i, l, lTrimmed, r, rTrimmed, trailingSpace;
      i = 0;
      l = array.length;
      fragment = void 0;
      lTrimmed = false;
      rTrimmed = false;

      while (!lTrimmed && i !== l) {
        fragment = array[i] = array[i].trimLeft();

        if (fragment) {
          lTrimmed = true;
        }

        i++;
      }

      i = l - 1;

      while (l && !rTrimmed && i !== -1) {
        fragment = array[i] = array[i].trimRight();

        if (fragment) {
          rTrimmed = true;
        }

        i--;
      }

      r = /\s+$/g;
      trailingSpace = true;
      i = 0;

      while (i !== l) {
        // Leave the line breaks intact
        if (array[i] != "\u2028") {
          fragment = array[i].replace(/\s+/g, " ");

          if (trailingSpace) {
            fragment = fragment.trimLeft();
          }

          if (fragment) {
            trailingSpace = r.test(fragment);
          }

          array[i] = fragment;
        }

        i++;
      }

      return array;
    };

    Renderer = function Renderer(pdf, x, y, settings) {
      this.pdf = pdf;
      this.x = x;
      this.y = y;
      this.settings = settings; //list of functions which are called after each element-rendering process

      this.watchFunctions = [];
      this.init();
      return this;
    };

    ResolveFont = function ResolveFont(css_font_family_string) {
      var name, part, parts;
      name = void 0;
      parts = css_font_family_string.split(",");
      part = parts.shift();

      while (!name && part) {
        name = FontNameDB[part.trim().toLowerCase()];
        part = parts.shift();
      }

      return name;
    };

    ResolveUnitedNumber = function ResolveUnitedNumber(css_line_height_string) {
      //IE8 issues
      css_line_height_string = css_line_height_string === "auto" ? "0px" : css_line_height_string;

      if (css_line_height_string.indexOf("em") > -1 && !isNaN(Number(css_line_height_string.replace("em", "")))) {
        css_line_height_string = Number(css_line_height_string.replace("em", "")) * 18.719 + "px";
      }

      if (css_line_height_string.indexOf("pt") > -1 && !isNaN(Number(css_line_height_string.replace("pt", "")))) {
        css_line_height_string = Number(css_line_height_string.replace("pt", "")) * 1.333 + "px";
      }

      var normal, undef, value;
      undef = void 0;
      normal = 16.00;
      value = UnitedNumberMap[css_line_height_string];

      if (value) {
        return value;
      }

      value = {
        "xx-small": 9,
        "x-small": 11,
        small: 13,
        medium: 16,
        large: 19,
        "x-large": 23,
        "xx-large": 28,
        auto: 0
      }[css_line_height_string];

      if (value !== undef) {
        return UnitedNumberMap[css_line_height_string] = value / normal;
      }

      if (value = parseFloat(css_line_height_string)) {
        return UnitedNumberMap[css_line_height_string] = value / normal;
      }

      value = css_line_height_string.match(/([\d\.]+)(px)/);

      if (Array.isArray(value) && value.length === 3) {
        return UnitedNumberMap[css_line_height_string] = parseFloat(value[1]) / normal;
      }

      return UnitedNumberMap[css_line_height_string] = 1;
    };

    GetCSS = function GetCSS(element) {
      var css, tmp, computedCSSElement;

      computedCSSElement = function (el) {
        var compCSS;

        compCSS = function (el) {
          if (document.defaultView && document.defaultView.getComputedStyle) {
            return document.defaultView.getComputedStyle(el, null);
          } else if (el.currentStyle) {
            return el.currentStyle;
          } else {
            return el.style;
          }
        }(el);

        return function (prop) {
          prop = prop.replace(/-\D/g, function (match) {
            return match.charAt(1).toUpperCase();
          });
          return compCSS[prop];
        };
      }(element);

      css = {};
      tmp = void 0;
      css["font-family"] = ResolveFont(computedCSSElement("font-family")) || "times";
      css["font-style"] = FontStyleMap[computedCSSElement("font-style")] || "normal";
      css["text-align"] = TextAlignMap[computedCSSElement("text-align")] || "left";
      tmp = FontWeightMap[computedCSSElement("font-weight")] || "normal";

      if (tmp === "bold") {
        if (css["font-style"] === "normal") {
          css["font-style"] = tmp;
        } else {
          css["font-style"] = tmp + css["font-style"];
        }
      }

      css["font-size"] = ResolveUnitedNumber(computedCSSElement("font-size")) || 1;
      css["line-height"] = ResolveUnitedNumber(computedCSSElement("line-height")) || 1;
      css["display"] = computedCSSElement("display") === "inline" ? "inline" : "block";
      tmp = css["display"] === "block";
      css["margin-top"] = tmp && ResolveUnitedNumber(computedCSSElement("margin-top")) || 0;
      css["margin-bottom"] = tmp && ResolveUnitedNumber(computedCSSElement("margin-bottom")) || 0;
      css["padding-top"] = tmp && ResolveUnitedNumber(computedCSSElement("padding-top")) || 0;
      css["padding-bottom"] = tmp && ResolveUnitedNumber(computedCSSElement("padding-bottom")) || 0;
      css["margin-left"] = tmp && ResolveUnitedNumber(computedCSSElement("margin-left")) || 0;
      css["margin-right"] = tmp && ResolveUnitedNumber(computedCSSElement("margin-right")) || 0;
      css["padding-left"] = tmp && ResolveUnitedNumber(computedCSSElement("padding-left")) || 0;
      css["padding-right"] = tmp && ResolveUnitedNumber(computedCSSElement("padding-right")) || 0;
      css["page-break-before"] = computedCSSElement("page-break-before") || "auto"; //float and clearing of floats

      css["float"] = FloatMap[computedCSSElement("cssFloat")] || "none";
      css["clear"] = ClearMap[computedCSSElement("clear")] || "none";
      css["color"] = computedCSSElement("color");
      return css;
    };

    elementHandledElsewhere = function elementHandledElsewhere(element, renderer, elementHandlers) {
      var handlers, i, isHandledElsewhere, l, classNames;
      isHandledElsewhere = false;
      i = void 0;
      l = void 0;
      handlers = elementHandlers["#" + element.id];

      if (handlers) {
        if (typeof handlers === "function") {
          isHandledElsewhere = handlers(element, renderer);
        } else {
          i = 0;
          l = handlers.length;

          while (!isHandledElsewhere && i !== l) {
            isHandledElsewhere = handlers[i](element, renderer);
            i++;
          }
        }
      }

      handlers = elementHandlers[element.nodeName];

      if (!isHandledElsewhere && handlers) {
        if (typeof handlers === "function") {
          isHandledElsewhere = handlers(element, renderer);
        } else {
          i = 0;
          l = handlers.length;

          while (!isHandledElsewhere && i !== l) {
            isHandledElsewhere = handlers[i](element, renderer);
            i++;
          }
        }
      } // Try class names


      classNames = typeof element.className === 'string' ? element.className.split(' ') : [];

      for (i = 0; i < classNames.length; i++) {
        handlers = elementHandlers['.' + classNames[i]];

        if (!isHandledElsewhere && handlers) {
          if (typeof handlers === "function") {
            isHandledElsewhere = handlers(element, renderer);
          } else {
            i = 0;
            l = handlers.length;

            while (!isHandledElsewhere && i !== l) {
              isHandledElsewhere = handlers[i](element, renderer);
              i++;
            }
          }
        }
      }

      return isHandledElsewhere;
    };

    tableToJson = function tableToJson(table, renderer) {
      var data, headers, i, j, rowData, tableRow, table_obj, table_with, cell, l;
      data = [];
      headers = [];
      i = 0;
      l = 0;
      for (var j = 0; j < table.rows[0].cells.length; j++) {
        l += table.rows[0].cells[j].colSpan;
      }
      table_with = table.clientWidth;

      while (i < l) {
        cell = table.rows[0].cells[i];

        for (var j = 0; j < cell.colSpan; j++) {
          headers[i + j] = {
            name: cell.textContent.toLowerCase().replace(/\s+/g, '') + '_' + j,
            prompt: cell.textContent.replace(/\r?\n/g, ''),
            width: cell.clientWidth / table_with * renderer.settings.width / cell.colSpan
          };
        }

        i += j;
      }

      i = 1;

      while (i < table.rows.length) {
        tableRow = table.rows[i];
        rowData = {};
        j = 0;

        while (j < tableRow.cells.length) {
          rowData[headers[j].name] = tableRow.cells[j].textContent.replace(/\r?\n/g, '');
          j++;
        }

        data.push(rowData);
        i++;
      }

      return table_obj = {
        rows: data,
        headers: headers
      };
    };

    var SkipNode = {
      SCRIPT: 1,
      STYLE: 1,
      NOSCRIPT: 1,
      OBJECT: 1,
      EMBED: 1,
      SELECT: 1
    };
    var listCount = 1;

    _DrillForContent = function DrillForContent(element, renderer, elementHandlers) {
      var cn, cns, fragmentCSS, i, isBlock, l, table2json, cb;
      cns = element.childNodes;
      cn = void 0;
      fragmentCSS = GetCSS(element);
      isBlock = fragmentCSS.display === "block";

      if (isBlock) {
        renderer.setBlockBoundary();
        renderer.setBlockStyle(fragmentCSS);
      }
      i = 0;
      l = cns.length;

      while (i < l) {
        cn = cns[i];

        if (typeof(cn) === "object") {
          //execute all watcher functions to e.g. reset floating
          renderer.executeWatchFunctions(cn);
          /*** HEADER rendering **/

          if (cn.nodeType === 1 && cn.nodeName === 'HEADER') {
            var header = cn; //store old top margin

            var oldMarginTop = renderer.pdf.margins_doc.top; //subscribe for new page event and render header first on every page

            renderer.pdf.internal.events.subscribe('addPage', function (pageInfo) {
              //set current y position to old margin
              renderer.y = oldMarginTop; //render all child nodes of the header element

              _DrillForContent(header, renderer, elementHandlers); //set margin to old margin + rendered header + 10 space to prevent overlapping
              //important for other plugins (e.g. table) to start rendering at correct position after header


              renderer.pdf.margins_doc.top = renderer.y + 10;
              renderer.y += 10;
            }, false);
          }

          if (cn.nodeType === 8 && cn.nodeName === "#comment") {
            if (~cn.textContent.indexOf("ADD_PAGE")) {
              renderer.pdf.addPage();
              renderer.y = renderer.pdf.margins_doc.top;
            }
          } else if (cn.nodeType === 1 && !SkipNode[cn.nodeName]) {
            /*** IMAGE RENDERING ***/
            var cached_image;

            if (cn.nodeName === "IMG") {
              var url = cn.getAttribute("src");
              cached_image = images[(renderer.pdf.sHashCode && renderer.pdf.sHashCode(url)) || url];
            }

            if (cached_image) {
              if (renderer.pdf.internal.pageSize.getHeight() - renderer.pdf.margins_doc.bottom < renderer.y + cn.height && renderer.y > renderer.pdf.margins_doc.top) {
                renderer.pdf.addPage();
                renderer.y = renderer.pdf.margins_doc.top; //check if we have to set back some values due to e.g. header rendering for new page

                renderer.executeWatchFunctions(cn);
              }

              var imagesCSS = GetCSS(cn);
              var imageX = renderer.x;
              var fontToUnitRatio = 12 / renderer.pdf.internal.scaleFactor; //define additional paddings, margins which have to be taken into account for margin calculations

              var additionalSpaceLeft = (imagesCSS["margin-left"] + imagesCSS["padding-left"]) * fontToUnitRatio;
              var additionalSpaceRight = (imagesCSS["margin-right"] + imagesCSS["padding-right"]) * fontToUnitRatio;
              var additionalSpaceTop = (imagesCSS["margin-top"] + imagesCSS["padding-top"]) * fontToUnitRatio;
              var additionalSpaceBottom = (imagesCSS["margin-bottom"] + imagesCSS["padding-bottom"]) * fontToUnitRatio; //if float is set to right, move the image to the right border
              //add space if margin is set

              if (imagesCSS['float'] !== undefined && imagesCSS['float'] === 'right') {
                imageX += renderer.settings.width - cn.width - additionalSpaceRight;
              } else {
                imageX += additionalSpaceLeft;
              }

              renderer.pdf.addImage(cached_image, imageX, renderer.y + additionalSpaceTop, cn.width, cn.height);
              cached_image = undefined; //if the float prop is specified we have to float the text around the image

              if (imagesCSS['float'] === 'right' || imagesCSS['float'] === 'left') {
                //add functiont to set back coordinates after image rendering
                renderer.watchFunctions.push(function (diffX, thresholdY, diffWidth, el) {
                  //undo drawing box adaptions which were set by floating
                  if (renderer.y >= thresholdY) {
                    renderer.x += diffX;
                    renderer.settings.width += diffWidth;
                    return true;
                  } else if (el && el.nodeType === 1 && !SkipNode[el.nodeName] && renderer.x + el.width > renderer.pdf.margins_doc.left + renderer.pdf.margins_doc.width) {
                    renderer.x += diffX;
                    renderer.y = thresholdY;
                    renderer.settings.width += diffWidth;
                    return true;
                  } else {
                    return false;
                  }
                }.bind(this, imagesCSS['float'] === 'left' ? -cn.width - additionalSpaceLeft - additionalSpaceRight : 0, renderer.y + cn.height + additionalSpaceTop + additionalSpaceBottom, cn.width)); //reset floating by clear:both divs
                //just set cursorY after the floating element

                renderer.watchFunctions.push(function (yPositionAfterFloating, pages, el) {
                  if (renderer.y < yPositionAfterFloating && pages === renderer.pdf.internal.getNumberOfPages()) {
                    if (el.nodeType === 1 && GetCSS(el).clear === 'both') {
                      renderer.y = yPositionAfterFloating;
                      return true;
                    } else {
                      return false;
                    }
                  } else {
                    return true;
                  }
                }.bind(this, renderer.y + cn.height, renderer.pdf.internal.getNumberOfPages())); //if floating is set we decrease the available width by the image width

                renderer.settings.width -= cn.width + additionalSpaceLeft + additionalSpaceRight; //if left just add the image width to the X coordinate

                if (imagesCSS['float'] === 'left') {
                  renderer.x += cn.width + additionalSpaceLeft + additionalSpaceRight;
                }
              } else {
                //if no floating is set, move the rendering cursor after the image height
                renderer.y += cn.height + additionalSpaceTop + additionalSpaceBottom;
              }
              /*** TABLE RENDERING ***/

            } else if (cn.nodeName === "TABLE") {
              if(!renderer.pdf.autoTable) {
                table2json = tableToJson(cn, renderer);
                renderer.y += 10;
                renderer.pdf.table(renderer.x, renderer.y, table2json.rows, table2json.headers, {
                  autoSize: false,
                  printHeaders: elementHandlers.printHeaders,
                  margins: renderer.pdf.margins_doc,
                  css: GetCSS(cn)
                });
                renderer.y = renderer.pdf.internal.__cell__.lastCell.y +
                  renderer.pdf.internal.__cell__.lastCell.height;
              } else {
                renderer.y += 10;
                renderer.pdf.autoTable({ theme: "grid", html: cn, startY: renderer.y,
                  styles: {
                    font: renderer.pdf.getFont().fontName,
                    fontSize: renderer.pdf.getFontSize(),
                    textColor: renderer.pdf.getTextColor()
                  },
                  margin: { 
                    top: renderer.pdf.margins_doc.top, 
                    left: renderer.x, 
                    right: renderer.pdf.internal.pageSize.getWidth() - (renderer.x  + renderer.settings.width), 
                    bottom: renderer.pdf.margins_doc.bottom },
                });
                renderer.y = renderer.pdf.lastAutoTable.finalY;
              }
            } else if (cn.nodeName === "OL" || cn.nodeName === "UL") {
              listCount = 1;

              if (!elementHandledElsewhere(cn, renderer, elementHandlers)) {
                _DrillForContent(cn, renderer, elementHandlers);
              }

              renderer.y += 10;
            } else if (cn.nodeName === "LI") {
              var temp = renderer.x;
              renderer.x += 20 / renderer.pdf.internal.scaleFactor;
              renderer.y += 3;

              if (!elementHandledElsewhere(cn, renderer, elementHandlers)) {
                _DrillForContent(cn, renderer, elementHandlers);
              }

              renderer.x = temp;
            } else if (cn.nodeName === "BR") {
              renderer.y += fragmentCSS["font-size"] * renderer.pdf.internal.scaleFactor;
              renderer.addText("\u2028", clone(fragmentCSS));
            } else {
              if (!elementHandledElsewhere(cn, renderer, elementHandlers)) {
                _DrillForContent(cn, renderer, elementHandlers);
              }
            }
          } else if (cn.nodeType === 3) {
            var value = cn.nodeValue;

            if (cn.nodeValue && cn.parentNode.nodeName === "LI") {
              if (cn.parentNode.parentNode.nodeName === "OL") {
                value = listCount++ + '. ' + value;
              } else {
                var fontSize = fragmentCSS["font-size"];
                var offsetX = (3 - fontSize * 0.75) * renderer.pdf.internal.scaleFactor;
                var offsetY = fontSize * 0.75 * renderer.pdf.internal.scaleFactor;
                var radius = fontSize * 1.74 / renderer.pdf.internal.scaleFactor;

                cb = function cb(x, y) {
                  this.pdf.circle(x + offsetX, y + offsetY, radius, 'FD');
                };
              }
            } // Only add the text if the text node is in the body element
            // Add compatibility with IE11


            if (!!(cn.ownerDocument.body.compareDocumentPosition(cn) & 16)) {
              renderer.addText(value, fragmentCSS);
            }
          } else if (typeof cn === "string") {
            renderer.addText(cn, fragmentCSS);
          }
        }

        i++;
      }

      elementHandlers.outY = renderer.y;

      if (isBlock) {
        return renderer.setBlockBoundary(cb);
      }
    };

    images = {};

    loadImgs = function loadImgs(element, renderer, elementHandlers, cb) {
      var imgs = element.getElementsByTagName('img'),
          l = imgs.length,
          found_images,
          x = 0;

      function done() {
        renderer.pdf.internal.events.publish('imagesLoaded');
        cb(found_images);
      }

      function loadImage(url, width, height) {
        if (!url) return;
        var img = new Image();
        found_images = ++x;
        img.crossOrigin = '';

        img.onerror = img.onload = function () {
          if (img.complete) {
            //to support data urls in images, set width and height
            //as those values are not recognized automatically
            if (img.src.indexOf('data:image/') === 0) {
              img.width = width || img.width || 0;
              img.height = height || img.height || 0;
            } //if valid image add to known images array


            if (img.width + img.height) {
              var hash = (renderer.pdf.sHashCode && renderer.pdf.sHashCode(url)) || url;
              images[hash] = images[hash] || img;
            }
          }

          if (! --x) {
            done();
          }
        };

        img.src = url;
      }

      while (l--) {
        loadImage(imgs[l].getAttribute("src"), imgs[l].width, imgs[l].height);
      }

      return x || done();
    };

    checkForFooter = function checkForFooter(elem, renderer, elementHandlers) {
      //check if we can found a <footer> element
      var footer = elem.getElementsByTagName("footer");

      if (footer.length > 0) {
        footer = footer[0]; //bad hack to get height of footer
        //creat dummy out and check new y after fake rendering

        var oldOut = renderer.pdf.internal.write;
        var oldY = renderer.y;

        renderer.pdf.internal.write = function () {};

        _DrillForContent(footer, renderer, elementHandlers);

        var footerHeight = Math.ceil(renderer.y - oldY) + 5;
        renderer.y = oldY;
        renderer.pdf.internal.write = oldOut; //add 20% to prevent overlapping

        renderer.pdf.margins_doc.bottom += footerHeight; //Create function render header on every page

        var renderFooter = function renderFooter(pageInfo) {
          var pageNumber = pageInfo !== undefined ? pageInfo.pageNumber : 1; //set current y position to old margin

          var oldPosition = renderer.y; //render all child nodes of the header element

          renderer.y = renderer.pdf.internal.pageSize.getHeight() - renderer.pdf.margins_doc.bottom;
          renderer.pdf.margins_doc.bottom -= footerHeight; //check if we have to add page numbers

          var spans = footer.getElementsByTagName('span');

          for (var i = 0; i < spans.length; ++i) {
            //if we find some span element with class pageCounter, set the page
            if ((" " + spans[i].className + " ").replace(/[\n\t]/g, " ").indexOf(" pageCounter ") > -1) {
              spans[i].innerHTML = pageNumber;
            } //if we find some span element with class totalPages, set a variable which is replaced after rendering of all pages


            if ((" " + spans[i].className + " ").replace(/[\n\t]/g, " ").indexOf(" totalPages ") > -1) {
              spans[i].innerHTML = '###jsPDFVarTotalPages###';
            }
          } //render footer content


          _DrillForContent(footer, renderer, elementHandlers); //set bottom margin to previous height including the footer height


          renderer.pdf.margins_doc.bottom += footerHeight; //important for other plugins (e.g. table) to start rendering at correct position after header

          renderer.y = oldPosition;
        }; //check if footer contains totalPages which should be replace at the disoposal of the document


        var spans = footer.getElementsByTagName('span');

        for (var i = 0; i < spans.length; ++i) {
          if ((" " + spans[i].className + " ").replace(/[\n\t]/g, " ").indexOf(" totalPages ") > -1) {
            renderer.pdf.internal.events.subscribe('htmlRenderingFinished', renderer.pdf.putTotalPages.bind(renderer.pdf, '###jsPDFVarTotalPages###'), true);
          }
        } //register event to render footer on every new page


        renderer.pdf.internal.events.subscribe('addPage', renderFooter, false); //render footer on first page

        renderFooter(); //prevent footer rendering

        SkipNode['FOOTER'] = 1;
      }
    };

    process = function process(pdf, element, x, y, settings, callback) {
      if (!element) return false;
      if (typeof element !== "string" && !element.parentNode) element = '' + element.innerHTML;

      if (typeof element === "string") {
        element = function (element) {
          var $frame, $hiddendiv, framename, visuallyhidden;
          framename = "jsPDFhtmlText" + Date.now().toString() + (Math.random() * 1000).toFixed(0);
          visuallyhidden = "position: absolute !important;" + "clip: rect(1px 1px 1px 1px); /* IE6, IE7 */" + "clip: rect(1px, 1px, 1px, 1px);" + "padding:0 !important;" + "border:0 !important;" + "height: 1px !important;" + "width: 1px !important; " + "top:auto;" + "left:-100px;" + "overflow: hidden;";
          $hiddendiv = document.createElement('div');
          $hiddendiv.className = "sjs-pdf-hidden-html-div";
          $hiddendiv.style.cssText = visuallyhidden;
          $hiddendiv.innerHTML = "<iframe style=\"height:1px;width:1px\" name=\"" + framename + "\" />";
          document.body.appendChild($hiddendiv);
          $frame = window.frames[framename];
          $frame.document.open();
          $frame.document.writeln(element);
          $frame.document.close();
          return $frame.document.body;
        }(element.replace(/<\/?script[^>]*?>/gi, ''));
      }

      var availableFonts = Object.keys(pdf.getFontList());
      for(var i = 0; i < availableFonts.length; ++i) {
        var fontName = availableFonts[i];
        var fontFamily = fontName.toLowerCase();
        if(!FontNameDB[fontFamily]) {
          FontNameDB[fontFamily] = fontName;
        }
      }

      var r = new Renderer(pdf, x, y, settings),
          out; // 1. load images
      // 2. prepare optional footer elements
      // 3. render content

      loadImgs.call(this, element, r, settings.elementHandlers, function (found_images) {
        checkForFooter(element, r, settings.elementHandlers);

        _DrillForContent(element, r, settings.elementHandlers); //send event dispose for final taks (e.g. footer totalpage replacement)


        r.pdf.internal.events.publish('htmlRenderingFinished');
        out = r.dispose();
        if (typeof callback === 'function') callback(out);else if (found_images) console.error('jsPDF Warning: rendering issues? provide a callback to fromHTML!');
      });
      return out || {
        x: r.x,
        y: r.y
      };
    };

    Renderer.prototype.init = function () {
      this.paragraph = {
        text: [],
        style: []
      };
      return this.pdf.internal.write("q");
    };

    Renderer.prototype.dispose = function () {
      this.pdf.internal.write("Q");
      return {
        x: this.x,
        y: this.y,
        ready: true
      };
    }; //Checks if we have to execute some watcher functions
    //e.g. to end text floating around an image


    Renderer.prototype.executeWatchFunctions = function (el) {
      var ret = false;
      var narray = [];

      if (this.watchFunctions.length > 0) {
        for (var i = 0; i < this.watchFunctions.length; ++i) {
          if (this.watchFunctions[i](el) === true) {
            ret = true;
          } else {
            narray.push(this.watchFunctions[i]);
          }
        }

        this.watchFunctions = narray;
      }

      return ret;
    };

    Renderer.prototype.splitFragmentsIntoLines = function (fragments, styles) {
      var currentLineLength, defaultFontSize, ff, fontMetrics, fontMetricsCache, fragment, fragmentChopped, fragmentLength, fragmentSpecificMetrics, fs, k, line, lines, maxLineLength, style;
      defaultFontSize = 12;
      k = this.pdf.internal.scaleFactor;
      fontMetricsCache = {};
      ff = void 0;
      fs = void 0;
      fontMetrics = void 0;
      fragment = void 0;
      style = void 0;
      fragmentSpecificMetrics = void 0;
      fragmentLength = void 0;
      fragmentChopped = void 0;
      line = [];
      lines = [line];
      currentLineLength = 0;
      maxLineLength = this.settings.width;

      while (fragments.length) {
        fragment = fragments.shift();
        style = styles.shift();

        if (fragment) {
          ff = style["font-family"];
          fs = style["font-style"];
          fontMetrics = fontMetricsCache[ff + fs];

          if (!fontMetrics) {
            fontMetrics = this.pdf.internal.getFont(ff, fs).metadata.Unicode;
            fontMetricsCache[ff + fs] = fontMetrics;
          }

          fragmentSpecificMetrics = {
            widths: fontMetrics.widths,
            kerning: fontMetrics.kerning,
            fontSize: style["font-size"] * defaultFontSize,
            textIndent: currentLineLength
          };
          fragmentLength = this.pdf.getStringUnitWidth(fragment, fragmentSpecificMetrics) * fragmentSpecificMetrics.fontSize / k;

          if (fragment == "\u2028") {
            line = [];
            lines.push(line);
          } else if (currentLineLength + fragmentLength > maxLineLength) {
            fragmentChopped = this.pdf.splitTextToSize(fragment, maxLineLength, fragmentSpecificMetrics);
            line.push([fragmentChopped.shift(), style]);

            while (fragmentChopped.length) {
              line = [[fragmentChopped.shift(), style]];
              lines.push(line);
            }

            currentLineLength = this.pdf.getStringUnitWidth(line[0][0], fragmentSpecificMetrics) * fragmentSpecificMetrics.fontSize / k;
          } else {
            line.push([fragment, style]);
            currentLineLength += fragmentLength;
          }
        }
      } //if text alignment was set, set margin/indent of each line


      if (style['text-align'] !== undefined && (style['text-align'] === 'center' || style['text-align'] === 'right' || style['text-align'] === 'justify')) {
        for (var i = 0; i < lines.length; ++i) {
          var length = this.pdf.getStringUnitWidth(lines[i][0][0], fragmentSpecificMetrics) * fragmentSpecificMetrics.fontSize / k; //if there is more than on line we have to clone the style object as all lines hold a reference on this object

          if (i > 0) {
            lines[i][0][1] = clone(lines[i][0][1]);
          }

          var space = maxLineLength - length;

          if (style['text-align'] === 'right') {
            lines[i][0][1]['margin-left'] = space; //if alignment is not right, it has to be center so split the space to the left and the right
          } else if (style['text-align'] === 'center') {
            lines[i][0][1]['margin-left'] = space / 2; //if justify was set, calculate the word spacing and define in by using the css property
          } else if (style['text-align'] === 'justify') {
            var countSpaces = lines[i][0][0].split(' ').length - 1;
            lines[i][0][1]['word-spacing'] = space / countSpaces; //ignore the last line in justify mode

            if (i === lines.length - 1) {
              lines[i][0][1]['word-spacing'] = 0;
            }
          }
        }
      }

      return lines;
    };

    Renderer.prototype.RenderTextFragment = function (text, style) {
      var defaultFontSize, font, maxLineHeight;
      maxLineHeight = 0;
      defaultFontSize = 12;

      if (this.pdf.internal.pageSize.getHeight() - this.pdf.margins_doc.bottom < this.y + this.pdf.internal.getFontSize()) {
        this.pdf.internal.write("ET", "Q", "Q");
        const currentPageNumber = this.pdf.getCurrentPageInfo().pageNumber;
        if (this.pdf.getNumberOfPages() === currentPageNumber) this.pdf.addPage();
        else this.pdf.setPage(currentPageNumber + 1);
        this.y = this.pdf.margins_doc.top;
        this.pdf.internal.write("q", "q", "BT", this.getPdfColor(style.color), this.pdf.internal.getCoordinateString(this.x), this.pdf.internal.getVerticalCoordinateString(this.y), "Td"); //move cursor by one line on new page

        maxLineHeight = Math.max(maxLineHeight, style["line-height"], style["font-size"]);
        this.pdf.internal.write(0, (-1 * defaultFontSize * maxLineHeight).toFixed(2), "Td");
      }

      font = this.pdf.internal.getFont(style["font-family"], style["font-style"]); // text color

      var pdfTextColor = this.getPdfColor(style["color"]);

      if (pdfTextColor !== this.lastTextColor) {
        this.pdf.internal.write(pdfTextColor);
        this.lastTextColor = pdfTextColor;
      } //set the word spacing for e.g. justify style


      if (style['word-spacing'] !== undefined && style['word-spacing'] > 0) {
        this.pdf.internal.write(style['word-spacing'].toFixed(2), "Tw");
      }


      var pdfEscape16 = function(text, font) {
        var widths = font.metadata.Unicode.widths;
        var padz = ["", "0", "00", "000", "0000"];
        var ar = [""];
        for (var i = 0, l = text.length, t; i < l; ++i) {
          t = font.metadata.characterToGlyph(text.charCodeAt(i));
          font.metadata.glyIdsUsed.push(t);
          font.metadata.toUnicode[t] = text.charCodeAt(i);
          if (widths.indexOf(t) == -1) {
            widths.push(t);
            widths.push([parseInt(font.metadata.widthOfGlyph(t), 10)]);
          }
          if (t == "0") {
            //Spaces are not allowed in cmap.
            return ar.join("");
          } else {
            t = t.toString(16);
            ar.push(padz[4 - t.length], t);
          }
        }
        return ar.join("");
      };

      var utf8TextFunction = function(text, font) {
        var text = text || "";
    
        var str = "",
          s = 0,
          cmapConfirm;
        var strText = "";
        var encoding = font.encoding;
    
        if (font.encoding !== "Identity-H") {
          return text;
        }
        strText = text;
    
        for (s = 0; s < strText.length; s += 1) {
          if (font.metadata.hasOwnProperty("cmap")) {
            cmapConfirm = font.metadata.cmap.unicode.codeMap[strText[s].charCodeAt(0)];
          }
          if (!cmapConfirm) {
            if (
              strText[s].charCodeAt(0) < 256 &&
              font.metadata.hasOwnProperty("Unicode")
            ) {
              str += strText[s];
            } else {
              str += "";
            }
          } else {
            str += strText[s];
          }
        }
        var result = "";
        if (parseInt(font.id.slice(1)) < 14 || encoding === "WinAnsiEncoding") {
          result = this.pdf.internal.pdfEscape(str, key)
            .split("")
            .map(function(cv) {
              return cv.charCodeAt(0).toString(16);
            })
            .join("");
        } else if (encoding === "Identity-H") {
          result = pdfEscape16(str, font);
        }
    
        return result;
      };      

      // var escapedText = this.pdf.internal.pdfEscape(text);
      // var escapedText = utf8TextFunction(text, font);
      // if(escapedText != text) {
      //   escapedText = "<" + escapedText + ">";
      // } else {
      //   escapedText = "(" + escapedText + ")";
      // }

      var escapedText = "";
      if(font.encoding !== "Identity-H") {
        escapedText = "(" + this.pdf.internal.pdfEscape(text) + ")";
      } else {
        escapedText = "<" + utf8TextFunction(text, font) + ">";
      }

      this.pdf.internal.write("/" + font.id, (defaultFontSize * style["font-size"]).toFixed(2), "Tf", escapedText + " Tj"); //set the word spacing back to neutral => 0

      if (style['word-spacing'] !== undefined) {
        this.pdf.internal.write(0, "Tw");
      }
    }; // Accepts #FFFFFF, rgb(int,int,int), or CSS Color Name


    Renderer.prototype.getPdfColor = function (style) {
      var textColor;
      var r, g, b;
      var rx = /rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/;
      var m = rx.exec(style);

      if (m != null) {
        r = parseInt(m[1]);
        g = parseInt(m[2]);
        b = parseInt(m[3]);
      } else {
        if (typeof style === "string" && style.charAt(0) != '#') {
          var rgbColor = new RGBColor(style);

          if (rgbColor.ok) {
            style = rgbColor.toHex();
          } else {
            style = '#000000';
          }
        }

        r = style.substring(1, 3);
        r = parseInt(r, 16);
        g = style.substring(3, 5);
        g = parseInt(g, 16);
        b = style.substring(5, 7);
        b = parseInt(b, 16);
      }

      if (typeof r === 'string' && /^#[0-9A-Fa-f]{6}$/.test(r)) {
        var hex = parseInt(r.substr(1), 16);
        r = hex >> 16 & 255;
        g = hex >> 8 & 255;
        b = hex & 255;
      }

      var f3 = this.f3;

      if (r === 0 && g === 0 && b === 0 || typeof g === 'undefined') {
        textColor = f3(r / 255) + ' g';
      } else {
        textColor = [f3(r / 255), f3(g / 255), f3(b / 255), 'rg'].join(' ');
      }

      return textColor;
    };

    Renderer.prototype.f3 = function (number) {
      return number.toFixed(3); // Ie, %.3f
    }, Renderer.prototype.renderParagraph = function (cb) {
      var blockstyle, defaultFontSize, fontToUnitRatio, fragments, i, l, line, lines, maxLineHeight, out, paragraphspacing_after, paragraphspacing_before, priorblockstyle, styles, fontSize;
      fragments = PurgeWhiteSpace(this.paragraph.text);
      styles = this.paragraph.style;
      blockstyle = this.paragraph.blockstyle;
      priorblockstyle = this.paragraph.priorblockstyle || {};
      this.paragraph = {
        text: [],
        style: [],
        blockstyle: {},
        priorblockstyle: blockstyle
      };

      if (!fragments.join("").trim()) {
        return;
      }

      lines = this.splitFragmentsIntoLines(fragments, styles);
      line = void 0;
      maxLineHeight = void 0;
      defaultFontSize = 12;
      fontToUnitRatio = defaultFontSize / this.pdf.internal.scaleFactor;
      this.priorMarginBottom = this.priorMarginBottom || 0;
      paragraphspacing_before = (Math.max((blockstyle["margin-top"] || 0) - this.priorMarginBottom, 0) + (blockstyle["padding-top"] || 0)) * fontToUnitRatio;
      paragraphspacing_after = ((blockstyle["margin-bottom"] || 0) + (blockstyle["padding-bottom"] || 0)) * fontToUnitRatio;
      this.priorMarginBottom = blockstyle["margin-bottom"] || 0;

      if (blockstyle['page-break-before'] === 'always') {
        this.pdf.addPage();
        this.y = 0;
        paragraphspacing_before = ((blockstyle["margin-top"] || 0) + (blockstyle["padding-top"] || 0)) * fontToUnitRatio;
      }

      out = this.pdf.internal.write;
      i = void 0;
      l = void 0;
      this.y += paragraphspacing_before;
      out("q", "BT 0 g", this.pdf.internal.getCoordinateString(this.x), this.pdf.internal.getVerticalCoordinateString(this.y), "Td"); //stores the current indent of cursor position

      var currentIndent = 0;

      while (lines.length) {
        line = lines.shift();
        maxLineHeight = 0;
        i = 0;
        l = line.length;

        while (i !== l) {
          if (line[i][0].trim()) {
            maxLineHeight = Math.max(maxLineHeight, line[i][1]["line-height"], line[i][1]["font-size"]);
            fontSize = line[i][1]["font-size"] * 7;
          }

          i++;
        } //if we have to move the cursor to adapt the indent


        var indentMove = 0;
        var wantedIndent = 0; //if a margin was added (by e.g. a text-alignment), move the cursor

        if (line[0][1]["margin-left"] !== undefined && line[0][1]["margin-left"] > 0) {
          wantedIndent = this.pdf.internal.getCoordinateString(line[0][1]["margin-left"]);
          indentMove = wantedIndent - currentIndent;
          currentIndent = wantedIndent;
        }

        var indentMore = Math.max(blockstyle["margin-left"] || 0, 0) * fontToUnitRatio; //move the cursor

        out(indentMove + indentMore, (-1 * defaultFontSize * maxLineHeight).toFixed(2), "Td");
        i = 0;
        l = line.length;

        while (i !== l) {
          if (line[i][0]) {
            this.RenderTextFragment(line[i][0], line[i][1]);
          }

          i++;
        }

        this.y += maxLineHeight * fontToUnitRatio; //if some watcher function was executed successful, so e.g. margin and widths were changed,
        //reset line drawing and calculate position and lines again
        //e.g. to stop text floating around an image

        if (this.executeWatchFunctions(line[0][1]) && lines.length > 0) {
          var localFragments = [];
          var localStyles = []; //create fragment array of

          lines.forEach(function (localLine) {
            var i = 0;
            var l = localLine.length;

            while (i !== l) {
              if (localLine[i][0]) {
                localFragments.push(localLine[i][0] + ' ');
                localStyles.push(localLine[i][1]);
              }

              ++i;
            }
          }); //split lines again due to possible coordinate changes

          lines = this.splitFragmentsIntoLines(PurgeWhiteSpace(localFragments), localStyles); //reposition the current cursor

          out("ET", "Q");
          out("q", "BT 0 g", this.pdf.internal.getCoordinateString(this.x), this.pdf.internal.getVerticalCoordinateString(this.y), "Td");
        }
      }

      if (cb && typeof cb === "function") {
        cb.call(this, this.x - 9, this.y - fontSize / 2);
      }

      out("ET", "Q");
      return this.y += paragraphspacing_after;
    };

    Renderer.prototype.setBlockBoundary = function (cb) {
      return this.renderParagraph(cb);
    };

    Renderer.prototype.setBlockStyle = function (css) {
      return this.paragraph.blockstyle = css;
    };

    Renderer.prototype.addText = function (text, css) {
      this.paragraph.text.push(text);
      return this.paragraph.style.push(css);
    };

    FontNameDB = {
      helvetica: "helvetica",
      "sans-serif": "helvetica",
      "times new roman": "times",
      serif: "times",
      times: "times",
      monospace: "courier",
      courier: "courier"
    };
    FontWeightMap = {
      100: "normal",
      200: "normal",
      300: "normal",
      400: "normal",
      500: "bold",
      600: "bold",
      700: "bold",
      800: "bold",
      900: "bold",
      normal: "normal",
      bold: "bold",
      bolder: "bold",
      lighter: "normal"
    };
    FontStyleMap = {
      normal: "normal",
      italic: "italic",
      oblique: "italic"
    };
    TextAlignMap = {
      left: "left",
      right: "right",
      center: "center",
      justify: "justify"
    };
    FloatMap = {
      none: 'none',
      right: 'right',
      left: 'left'
    };
    ClearMap = {
      none: 'none',
      both: 'both'
    };
    UnitedNumberMap = {
      normal: 1
    };
    /**
     * Converts HTML-formatted text into formatted PDF text.
     *
     * Notes:
     * 2012-07-18
     * Plugin relies on having browser, DOM around. The HTML is pushed into dom and traversed.
     * Plugin relies on jQuery for CSS extraction.
     * Targeting HTML output from Markdown templating, which is a very simple
     * markup - div, span, em, strong, p. No br-based paragraph separation supported explicitly (but still may work.)
     * Images, tables are NOT supported.
     *
     * @public
     * @function
     * @param HTML {String|Object} HTML-formatted text, or pointer to DOM element that is to be rendered into PDF.
     * @param x {Number} starting X coordinate in jsPDF instance's declared units.
     * @param y {Number} starting Y coordinate in jsPDF instance's declared units.
     * @param settings {Object} Additional / optional variables controlling parsing, rendering.
     * @returns {Object} jsPDF instance
     */

    jsPDFAPI.fromHTML = function (HTML, x, y, settings, callback, margins) {

      this.margins_doc = margins || {
        top: 0,
        bottom: 0
      };
      if (!settings) settings = {};
      if (!settings.elementHandlers) settings.elementHandlers = {};
      return process(this, HTML, isNaN(x) ? 4 : x, isNaN(y) ? 4 : y, settings, callback);
    };
  })(jspdf.jsPDF.API);


/***/ })
/******/ ]);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAzZjAyZjA2MzFiMjU3MzBlMjc0NiIsIndlYnBhY2s6Ly8vLi9zcmMvZW50cmllcy9oZWxwZXJzLnRzIiwid2VicGFjazovLy8uL3NyYy9oZWxwZXJfc3VydmV5LnRzIiwid2VicGFjazovLy8uL3NyYy9mbGF0X2xheW91dC9mbGF0X3JlcG9zaXRvcnkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZsYXRfbGF5b3V0L2ZsYXRfcXVlc3Rpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BkZl9yZW5kZXIvcGRmX3RleHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BkZl9yZW5kZXIvcGRmX2NvbXBvc2l0ZS50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwge1wicm9vdFwiOlwiU3VydmV5XCIsXCJjb21tb25qczJcIjpcInN1cnZleS1jb3JlXCIsXCJjb21tb25qc1wiOlwic3VydmV5LWNvcmVcIixcImFtZFwiOlwic3VydmV5LWNvcmVcIn0iLCJ3ZWJwYWNrOi8vLy4vc3JjL3BkZl9yZW5kZXIvcGRmX2JyaWNrLnRzIiwid2VicGFjazovLy8uL3NyYy9kb2NfY29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9yYWRpb2dyb3VwLnRzIiwid2VicGFjazovLy8uL3NyYy9mbGF0X2xheW91dC9mbGF0X3N1cnZleS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGRmX3JlbmRlci9wZGZfY2hlY2tpdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9wZGZfcmVuZGVyL3BkZl9lbXB0eS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGRmX3JlbmRlci9wZGZfdGV4dGJvbGQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VudHJpZXMvcGRmLnRzIiwid2VicGFjazovLy8uL3NyYy9mbGF0X2xheW91dC9mbGF0X3NlbGVjdGJhc2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BkZl9yZW5kZXIvcGRmX3Jvd2xpbmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BkZl9yZW5kZXIvcGRmX3RleHRib3gudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcInJvb3RcIjpcImpzcGRmXCIsXCJjb21tb25qczJcIjpcImpzcGRmXCIsXCJjb21tb25qc1wiOlwianNwZGZcIixcImFtZFwiOlwianNwZGZcIn0iLCJ3ZWJwYWNrOi8vLy4vc3JjL2V2ZW50X2hhbmRsZXIvZHJhd19jYW52YXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2V2ZW50X2hhbmRsZXIvZXZlbnRfaGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9kZWZhdWx0LnRzIiwid2VicGFjazovLy8uL3NyYy9mbGF0X2xheW91dC9mbGF0X21hdHJpeG11bHRpcGxlLnRzIiwid2VicGFjazovLy8uL3NyYy9wYWdlX2xheW91dC9wYWdlX3BhY2tlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGRmX3JlbmRlci9wZGZfYm9vbGVhbml0ZW0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BkZl9yZW5kZXIvcGRmX2NoZWNrYm94aXRlbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGRmX3JlbmRlci9wZGZfY29tbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGRmX3JlbmRlci9wZGZfZHJvcGRvd24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BkZl9yZW5kZXIvcGRmX2h0bWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BkZl9yZW5kZXIvcGRmX2ltYWdlLnRzIiwid2VicGFjazovLy8uL3NyYy9wZGZfcmVuZGVyL3BkZl9saW5rLnRzIiwid2VicGFjazovLy8uL3NyYy9wZGZfcmVuZGVyL3BkZl9yYWRpb2l0ZW0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BkZl9yZW5kZXIvcGRmX3JhbmtpbmdpdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9wZGZfcmVuZGVyL3BkZl90ZXh0ZmllbGQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BkZl9yZW5kZXIvcGRmX3RpdGxlcGFuZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2V2ZW50X2hhbmRsZXIvYWRvcm5lcnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZsYXRfbGF5b3V0L2ZsYXRfYm9vbGVhbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9jaGVja2JveC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9jb21tZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9mbGF0X2xheW91dC9mbGF0X2N1c3RvbV9tb2RlbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9kcm9wZG93bi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9leHByZXNzaW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9mbGF0X2xheW91dC9mbGF0X2ZpbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZsYXRfbGF5b3V0L2ZsYXRfaHRtbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9pbWFnZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9pbWFnZXBpY2tlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9tYXRyaXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZsYXRfbGF5b3V0L2ZsYXRfbWF0cml4ZHluYW1pYy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9tdWx0aXBsZXRleHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZsYXRfbGF5b3V0L2ZsYXRfcGFuZWxkeW5hbWljLnRzIiwid2VicGFjazovLy8uL3NyYy9mbGF0X2xheW91dC9mbGF0X3JhbmtpbmcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZsYXRfbGF5b3V0L2ZsYXRfcmF0aW5nLnRzIiwid2VicGFjazovLy8uL3NyYy9mbGF0X2xheW91dC9mbGF0X3NpZ25hdHVyZXBhZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF90ZXh0Ym94LnRzIiwid2VicGFjazovLy8uL3NyYy9wZGZfcmVuZGVyL3BkZl9jdXN0b20udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N1cnZleS50cyIsIndlYnBhY2s6Ly8vLi9+L25vZGUtaW50ZXJ2YWwtdHJlZS9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9zaGFsbG93ZXF1YWwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzcGRmX3BsdWdpbnMvYWNyb2Zvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BkZl9yZW5kZXIvcGRmX2NvbG9yZWRicmljay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGRmX3JlbmRlci9wZGZfZGVzY3JpcHRpb24udHMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanNwZGZfcGx1Z2lucy9hY3JvZm9ybS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanNwZGZfcGx1Z2lucy9mcm9tX2h0bWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsTztBQ1ZBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLG1EQUEyQyxjQUFjOztBQUV6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUEyQiwwQkFBMEIsRUFBRTtBQUN2RCx5Q0FBaUMsZUFBZTtBQUNoRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4REFB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SUFBSSxJQUFJO1lBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1NBQUU7UUFBQyxPQUFPLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFLENBQUMsQ0FBQztRQUNuRyxTQUFTLElBQUksQ0FBQyxNQUFXLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuSCxJQUFJLENBQUMsQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsVUFBVSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUMxRSxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUFFSyxTQUFVLFdBQVcsQ0FBQyxPQUFZLEVBQUUsSUFBUztJQUMvQyxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLGNBQWEsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztZQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFPLEVBQUUsRUFBRSxHQUFHLEVBQU8sRUFBRSxFQUFFLEVBQUUsQ0FBTSxFQUFFLENBQU0sRUFBRSxDQUFNLEVBQUUsQ0FBTSxDQUFDO0lBQy9JLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUs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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZ0NBQWdDO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IseUJBQXlCO0FBQ3hEO0FBQ0EsaUZBQWlGO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTOztB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7O0FBR1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFh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QSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBLHlKQUF5SjtBQUN6SjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTOzs7QUFHVDtBQUNBLHlGQUF5RjtBQUN6RjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQSx5RkFBeUY7QUFDekY7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0RBQStE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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMscUc7Ozs7Ozs7QUM1MkZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7O0FBRS9CO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFD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T0FBTztBQUN4Qix3QkFBd0IsT0FBTztBQUMvQixpQkFBaUIsT0FBTztBQUN4Qjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyIsImZpbGUiOiIuL3BhY2thZ2VzL3N1cnZleS1wZGYvc3VydmV5LnBkZi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcInN1cnZleS1jb3JlXCIpLCByZXF1aXJlKFwianNwZGZcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJTdXJ2ZXlQREZcIiwgW1wic3VydmV5LWNvcmVcIiwgXCJqc3BkZlwiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJTdXJ2ZXlQREZcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJzdXJ2ZXktY29yZVwiKSwgcmVxdWlyZShcImpzcGRmXCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJTdXJ2ZXlQREZcIl0gPSBmYWN0b3J5KHJvb3RbXCJTdXJ2ZXlcIl0sIHJvb3RbXCJqc3BkZlwiXSk7XG59KSh0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzZfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xOF9fKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDE0KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCAzZjAyZjA2MzFiMjU3MzBlMjc0NiIsImRlY2xhcmUgdmFyIFJlZmxlY3Q6IGFueTtcblxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkOiBhbnksIGI6IGFueSk6IGFueSB7XG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkOiBhbnksIGI6IGFueSkge1xuICAgIGlmICh0eXBlb2YgYiAhPT0gJ2Z1bmN0aW9uJyAmJiBiICE9PSBudWxsKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDbGFzcyBleHRlbmRzIHZhbHVlICcgKyBTdHJpbmcoYikgKyAnIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwnKTtcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufVxuXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XG4gICAgX19hc3NpZ24gPSAoPGFueT5PYmplY3QpLmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0OiBhbnkpIHtcbiAgICAgICAgZm9yICh2YXIgczogYW55LCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHM6IGFueSwgZTogYW55KSB7XG4gICAgdmFyIHQ6IGFueSA9IHt9O1xuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxuICAgICAgICB0W3BdID0gc1twXTtcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSAnZnVuY3Rpb24nKVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBxLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHFbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcVtpXSkpXG4gICAgICAgICAgICAgICAgdFtxW2ldXSA9IHNbcVtpXV07XG4gICAgICAgIH1cbiAgICByZXR1cm4gdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9yczogYW55LCB0YXJnZXQ6IGFueSwga2V5OiBhbnksIGRlc2M6IGFueSkge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gJ2Z1bmN0aW9uJykgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25kLWFzc2lnblxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnOiBhbnksIF9hcmd1bWVudHM6IGFueSwgUDogYW55LCBnZW5lcmF0b3I6IGFueSkge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlOiBhbnkpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmU6IGFueSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlOiBhbnksIHJlamVjdDogYW55KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZTogYW55KSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZTogYW55KSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yWyd0aHJvdyddKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQ6IGFueSkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnOiBhbnksIGJvZHk6IGFueSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IDxhbnk+W10sIG9wczogPGFueT5bXSB9LCBmOiBhbnksIHk6IGFueSwgdDogYW55LCBnOiBhbnk7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksICd0aHJvdyc6IHZlcmIoMSksICdyZXR1cm4nOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuOiBhbnkpIHsgcmV0dXJuIGZ1bmN0aW9uICh2OiBhbnkpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3A6IGFueSkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcignR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLicpO1xuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbJ3JldHVybiddIDogb3BbMF0gPyB5Wyd0aHJvdyddIHx8ICgodCA9IHlbJ3JldHVybiddKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgKDxhbnk+XykgPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5ICh0bzogYW55LCBmcm9tOiBhbnksIHBhY2s6IGFueSkge1xuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOiBhbnk7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZW50cmllcy9oZWxwZXJzLnRzIiwiaW1wb3J0IHsgSVF1ZXN0aW9uLCBRdWVzdGlvbiwgUXVlc3Rpb25SYXRpbmdNb2RlbCwgUXVlc3Rpb25GaWxlTW9kZWwsIExvY2FsaXphYmxlU3RyaW5nLCBRdWVzdGlvblNlbGVjdEJhc2UsIFF1ZXN0aW9uRHJvcGRvd25Nb2RlbCwgc2V0dGluZ3MgfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5pbXBvcnQgKiBhcyBTdXJ2ZXlQREZNb2R1bGUgZnJvbSAnLi9lbnRyaWVzL3BkZic7XG5pbXBvcnQgeyBTdXJ2ZXlQREYgfSBmcm9tICcuL3N1cnZleSc7XG5pbXBvcnQgeyBJUG9pbnQsIElSZWN0LCBJU2l6ZSwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgRmxhdFJlcG9zaXRvcnkgfSBmcm9tICcuL2ZsYXRfbGF5b3V0L2ZsYXRfcmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBJRmxhdFF1ZXN0aW9uIH0gZnJvbSAnLi9mbGF0X2xheW91dC9mbGF0X3F1ZXN0aW9uJztcbmltcG9ydCB7IElIVE1MUmVuZGVyVHlwZSB9IGZyb20gJy4vZmxhdF9sYXlvdXQvZmxhdF9odG1sJztcbmltcG9ydCB7IElQZGZCcmljaywgUGRmQnJpY2sgfSBmcm9tICcuL3BkZl9yZW5kZXIvcGRmX2JyaWNrJztcbmltcG9ydCB7IFRleHRCcmljayB9IGZyb20gJy4vcGRmX3JlbmRlci9wZGZfdGV4dCc7XG5pbXBvcnQgeyBUZXh0Qm9sZEJyaWNrIH0gZnJvbSAnLi9wZGZfcmVuZGVyL3BkZl90ZXh0Ym9sZCc7XG5pbXBvcnQgeyBUaXRsZVBhbmVsQnJpY2sgfSBmcm9tICcuL3BkZl9yZW5kZXIvcGRmX3RpdGxlcGFuZWwnO1xuaW1wb3J0IHsgRGVzY3JpcHRpb25CcmljayB9IGZyb20gJy4vcGRmX3JlbmRlci9wZGZfZGVzY3JpcHRpb24nO1xuaW1wb3J0IHsgQ29tbWVudEJyaWNrIH0gZnJvbSAnLi9wZGZfcmVuZGVyL3BkZl9jb21tZW50JztcbmltcG9ydCB7IExpbmtCcmljayB9IGZyb20gJy4vcGRmX3JlbmRlci9wZGZfbGluayc7XG5pbXBvcnQgeyBIVE1MQnJpY2sgfSBmcm9tICcuL3BkZl9yZW5kZXIvcGRmX2h0bWwnO1xuaW1wb3J0IHsgSW1hZ2VCcmljayB9IGZyb20gJy4vcGRmX3JlbmRlci9wZGZfaW1hZ2UnO1xuaW1wb3J0IHsgRW1wdHlCcmljayB9IGZyb20gJy4vcGRmX3JlbmRlci9wZGZfZW1wdHknO1xuaW1wb3J0IHsgUm93bGluZUJyaWNrIH0gZnJvbSAnLi9wZGZfcmVuZGVyL3BkZl9yb3dsaW5lJztcbmltcG9ydCB7IENvbXBvc2l0ZUJyaWNrIH0gZnJvbSAnLi9wZGZfcmVuZGVyL3BkZl9jb21wb3NpdGUnO1xuaW1wb3J0IHsgQWRvcm5lcnNPcHRpb25zIH0gZnJvbSAnLi9ldmVudF9oYW5kbGVyL2Fkb3JuZXJzJztcblxuZXhwb3J0IHR5cGUgSUJvcmRlckRlc2NyaXB0aW9uID0gSVJlY3QgJiBJU2l6ZSAmIFBpY2s8UGRmQnJpY2ssICdmb3JtQm9yZGVyQ29sb3InPiAmIHsgcm91bmRlZD86IGJvb2xlYW4sIGRhc2hTdHlsZT86IHsgZGFzaEFycmF5OiBbbnVtYmVyLCBudW1iZXJdIHwgW251bWJlcl0sIGRhc2hQaGFzZTogbnVtYmVyIH0sIG91dHNpZGU/OiBib29sZWFuIH07XG5cbmV4cG9ydCBjbGFzcyBTdXJ2ZXlIZWxwZXIge1xuICAgIHB1YmxpYyBzdGF0aWMgRVBTSUxPTjogbnVtYmVyID0gMi4yMjA0NDYwNDkyNTAzMTMwODA4NDcyNjMzMzYxODE2ZS0xNTtcbiAgICBwdWJsaWMgc3RhdGljIFRJVExFX1NVUlZFWV9GT05UX1NJWkVfU0NBTEU6IG51bWJlciA9IDEuNztcbiAgICBwdWJsaWMgc3RhdGljIFRJVExFX1BBR0VfRk9OVF9TSVpFX1NDQUxFOiBudW1iZXIgPSAxLjM7XG4gICAgcHVibGljIHN0YXRpYyBUSVRMRV9QQU5FTF9GT05UX1NJWkVfU0NBTEU6IG51bWJlciA9IDEuMztcbiAgICBwdWJsaWMgc3RhdGljIERFU0NSSVBUSU9OX0ZPTlRfU0laRV9TQ0FMRTogbnVtYmVyID0gMi4wIC8gMy4wO1xuICAgIHB1YmxpYyBzdGF0aWMgT1RIRVJfUk9XU19DT1VOVDogbnVtYmVyID0gMjtcbiAgICBwdWJsaWMgc3RhdGljIFJBVElOR19NSU5fV0lEVEg6IG51bWJlciA9IDM7XG4gICAgcHVibGljIHN0YXRpYyBSQVRJTkdfTUlOX0hFSUdIVDogbnVtYmVyID0gMjtcbiAgICBwdWJsaWMgc3RhdGljIFJBVElOR19DT0xVTU5fV0lEVEg6IG51bWJlciA9IDU7XG4gICAgcHVibGljIHN0YXRpYyBNQVRSSVhfQ09MVU1OX1dJRFRIOiBudW1iZXIgPSA1O1xuICAgIHB1YmxpYyBzdGF0aWMgSU1BR0VQSUNLRVJfQ09VTlQ6IG51bWJlciA9IDQ7XG4gICAgcHVibGljIHN0YXRpYyBJTUFHRVBJQ0tFUl9SQVRJTzogbnVtYmVyID0gNC4wIC8gMy4wO1xuICAgIHB1YmxpYyBzdGF0aWMgTVVMVElQTEVURVhUX1RFWFRfUEVSUzogbnVtYmVyID0gTWF0aC5FIC8gMTAuMDtcbiAgICBwdWJsaWMgc3RhdGljIEhUTUxfVEFJTF9URVhUX1NDQUxFOiBudW1iZXIgPSAwLjI0O1xuICAgIHB1YmxpYyBzdGF0aWMgU0VMRUNUX0lURU1fRkxBVF9TQ0FMRTogbnVtYmVyID0gMC45NTtcbiAgICBwdWJsaWMgc3RhdGljIEdBUF9CRVRXRUVOX1JPV1M6IG51bWJlciA9IDAuMjU7XG4gICAgcHVibGljIHN0YXRpYyBHQVBfQkVUV0VFTl9DT0xVTU5TOiBudW1iZXIgPSAxLjU7XG4gICAgcHVibGljIHN0YXRpYyBHQVBfQkVUV0VFTl9JVEVNX1RFWFQ6IG51bWJlciA9IDAuMjU7XG4gICAgcHVibGljIHN0YXRpYyBGT1JNX0JPUkRFUl9WSVNJQkxFOiBib29sZWFuID0gdHJ1ZTtcbiAgICBwdWJsaWMgc3RhdGljIEJPUkRFUl9TQ0FMRTogbnVtYmVyID0gMC4xO1xuICAgIHB1YmxpYyBzdGF0aWMgVklTSUJMRV9CT1JERVJfU0NBTEU6IG51bWJlciA9IDAuODtcbiAgICBwdWJsaWMgc3RhdGljIFVOVklTSUJMRV9CT1JERVJfU0NBTEU6IG51bWJlciA9IDAuMjtcbiAgICBwdWJsaWMgc3RhdGljIFJBRElVU19TQ0FMRTogbnVtYmVyID0gMy4wO1xuICAgIHB1YmxpYyBzdGF0aWMgVElUTEVfRk9OVF9TQ0FMRTogbnVtYmVyID0gMS4xO1xuICAgIHB1YmxpYyBzdGF0aWMgVkFMVUVfUkVBRE9OTFlfUEFERElOR19TQ0FMRTogbnVtYmVyID0gMC4zO1xuICAgIHB1YmxpYyBzdGF0aWMgSFRNTF9UT19JTUFHRV9RVUFMSVRZOiBudW1iZXIgPSAxLjA7XG4gICAgcHVibGljIHN0YXRpYyBGT1JNX0JPUkRFUl9DT0xPUjogc3RyaW5nID0gJyM5ZjlmOWYnO1xuICAgIHB1YmxpYyBzdGF0aWMgVEVYVF9DT0xPUjogc3RyaW5nID0gJyM0MDQwNDAnO1xuICAgIHB1YmxpYyBzdGF0aWMgQkFDS0dST1VORF9DT0xPUjogc3RyaW5nID0gJyNGRkZGRkYnO1xuICAgIHB1YmxpYyBzdGF0aWMgVElUTEVfTE9DQVRJT05fTUFUUklYOiBzdHJpbmcgPSAnbWF0cml4JztcbiAgICBwdWJsaWMgc3RhdGljIFNUQU5EQVJEX0ZPTlQ6IHN0cmluZyA9ICdoZWx2ZXRpY2EnO1xuICAgIHB1YmxpYyBzdGF0aWMgQ1VTVE9NX0ZPTlRfRU5DT0RJTkc6IHN0cmluZyA9ICdJZGVudGl0eS1IJztcblxuICAgIHB1YmxpYyBzdGF0aWMgcGFyc2VXaWR0aCh3aWR0aDogc3RyaW5nLCBtYXhXaWR0aDogbnVtYmVyLFxuICAgICAgICBjb2x1bW5zQ291bnQ6IG51bWJlciA9IDEsIGRlZmF1bHRVbml0Pzogc3RyaW5nKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHdpZHRoLmluZGV4T2YoJ2NhbGMnKSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG1heFdpZHRoIC8gY29sdW1uc0NvdW50O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlOiBudW1iZXIgPSBwYXJzZUZsb2F0KHdpZHRoKTtcbiAgICAgICAgY29uc3QgdW5pdDogc3RyaW5nID0gd2lkdGgucmVwbGFjZSgvW15BLVphLXolXS9nLCAnJykgfHwgZGVmYXVsdFVuaXQ7XG4gICAgICAgIGxldCBrOiBudW1iZXI7XG4gICAgICAgIHN3aXRjaCAodW5pdCkge1xuICAgICAgICAgICAgY2FzZSAncHQnOlxuICAgICAgICAgICAgICAgIGsgPSAxLjA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtbSc6XG4gICAgICAgICAgICAgICAgayA9IDcyLjAgLyAyNS40O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnY20nOlxuICAgICAgICAgICAgICAgIGsgPSA3Mi4wIC8gMi41NDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2luJzpcbiAgICAgICAgICAgICAgICBrID0gNzIuMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3B4JzpcbiAgICAgICAgICAgICAgICBrID0gNzIuMCAvIDk2LjA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdwYyc6XG4gICAgICAgICAgICAgICAgayA9IDEyLjA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdlbSc6XG4gICAgICAgICAgICAgICAgayA9IDEyLjA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdleCc6XG4gICAgICAgICAgICAgICAgayA9IDYuMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYXNlICclJzpcbiAgICAgICAgICAgICAgICBrID0gbWF4V2lkdGggLyAxMDAuMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWF0aC5taW4odmFsdWUgKiBrLCBtYXhXaWR0aCk7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgcHhUb1B0KHZhbHVlOiBudW1iZXIgfCBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmKCFpc05hTihOdW1iZXIodmFsdWUpKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlICs9ICdweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gU3VydmV5SGVscGVyLnBhcnNlV2lkdGgodmFsdWUsIE51bWJlci5NQVhfVkFMVUUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZSAqIDcyLjAgLyA5Ni4wO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIG1lcmdlUmVjdHMoLi4ucmVjdHM6IElSZWN0W10pOiBJUmVjdCB7XG4gICAgICAgIGNvbnN0IHJlc3VsdFJlY3Q6IElSZWN0ID0ge1xuICAgICAgICAgICAgeExlZnQ6IHJlY3RzWzBdLnhMZWZ0LFxuICAgICAgICAgICAgeFJpZ2h0OiByZWN0c1swXS54UmlnaHQsXG4gICAgICAgICAgICB5VG9wOiByZWN0c1swXS55VG9wLFxuICAgICAgICAgICAgeUJvdDogcmVjdHNbMF0ueUJvdFxuICAgICAgICB9O1xuICAgICAgICByZWN0cy5mb3JFYWNoKChyZWN0OiBJUmVjdCkgPT4ge1xuICAgICAgICAgICAgcmVzdWx0UmVjdC54TGVmdCA9IE1hdGgubWluKHJlc3VsdFJlY3QueExlZnQsIHJlY3QueExlZnQpLFxuICAgICAgICAgICAgcmVzdWx0UmVjdC54UmlnaHQgPSBNYXRoLm1heChyZXN1bHRSZWN0LnhSaWdodCwgcmVjdC54UmlnaHQpLFxuICAgICAgICAgICAgcmVzdWx0UmVjdC55VG9wID0gTWF0aC5taW4ocmVzdWx0UmVjdC55VG9wLCByZWN0LnlUb3ApLFxuICAgICAgICAgICAgcmVzdWx0UmVjdC55Qm90ID0gTWF0aC5tYXgocmVzdWx0UmVjdC55Qm90LCByZWN0LnlCb3QpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFJlY3Q7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlUG9pbnQocmVjdDogSVJlY3QsIGlzTGVmdDogYm9vbGVhbiA9IHRydWUsIGlzVG9wOiBib29sZWFuID0gZmFsc2UpOiBJUG9pbnQge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeExlZnQ6IGlzTGVmdCA/IHJlY3QueExlZnQgOiByZWN0LnhSaWdodCxcbiAgICAgICAgICAgIHlUb3A6IGlzVG9wID8gcmVjdC55VG9wIDogcmVjdC55Qm90XG4gICAgICAgIH07XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlUmVjdChwb2ludDogSVBvaW50LCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IElSZWN0IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHhMZWZ0OiBwb2ludC54TGVmdCxcbiAgICAgICAgICAgIHhSaWdodDogcG9pbnQueExlZnQgKyB3aWR0aCxcbiAgICAgICAgICAgIHlUb3A6IHBvaW50LnlUb3AsXG4gICAgICAgICAgICB5Qm90OiBwb2ludC55VG9wICsgaGVpZ2h0XG4gICAgICAgIH07XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlSGVhZGVyUmVjdChjb250cm9sbGVyOiBEb2NDb250cm9sbGVyKTogSVJlY3Qge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeExlZnQ6IDAuMCxcbiAgICAgICAgICAgIHhSaWdodDogY29udHJvbGxlci5wYXBlcldpZHRoLFxuICAgICAgICAgICAgeVRvcDogMC4wLFxuICAgICAgICAgICAgeUJvdDogY29udHJvbGxlci5tYXJnaW5zLnRvcFxuICAgICAgICB9O1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZUZvb3RlclJlY3QoY29udHJvbGxlcjogRG9jQ29udHJvbGxlcik6IElSZWN0IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHhMZWZ0OiAwLjAsXG4gICAgICAgICAgICB4UmlnaHQ6IGNvbnRyb2xsZXIucGFwZXJXaWR0aCxcbiAgICAgICAgICAgIHlUb3A6IGNvbnRyb2xsZXIucGFwZXJIZWlnaHQgLSBjb250cm9sbGVyLm1hcmdpbnMuYm90LFxuICAgICAgICAgICAgeUJvdDogY29udHJvbGxlci5wYXBlckhlaWdodFxuICAgICAgICB9O1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGNob29zZUh0bWxGb250KGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gY29udHJvbGxlci51c2VDdXN0b21Gb250SW5IdG1sID8gY29udHJvbGxlci5mb250TmFtZSA6IHRoaXMuU1RBTkRBUkRfRk9OVDtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBnZW5lcmF0ZUNzc1RleHRSdWxlKGZvbnRTaXplOiBudW1iZXIsIGZvbnRTdHlsZTogc3RyaW5nLCBmb250TmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGBcImZvbnQtc2l6ZTogJHtmb250U2l6ZX1wdDsgZm9udC13ZWlnaHQ6ICR7Zm9udFN0eWxlfTsgZm9udC1mYW1pbHk6ICR7Zm9udE5hbWV9OyBjb2xvcjogJHt0aGlzLlRFWFRfQ09MT1J9O1wiYDtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVIdG1sQ29udGFpbmVyQmxvY2soaHRtbDogc3RyaW5nLCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLCByZW5kZXJBczogSUhUTUxSZW5kZXJUeXBlKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgZm9udCA9IHRoaXMuY2hvb3NlSHRtbEZvbnQoY29udHJvbGxlcik7XG4gICAgICAgIHJldHVybiBgPGRpdiBjbGFzcz1cIl9fc3VydmV5cGRmX2h0bWxcIiBzdHlsZT0ke3RoaXMuZ2VuZXJhdGVDc3NUZXh0UnVsZShcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZm9udFNpemUsIGNvbnRyb2xsZXIuZm9udFN0eWxlLCBmb250KX0+YCArXG4gICAgICAgICAgICBgPHN0eWxlPi5fX3N1cnZleXBkZl9odG1sIHAgeyBtYXJnaW46IDA7IGxpbmUtaGVpZ2h0OiAke2NvbnRyb2xsZXIuZm9udFNpemV9cHQgfSBib2R5IHsgbWFyZ2luOiAwOyB9PC9zdHlsZT4ke2h0bWx9PC9kaXY+YDtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBzcGxpdEh0bWxSZWN0KGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsIGh0bWxCcmljazogSVBkZkJyaWNrKTogSVBkZkJyaWNrIHtcbiAgICAgICAgY29uc3QgYnJpY2tzOiBJUGRmQnJpY2tbXSA9IFtdO1xuICAgICAgICBjb25zdCBodG1sSGVpZ2h0OiBudW1iZXIgPSBodG1sQnJpY2suaGVpZ2h0O1xuICAgICAgICBjb25zdCBtaW5IZWlnaHQ6IG51bWJlciA9IGNvbnRyb2xsZXIuZG9jLmdldEZvbnRTaXplKCk7XG4gICAgICAgIGh0bWxCcmljay55Qm90ID0gaHRtbEJyaWNrLnlUb3AgKyBtaW5IZWlnaHQ7XG4gICAgICAgIGNvbnN0IGVtcHR5QnJpY2tDb3VudDogbnVtYmVyID0gTWF0aC5mbG9vcihodG1sSGVpZ2h0IC8gbWluSGVpZ2h0KSAtIDE7XG4gICAgICAgIGJyaWNrcy5wdXNoKGh0bWxCcmljayk7XG4gICAgICAgIGNvbnN0IGN1cnJQb2ludDogSVBvaW50ID0gdGhpcy5jcmVhdGVQb2ludChodG1sQnJpY2spO1xuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgZW1wdHlCcmlja0NvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGJyaWNrcy5wdXNoKG5ldyBFbXB0eUJyaWNrKHRoaXMuY3JlYXRlUmVjdChjdXJyUG9pbnQsIGh0bWxCcmljay53aWR0aCwgbWluSGVpZ2h0KSkpO1xuICAgICAgICAgICAgY3VyclBvaW50LnlUb3AgKz0gbWluSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0hlaWdodDogbnVtYmVyID0gaHRtbEhlaWdodCAtIChlbXB0eUJyaWNrQ291bnQgKyAxKSAqIG1pbkhlaWdodDtcbiAgICAgICAgaWYgKHJlbWFpbmluZ0hlaWdodCA+IDApIHtcbiAgICAgICAgICAgIGJyaWNrcy5wdXNoKG5ldyBFbXB0eUJyaWNrKHRoaXMuY3JlYXRlUmVjdChjdXJyUG9pbnQsIGh0bWxCcmljay53aWR0aCwgcmVtYWluaW5nSGVpZ2h0KSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQ29tcG9zaXRlQnJpY2soLi4uYnJpY2tzKTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVQbGFpblRleHRGbGF0PFQgZXh0ZW5kcyBJUGRmQnJpY2s+KHBvaW50OiBJUG9pbnQsIHF1ZXN0aW9uOiBJUXVlc3Rpb24sXG4gICAgICAgIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsIHRleHQ6IHN0cmluZywgZmFicmljOiBuZXcgKHF1ZXN0aW9uOiBJUXVlc3Rpb24sXG4gICAgICAgICAgICBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLCByZWN0OiBJUmVjdCwgdGV4dDogc3RyaW5nKSA9PiBUKTogQ29tcG9zaXRlQnJpY2sge1xuICAgICAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBjb250cm9sbGVyLmRvYy5zcGxpdFRleHRUb1NpemUodGV4dCxcbiAgICAgICAgICAgIGNvbnRyb2xsZXIucGFwZXJXaWR0aCAtIGNvbnRyb2xsZXIubWFyZ2lucy5yaWdodCAtIHBvaW50LnhMZWZ0KTtcbiAgICAgICAgY29uc3QgY3VyclBvaW50OiBJUG9pbnQgPSB0aGlzLmNsb25lKHBvaW50KTtcbiAgICAgICAgY29uc3QgY29tcG9zaXRlOiBDb21wb3NpdGVCcmljayA9IG5ldyBDb21wb3NpdGVCcmljaygpO1xuICAgICAgICBsaW5lcy5mb3JFYWNoKChsaW5lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNpemU6IElTaXplID0gY29udHJvbGxlci5tZWFzdXJlVGV4dChsaW5lKTtcbiAgICAgICAgICAgIGNvbXBvc2l0ZS5hZGRCcmljayhuZXcgZmFicmljKHF1ZXN0aW9uLCBjb250cm9sbGVyLFxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUmVjdChjdXJyUG9pbnQsIHNpemUud2lkdGgsIHNpemUuaGVpZ2h0KSwgbGluZSkpO1xuICAgICAgICAgICAgY3VyclBvaW50LnlUb3AgKz0gc2l6ZS5oZWlnaHQ7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY29tcG9zaXRlO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGNyZWF0ZVRleHRGbGF0PFQgZXh0ZW5kcyBJUGRmQnJpY2s+KHBvaW50OiBJUG9pbnQsIHF1ZXN0aW9uOiBJUXVlc3Rpb24sXG4gICAgICAgIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsIHRleHQ6IHN0cmluZyB8IExvY2FsaXphYmxlU3RyaW5nLCBmYWJyaWM6IG5ldyAocXVlc3Rpb246IElRdWVzdGlvbixcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsIHJlY3Q6IElSZWN0LCB0ZXh0OiBzdHJpbmcpID0+IFQpOiBQcm9taXNlPElQZGZCcmljaz4ge1xuICAgICAgICBpZiAodHlwZW9mIHRleHQgPT09ICdzdHJpbmcnIHx8ICF0aGlzLmhhc0h0bWwodGV4dCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVBsYWluVGV4dEZsYXQocG9pbnQsIHF1ZXN0aW9uLCBjb250cm9sbGVyLCB0eXBlb2YgdGV4dCA9PT0gJ3N0cmluZycgP1xuICAgICAgICAgICAgICAgIHRleHQgOiB0aGlzLmdldExvY1N0cmluZyg8TG9jYWxpemFibGVTdHJpbmc+dGV4dCksIGZhYnJpYyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zcGxpdEh0bWxSZWN0KGNvbnRyb2xsZXIsIGF3YWl0IHRoaXMuY3JlYXRlSFRNTEZsYXQocG9pbnQsIDxRdWVzdGlvbj5xdWVzdGlvbiwgY29udHJvbGxlcixcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUh0bWxDb250YWluZXJCbG9jayh0aGlzLmdldExvY1N0cmluZyh0ZXh0KSwgY29udHJvbGxlciwgJ3N0YW5kYXJkJykpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcml2YXRlIHN0YXRpYyBoYXNIdG1sKHRleHQ6IExvY2FsaXphYmxlU3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHBhdHRlcm46IFJlZ0V4cCA9IC88XFwvP1thLXpdW1xcc1xcU10qPi9pO1xuICAgICAgICByZXR1cm4gdGV4dC5oYXNIdG1sICYmIChwYXR0ZXJuLnRlc3QoKDxhbnk+dGV4dCkucmVuZGVyZWRUZXh0KSB8fCBwYXR0ZXJuLnRlc3QodGV4dC5yZW5kZXJlZEh0bWwpKTtcbiAgICB9XG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0SHRtbE1hcmdpbnMoY29udHJvbGxlcjogRG9jQ29udHJvbGxlciwgcG9pbnQ6IElQb2ludCk6IHsgdG9wOiBudW1iZXIsIGJvdHRvbTogbnVtYmVyLCB3aWR0aDogbnVtYmVyIH0ge1xuICAgICAgICBjb25zdCB3aWR0aDogbnVtYmVyID0gY29udHJvbGxlci5wYXBlcldpZHRoIC0gcG9pbnQueExlZnQgLSBjb250cm9sbGVyLm1hcmdpbnMucmlnaHQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b3A6IGNvbnRyb2xsZXIubWFyZ2lucy50b3AsXG4gICAgICAgICAgICBib3R0b206IGNvbnRyb2xsZXIubWFyZ2lucy5ib3QsXG4gICAgICAgICAgICB3aWR0aDogd2lkdGggPiBjb250cm9sbGVyLnVuaXRXaWR0aCA/IHdpZHRoIDogY29udHJvbGxlci51bml0V2lkdGhcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZUhUTUxSZWN0KHBvaW50OiBJUG9pbnQsIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsXG4gICAgICAgIG1hcmdpbnM6IHsgdG9wOiBudW1iZXIsIGJvdHRvbTogbnVtYmVyLCB3aWR0aDogbnVtYmVyIH0sIHJlc3VsdFk6IG51bWJlcik6IElSZWN0IHtcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlUGFnZUhlaWdodDogbnVtYmVyID0gY29udHJvbGxlci5wYXBlckhlaWdodCAtIGNvbnRyb2xsZXIubWFyZ2lucy5ib3QgLSBjb250cm9sbGVyLm1hcmdpbnMudG9wO1xuICAgICAgICBjb25zdCBoZWlnaHQ6IG51bWJlciA9IChjb250cm9sbGVyLmhlbHBlckRvYy5nZXROdW1iZXJPZlBhZ2VzKCkgLSAxKSAqXG4gICAgICAgICAgICAoY29udHJvbGxlci5mb250U2l6ZSAqIE1hdGguZmxvb3IoYXZhaWxhYmxlUGFnZUhlaWdodCAvIGNvbnRyb2xsZXIuZm9udFNpemUpKVxuICAgICAgICAgICAgKyByZXN1bHRZIC0gbWFyZ2lucy50b3AgKyBTdXJ2ZXlIZWxwZXIuSFRNTF9UQUlMX1RFWFRfU0NBTEUgKiBjb250cm9sbGVyLmZvbnRTaXplO1xuICAgICAgICBjb25zdCBudW1iZXJPZlBhZ2VzOiBudW1iZXIgPSBjb250cm9sbGVyLmhlbHBlckRvYy5nZXROdW1iZXJPZlBhZ2VzKCk7XG4gICAgICAgIGNvbnRyb2xsZXIuaGVscGVyRG9jLmFkZFBhZ2UoKTtcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IG51bWJlck9mUGFnZXM7IGkrKykge1xuICAgICAgICAgICAgY29udHJvbGxlci5oZWxwZXJEb2MuZGVsZXRlUGFnZSgxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU3VydmV5SGVscGVyLmNyZWF0ZVJlY3QocG9pbnQsIG1hcmdpbnMud2lkdGgsIGhlaWdodCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBjcmVhdGVIVE1MRmxhdChwb2ludDogSVBvaW50LCBxdWVzdGlvbjogUXVlc3Rpb24sIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsIGh0bWw6IHN0cmluZyk6IFByb21pc2U8SVBkZkJyaWNrPiB7XG4gICAgICAgIGNvbnN0IG1hcmdpbnM6IHsgdG9wOiBudW1iZXIsIGJvdHRvbTogbnVtYmVyLCB3aWR0aDogbnVtYmVyIH0gPSB0aGlzLmdldEh0bWxNYXJnaW5zKGNvbnRyb2xsZXIsIHBvaW50KTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPElQZGZCcmljaz4oKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuaGVscGVyRG9jLmZyb21IVE1MKGh0bWwsIHBvaW50LnhMZWZ0LCBtYXJnaW5zLnRvcCwge1xuICAgICAgICAgICAgICAgIHBhZ2VzcGxpdDogdHJ1ZSwgd2lkdGg6IG1hcmdpbnMud2lkdGhcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXN1bHQ6IGFueSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlY3Q6IElSZWN0ID0gU3VydmV5SGVscGVyLmNyZWF0ZUhUTUxSZWN0KHBvaW50LCBjb250cm9sbGVyLCBtYXJnaW5zLCByZXN1bHQueSk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShuZXcgSFRNTEJyaWNrKHF1ZXN0aW9uLCBjb250cm9sbGVyLCByZWN0LCBodG1sKSk7XG4gICAgICAgICAgICB9LCBtYXJnaW5zKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgZ2VuZXJhdGVGb250RmFjZShmb250TmFtZTogc3RyaW5nLCBmb250QmFzZTY0OiBzdHJpbmcsIGZvbnRXZWlnaHQ6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gYEBmb250LWZhY2UgeyBmb250LWZhbWlseTogJHtmb250TmFtZX07IGAgK1xuICAgICAgICAgICAgYHNyYzogdXJsKGRhdGE6YXBwbGljYXRpb24vZm9udC13b2ZmO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LCR7Zm9udEJhc2U2NH0pIGZvcm1hdCgnd29mZicpOyBgICtcbiAgICAgICAgICAgIGBmb250LXdlaWdodDogJHtmb250V2VpZ2h0fTsgfWA7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgZ2VuZXJhdGVGb250RmFjZVdpdGhJdGFsaWNTdHlsZShmb250TmFtZTogc3RyaW5nLCBmb250QmFzZTY0OiBzdHJpbmcsIGZvbnRXZWlnaHQ6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gYEBmb250LWZhY2UgeyBmb250LWZhbWlseTogJHtmb250TmFtZX07IGAgK1xuICAgICAgICAgICAgYHNyYzogdXJsKGRhdGE6YXBwbGljYXRpb24vZm9udC13b2ZmO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LCR7Zm9udEJhc2U2NH0pIGZvcm1hdCgnd29mZicpOyBgICtcbiAgICAgICAgICAgIGBmb250LXdlaWdodDogJHtmb250V2VpZ2h0fTsgZm9udC1zdHlsZTogaXRhbGljfWA7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgaHRtbFRvWG1sKGh0bWw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGh0bWxEb2M6IERvY3VtZW50ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCcnKTtcbiAgICAgICAgaHRtbERvYy53cml0ZShodG1sLnJlcGxhY2UoL1xcIy9nLCAnJTIzJykpO1xuICAgICAgICBodG1sRG9jLmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3htbG5zJywgaHRtbERvYy5kb2N1bWVudEVsZW1lbnQubmFtZXNwYWNlVVJJKTtcbiAgICAgICAgaHRtbERvYy5ib2R5LnN0eWxlLm1hcmdpbiA9ICd1bnNldCc7XG4gICAgICAgIHJldHVybiAobmV3IFhNTFNlcmlhbGl6ZXIoKSkuc2VyaWFsaXplVG9TdHJpbmcoaHRtbERvYy5ib2R5KS5yZXBsYWNlKC8lMjMvZywgJyMnKTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVTdmdDb250ZW50KGh0bWw6IHN0cmluZywgd2lkdGg6IG51bWJlciwgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcikge1xuICAgICAgICBjb25zdCBzdHlsZTogSFRNTFN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgIHN0eWxlLmlubmVySFRNTCA9ICcuX19zdXJ2ZXlwZGZfaHRtbCBwIHsgbWFyZ2luOiB1bnNldDsgbGluZS1oZWlnaHQ6IDIycHg7IH0gYm9keSB7IG1hcmdpbjogdW5zZXQ7IH0nO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICAgICAgY29uc3QgZGl2OiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaXYuY2xhc3NOYW1lID0gJ19fc3VydmV5cGRmX2h0bWwnO1xuICAgICAgICBkaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGRpdi5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgICAgIGRpdi5zdHlsZS50b3AgPSAnLTEwMDAwcHgnO1xuICAgICAgICBkaXYuc3R5bGUubGVmdCA9ICctMTAwMDBweCc7XG4gICAgICAgIGRpdi5zdHlsZS53aWR0aCA9ICh3aWR0aCAvIDcyLjAgKiA5Ni4wKSArICdweCc7XG4gICAgICAgIGRpdi5zdHlsZS5ib3hTaXppbmcgPSAnaW5pdGlhbCc7XG4gICAgICAgIGRpdi5zdHlsZS5jb2xvciA9ICdpbml0aWFsJztcbiAgICAgICAgZGl2LnN0eWxlLmZvbnRGYW1pbHkgPSAnaW5pdGlhbCc7XG4gICAgICAgIGRpdi5zdHlsZS5mb250ID0gJ2luaXRpYWwnO1xuICAgICAgICBkaXYuc3R5bGUubGluZUhlaWdodCA9ICdpbml0aWFsJztcbiAgICAgICAgZGl2Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgaHRtbCk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgY29uc3QgZGl2V2lkdGg6IG51bWJlciA9IGRpdi5vZmZzZXRXaWR0aDtcbiAgICAgICAgY29uc3QgZGl2SGVpZ2h0OiBudW1iZXIgPSBkaXYub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBkaXYucmVtb3ZlKCk7XG4gICAgICAgIHN0eWxlLnJlbW92ZSgpO1xuICAgICAgICBsZXQgZGVmczogc3RyaW5nID0gJyc7XG4gICAgICAgIGlmIChjb250cm9sbGVyLnVzZUN1c3RvbUZvbnRJbkh0bWwpIHtcbiAgICAgICAgICAgIGRlZnMgPSBgPGRlZnM+PHN0eWxlPiR7dGhpcy5nZW5lcmF0ZUZvbnRGYWNlKGNvbnRyb2xsZXIuZm9udE5hbWUsIGNvbnRyb2xsZXIuYmFzZTY0Tm9ybWFsLCAnbm9ybWFsJyl9YCArXG4gICAgICAgICAgICAgICAgYCAke3RoaXMuZ2VuZXJhdGVGb250RmFjZShjb250cm9sbGVyLmZvbnROYW1lLCBjb250cm9sbGVyLmJhc2U2NEJvbGQsICdib2xkJyl9PC9zdHlsZT48L2RlZnM+YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKERvY0NvbnRyb2xsZXIuY3VzdG9tRm9udHMpLmZvckVhY2goZm9udE5hbWUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvbnQgPSBEb2NDb250cm9sbGVyLmN1c3RvbUZvbnRzW2ZvbnROYW1lXTtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhmb250KS5mb3JFYWNoKChmb250U3R5bGU6ICdub3JtYWwnIHwgJ2JvbGQnIHwgJ2l0YWxpYycgfCAnYm9sZGl0YWxpYycpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvbnRTdHlsZSA9PT0gJ25vcm1hbCcgfHwgZm9udFN0eWxlID09PSAnYm9sZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZnMgKz0gYCR7dGhpcy5nZW5lcmF0ZUZvbnRGYWNlKGZvbnROYW1lLCBmb250W2ZvbnRTdHlsZV0sIGZvbnRTdHlsZSl9YDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZnMgKz0gYCR7dGhpcy5nZW5lcmF0ZUZvbnRGYWNlV2l0aEl0YWxpY1N0eWxlKGZvbnROYW1lLCBmb250W2ZvbnRTdHlsZV0sIGZvbnRTdHlsZSA9PT0gJ2l0YWxpYycgPyAnbm9ybWFsJyA6ICdib2xkJyl9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRlZnMgPSAnPGRlZnM+PHN0eWxlPicgKyBkZWZzICsgJzwvc3R5bGU+PC9kZWZzPic7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdmc6IHN0cmluZyA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIiR7ZGl2V2lkdGh9cHhcIiBoZWlnaHQ9XCIke2RpdkhlaWdodH1weFwiPmAgKyBkZWZzICtcbiAgICAgICAgICAgICc8c3R5bGU+Ll9fc3VydmV5cGRmX2h0bWwgcCB7IG1hcmdpbjogdW5zZXQ7IGxpbmUtaGVpZ2h0OiAyMnB4OyB9PC9zdHlsZT4nICtcbiAgICAgICAgICAgIGA8Zm9yZWlnbk9iamVjdCB3aWR0aD1cIiR7ZGl2V2lkdGh9cHhcIiBoZWlnaHQ9XCIke2RpdkhlaWdodH1weFwiPmAgK1xuICAgICAgICAgICAgdGhpcy5odG1sVG9YbWwoaHRtbCkgKyAnPC9mb3JlaWduT2JqZWN0Pjwvc3ZnPic7XG4gICAgICAgIHJldHVybiB7IHN2ZywgZGl2V2lkdGgsIGRpdkhlaWdodCB9O1xuICAgIH1cbiAgICBwcml2YXRlIHN0YXRpYyBzZXRDYW52YXMoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgZGl2V2lkdGg6IG51bWJlciwgZGl2SGVpZ2h0OiBudW1iZXIsIGltZzogSFRNTEltYWdlRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBjYW52YXMud2lkdGggPSBkaXZXaWR0aCAqIFN1cnZleUhlbHBlci5IVE1MX1RPX0lNQUdFX1FVQUxJVFk7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBkaXZIZWlnaHQgKiBTdXJ2ZXlIZWxwZXIuSFRNTF9UT19JTUFHRV9RVUFMSVRZO1xuICAgICAgICBjb25zdCBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY29udGV4dC5zY2FsZShTdXJ2ZXlIZWxwZXIuSFRNTF9UT19JTUFHRV9RVUFMSVRZLCBTdXJ2ZXlIZWxwZXIuSFRNTF9UT19JTUFHRV9RVUFMSVRZKTtcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBTdXJ2ZXlIZWxwZXIuQkFDS0dST1VORF9DT0xPUjtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBkaXZXaWR0aCwgZGl2SGVpZ2h0KTtcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBodG1sVG9JbWFnZShodG1sOiBzdHJpbmcsIHdpZHRoOiBudW1iZXIsIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIpOiBQcm9taXNlPHsgdXJsOiBzdHJpbmcsIGFzcGVjdDogbnVtYmVyIH0+IHtcbiAgICAgICAgY29uc3QgeyBzdmcsIGRpdldpZHRoLCBkaXZIZWlnaHQgfSA9IFN1cnZleUhlbHBlci5jcmVhdGVTdmdDb250ZW50KGh0bWwsIHdpZHRoLCBjb250cm9sbGVyKTtcbiAgICAgICAgY29uc3QgZGF0YTogc3RyaW5nID0gJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsJyArIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN2ZykpKTtcbiAgICAgICAgY29uc3QgaW1nOiBIVE1MSW1hZ2VFbGVtZW50ID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltZy5jcm9zc09yaWdpbj0nYW5vbnltb3VzJztcbiAgICAgICAgaW1nLnNyYyA9IGRhdGE7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICAgICAgU3VydmV5SGVscGVyLnNldENhbnZhcyhjYW52YXMsIGRpdldpZHRoLCBkaXZIZWlnaHQsIGltZyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdXJsOiBzdHJpbmcgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9qcGVnJywgU3VydmV5SGVscGVyLkhUTUxfVE9fSU1BR0VfUVVBTElUWSk7XG4gICAgICAgICAgICAgICAgY2FudmFzLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoeyB1cmw6IHVybCwgYXNwZWN0OiBkaXZXaWR0aCAvIGRpdkhlaWdodCB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpbWcub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHsgdXJsOiAnZGF0YTosJywgYXNwZWN0OiB3aWR0aCAvIHRoaXMuRVBTSUxPTiB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGNyZWF0ZUJvbGRUZXh0RmxhdChwb2ludDogSVBvaW50LCBxdWVzdGlvbjogUXVlc3Rpb24sXG4gICAgICAgIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsIHRleHQ6IHN0cmluZyB8IExvY2FsaXphYmxlU3RyaW5nKTogUHJvbWlzZTxJUGRmQnJpY2s+IHtcbiAgICAgICAgY29udHJvbGxlci5mb250U3R5bGUgPSAnYm9sZCc7XG4gICAgICAgIGNvbnN0IGNvbXBvc2l0ZTogSVBkZkJyaWNrID0gYXdhaXQgdGhpcy5jcmVhdGVUZXh0RmxhdChcbiAgICAgICAgICAgIHBvaW50LCBxdWVzdGlvbiwgY29udHJvbGxlciwgdGV4dCwgVGV4dEJvbGRCcmljayk7XG4gICAgICAgIGNvbnRyb2xsZXIuZm9udFN0eWxlID0gJ25vcm1hbCc7XG4gICAgICAgIHJldHVybiBjb21wb3NpdGU7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgY3JlYXRlVGl0bGVGbGF0KHBvaW50OiBJUG9pbnQsIHF1ZXN0aW9uOiBRdWVzdGlvbiwgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcik6IFByb21pc2U8SVBkZkJyaWNrPiB7XG4gICAgICAgIGNvbnN0IGNvbXBvc2l0ZTogQ29tcG9zaXRlQnJpY2sgPSBuZXcgQ29tcG9zaXRlQnJpY2soKTtcbiAgICAgICAgbGV0IGN1cnJQb2ludDogSVBvaW50ID0gdGhpcy5jbG9uZShwb2ludCk7XG4gICAgICAgIGNvbnN0IG9sZEZvbnRTaXplOiBudW1iZXIgPSBjb250cm9sbGVyLmZvbnRTaXplO1xuICAgICAgICBjb250cm9sbGVyLmZvbnRTaXplICo9IHRoaXMuVElUTEVfRk9OVF9TQ0FMRTtcbiAgICAgICAgaWYgKHF1ZXN0aW9uLm5vKSB7XG4gICAgICAgICAgICBjb25zdCBub1RleHQ6IHN0cmluZyA9IHF1ZXN0aW9uLm5vICsgJyAnO1xuICAgICAgICAgICAgbGV0IG5vRmxhdDogSVBkZkJyaWNrO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGFzSHRtbChxdWVzdGlvbi5sb2NUaXRsZSkpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmZvbnRTdHlsZSA9ICdib2xkJztcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLnB1c2hNYXJnaW5zKCk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5tYXJnaW5zLnJpZ2h0ID0gY29udHJvbGxlci5wYXBlcldpZHRoIC1cbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5tYXJnaW5zLmxlZnQgLSBjb250cm9sbGVyLm1lYXN1cmVUZXh0KG5vVGV4dCwgJ2JvbGQnKS53aWR0aDtcbiAgICAgICAgICAgICAgICBub0ZsYXQgPSBhd2FpdCB0aGlzLmNyZWF0ZUhUTUxGbGF0KGN1cnJQb2ludCwgcXVlc3Rpb24sIGNvbnRyb2xsZXIsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlSHRtbENvbnRhaW5lckJsb2NrKG5vVGV4dCwgY29udHJvbGxlciwgJ3N0YW5kYXJkJykpO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIucG9wTWFyZ2lucygpO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZm9udFN0eWxlID0gJ25vcm1hbCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBub0ZsYXQgPSBhd2FpdCB0aGlzLmNyZWF0ZUJvbGRUZXh0RmxhdChjdXJyUG9pbnQsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uLCBjb250cm9sbGVyLCBub1RleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcG9zaXRlLmFkZEJyaWNrKG5vRmxhdCk7XG4gICAgICAgICAgICBjdXJyUG9pbnQueExlZnQgPSBub0ZsYXQueFJpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnRyb2xsZXIucHVzaE1hcmdpbnMoKTtcbiAgICAgICAgY29udHJvbGxlci5tYXJnaW5zLmxlZnQgPSBjdXJyUG9pbnQueExlZnQ7XG4gICAgICAgIGNvbnN0IHRleHRGbGF0OiBDb21wb3NpdGVCcmljayA9IDxDb21wb3NpdGVCcmljaz5hd2FpdCB0aGlzLmNyZWF0ZUJvbGRUZXh0RmxhdChcbiAgICAgICAgICAgIGN1cnJQb2ludCwgcXVlc3Rpb24sIGNvbnRyb2xsZXIsIHF1ZXN0aW9uLmxvY1RpdGxlKTtcbiAgICAgICAgY29tcG9zaXRlLmFkZEJyaWNrKHRleHRGbGF0KTtcbiAgICAgICAgY29udHJvbGxlci5wb3BNYXJnaW5zKCk7XG4gICAgICAgIGlmIChxdWVzdGlvbi5pc1JlcXVpcmVkKSB7XG4gICAgICAgICAgICBjb25zdCByZXF1aXJlZFRleHQ6IHN0cmluZyA9IHF1ZXN0aW9uLnJlcXVpcmVkVGV4dDtcbiAgICAgICAgICAgIGlmICh0aGlzLmhhc0h0bWwocXVlc3Rpb24ubG9jVGl0bGUpKSB7XG4gICAgICAgICAgICAgICAgY3VyclBvaW50ID0gdGhpcy5jcmVhdGVQb2ludCh0ZXh0RmxhdC51bmZvbGQoKVswXSwgZmFsc2UsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmZvbnRTdHlsZSA9ICdib2xkJztcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLnB1c2hNYXJnaW5zKCk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5tYXJnaW5zLnJpZ2h0ID0gY29udHJvbGxlci5wYXBlcldpZHRoIC1cbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5tYXJnaW5zLmxlZnQgLSBjb250cm9sbGVyLm1lYXN1cmVUZXh0KHJlcXVpcmVkVGV4dCwgJ2JvbGQnKS53aWR0aDtcbiAgICAgICAgICAgICAgICBjb21wb3NpdGUuYWRkQnJpY2soYXdhaXQgdGhpcy5jcmVhdGVIVE1MRmxhdChjdXJyUG9pbnQsIHF1ZXN0aW9uLCBjb250cm9sbGVyLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUh0bWxDb250YWluZXJCbG9jayhyZXF1aXJlZFRleHQsIGNvbnRyb2xsZXIsICdzdGFuZGFyZCcpKSk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5wb3BNYXJnaW5zKCk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5mb250U3R5bGUgPSAnbm9ybWFsJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1cnJQb2ludCA9IHRoaXMuY3JlYXRlUG9pbnQodGV4dEZsYXQudW5mb2xkKCkucG9wKCksIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjb21wb3NpdGUuYWRkQnJpY2soYXdhaXQgdGhpcy5jcmVhdGVCb2xkVGV4dEZsYXQoY3VyclBvaW50LFxuICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbiwgY29udHJvbGxlciwgcmVxdWlyZWRUZXh0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29udHJvbGxlci5mb250U2l6ZSA9IG9sZEZvbnRTaXplO1xuICAgICAgICByZXR1cm4gY29tcG9zaXRlO1xuICAgIH1cbiAgICBwcml2YXRlIHN0YXRpYyBhc3luYyBjcmVhdGVUaXRsZVN1cnZleVBhbmVsRmxhdChwb2ludDogSVBvaW50LCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLFxuICAgICAgICB0ZXh0OiBzdHJpbmcgfCBMb2NhbGl6YWJsZVN0cmluZywgZm9udFNpemVTY2FsZTogbnVtYmVyKTogUHJvbWlzZTxJUGRmQnJpY2s+IHtcbiAgICAgICAgY29uc3Qgb2xkRm9udFNpemU6IG51bWJlciA9IGNvbnRyb2xsZXIuZm9udFNpemU7XG4gICAgICAgIGNvbnRyb2xsZXIuZm9udFNpemUgPSBvbGRGb250U2l6ZSAqIGZvbnRTaXplU2NhbGU7XG4gICAgICAgIGNvbnRyb2xsZXIuZm9udFN0eWxlID0gJ2JvbGQnO1xuICAgICAgICBjb25zdCB0aXRsZUZsYXQ6IElQZGZCcmljayA9IGF3YWl0IHRoaXMuY3JlYXRlVGV4dEZsYXQocG9pbnQsIG51bGwsIGNvbnRyb2xsZXIsIHRleHQsIFRpdGxlUGFuZWxCcmljayk7XG4gICAgICAgIGNvbnRyb2xsZXIuZm9udFN0eWxlID0gJ25vcm1hbCc7XG4gICAgICAgIGNvbnRyb2xsZXIuZm9udFNpemUgPSBvbGRGb250U2l6ZTtcbiAgICAgICAgcmV0dXJuIHRpdGxlRmxhdDtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBjcmVhdGVUaXRsZVN1cnZleUZsYXQocG9pbnQ6IElQb2ludCwgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcixcbiAgICAgICAgdGV4dDogc3RyaW5nIHwgTG9jYWxpemFibGVTdHJpbmcpOiBQcm9taXNlPElQZGZCcmljaz4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGVUaXRsZVN1cnZleVBhbmVsRmxhdChwb2ludCwgY29udHJvbGxlciwgdGV4dCwgdGhpcy5USVRMRV9TVVJWRVlfRk9OVF9TSVpFX1NDQUxFKTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBjcmVhdGVUaXRsZVBhbmVsRmxhdChwb2ludDogSVBvaW50LCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLFxuICAgICAgICB0ZXh0OiBzdHJpbmcgfCBMb2NhbGl6YWJsZVN0cmluZywgaXNQYWdlOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPElQZGZCcmljaz4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGVUaXRsZVN1cnZleVBhbmVsRmxhdChwb2ludCwgY29udHJvbGxlciwgdGV4dCxcbiAgICAgICAgICAgIGlzUGFnZSA/IHRoaXMuVElUTEVfUEFHRV9GT05UX1NJWkVfU0NBTEUgOiB0aGlzLlRJVExFX1BBTkVMX0ZPTlRfU0laRV9TQ0FMRSk7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgY3JlYXRlRGVzY0ZsYXQocG9pbnQ6IElQb2ludCwgcXVlc3Rpb246IElRdWVzdGlvbixcbiAgICAgICAgY29udHJvbGxlcjogRG9jQ29udHJvbGxlciwgdGV4dDogc3RyaW5nIHwgTG9jYWxpemFibGVTdHJpbmcpOiBQcm9taXNlPElQZGZCcmljaz4ge1xuICAgICAgICBjb25zdCBvbGRGb250U2l6ZTogbnVtYmVyID0gY29udHJvbGxlci5mb250U2l6ZTtcbiAgICAgICAgY29udHJvbGxlci5mb250U2l6ZSA9IG9sZEZvbnRTaXplICogdGhpcy5ERVNDUklQVElPTl9GT05UX1NJWkVfU0NBTEU7XG4gICAgICAgIGNvbnN0IGNvbXBvc2l0ZTogSVBkZkJyaWNrID0gYXdhaXQgdGhpcy5jcmVhdGVUZXh0RmxhdChcbiAgICAgICAgICAgIHBvaW50LCBxdWVzdGlvbiwgY29udHJvbGxlciwgdGV4dCwgRGVzY3JpcHRpb25Ccmljayk7XG4gICAgICAgIGNvbnRyb2xsZXIuZm9udFNpemUgPSBvbGRGb250U2l6ZTtcbiAgICAgICAgcmV0dXJuIGNvbXBvc2l0ZTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBnZXRSZWFkb25seVJlbmRlckFzKHF1ZXN0aW9uOiBRdWVzdGlvbiwgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcik6ICdhdXRvJyB8ICd0ZXh0JyB8ICdhY3JvZm9ybScge1xuICAgICAgICByZXR1cm4gKDxhbnk+cXVlc3Rpb24pLnJlYWRvbmx5UmVuZGVyQXMgPT09ICdhdXRvJyA/IGNvbnRyb2xsZXIucmVhZG9ubHlSZW5kZXJBcyA6ICg8YW55PnF1ZXN0aW9uKS5yZWFkb25seVJlbmRlckFzO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGNyZWF0ZUNvbW1lbnRGbGF0KHBvaW50OiBJUG9pbnQsIHF1ZXN0aW9uOiBRdWVzdGlvbixcbiAgICAgICAgY29udHJvbGxlcjogRG9jQ29udHJvbGxlciwgaXNRdWVzdGlvbjogYm9vbGVhbiwgb3B0aW9uczogeyByb3dzPzogbnVtYmVyLCBpbmRleD86IG51bWJlciwgdmFsdWU/OiBzdHJpbmcsIHJlYWRPbmx5PzogYm9vbGVhbiB9ID0ge30pOiBQcm9taXNlPElQZGZCcmljaz4ge1xuICAgICAgICBjb25zdCByZWN0OiBJUmVjdCA9IHRoaXMuY3JlYXRlVGV4dEZpZWxkUmVjdChwb2ludCwgY29udHJvbGxlciwgb3B0aW9ucy5yb3dzID8/IDEpO1xuICAgICAgICBsZXQgdGV4dEZsYXQ7XG4gICAgICAgIGlmIChvcHRpb25zLnJlYWRPbmx5ID8/IFN1cnZleUhlbHBlci5zaG91bGRSZW5kZXJSZWFkT25seShxdWVzdGlvbiwgY29udHJvbGxlcikpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlbmRlcmVkVmFsdWUgPSBvcHRpb25zLnZhbHVlID8/IHRoaXMuZ2V0UXVlc3Rpb25PckNvbW1lbnRWYWx1ZShxdWVzdGlvbiwgaXNRdWVzdGlvbik7XG4gICAgICAgICAgICB0ZXh0RmxhdCA9IGF3YWl0IHRoaXMuY3JlYXRlUmVhZE9ubHlUZXh0RmllbGRUZXh0RmxhdChcbiAgICAgICAgICAgICAgICBwb2ludCwgY29udHJvbGxlciwgcXVlc3Rpb24sIHJlbmRlcmVkVmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgcGFkZGluZzogbnVtYmVyID0gY29udHJvbGxlci51bml0SGVpZ2h0ICogdGhpcy5WQUxVRV9SRUFET05MWV9QQURESU5HX1NDQUxFO1xuICAgICAgICAgICAgaWYgKHRleHRGbGF0LnlCb3QgKyBwYWRkaW5nID4gcmVjdC55Qm90KSByZWN0LnlCb3QgPSB0ZXh0RmxhdC55Qm90ICsgcGFkZGluZztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21tZW50ID0gbmV3IENvbW1lbnRCcmljayhxdWVzdGlvbiwgY29udHJvbGxlciwgcmVjdCwgaXNRdWVzdGlvbiwgb3B0aW9ucy5pbmRleCk7XG4gICAgICAgIGlmKG9wdGlvbnMucmVhZE9ubHkgIT09IG51bGwgJiYgb3B0aW9ucy5yZWFkT25seSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb21tZW50LmlzUmVhZE9ubHkgPSBvcHRpb25zLnJlYWRPbmx5O1xuICAgICAgICB9XG4gICAgICAgIGlmKHRleHRGbGF0KSB7XG4gICAgICAgICAgICBjb21tZW50LnRleHRCcmljayA9IHRleHRGbGF0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb21tZW50O1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGdldFF1ZXN0aW9uT3JDb21tZW50VmFsdWUocXVlc3Rpb246IFF1ZXN0aW9uLCBpc1F1ZXN0aW9uOiBib29sZWFuID0gdHJ1ZSk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBpc1F1ZXN0aW9uID8gKHF1ZXN0aW9uLnZhbHVlICE9PSB1bmRlZmluZWQgJiYgcXVlc3Rpb24udmFsdWUgIT09IG51bGwgPyBxdWVzdGlvbi52YWx1ZSA6ICcnKSA6XG4gICAgICAgICAgICAocXVlc3Rpb24uY29tbWVudCAhPT0gdW5kZWZpbmVkICYmIHF1ZXN0aW9uLmNvbW1lbnQgIT09IG51bGwgPyBxdWVzdGlvbi5jb21tZW50IDogJycpO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGdldFF1ZXN0aW9uT3JDb21tZW50RGlzcGxheVZhbHVlKHF1ZXN0aW9uOiBRdWVzdGlvbiwgaXNRdWVzdGlvbjogYm9vbGVhbiA9IHRydWUpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gaXNRdWVzdGlvbiA/IHF1ZXN0aW9uLmRpc3BsYXlWYWx1ZSA6IFN1cnZleUhlbHBlci5nZXRRdWVzdGlvbk9yQ29tbWVudFZhbHVlKHF1ZXN0aW9uLCBpc1F1ZXN0aW9uKTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBpbkJyb3dzZXIgPSB0eXBlb2YgSW1hZ2UgPT09ICdmdW5jdGlvbic7XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCBoYXNEb2N1bWVudCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRJbWFnZUJhc2U2NChpbWFnZUxpbms6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlLmNyb3NzT3JpZ2luPSdhbm9ueW1vdXMnO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaW1hZ2UubmF0dXJhbEhlaWdodDtcbiAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSBpbWFnZS5uYXR1cmFsV2lkdGg7XG4gICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YVVybCA9IGNhbnZhcy50b0RhdGFVUkwoKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGFVcmwpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGltYWdlLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgnJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaW1hZ2Uuc3JjID0gaW1hZ2VMaW5rO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBzaG91bGRDb252ZXJ0SW1hZ2VUb1BuZyA9IHRydWU7XG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRJbWFnZUxpbmsoY29udHJvbGxlcjogRG9jQ29udHJvbGxlciwgaW1hZ2VPcHRpb25zOiB7IGxpbms6IHN0cmluZywgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIG9iamVjdEZpdD86IHN0cmluZyB9LCBhcHBseUltYWdlRml0OiBib29sZWFuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgcHRUb1B4OiBudW1iZXIgPSA5Ni4wIC8gNzIuMDtcbiAgICAgICAgbGV0IHVybCA9IHRoaXMuc2hvdWxkQ29udmVydEltYWdlVG9QbmcgPyBhd2FpdCBTdXJ2ZXlIZWxwZXIuZ2V0SW1hZ2VCYXNlNjQoaW1hZ2VPcHRpb25zLmxpbmspIDogaW1hZ2VPcHRpb25zLmxpbms7XG4gICAgICAgIGlmKHR5cGVvZiBYTUxTZXJpYWxpemVyID09PSAnZnVuY3Rpb24nICYmIGFwcGx5SW1hZ2VGaXQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbnZhc0h0bWw6IHN0cmluZyA9XG4gICAgICAgICAgICAgICBgPGRpdiBzdHlsZT0nb3ZlcmZsb3c6IGhpZGRlbjsgd2lkdGg6ICR7aW1hZ2VPcHRpb25zLndpZHRoICogcHRUb1B4fXB4OyBoZWlnaHQ6ICR7aW1hZ2VPcHRpb25zLmhlaWdodCAqIHB0VG9QeH1weDsnPlxuICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPScke3VybH0nIHN0eWxlPSdvYmplY3QtZml0OiAke2ltYWdlT3B0aW9ucy5vYmplY3RGaXR9OyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOycvPlxuICAgICAgICAgICAgICAgPC9kaXY+YDtcbiAgICAgICAgICAgIHVybCA9IChhd2FpdCBTdXJ2ZXlIZWxwZXIuaHRtbFRvSW1hZ2UoY2FudmFzSHRtbCwgaW1hZ2VPcHRpb25zLndpZHRoLCBjb250cm9sbGVyKSkudXJsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgY3JlYXRlSW1hZ2VGbGF0KHBvaW50OiBJUG9pbnQsIHF1ZXN0aW9uOiBhbnksXG4gICAgICAgIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsIGltYWdlT3B0aW9uczogeyBsaW5rOiBzdHJpbmcsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBvYmplY3RGaXQ/OiBzdHJpbmcgfSwgYXBwbHlJbWFnZUZpdD86IGJvb2xlYW4pOiBQcm9taXNlPElQZGZCcmljaz4ge1xuICAgICAgICBpZiAoU3VydmV5SGVscGVyLmluQnJvd3Nlcikge1xuICAgICAgICAgICAgaW1hZ2VPcHRpb25zLm9iamVjdEZpdCA9ICEhcXVlc3Rpb24gJiYgISFxdWVzdGlvbi5pbWFnZUZpdCA/IHF1ZXN0aW9uLmltYWdlRml0IDogKGltYWdlT3B0aW9ucy5vYmplY3RGaXQgfHwgJ2NvbnRhaW4nKTtcbiAgICAgICAgICAgIGlmIChhcHBseUltYWdlRml0ID8/IGNvbnRyb2xsZXIuYXBwbHlJbWFnZUZpdCkge1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZU9wdGlvbnMud2lkdGggPiBjb250cm9sbGVyLnBhcGVyV2lkdGggLSBjb250cm9sbGVyLm1hcmdpbnMubGVmdCAtIGNvbnRyb2xsZXIubWFyZ2lucy5yaWdodCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdXaWR0aDogbnVtYmVyID0gY29udHJvbGxlci5wYXBlcldpZHRoIC0gY29udHJvbGxlci5tYXJnaW5zLmxlZnQgLSBjb250cm9sbGVyLm1hcmdpbnMucmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlT3B0aW9ucy5oZWlnaHQgKj0gbmV3V2lkdGggLyBpbWFnZU9wdGlvbnMud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlT3B0aW9ucy53aWR0aCA9IG5ld1dpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGh0bWw6IHN0cmluZyA9IGA8aW1nIHNyYz0nJHthd2FpdCBTdXJ2ZXlIZWxwZXIuZ2V0SW1hZ2VMaW5rKGNvbnRyb2xsZXIsIGltYWdlT3B0aW9ucywgYXBwbHlJbWFnZUZpdCA/PyBjb250cm9sbGVyLmFwcGx5SW1hZ2VGaXQpfScgd2lkdGg9JyR7aW1hZ2VPcHRpb25zLndpZHRofScgaGVpZ2h0PScke2ltYWdlT3B0aW9ucy5oZWlnaHR9Jy8+YDtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSFRNTEJyaWNrKHF1ZXN0aW9uLCBjb250cm9sbGVyLCB0aGlzLmNyZWF0ZVJlY3QocG9pbnQsIGltYWdlT3B0aW9ucy53aWR0aCwgaW1hZ2VPcHRpb25zLmhlaWdodCksIGh0bWwsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgSW1hZ2VCcmljayhxdWVzdGlvbiwgY29udHJvbGxlciwgaW1hZ2VPcHRpb25zLmxpbmssIHBvaW50LCBpbWFnZU9wdGlvbnMud2lkdGgsIGltYWdlT3B0aW9ucy5oZWlnaHQpO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGNhblByZXZpZXdJbWFnZShxdWVzdGlvbjogUXVlc3Rpb25GaWxlTW9kZWwsIGl0ZW06IHsgbmFtZTogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyB9LCB1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gcXVlc3Rpb24uY2FuUHJldmlld0ltYWdlKGl0ZW0pO1xuICAgICAgICAvLyAgJiYgIGF3YWl0IHRoaXMuZ2V0SW1hZ2VTaXplKHVybCkgIT09IG51bGw7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0SW1hZ2VTaXplKHVybDogc3RyaW5nKTogUHJvbWlzZTxJU2l6ZT4ge1xuICAgICAgICBpZiAoIVN1cnZleUhlbHBlci5pbkJyb3dzZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHsgd2lkdGg6IHVuZGVmaW5lZCwgaGVpZ2h0OiB1bmRlZmluZWQgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlOiBhbnkgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGltYWdlLnNyYyA9IHVybDtcbiAgICAgICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IHdpZHRoOiBpbWFnZS53aWR0aCwgaGVpZ2h0OiBpbWFnZS5oZWlnaHQgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaW1hZ2Uub25lcnJvciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmUobnVsbCk7IH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZVJvd2xpbmVGbGF0KHBvaW50OiBJUG9pbnQsIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsXG4gICAgICAgIHdpZHRoPzogbnVtYmVyLCBjb2xvcj86IHN0cmluZyk6IElQZGZCcmljayB7XG4gICAgICAgIGxldCB4UmlnaHQ6IG51bWJlciA9IHR5cGVvZiB3aWR0aCA9PT0gJ3VuZGVmaW5lZCcgP1xuICAgICAgICAgICAgY29udHJvbGxlci5wYXBlcldpZHRoIC0gY29udHJvbGxlci5tYXJnaW5zLnJpZ2h0IDpcbiAgICAgICAgICAgIHBvaW50LnhMZWZ0ICsgd2lkdGg7XG4gICAgICAgIHhSaWdodCA9IHhSaWdodCA+IHBvaW50LnhMZWZ0ID8geFJpZ2h0IDogcG9pbnQueExlZnQgKyB0aGlzLkVQU0lMT047XG4gICAgICAgIHJldHVybiBuZXcgUm93bGluZUJyaWNrKGNvbnRyb2xsZXIsIHtcbiAgICAgICAgICAgIHhMZWZ0OiBwb2ludC54TGVmdCxcbiAgICAgICAgICAgIHhSaWdodDogeFJpZ2h0LFxuICAgICAgICAgICAgeVRvcDogcG9pbnQueVRvcCArIHRoaXMuRVBTSUxPTixcbiAgICAgICAgICAgIHlCb3Q6IHBvaW50LnlUb3AgKyB0aGlzLkVQU0lMT05cbiAgICAgICAgfSwgdHlwZW9mIGNvbG9yID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiBjb2xvcik7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgY3JlYXRlTGlua0ZsYXQocG9pbnQ6IElQb2ludCwgcXVlc3Rpb246IFF1ZXN0aW9uLFxuICAgICAgICBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLCB0ZXh0OiBzdHJpbmcsIGxpbms6IHN0cmluZyk6IFByb21pc2U8SVBkZkJyaWNrPiB7XG4gICAgICAgIGNvbnN0IGNvbXBvc2l0ZVRleHQ6IENvbXBvc2l0ZUJyaWNrID0gPENvbXBvc2l0ZUJyaWNrPmF3YWl0IHRoaXMuXG4gICAgICAgICAgICBjcmVhdGVUZXh0RmxhdChwb2ludCwgcXVlc3Rpb24sIGNvbnRyb2xsZXIsIHRleHQsIFRleHRCcmljayk7XG4gICAgICAgIGNvbnN0IGNvbXBvc2l0ZUxpbms6IENvbXBvc2l0ZUJyaWNrID0gbmV3IENvbXBvc2l0ZUJyaWNrKCk7XG4gICAgICAgIGNvbXBvc2l0ZVRleHQudW5mb2xkKCkuZm9yRWFjaCgodGV4dDogVGV4dEJyaWNrKSA9PiB7XG4gICAgICAgICAgICBjb21wb3NpdGVMaW5rLmFkZEJyaWNrKG5ldyBMaW5rQnJpY2sodGV4dCwgbGluaykpO1xuICAgICAgICAgICAgY29uc3QgbGluZVBvaW50OiBJUG9pbnQgPSB0aGlzLmNyZWF0ZVBvaW50KGNvbXBvc2l0ZUxpbmspO1xuICAgICAgICAgICAgY29tcG9zaXRlTGluay5hZGRCcmljayh0aGlzLmNyZWF0ZVJvd2xpbmVGbGF0KGxpbmVQb2ludCxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLCBjb21wb3NpdGVMaW5rLndpZHRoLCBMaW5rQnJpY2suQ09MT1IpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjb21wb3NpdGVMaW5rO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZUFjcm9mb3JtUmVjdChyZWN0OiBJUmVjdCk6IG51bWJlcltdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHJlY3QueExlZnQsXG4gICAgICAgICAgICByZWN0LnlUb3AsXG4gICAgICAgICAgICByZWN0LnhSaWdodCAtIHJlY3QueExlZnQsXG4gICAgICAgICAgICByZWN0LnlCb3QgLSByZWN0LnlUb3BcbiAgICAgICAgXTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVUZXh0RmllbGRSZWN0KHBvaW50OiBJUG9pbnQsIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsIGxpbmVzOiBudW1iZXIgPSAxKTogSVJlY3Qge1xuICAgICAgICBsZXQgd2lkdGg6IG51bWJlciA9IGNvbnRyb2xsZXIucGFwZXJXaWR0aCAtIHBvaW50LnhMZWZ0IC0gY29udHJvbGxlci5tYXJnaW5zLnJpZ2h0O1xuICAgICAgICB3aWR0aCA9IE1hdGgubWF4KHdpZHRoLCBjb250cm9sbGVyLnVuaXRXaWR0aCk7XG4gICAgICAgIGNvbnN0IGhlaWdodDogbnVtYmVyID0gY29udHJvbGxlci51bml0SGVpZ2h0ICogbGluZXM7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVJlY3QocG9pbnQsIHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGNyZWF0ZVJlYWRPbmx5VGV4dEZpZWxkVGV4dEZsYXQocG9pbnQ6IElQb2ludCxcbiAgICAgICAgY29udHJvbGxlcjogRG9jQ29udHJvbGxlciwgcXVlc3Rpb246IFF1ZXN0aW9uLCB2YWx1ZTogc3RyaW5nKTogUHJvbWlzZTxJUGRmQnJpY2s+IHtcbiAgICAgICAgY29uc3QgcGFkZGluZzogbnVtYmVyID0gY29udHJvbGxlci51bml0V2lkdGggKiB0aGlzLlZBTFVFX1JFQURPTkxZX1BBRERJTkdfU0NBTEU7XG4gICAgICAgIHBvaW50LnlUb3AgKz0gcGFkZGluZztcbiAgICAgICAgcG9pbnQueExlZnQgKz0gcGFkZGluZztcbiAgICAgICAgY29udHJvbGxlci5wdXNoTWFyZ2lucyhwb2ludC54TGVmdCwgY29udHJvbGxlci5tYXJnaW5zLnJpZ2h0ICsgcGFkZGluZyk7XG4gICAgICAgIGNvbnN0IHRleHRGbGF0OiBJUGRmQnJpY2sgPSBhd2FpdCB0aGlzLmNyZWF0ZVRleHRGbGF0KFxuICAgICAgICAgICAgcG9pbnQsIHF1ZXN0aW9uLCBjb250cm9sbGVyLCB2YWx1ZS50b1N0cmluZygpLCBUZXh0QnJpY2spO1xuICAgICAgICBjb250cm9sbGVyLnBvcE1hcmdpbnMoKTtcbiAgICAgICAgcmV0dXJuIHRleHRGbGF0O1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIHJlbmRlckZsYXRCb3JkZXJzKGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsIGJvcmRlck9wdGlvbnM6IElCb3JkZXJEZXNjcmlwdGlvbik6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuRk9STV9CT1JERVJfVklTSUJMRSkgcmV0dXJuO1xuICAgICAgICBib3JkZXJPcHRpb25zLnJvdW5kZWQgPSBib3JkZXJPcHRpb25zLnJvdW5kZWQgPz8gdHJ1ZTtcbiAgICAgICAgYm9yZGVyT3B0aW9ucy5vdXRzaWRlID0gYm9yZGVyT3B0aW9ucy5vdXRzaWRlID8/IGZhbHNlO1xuICAgICAgICBjb25zdCBtaW5TaWRlOiBudW1iZXIgPSBNYXRoLm1pbihib3JkZXJPcHRpb25zLndpZHRoLCBib3JkZXJPcHRpb25zLmhlaWdodCk7XG4gICAgICAgIGNvbnN0IGJvcmRlcldpZHRoID0gdGhpcy5nZXRCb3JkZXJXaWR0aChjb250cm9sbGVyKTtcbiAgICAgICAgY29uc3QgdmlzaWJsZVdpZHRoOiBudW1iZXIgPSBjb250cm9sbGVyLnVuaXRIZWlnaHQgKiB0aGlzLlZJU0lCTEVfQk9SREVSX1NDQUxFICogdGhpcy5CT1JERVJfU0NBTEU7XG4gICAgICAgIGNvbnN0IHZpc2libGVTY2FsZTogbnVtYmVyID0gYm9yZGVyT3B0aW9ucy5vdXRzaWRlID8gKG1pblNpZGUgKyBib3JkZXJXaWR0aCkgLyBtaW5TaWRlIC0gdmlzaWJsZVdpZHRoIC8gbWluU2lkZSA6IChtaW5TaWRlIC0gYm9yZGVyV2lkdGgpIC8gbWluU2lkZSArIHZpc2libGVXaWR0aCAvIG1pblNpZGU7XG4gICAgICAgIGNvbnN0IG9sZERyYXdDb2xvcjogc3RyaW5nID0gY29udHJvbGxlci5kb2MuZ2V0RHJhd0NvbG9yKCk7XG4gICAgICAgIGNvbnRyb2xsZXIuZG9jLnNldERyYXdDb2xvcihib3JkZXJPcHRpb25zLmZvcm1Cb3JkZXJDb2xvcik7XG4gICAgICAgIGNvbnRyb2xsZXIuZG9jLnNldExpbmVXaWR0aCh2aXNpYmxlV2lkdGgpO1xuICAgICAgICBjb25zdCBzY2FsZWRSZWN0ID0gdGhpcy5zY2FsZVJlY3QoYm9yZGVyT3B0aW9ucywgdmlzaWJsZVNjYWxlKTtcbiAgICAgICAgaWYoYm9yZGVyT3B0aW9ucy5kYXNoU3R5bGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhc2hTdHlsZSA9IGJvcmRlck9wdGlvbnMuZGFzaFN0eWxlO1xuICAgICAgICAgICAgY29uc3QgYm9yZGVyTGVuZ3RoID0gKE1hdGguYWJzKHNjYWxlZFJlY3QueVRvcCAtIHNjYWxlZFJlY3QueUJvdCkgKyBNYXRoLmFicyhzY2FsZWRSZWN0LnhMZWZ0IC0gc2NhbGVkUmVjdC54UmlnaHQpKSAqIDI7XG4gICAgICAgICAgICBjb25zdCBkYXNoV2l0aFNwYWNlU2l6ZSA9IGRhc2hTdHlsZS5kYXNoQXJyYXlbMF0gKyAoZGFzaFN0eWxlLmRhc2hBcnJheVsxXSA/PyBkYXNoU3R5bGUuZGFzaEFycmF5WzBdKTtcbiAgICAgICAgICAgIGNvbnN0IGRhc2hTaXplID0gZGFzaFN0eWxlLmRhc2hBcnJheVswXSArIChib3JkZXJMZW5ndGggJSBkYXNoV2l0aFNwYWNlU2l6ZSkgLyBNYXRoLmZsb29yKGJvcmRlckxlbmd0aCAvIGRhc2hXaXRoU3BhY2VTaXplKTtcblxuICAgICAgICAgICAgY29udHJvbGxlci5kb2Muc2V0TGluZURhc2hQYXR0ZXJuKFxuICAgICAgICAgICAgICAgIFtkYXNoU2l6ZSwgZGFzaFN0eWxlLmRhc2hBcnJheVsxXSA/PyBkYXNoU3R5bGUuZGFzaEFycmF5WzBdXSxcbiAgICAgICAgICAgICAgICBkYXNoU3R5bGUuZGFzaFBoYXNlXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29udHJvbGxlci5kb2MucmVjdCguLi50aGlzLmNyZWF0ZUFjcm9mb3JtUmVjdChzY2FsZWRSZWN0KSk7XG4gICAgICAgIGlmKGJvcmRlck9wdGlvbnMucm91bmRlZCkge1xuICAgICAgICAgICAgY29uc3QgdW52aXNpYmxlV2lkdGg6IG51bWJlciA9IGNvbnRyb2xsZXIudW5pdEhlaWdodCAqIHRoaXMuVU5WSVNJQkxFX0JPUkRFUl9TQ0FMRSAqIHRoaXMuQk9SREVSX1NDQUxFO1xuICAgICAgICAgICAgY29uc3QgdW52aXNpYmxlU2NhbGU6IG51bWJlciA9IDEuMCAtIHVudmlzaWJsZVdpZHRoIC8gbWluU2lkZTtcbiAgICAgICAgICAgIGNvbnN0IHVudmlzaWJsZVJhZGl1czogbnVtYmVyID0gdGhpcy5SQURJVVNfU0NBTEUgKiB1bnZpc2libGVXaWR0aDtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZG9jLnNldERyYXdDb2xvcih0aGlzLkJBQ0tHUk9VTkRfQ09MT1IpO1xuICAgICAgICAgICAgY29udHJvbGxlci5kb2Muc2V0TGluZVdpZHRoKHVudmlzaWJsZVdpZHRoKTtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZG9jLnJvdW5kZWRSZWN0KC4uLnRoaXMuY3JlYXRlQWNyb2Zvcm1SZWN0KFxuICAgICAgICAgICAgICAgIHRoaXMuc2NhbGVSZWN0KGJvcmRlck9wdGlvbnMsIHVudmlzaWJsZVNjYWxlKSksIHVudmlzaWJsZVJhZGl1cywgdW52aXNpYmxlUmFkaXVzKTtcbiAgICAgICAgfVxuICAgICAgICBpZihib3JkZXJPcHRpb25zLmRhc2hTdHlsZSkge1xuICAgICAgICAgICAgY29udHJvbGxlci5kb2Muc2V0TGluZURhc2hQYXR0ZXJuKFtdKTtcbiAgICAgICAgfVxuICAgICAgICBjb250cm9sbGVyLmRvYy5zZXREcmF3Q29sb3Iob2xkRHJhd0NvbG9yKTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBnZXRMb2NTdHJpbmcodGV4dDogTG9jYWxpemFibGVTdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5oYXNIdG1sKHRleHQpKSByZXR1cm4gdGV4dC5yZW5kZXJlZEh0bWw7XG4gICAgICAgIHJldHVybiAoPGFueT50ZXh0KS5yZW5kZXJlZFRleHQgfHwgdGV4dC5yZW5kZXJlZEh0bWw7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RHJvcGRvd25RdWVzdGlvblZhbHVlKHF1ZXN0aW9uOiBRdWVzdGlvbik6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHFEcm9wRG93bjogUXVlc3Rpb25Ecm9wZG93bk1vZGVsID0gPFF1ZXN0aW9uRHJvcGRvd25Nb2RlbD5xdWVzdGlvbjtcbiAgICAgICAgaWYgKHFEcm9wRG93bi5pc090aGVyU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBxRHJvcERvd24ub3RoZXJUZXh0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCEhcXVlc3Rpb24uZGlzcGxheVZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gcXVlc3Rpb24uZGlzcGxheVZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHFEcm9wRG93bi5zaG93T3B0aW9uc0NhcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBxRHJvcERvd24ub3B0aW9uc0NhcHRpb247XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGdldENvbnRlbnRRdWVzdGlvbihxdWVzdGlvbjogUXVlc3Rpb24pOiBRdWVzdGlvbiB7XG4gICAgICAgIHJldHVybiAhISg8YW55PnF1ZXN0aW9uKS5jb250ZW50UXVlc3Rpb24gPyAoPGFueT5xdWVzdGlvbikuY29udGVudFF1ZXN0aW9uIDogcXVlc3Rpb247XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29udGVudFF1ZXN0aW9uVHlwZVJlbmRlckFzKHF1ZXN0aW9uOiBRdWVzdGlvbiwgc3VydmV5OiBTdXJ2ZXlQREYpOiBzdHJpbmcge1xuICAgICAgICBsZXQgcmVuZGVyQXMgPSBxdWVzdGlvbi5yZW5kZXJBcztcbiAgICAgICAgaWYocXVlc3Rpb24uZ2V0VHlwZSgpID09PSAnYm9vbGVhbicgJiYgc3VydmV5Lm9wdGlvbnMudXNlTGVnYWN5Qm9vbGVhblJlbmRlcmluZykge1xuICAgICAgICAgICAgcmVuZGVyQXMgPSAnY2hlY2tib3gnO1xuICAgICAgICB9XG4gICAgICAgIGlmKHJlbmRlckFzICE9PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBgJHtxdWVzdGlvbi5nZXRUeXBlKCl9LSR7cmVuZGVyQXN9YDtcbiAgICAgICAgICAgIGlmKEZsYXRSZXBvc2l0b3J5LmdldEluc3RhbmNlKCkuaXNUeXBlUmVnaXN0ZXJlZCh0eXBlKSkgcmV0dXJuIHR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHF1ZXN0aW9uLmdldFR5cGUoKTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBnZXRDb250ZW50UXVlc3Rpb25UeXBlKHF1ZXN0aW9uOiBRdWVzdGlvbiwgc3VydmV5OiBTdXJ2ZXlQREYpOiBzdHJpbmcge1xuICAgICAgICBpZighIXF1ZXN0aW9uLmN1c3RvbVdpZGdldCkgcmV0dXJuIHF1ZXN0aW9uLmN1c3RvbVdpZGdldC5wZGZRdWVzdGlvblR5cGU7XG4gICAgICAgIHJldHVybiAhISg8YW55PnF1ZXN0aW9uKS5jb250ZW50UXVlc3Rpb24gPyAnY3VzdG9tX21vZGVsJyA6IHRoaXMuZ2V0Q29udGVudFF1ZXN0aW9uVHlwZVJlbmRlckFzKHF1ZXN0aW9uLCBzdXJ2ZXkpO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGdldFJhdGluZ01pbldpZHRoKGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gY29udHJvbGxlci5tZWFzdXJlVGV4dCh0aGlzLlJBVElOR19NSU5fV0lEVEgpLndpZHRoO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGdldFJhdGluZ0l0ZW1UZXh0KHF1ZXN0aW9uOiBRdWVzdGlvblJhdGluZ01vZGVsLFxuICAgICAgICBpbmRleDogbnVtYmVyLCBsb2NUZXh0OiBMb2NhbGl6YWJsZVN0cmluZyk6IExvY2FsaXphYmxlU3RyaW5nIHtcbiAgICAgICAgY29uc3QgcmF0aW5nSXRlbUxvY1RleHQ6IExvY2FsaXphYmxlU3RyaW5nID0gbmV3IExvY2FsaXphYmxlU3RyaW5nKGxvY1RleHQub3duZXIsIGxvY1RleHQudXNlTWFya2Rvd24pO1xuICAgICAgICByYXRpbmdJdGVtTG9jVGV4dC50ZXh0ID0gdGhpcy5nZXRMb2NTdHJpbmcobG9jVGV4dCk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gMCAmJiBxdWVzdGlvbi5taW5SYXRlRGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHJhdGluZ0l0ZW1Mb2NUZXh0LnRleHQgPSBxdWVzdGlvbi5sb2NNaW5SYXRlRGVzY3JpcHRpb24udGV4dCArICcgJyArIHRoaXMuZ2V0TG9jU3RyaW5nKGxvY1RleHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluZGV4ID09PSBxdWVzdGlvbi52aXNpYmxlUmF0ZVZhbHVlcy5sZW5ndGggLSAxICYmIHF1ZXN0aW9uLm1heFJhdGVEZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgcmF0aW5nSXRlbUxvY1RleHQudGV4dCA9IHRoaXMuZ2V0TG9jU3RyaW5nKGxvY1RleHQpICsgJyAnICsgcXVlc3Rpb24ubG9jTWF4UmF0ZURlc2NyaXB0aW9uLnRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJhdGluZ0l0ZW1Mb2NUZXh0O1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGdldFBhZ2VBdmFpbGFibGVXaWR0aChjb250cm9sbGVyOiBEb2NDb250cm9sbGVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIucGFwZXJXaWR0aCAtIGNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0IC0gY29udHJvbGxlci5tYXJnaW5zLnJpZ2h0O1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGdldEltYWdlUGlja2VyQXZhaWxhYmxlV2lkdGgoY29udHJvbGxlcjogRG9jQ29udHJvbGxlcik6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHdpZHRoOiBudW1iZXIgPSAodGhpcy5nZXRQYWdlQXZhaWxhYmxlV2lkdGgoY29udHJvbGxlcikgLVxuICAgICAgICAgICAgKHRoaXMuSU1BR0VQSUNLRVJfQ09VTlQgLSAxKSAqIGNvbnRyb2xsZXIudW5pdEhlaWdodCk7XG4gICAgICAgIHJldHVybiB3aWR0aCA+IDAgPyB3aWR0aCA6IGNvbnRyb2xsZXIudW5pdEhlaWdodDtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBnZXRDb2x1bW5XaWR0aChjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLCBjb2xDb3VudDogbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5nZXRQYWdlQXZhaWxhYmxlV2lkdGgoY29udHJvbGxlcikgLSAoY29sQ291bnQgLSAxKSAqXG4gICAgICAgICAgICBjb250cm9sbGVyLnVuaXRXaWR0aCAqIHRoaXMuR0FQX0JFVFdFRU5fQ09MVU1OUykgLyBjb2xDb3VudDtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBzZXRDb2x1bW5NYXJnaW5zKGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsIGNvbENvdW50OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGNlbGxXaWR0aDogbnVtYmVyID0gdGhpcy5nZXRDb2x1bW5XaWR0aChjb250cm9sbGVyLCBjb2xDb3VudCk7XG4gICAgICAgIGNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0ID0gY29udHJvbGxlci5tYXJnaW5zLmxlZnQgKyBjb2x1bW4gKlxuICAgICAgICAgICAgKGNlbGxXaWR0aCArIGNvbnRyb2xsZXIudW5pdFdpZHRoICogdGhpcy5HQVBfQkVUV0VFTl9DT0xVTU5TKTtcbiAgICAgICAgY29udHJvbGxlci5tYXJnaW5zLnJpZ2h0ID0gY29udHJvbGxlci5tYXJnaW5zLnJpZ2h0ICsgKGNvbENvdW50IC0gY29sdW1uIC0gMSkgKlxuICAgICAgICAgICAgKGNlbGxXaWR0aCArIGNvbnRyb2xsZXIudW5pdFdpZHRoICogdGhpcy5HQVBfQkVUV0VFTl9DT0xVTU5TKTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBtb3ZlUmVjdChyZWN0OiBJUmVjdCwgbGVmdDogbnVtYmVyID0gcmVjdC54TGVmdCwgdG9wOiBudW1iZXIgPSByZWN0LnlUb3ApOiBJUmVjdCB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4TGVmdDogbGVmdCxcbiAgICAgICAgICAgIHlUb3A6IHRvcCxcbiAgICAgICAgICAgIHhSaWdodDogbGVmdCArIHJlY3QueFJpZ2h0IC0gcmVjdC54TGVmdCxcbiAgICAgICAgICAgIHlCb3Q6IHRvcCArIHJlY3QueUJvdCAtIHJlY3QueVRvcFxuICAgICAgICB9O1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIHNjYWxlUmVjdChyZWN0OiBJUmVjdCwgc2NhbGU6IG51bWJlcik6IElSZWN0IHtcbiAgICAgICAgY29uc3Qgc2NhbGVXaWR0aDogbnVtYmVyID0gTWF0aC5taW4ocmVjdC54UmlnaHQgLSByZWN0LnhMZWZ0LCByZWN0LnlCb3QgLSByZWN0LnlUb3ApICogKDEuMCAtIHNjYWxlKSAvIDIuMDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHhMZWZ0OiByZWN0LnhMZWZ0ICsgc2NhbGVXaWR0aCxcbiAgICAgICAgICAgIHlUb3A6IHJlY3QueVRvcCArIHNjYWxlV2lkdGgsXG4gICAgICAgICAgICB4UmlnaHQ6IHJlY3QueFJpZ2h0IC0gc2NhbGVXaWR0aCxcbiAgICAgICAgICAgIHlCb3Q6IHJlY3QueUJvdCAtIHNjYWxlV2lkdGhcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBnZXRCb3JkZXJXaWR0aChjb250cm9sbGVyOiBEb2NDb250cm9sbGVyKSB7XG4gICAgICAgIHJldHVybiAyLjAgKiBjb250cm9sbGVyLnVuaXRXaWR0aCAqIHRoaXMuQk9SREVSX1NDQUxFO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGZvcm1TY2FsZShjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLCBmbGF0OiBJU2l6ZSk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IG1pblNpZGU6IG51bWJlciA9IE1hdGgubWluKGZsYXQud2lkdGgsIGZsYXQuaGVpZ2h0KTtcbiAgICAgICAgcmV0dXJuIChtaW5TaWRlIC0gdGhpcy5nZXRCb3JkZXJXaWR0aChjb250cm9sbGVyKSkgLyBtaW5TaWRlO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGdlbmVyYXRlUXVlc3Rpb25GbGF0cyhzdXJ2ZXk6IFN1cnZleVBERixcbiAgICAgICAgY29udHJvbGxlcjogRG9jQ29udHJvbGxlciwgcXVlc3Rpb246IFF1ZXN0aW9uLCBwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2tbXT4ge1xuICAgICAgICBjb25zdCBxdWVzdGlvblR5cGU6IHN0cmluZyA9IHRoaXMuZ2V0Q29udGVudFF1ZXN0aW9uVHlwZShxdWVzdGlvbiwgc3VydmV5KTtcbiAgICAgICAgY29uc3QgZmxhdFF1ZXN0aW9uOiBJRmxhdFF1ZXN0aW9uID0gRmxhdFJlcG9zaXRvcnkuZ2V0SW5zdGFuY2UoKS5cbiAgICAgICAgICAgIGNyZWF0ZShzdXJ2ZXksIHF1ZXN0aW9uLCBjb250cm9sbGVyLCBxdWVzdGlvblR5cGUpO1xuICAgICAgICBjb25zdCBxdWVzdGlvbkZsYXRzOiBJUGRmQnJpY2tbXSA9IGF3YWl0IGZsYXRRdWVzdGlvbi5nZW5lcmF0ZUZsYXRzKHBvaW50KTtcbiAgICAgICAgY29uc3QgYWRvcm5lcnNPcHRpb25zOiBBZG9ybmVyc09wdGlvbnMgPSBuZXcgQWRvcm5lcnNPcHRpb25zKHBvaW50LFxuICAgICAgICAgICAgcXVlc3Rpb25GbGF0cywgcXVlc3Rpb24sIGNvbnRyb2xsZXIsIEZsYXRSZXBvc2l0b3J5LmdldEluc3RhbmNlKCksIFN1cnZleVBERk1vZHVsZSk7XG4gICAgICAgIGlmIChxdWVzdGlvbi5jdXN0b21XaWRnZXQgJiYgcXVlc3Rpb24uY3VzdG9tV2lkZ2V0LmlzRml0KHF1ZXN0aW9uKSAmJlxuICAgICAgICAgICAgcXVlc3Rpb24uY3VzdG9tV2lkZ2V0LnBkZlJlbmRlcikge1xuICAgICAgICAgICAgc3VydmV5Lm9uUmVuZGVyUXVlc3Rpb24udW5zaGlmdChxdWVzdGlvbi5jdXN0b21XaWRnZXQucGRmUmVuZGVyKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBzdXJ2ZXkub25SZW5kZXJRdWVzdGlvbi5maXJlKHN1cnZleSwgYWRvcm5lcnNPcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIFsuLi5hZG9ybmVyc09wdGlvbnMuYnJpY2tzXTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBpc0ZvbnRFeGlzdChjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLCBmb250TmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBjb250cm9sbGVyLmRvYy5pbnRlcm5hbC5nZXRGb250KGZvbnROYW1lKS5mb250TmFtZSA9PT0gZm9udE5hbWU7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgaXNDdXN0b21Gb250KGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsIGZvbnROYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuZG9jLmludGVybmFsLmdldEZvbnQoZm9udE5hbWUpLmVuY29kaW5nID09PSB0aGlzLkNVU1RPTV9GT05UX0VOQ09ESU5HO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGZpeEZvbnQoY29udHJvbGxlcjogRG9jQ29udHJvbGxlcik6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5pc0N1c3RvbUZvbnQoY29udHJvbGxlciwgY29udHJvbGxlci5mb250TmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZG9jLnRleHQoJ2xvYWQgZm9udCcsIDAsIDApO1xuICAgICAgICAgICAgY29udHJvbGxlci5kb2MuZGVsZXRlUGFnZSgxKTtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuYWRkUGFnZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgY2xvbmUoc3JjOiBhbnkpOiBhbnkge1xuICAgICAgICBjb25zdCB0YXJnZXQ6IGFueSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHByb3AgaW4gc3JjKSB7XG4gICAgICAgICAgICBpZiAoc3JjLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BdID0gc3JjW3Byb3BdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgc2hvdWxkUmVuZGVyUmVhZE9ubHkocXVlc3Rpb246IElRdWVzdGlvbiwgY29udHJvbGxlcjogRG9jQ29udHJvbGxlciwgcmVhZE9ubHk/OiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAoKCEhcXVlc3Rpb24gJiYgcXVlc3Rpb24uaXNSZWFkT25seSB8fCByZWFkT25seSkgJiYgU3VydmV5SGVscGVyLmdldFJlYWRvbmx5UmVuZGVyQXMoXG4gICAgICAgICAgICA8UXVlc3Rpb24+cXVlc3Rpb24sIGNvbnRyb2xsZXIpICE9PSAnYWNyb2Zvcm0nKSB8fCBjb250cm9sbGVyPy5jb21wcmVzcztcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBpc1NpemVFbXB0eSh2YWw6IGFueSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gIXZhbCB8fCB2YWwgPT09ICdhdXRvJztcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBpc0hlaWdodEVtcHR5KHZhbDogYW55KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzU2l6ZUVtcHR5KHZhbCkgfHwgdmFsID09ICcxMDAlJztcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRDb3JyZWN0ZWRJbWFnZVNpemUoY29udHJvbGxlcjogRG9jQ29udHJvbGxlciwgaW1hZ2VPcHRpb25zOiB7IGltYWdlV2lkdGg/OiBhbnksIGltYWdlSGVpZ2h0PzogYW55LCBpbWFnZUxpbms6IHN0cmluZywgZGVmYXVsdEltYWdlV2lkdGg/OiBhbnksIGRlZmF1bHRJbWFnZUhlaWdodD86IGFueSB9KTogUHJvbWlzZTxJU2l6ZT4ge1xuICAgICAgICBsZXQgeyBpbWFnZVdpZHRoLCBpbWFnZUxpbmssIGltYWdlSGVpZ2h0LCBkZWZhdWx0SW1hZ2VXaWR0aCwgZGVmYXVsdEltYWdlSGVpZ2h0IH0gPSBpbWFnZU9wdGlvbnM7XG4gICAgICAgIGltYWdlV2lkdGggPSB0eXBlb2YgaW1hZ2VXaWR0aCA9PT0gJ251bWJlcicgPyBpbWFnZVdpZHRoLnRvU3RyaW5nKCkgOiBpbWFnZVdpZHRoO1xuICAgICAgICBpbWFnZUhlaWdodCA9IHR5cGVvZiBpbWFnZUhlaWdodCA9PT0gJ251bWJlcicgPyBpbWFnZUhlaWdodC50b1N0cmluZygpIDogaW1hZ2VIZWlnaHQ7XG4gICAgICAgIGxldCB3aWR0aFB0OiBudW1iZXIgPSBpbWFnZVdpZHRoICYmIFN1cnZleUhlbHBlci5wYXJzZVdpZHRoKGltYWdlV2lkdGgsIFN1cnZleUhlbHBlci5nZXRQYWdlQXZhaWxhYmxlV2lkdGgoY29udHJvbGxlciksIDEsICdweCcpO1xuICAgICAgICBsZXQgaGVpZ2h0UHQ6IG51bWJlciA9IGltYWdlSGVpZ2h0ICYmIFN1cnZleUhlbHBlci5wYXJzZVdpZHRoKGltYWdlSGVpZ2h0LCBTdXJ2ZXlIZWxwZXIuZ2V0UGFnZUF2YWlsYWJsZVdpZHRoKGNvbnRyb2xsZXIpLCAxLCAncHgnKTtcbiAgICAgICAgZGVmYXVsdEltYWdlV2lkdGggPSB0eXBlb2YgZGVmYXVsdEltYWdlV2lkdGggPT09ICdudW1iZXInID8gZGVmYXVsdEltYWdlV2lkdGgudG9TdHJpbmcoKSA6IGRlZmF1bHRJbWFnZVdpZHRoO1xuICAgICAgICBkZWZhdWx0SW1hZ2VIZWlnaHQgPSB0eXBlb2YgZGVmYXVsdEltYWdlSGVpZ2h0ID09PSAnbnVtYmVyJyA/IGRlZmF1bHRJbWFnZUhlaWdodC50b1N0cmluZygpIDogZGVmYXVsdEltYWdlSGVpZ2h0O1xuICAgICAgICBsZXQgZGVmYXVsdFdpZHRoUHQ6IG51bWJlciA9IGRlZmF1bHRJbWFnZVdpZHRoICYmIFN1cnZleUhlbHBlci5wYXJzZVdpZHRoKGRlZmF1bHRJbWFnZVdpZHRoLCBTdXJ2ZXlIZWxwZXIuZ2V0UGFnZUF2YWlsYWJsZVdpZHRoKGNvbnRyb2xsZXIpLCAxLCAncHgnKTtcbiAgICAgICAgbGV0IGRlZmF1bHRIZWlnaHRQdDogbnVtYmVyID0gZGVmYXVsdEltYWdlSGVpZ2h0ICYmIFN1cnZleUhlbHBlci5wYXJzZVdpZHRoKGRlZmF1bHRJbWFnZUhlaWdodCwgU3VydmV5SGVscGVyLmdldFBhZ2VBdmFpbGFibGVXaWR0aChjb250cm9sbGVyKSwgMSwgJ3B4Jyk7XG5cbiAgICAgICAgaWYoU3VydmV5SGVscGVyLmlzU2l6ZUVtcHR5KGltYWdlV2lkdGgpIHx8IFN1cnZleUhlbHBlci5pc0hlaWdodEVtcHR5KGltYWdlSGVpZ2h0KSkge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2VTaXplID0gYXdhaXQgU3VydmV5SGVscGVyLmdldEltYWdlU2l6ZShpbWFnZUxpbmspO1xuICAgICAgICAgICAgaWYoIVN1cnZleUhlbHBlci5pc1NpemVFbXB0eShpbWFnZVdpZHRoKSkge1xuICAgICAgICAgICAgICAgIGlmKGltYWdlU2l6ZSAmJiBpbWFnZVNpemUud2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0UHQgPSBpbWFnZVNpemUuaGVpZ2h0ICogd2lkdGhQdCAvIGltYWdlU2l6ZS53aWR0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKCFTdXJ2ZXlIZWxwZXIuaXNIZWlnaHRFbXB0eShpbWFnZUhlaWdodCkpIHtcbiAgICAgICAgICAgICAgICBpZihpbWFnZVNpemUgJiYgaW1hZ2VTaXplLmhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aFB0ID0gaW1hZ2VTaXplLndpZHRoICogaGVpZ2h0UHQgLyBpbWFnZVNpemUuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYoaW1hZ2VTaXplICYmIGltYWdlU2l6ZS5oZWlnaHQgJiYgaW1hZ2VTaXplLndpZHRoKSB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0UHQgPSBTdXJ2ZXlIZWxwZXIucGFyc2VXaWR0aChpbWFnZVNpemUuaGVpZ2h0LnRvU3RyaW5nKCksIFN1cnZleUhlbHBlci5nZXRQYWdlQXZhaWxhYmxlV2lkdGgoY29udHJvbGxlciksIDEsICdweCcpO1xuICAgICAgICAgICAgICAgIHdpZHRoUHQgPSBTdXJ2ZXlIZWxwZXIucGFyc2VXaWR0aChpbWFnZVNpemUud2lkdGgudG9TdHJpbmcoKSwgU3VydmV5SGVscGVyLmdldFBhZ2VBdmFpbGFibGVXaWR0aChjb250cm9sbGVyKSwgMSwgJ3B4Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgd2lkdGg6IHdpZHRoUHQgfHwgZGVmYXVsdFdpZHRoUHQgfHwgMCwgaGVpZ2h0OiBoZWlnaHRQdCB8fCBkZWZhdWx0SGVpZ2h0UHQgfHwgMCB9O1xuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaGVscGVyX3N1cnZleS50cyIsImltcG9ydCB7IElRdWVzdGlvbiwgUXVlc3Rpb24gfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5pbXBvcnQgeyBTdXJ2ZXlQREYgfSBmcm9tICcuLi9zdXJ2ZXknO1xuaW1wb3J0IHsgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IElGbGF0UXVlc3Rpb24sIEZsYXRRdWVzdGlvbiB9IGZyb20gJy4vZmxhdF9xdWVzdGlvbic7XG5pbXBvcnQgeyBGbGF0UXVlc3Rpb25EZWZhdWx0IH0gZnJvbSAnLi9mbGF0X2RlZmF1bHQnO1xuXG5leHBvcnQgdHlwZSBGbGF0Q29uc3RydWN0b3IgPSBuZXcgKFxuICAgIHN1cnZleTogU3VydmV5UERGLFxuICAgIHF1ZXN0aW9uOiBJUXVlc3Rpb24sXG4gICAgY29udHJvbGxlcjogRG9jQ29udHJvbGxlclxuKSA9PiBJRmxhdFF1ZXN0aW9uO1xuZXhwb3J0IGNsYXNzIEZsYXRSZXBvc2l0b3J5IHtcbiAgICBwcml2YXRlIHF1ZXN0aW9uczogeyBbaW5kZXg6IHN0cmluZ106IEZsYXRDb25zdHJ1Y3RvciB9ID0ge307XG4gICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEZsYXRSZXBvc2l0b3J5ID0gbmV3IEZsYXRSZXBvc2l0b3J5KCk7XG4gICAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBGbGF0UmVwb3NpdG9yeSB7XG4gICAgICAgIHJldHVybiBGbGF0UmVwb3NpdG9yeS5pbnN0YW5jZTtcbiAgICB9XG4gICAgcHVibGljIHJlZ2lzdGVyKG1vZGVsVHlwZTogc3RyaW5nLCByZW5kZXJlckNvbnN0cnVjdG9yOiBGbGF0Q29uc3RydWN0b3IpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5xdWVzdGlvbnNbbW9kZWxUeXBlXSA9IHJlbmRlcmVyQ29uc3RydWN0b3I7XG4gICAgfVxuICAgIHB1YmxpYyBpc1R5cGVSZWdpc3RlcmVkKHR5cGU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISF0aGlzLnF1ZXN0aW9uc1t0eXBlXTtcbiAgICB9XG4gICAgcHVibGljIGdldFJlbmRlcmVyKHR5cGU6IHN0cmluZyk6IEZsYXRDb25zdHJ1Y3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uc1t0eXBlXTtcbiAgICB9XG4gICAgcHVibGljIGNyZWF0ZShzdXJ2ZXk6IFN1cnZleVBERiwgcXVlc3Rpb246IFF1ZXN0aW9uLFxuICAgICAgICBkb2NDb250cm9sbGVyOiBEb2NDb250cm9sbGVyLCB0eXBlPzogc3RyaW5nKTogSUZsYXRRdWVzdGlvbiB7XG4gICAgICAgIGNvbnN0IHF1ZXN0aW9uVHlwZTogc3RyaW5nID0gdHlwZW9mIHR5cGUgPT09ICd1bmRlZmluZWQnID8gcXVlc3Rpb24uZ2V0VHlwZSgpIDogdHlwZTtcbiAgICAgICAgbGV0IHJlbmRlcmVyQ29uc3RydWN0b3IgPSB0aGlzLmdldFJlbmRlcmVyKHF1ZXN0aW9uVHlwZSk7XG4gICAgICAgIGlmKCFyZW5kZXJlckNvbnN0cnVjdG9yKSB7XG4gICAgICAgICAgICBpZighIXF1ZXN0aW9uLmN1c3RvbVdpZGdldD8ucGRmUmVuZGVyKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXJDb25zdHJ1Y3RvciA9IEZsYXRRdWVzdGlvbjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXJDb25zdHJ1Y3RvciA9IEZsYXRRdWVzdGlvbkRlZmF1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyByZW5kZXJlckNvbnN0cnVjdG9yKHN1cnZleSwgcXVlc3Rpb24sIGRvY0NvbnRyb2xsZXIpO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyKHR5cGU6IHN0cmluZywgcmVuZGVyZXJDb25zdHJ1Y3RvcjogRmxhdENvbnN0cnVjdG9yKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2V0SW5zdGFuY2UoKS5yZWdpc3Rlcih0eXBlLCByZW5kZXJlckNvbnN0cnVjdG9yKTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBnZXRSZW5kZXJlcih0eXBlOiBzdHJpbmcpOiBGbGF0Q29uc3RydWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRJbnN0YW5jZSgpLmdldFJlbmRlcmVyKHR5cGUpO1xuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9yZXBvc2l0b3J5LnRzIiwiaW1wb3J0IHsgSVF1ZXN0aW9uLCBRdWVzdGlvbiwgTG9jYWxpemFibGVTdHJpbmcsIFNlcmlhbGl6ZXIgfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5pbXBvcnQgeyBTdXJ2ZXlQREYgfSBmcm9tICcuLi9zdXJ2ZXknO1xuaW1wb3J0IHsgSVBvaW50LCBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgRmxhdFN1cnZleSB9IGZyb20gJy4vZmxhdF9zdXJ2ZXknO1xuaW1wb3J0IHsgSVBkZkJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfYnJpY2snO1xuaW1wb3J0IHsgVGV4dEJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfdGV4dCc7XG5pbXBvcnQgeyBDb21wb3NpdGVCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2NvbXBvc2l0ZSc7XG5pbXBvcnQgeyBTdXJ2ZXlIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXJfc3VydmV5JztcblxuZXhwb3J0IGludGVyZmFjZSBJRmxhdFF1ZXN0aW9uIHtcbiAgICBnZW5lcmF0ZUZsYXRzQ29udGVudChwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2tbXT47XG4gICAgZ2VuZXJhdGVGbGF0cyhwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2tbXT47XG59XG5leHBvcnQgY2xhc3MgRmxhdFF1ZXN0aW9uIGltcGxlbWVudHMgSUZsYXRRdWVzdGlvbiB7XG4gICAgcHVibGljIHN0YXRpYyBDT05URU5UX0dBUF9WRVJUX1NDQUxFOiBudW1iZXIgPSAwLjU7XG4gICAgcHVibGljIHN0YXRpYyBDT05URU5UX0dBUF9IT1JfU0NBTEU6IG51bWJlciA9IDEuMDtcbiAgICBwdWJsaWMgc3RhdGljIENPTlRFTlRfSU5ERU5UX1NDQUxFOiBudW1iZXIgPSAxLjA7XG4gICAgcHVibGljIHN0YXRpYyBERVNDX0dBUF9TQ0FMRTogbnVtYmVyID0gMC4wNjI1O1xuICAgIHByb3RlY3RlZCBxdWVzdGlvbjogUXVlc3Rpb247XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBzdXJ2ZXk6IFN1cnZleVBERixcbiAgICAgICAgcXVlc3Rpb246IElRdWVzdGlvbiwgcHJvdGVjdGVkIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIpIHtcbiAgICAgICAgdGhpcy5xdWVzdGlvbiA9IDxRdWVzdGlvbj5xdWVzdGlvbjtcbiAgICB9XG4gICAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUZsYXRUaXRsZShwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2s+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IFN1cnZleUhlbHBlci5jcmVhdGVUaXRsZUZsYXQocG9pbnQsXG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uLCB0aGlzLmNvbnRyb2xsZXIpO1xuICAgIH1cbiAgICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlRmxhdERlc2NyaXB0aW9uKHBvaW50OiBJUG9pbnQpOiBQcm9taXNlPElQZGZCcmljaz4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgU3VydmV5SGVscGVyLmNyZWF0ZURlc2NGbGF0KHBvaW50LCB0aGlzLnF1ZXN0aW9uLCB0aGlzLmNvbnRyb2xsZXIsIHRoaXMucXVlc3Rpb24ubG9jRGVzY3JpcHRpb24pO1xuICAgIH1cbiAgICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlRmxhdEhlYWRlcihwb2ludDogSVBvaW50KTogUHJvbWlzZTxDb21wb3NpdGVCcmljaz4ge1xuICAgICAgICBjb25zdCB0aXRsZUZsYXQ6IElQZGZCcmljayA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVGbGF0VGl0bGUocG9pbnQpO1xuICAgICAgICBjb25zdCBjb21wb3NpdGVGbGF0OiBDb21wb3NpdGVCcmljayA9IG5ldyBDb21wb3NpdGVCcmljayh0aXRsZUZsYXQpO1xuICAgICAgICBpZih0aGlzLnF1ZXN0aW9uLmhhc0Rlc2NyaXB0aW9uVW5kZXJUaXRsZSkge1xuICAgICAgICAgICAgY29uc3QgZGVzY1BvaW50OiBJUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlUG9pbnQodGl0bGVGbGF0LCB0cnVlLCBmYWxzZSk7XG4gICAgICAgICAgICBkZXNjUG9pbnQueVRvcCArPSBGbGF0UXVlc3Rpb24uREVTQ19HQVBfU0NBTEUgKiB0aGlzLmNvbnRyb2xsZXIudW5pdEhlaWdodDtcbiAgICAgICAgICAgIGRlc2NQb2ludC54TGVmdCArPSB0aGlzLmNvbnRyb2xsZXIudW5pdFdpZHRoICogRmxhdFF1ZXN0aW9uLkNPTlRFTlRfSU5ERU5UX1NDQUxFO1xuICAgICAgICAgICAgY29tcG9zaXRlRmxhdC5hZGRCcmljayhhd2FpdCB0aGlzLmdlbmVyYXRlRmxhdERlc2NyaXB0aW9uKGRlc2NQb2ludCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb21wb3NpdGVGbGF0O1xuICAgIH1cbiAgICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlRmxhdHNDb21tZW50KHBvaW50OiBJUG9pbnQpOiBQcm9taXNlPElQZGZCcmljaz4ge1xuICAgICAgICBjb25zdCB0ZXh0OiBMb2NhbGl6YWJsZVN0cmluZyA9IHRoaXMucXVlc3Rpb24ubG9jQ29tbWVudFRleHQ7XG4gICAgICAgIGNvbnN0IG90aGVyVGV4dEZsYXQ6IElQZGZCcmljayA9IGF3YWl0IFN1cnZleUhlbHBlci5jcmVhdGVUZXh0RmxhdChcbiAgICAgICAgICAgIHBvaW50LCB0aGlzLnF1ZXN0aW9uLCB0aGlzLmNvbnRyb2xsZXIsIHRleHQsIFRleHRCcmljayk7XG4gICAgICAgIGNvbnN0IG90aGVyUG9pbnQ6IElQb2ludCA9IFN1cnZleUhlbHBlci5jcmVhdGVQb2ludChvdGhlclRleHRGbGF0KTtcbiAgICAgICAgb3RoZXJQb2ludC55VG9wICs9IHRoaXMuY29udHJvbGxlci51bml0SGVpZ2h0ICogU3VydmV5SGVscGVyLkdBUF9CRVRXRUVOX1JPV1M7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcG9zaXRlQnJpY2sob3RoZXJUZXh0RmxhdCwgYXdhaXQgU3VydmV5SGVscGVyLmNyZWF0ZUNvbW1lbnRGbGF0KFxuICAgICAgICAgICAgb3RoZXJQb2ludCwgdGhpcy5xdWVzdGlvbiwgdGhpcy5jb250cm9sbGVyLCBmYWxzZSwgeyByb3dzOiBTdXJ2ZXlIZWxwZXIuT1RIRVJfUk9XU19DT1VOVCB9KSk7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUZsYXRzQ29tcG9zaXRlKHBvaW50OiBJUG9pbnQpOiBQcm9taXNlPElQZGZCcmlja1tdPiB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRQYW5lbCA9ICg8YW55PnRoaXMucXVlc3Rpb24pLmNvbnRlbnRQYW5lbDtcbiAgICAgICAgaWYgKCEhY29udGVudFBhbmVsKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgRmxhdFN1cnZleS5nZW5lcmF0ZUZsYXRzUGFuZWwodGhpcy5zdXJ2ZXksXG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLCBjb250ZW50UGFuZWwsIHBvaW50KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXN0aW9uID0gU3VydmV5SGVscGVyLmdldENvbnRlbnRRdWVzdGlvbih0aGlzLnF1ZXN0aW9uKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2VuZXJhdGVGbGF0c0NvbnRlbnQocG9pbnQpO1xuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgZ2VuZXJhdGVGbGF0c0NvbnRlbnQocG9pbnQ6IElQb2ludCk6IFByb21pc2U8SVBkZkJyaWNrW10+IHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUZsYXRzQ29udGVudFdpdGhPcHRpb25hbEVsZW1lbnRzKHBvaW50OiBJUG9pbnQpOiBQcm9taXNlPElQZGZCcmlja1tdPiB7XG4gICAgICAgIGNvbnN0IGZsYXRzOiBBcnJheTxJUGRmQnJpY2s+ID0gW107XG4gICAgICAgIGNvbnN0IGNvbnRlbnRGbGF0cyA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVGbGF0c0NvbXBvc2l0ZShwb2ludCk7XG4gICAgICAgIGZsYXRzLnB1c2goLi4uY29udGVudEZsYXRzKTtcbiAgICAgICAgY29uc3QgZ2V0TGF0ZXN0UG9pbnQgPSAoKTogSVBvaW50ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IFN1cnZleUhlbHBlci5jbG9uZShwb2ludCk7XG4gICAgICAgICAgICBpZihjb250ZW50RmxhdHMgIT09IG51bGwgJiYgY29udGVudEZsYXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHJlcy55VG9wID0gU3VydmV5SGVscGVyLm1lcmdlUmVjdHMoLi4uZmxhdHMpLnlCb3QgKyB0aGlzLmNvbnRyb2xsZXIudW5pdEhlaWdodCAqIFN1cnZleUhlbHBlci5HQVBfQkVUV0VFTl9ST1dTO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMucXVlc3Rpb24uaGFzQ29tbWVudCkge1xuICAgICAgICAgICAgZmxhdHMucHVzaChhd2FpdCB0aGlzLmdlbmVyYXRlRmxhdHNDb21tZW50KGdldExhdGVzdFBvaW50KCkpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5xdWVzdGlvbi5oYXNEZXNjcmlwdGlvblVuZGVySW5wdXQpIHtcbiAgICAgICAgICAgIGZsYXRzLnB1c2goYXdhaXQgdGhpcy5nZW5lcmF0ZUZsYXREZXNjcmlwdGlvbihnZXRMYXRlc3RQb2ludCgpKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmxhdHM7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUZsYXRzKHBvaW50OiBJUG9pbnQpOiBQcm9taXNlPElQZGZCcmlja1tdPiB7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5wdXNoTWFyZ2lucygpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0ICs9IHRoaXMuY29udHJvbGxlci5tZWFzdXJlVGV4dCh0aGlzLnF1ZXN0aW9uLmluZGVudCkud2lkdGg7XG4gICAgICAgIGNvbnN0IGluZGVudFBvaW50OiBJUG9pbnQgPSB7XG4gICAgICAgICAgICB4TGVmdDogcG9pbnQueExlZnQgKyB0aGlzLmNvbnRyb2xsZXIubWVhc3VyZVRleHQodGhpcy5xdWVzdGlvbi5pbmRlbnQpLndpZHRoLFxuICAgICAgICAgICAgeVRvcDogcG9pbnQueVRvcFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBmbGF0czogSVBkZkJyaWNrW10gPSBbXTtcbiAgICAgICAgbGV0IHRpdGxlTG9jYXRpb246IHN0cmluZyA9IHRoaXMucXVlc3Rpb24uZ2V0VGl0bGVMb2NhdGlvbigpO1xuICAgICAgICB0aXRsZUxvY2F0aW9uID0gdGhpcy5xdWVzdGlvbi5oYXNUaXRsZSA/IHRpdGxlTG9jYXRpb24gOiAnaGlkZGVuJztcbiAgICAgICAgc3dpdGNoICh0aXRsZUxvY2F0aW9uKSB7XG4gICAgICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgICAgY2FzZSAnZGVmYXVsdCc6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJGbGF0ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUZsYXRIZWFkZXIoaW5kZW50UG9pbnQpO1xuICAgICAgICAgICAgICAgIGxldCBjb250ZW50UG9pbnQ6IElQb2ludCA9IFN1cnZleUhlbHBlci5jcmVhdGVQb2ludChoZWFkZXJGbGF0KTtcbiAgICAgICAgICAgICAgICBjb250ZW50UG9pbnQueExlZnQgKz0gdGhpcy5jb250cm9sbGVyLnVuaXRXaWR0aCAqIEZsYXRRdWVzdGlvbi5DT05URU5UX0lOREVOVF9TQ0FMRTtcbiAgICAgICAgICAgICAgICBoZWFkZXJGbGF0LmFkZEJyaWNrKFN1cnZleUhlbHBlci5jcmVhdGVSb3dsaW5lRmxhdChcbiAgICAgICAgICAgICAgICAgICAgU3VydmV5SGVscGVyLmNyZWF0ZVBvaW50KGhlYWRlckZsYXQpLCB0aGlzLmNvbnRyb2xsZXIpKTtcbiAgICAgICAgICAgICAgICBjb250ZW50UG9pbnQueVRvcCArPSB0aGlzLmNvbnRyb2xsZXIudW5pdEhlaWdodCAqXG4gICAgICAgICAgICAgICAgICAgIEZsYXRRdWVzdGlvbi5DT05URU5UX0dBUF9WRVJUX1NDQUxFICsgU3VydmV5SGVscGVyLkVQU0lMT047XG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnB1c2hNYXJnaW5zKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLm1hcmdpbnMubGVmdCArPSB0aGlzLmNvbnRyb2xsZXIudW5pdFdpZHRoICogRmxhdFF1ZXN0aW9uLkNPTlRFTlRfSU5ERU5UX1NDQUxFO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRGbGF0czogSVBkZkJyaWNrW10gPSBhd2FpdCB0aGlzLmdlbmVyYXRlRmxhdHNDb250ZW50V2l0aE9wdGlvbmFsRWxlbWVudHMoY29udGVudFBvaW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIucG9wTWFyZ2lucygpO1xuICAgICAgICAgICAgICAgIGlmKGNvbnRlbnRGbGF0cyAhPT0gbnVsbCAmJiBjb250ZW50RmxhdHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlckZsYXQuYWRkQnJpY2soY29udGVudEZsYXRzLnNoaWZ0KCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmbGF0cy5wdXNoKGhlYWRlckZsYXQpO1xuICAgICAgICAgICAgICAgIGZsYXRzLnB1c2goLi4uY29udGVudEZsYXRzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50UG9pbnQ6IElQb2ludCA9IFN1cnZleUhlbHBlci5jbG9uZShpbmRlbnRQb2ludCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnB1c2hNYXJnaW5zKCk7XG4gICAgICAgICAgICAgICAgY29udGVudFBvaW50LnhMZWZ0ICs9IHRoaXMuY29udHJvbGxlci51bml0V2lkdGggKiBGbGF0UXVlc3Rpb24uQ09OVEVOVF9JTkRFTlRfU0NBTEU7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLm1hcmdpbnMubGVmdCArPSB0aGlzLmNvbnRyb2xsZXIudW5pdFdpZHRoICogRmxhdFF1ZXN0aW9uLkNPTlRFTlRfSU5ERU5UX1NDQUxFO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRGbGF0czogSVBkZkJyaWNrW10gPSBhd2FpdCB0aGlzLmdlbmVyYXRlRmxhdHNDb250ZW50V2l0aE9wdGlvbmFsRWxlbWVudHMoY29udGVudFBvaW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIucG9wTWFyZ2lucygpO1xuICAgICAgICAgICAgICAgIGZsYXRzLnB1c2goLi4uY29udGVudEZsYXRzKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0aXRsZVBvaW50OiBJUG9pbnQgPSBpbmRlbnRQb2ludDtcbiAgICAgICAgICAgICAgICBpZiAoZmxhdHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlUG9pbnQueVRvcCA9IGZsYXRzW2ZsYXRzLmxlbmd0aCAtIDFdLnlCb3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRpdGxlUG9pbnQueVRvcCArPSB0aGlzLmNvbnRyb2xsZXIudW5pdEhlaWdodCAqIEZsYXRRdWVzdGlvbi5DT05URU5UX0dBUF9WRVJUX1NDQUxFO1xuICAgICAgICAgICAgICAgIGZsYXRzLnB1c2goYXdhaXQgdGhpcy5nZW5lcmF0ZUZsYXRIZWFkZXIodGl0bGVQb2ludCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnbGVmdCc6IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIucHVzaE1hcmdpbnModGhpcy5jb250cm9sbGVyLm1hcmdpbnMubGVmdCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnBhcGVyV2lkdGggLSB0aGlzLmNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0IC1cbiAgICAgICAgICAgICAgICAgICAgICAgIFN1cnZleUhlbHBlci5nZXRQYWdlQXZhaWxhYmxlV2lkdGgodGhpcy5jb250cm9sbGVyKSAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3VydmV5SGVscGVyLk1VTFRJUExFVEVYVF9URVhUX1BFUlMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckZsYXQ6IENvbXBvc2l0ZUJyaWNrID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUZsYXRIZWFkZXIoaW5kZW50UG9pbnQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNyZWF0ZVBvaW50KGhlYWRlckZsYXQsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIucG9wTWFyZ2lucygpO1xuICAgICAgICAgICAgICAgIGNvbnRlbnRQb2ludC54TGVmdCArPSB0aGlzLmNvbnRyb2xsZXIudW5pdFdpZHRoICogRmxhdFF1ZXN0aW9uLkNPTlRFTlRfR0FQX0hPUl9TQ0FMRTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0ID0gY29udGVudFBvaW50LnhMZWZ0O1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRGbGF0czogSVBkZkJyaWNrW10gPSBhd2FpdCB0aGlzLmdlbmVyYXRlRmxhdHNDb250ZW50V2l0aE9wdGlvbmFsRWxlbWVudHMoY29udGVudFBvaW50KTtcbiAgICAgICAgICAgICAgICBpZihjb250ZW50RmxhdHMgIT09IG51bGwgJiYgY29udGVudEZsYXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJGbGF0LmFkZEJyaWNrKGNvbnRlbnRGbGF0cy5zaGlmdCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmxhdHMucHVzaChoZWFkZXJGbGF0KTtcbiAgICAgICAgICAgICAgICBmbGF0cy5wdXNoKC4uLmNvbnRlbnRGbGF0cyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdoaWRkZW4nOlxuICAgICAgICAgICAgY2FzZSBTdXJ2ZXlIZWxwZXIuVElUTEVfTE9DQVRJT05fTUFUUklYOlxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNsb25lKGluZGVudFBvaW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIucHVzaE1hcmdpbnMoKTtcbiAgICAgICAgICAgICAgICBpZiAodGl0bGVMb2NhdGlvbiAhPT0gU3VydmV5SGVscGVyLlRJVExFX0xPQ0FUSU9OX01BVFJJWCkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50UG9pbnQueExlZnQgKz0gdGhpcy5jb250cm9sbGVyLnVuaXRXaWR0aCAqIEZsYXRRdWVzdGlvbi5DT05URU5UX0lOREVOVF9TQ0FMRTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLm1hcmdpbnMubGVmdCArPSB0aGlzLmNvbnRyb2xsZXIudW5pdFdpZHRoICogRmxhdFF1ZXN0aW9uLkNPTlRFTlRfSU5ERU5UX1NDQUxFO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmbGF0cy5wdXNoKC4uLmF3YWl0IHRoaXMuZ2VuZXJhdGVGbGF0c0NvbnRlbnRXaXRoT3B0aW9uYWxFbGVtZW50cyhjb250ZW50UG9pbnQpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIucG9wTWFyZ2lucygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5wb3BNYXJnaW5zKCk7XG4gICAgICAgIHJldHVybiBmbGF0cztcbiAgICB9XG4gICAgcHJvdGVjdGVkIGdldCBzaG91bGRSZW5kZXJBc0NvbW1lbnQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBTdXJ2ZXlIZWxwZXIuc2hvdWxkUmVuZGVyUmVhZE9ubHkodGhpcy5xdWVzdGlvbiwgdGhpcy5jb250cm9sbGVyKTtcbiAgICB9XG59XG5cblNlcmlhbGl6ZXIuYWRkUHJvcGVydHkoJ3F1ZXN0aW9uJywge1xuICAgIG5hbWU6ICdyZWFkb25seVJlbmRlckFzJyxcbiAgICBkZWZhdWx0OiAnYXV0bycsXG4gICAgY2hvaWNlczogWydhdXRvJywgJ3RleHQnLCAnYWNyb2Zvcm0nXSxcbiAgICB2aXNpYmxlOiBmYWxzZVxufSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2ZsYXRfbGF5b3V0L2ZsYXRfcXVlc3Rpb24udHMiLCJpbXBvcnQgeyBJUXVlc3Rpb24sIH0gZnJvbSAnc3VydmV5LWNvcmUnO1xuaW1wb3J0IHsgSVBvaW50LCBJUmVjdCwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IFBkZkJyaWNrIH0gZnJvbSAnLi9wZGZfYnJpY2snO1xuXG5leHBvcnQgY2xhc3MgVGV4dEJyaWNrIGV4dGVuZHMgUGRmQnJpY2sge1xuICAgIHByb3RlY3RlZCBhbGlnbjogYW55O1xuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihxdWVzdGlvbjogSVF1ZXN0aW9uLCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLFxuICAgICAgICByZWN0OiBJUmVjdCwgcHJvdGVjdGVkIHRleHQ6IHN0cmluZykge1xuICAgICAgICBzdXBlcihxdWVzdGlvbiwgY29udHJvbGxlciwgcmVjdCk7XG4gICAgICAgIHRoaXMuYWxpZ24gPSB7XG4gICAgICAgICAgICBpc0lucHV0UnRsOiBmYWxzZSxcbiAgICAgICAgICAgIGlzT3V0cHV0UnRsOiBjb250cm9sbGVyLmlzUlRMLFxuICAgICAgICAgICAgYWxpZ246IGNvbnRyb2xsZXIuaXNSVEwgPyAncmlnaHQnOiAnbGVmdCcsXG4gICAgICAgICAgICBiYXNlbGluZTogJ21pZGRsZSdcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcHJpdmF0ZSBlc2NhcGVUZXh0KCkge1xuICAgICAgICB3aGlsZSAodGhpcy50ZXh0LmluZGV4T2YoJ1xcdCcpID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dCA9IHRoaXMudGV4dC5yZXBsYWNlKCdcXHQnLCBBcnJheSg1KS5qb2luKFN0cmluZy5mcm9tQ2hhckNvZGUoMTYwKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnRleHQ7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyByZW5kZXJJbnRlcmFjdGl2ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgbGV0IGFsaWduUG9pbnQ6IElQb2ludCA9IHRoaXMuYWxpZ25Qb2ludCh0aGlzKTtcbiAgICAgICAgbGV0IG9sZEZvbnRTaXplOiBudW1iZXIgPSB0aGlzLmNvbnRyb2xsZXIuZm9udFNpemU7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5mb250U2l6ZSA9IHRoaXMuZm9udFNpemU7XG4gICAgICAgIGxldCBvbGRUZXh0Q29sb3I6IHN0cmluZyA9IHRoaXMuY29udHJvbGxlci5kb2MuZ2V0VGV4dENvbG9yKCk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5kb2Muc2V0VGV4dENvbG9yKHRoaXMudGV4dENvbG9yKTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLmRvYy50ZXh0KHRoaXMuZXNjYXBlVGV4dCgpLCBhbGlnblBvaW50LnhMZWZ0LCBhbGlnblBvaW50LnlUb3AsIHRoaXMuYWxpZ24pO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZG9jLnNldFRleHRDb2xvcihvbGRUZXh0Q29sb3IpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZm9udFNpemUgPSBvbGRGb250U2l6ZTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIGFsaWduUG9pbnQocmVjdDogSVJlY3QpOiBJUG9pbnQge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeExlZnQ6IHRoaXMuY29udHJvbGxlci5pc1JUTCA/IHJlY3QueFJpZ2h0IDogcmVjdC54TGVmdCxcbiAgICAgICAgICAgIHlUb3A6IHJlY3QueVRvcCArIChyZWN0LnlCb3QgLSByZWN0LnlUb3ApIC8gMi4wXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9wZGZfcmVuZGVyL3BkZl90ZXh0LnRzIiwiaW1wb3J0IHsgSVBkZkJyaWNrLCBUcmFuc2xhdGVYRnVuY3Rpb24gfSBmcm9tICcuL3BkZl9icmljayc7XG5pbXBvcnQgeyBTdXJ2ZXlIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXJfc3VydmV5JztcblxuZXhwb3J0IGNsYXNzIENvbXBvc2l0ZUJyaWNrIGltcGxlbWVudHMgSVBkZkJyaWNrIHtcbiAgICBwcml2YXRlIGJyaWNrczogSVBkZkJyaWNrW10gPSBbXTtcbiAgICBwcml2YXRlIF94TGVmdDogbnVtYmVyO1xuICAgIHByaXZhdGUgX3hSaWdodDogbnVtYmVyO1xuICAgIHByaXZhdGUgX3lUb3A6IG51bWJlcjtcbiAgICBwcml2YXRlIF95Qm90OiBudW1iZXI7XG4gICAgcHVibGljIGlzUGFnZUJyZWFrOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKC4uLmJyaWNrczogSVBkZkJyaWNrW10pIHtcbiAgICAgICAgdGhpcy5feExlZnQgPSAwLjA7XG4gICAgICAgIHRoaXMuX3hSaWdodCA9IDAuMDtcbiAgICAgICAgdGhpcy5feVRvcCA9IDAuMDtcbiAgICAgICAgdGhpcy5feUJvdCA9IDAuMDtcbiAgICAgICAgdGhpcy5hZGRCcmljayguLi5icmlja3MpO1xuICAgIH1cbiAgICBnZXQgeExlZnQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX3hMZWZ0OyB9XG4gICAgc2V0IHhMZWZ0KHhMZWZ0OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5zaGlmdCh4TGVmdCAtIHRoaXMueExlZnQsIDAuMCwgMC4wLCAwLjApO1xuICAgICAgICB0aGlzLl94TGVmdCA9IHhMZWZ0O1xuICAgIH1cbiAgICBnZXQgeFJpZ2h0KCk6IG51bWJlciB7IHJldHVybiB0aGlzLl94UmlnaHQ7IH1cbiAgICBzZXQgeFJpZ2h0KHhSaWdodDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuc2hpZnQoMC4wLCB4UmlnaHQgLSB0aGlzLnhSaWdodCwgMC4wLCAwLjApO1xuICAgICAgICB0aGlzLl94UmlnaHQgPSB4UmlnaHQ7XG4gICAgfVxuICAgIGdldCB5VG9wKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl95VG9wOyB9XG4gICAgc2V0IHlUb3AoeVRvcDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuc2hpZnQoMC4wLCAwLjAsIHlUb3AgLSB0aGlzLnlUb3AsIDAuMCk7XG4gICAgICAgIHRoaXMuX3lUb3AgPSB5VG9wO1xuICAgIH1cbiAgICBnZXQgeUJvdCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5feUJvdDsgfVxuICAgIHNldCB5Qm90KHlCb3Q6IG51bWJlcikge1xuICAgICAgICB0aGlzLnNoaWZ0KDAuMCwgMC4wLCAwLjAsIHlCb3QgLSB0aGlzLnlCb3QpO1xuICAgICAgICB0aGlzLl95Qm90ID0geUJvdDtcbiAgICB9XG4gICAgcHJpdmF0ZSBzaGlmdChsZWZ0U2hpZnQ6IG51bWJlciwgcmlnaHRTaGlmdDogbnVtYmVyLFxuICAgICAgICB0b3BTaGlmdDogbnVtYmVyLCBib3RTaGlmdDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuYnJpY2tzLmZvckVhY2goKGJyaWNrOiBJUGRmQnJpY2spID0+IHtcbiAgICAgICAgICAgIGJyaWNrLnhMZWZ0ICs9IGxlZnRTaGlmdDtcbiAgICAgICAgICAgIGJyaWNrLnhSaWdodCArPSByaWdodFNoaWZ0O1xuICAgICAgICAgICAgYnJpY2sueVRvcCArPSB0b3BTaGlmdDtcbiAgICAgICAgICAgIGJyaWNrLnlCb3QgKz0gYm90U2hpZnQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0IHdpZHRoKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnhSaWdodCAtIHRoaXMueExlZnQ7XG4gICAgfVxuICAgIHB1YmxpYyBnZXQgaGVpZ2h0KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnlCb3QgLSB0aGlzLnlUb3A7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyByZW5kZXIoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLmJyaWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5icmlja3NbaV0ucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHVibGljIGdldCBpc0VtcHR5KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5icmlja3MubGVuZ3RoID09PSAwO1xuICAgIH1cbiAgICBwdWJsaWMgYWRkQnJpY2soLi4uYnJpY2tzOiBJUGRmQnJpY2tbXSkge1xuICAgICAgICBpZiAoYnJpY2tzLmxlbmd0aCAhPSAwKSB7XG4gICAgICAgICAgICB0aGlzLmJyaWNrcy5wdXNoKC4uLmJyaWNrcyk7XG4gICAgICAgICAgICBsZXQgbWVyZ2VSZWN0ID0gU3VydmV5SGVscGVyLm1lcmdlUmVjdHMoLi4udGhpcy5icmlja3MpO1xuICAgICAgICAgICAgdGhpcy5feExlZnQgPSBtZXJnZVJlY3QueExlZnQ7XG4gICAgICAgICAgICB0aGlzLl94UmlnaHQgPSBtZXJnZVJlY3QueFJpZ2h0O1xuICAgICAgICAgICAgdGhpcy5feVRvcCA9IG1lcmdlUmVjdC55VG9wO1xuICAgICAgICAgICAgdGhpcy5feUJvdCA9IG1lcmdlUmVjdC55Qm90O1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyB1bmZvbGQoKTogSVBkZkJyaWNrW10ge1xuICAgICAgICBjb25zdCB1bmZvbGRCcmlja3M6IElQZGZCcmlja1tdID0gW107XG4gICAgICAgIHRoaXMuYnJpY2tzLmZvckVhY2goKGJyaWNrOiBJUGRmQnJpY2spID0+IHtcbiAgICAgICAgICAgIHVuZm9sZEJyaWNrcy5wdXNoKC4uLmJyaWNrLnVuZm9sZCgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB1bmZvbGRCcmlja3M7XG4gICAgfVxuICAgIHRyYW5zbGF0ZVgoZnVuYzogVHJhbnNsYXRlWEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYnJpY2tzLmZvckVhY2goYnJpY2sgPT4gYnJpY2sudHJhbnNsYXRlWChmdW5jKSk7XG4gICAgICAgIGNvbnN0IHJlcyA9IGZ1bmModGhpcy54TGVmdCwgdGhpcy54UmlnaHQpO1xuICAgICAgICB0aGlzLl94TGVmdCA9IHJlcy54TGVmdDtcbiAgICAgICAgdGhpcy5feFJpZ2h0ID0gcmVzLnhSaWdodDtcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3BkZl9yZW5kZXIvcGRmX2NvbXBvc2l0ZS50cyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwge1wicm9vdFwiOlwiU3VydmV5XCIsXCJjb21tb25qczJcIjpcInN1cnZleS1jb3JlXCIsXCJjb21tb25qc1wiOlwic3VydmV5LWNvcmVcIixcImFtZFwiOlwic3VydmV5LWNvcmVcIn1cbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IHsgSVJlY3QsIElTaXplLCBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgSVF1ZXN0aW9uLCBRdWVzdGlvbiB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuXG5leHBvcnQgdHlwZSBUcmFuc2xhdGVYRnVuY3Rpb24gPSAoeExlZnQ6IG51bWJlciwgeFJpZ2h0IDogbnVtYmVyKSA9PiB7IHhMZWZ0OiBudW1iZXIsIHhSaWdodDogbnVtYmVyfTtcbmV4cG9ydCBpbnRlcmZhY2UgSVBkZkJyaWNrIGV4dGVuZHMgSVJlY3QsIElTaXplIHtcbiAgICByZW5kZXIoKTogUHJvbWlzZTx2b2lkPjtcbiAgICB1bmZvbGQoKTogSVBkZkJyaWNrW107XG4gICAgdHJhbnNsYXRlWChmdW5jOiBUcmFuc2xhdGVYRnVuY3Rpb24pOiB2b2lkO1xuICAgIGlzUGFnZUJyZWFrOiBib29sZWFuO1xufVxuLyoqXG4gKiBBbiBvYmplY3QgdGhhdCBkZXNjcmliZXMgYSBQREYgYnJpY2smbWRhc2g7YSBzaW1wbGUgZWxlbWVudCB3aXRoIHNwZWNpZmllZCBjb250ZW50LCBzaXplLCBhbmQgbG9jYXRpb24uIEJyaWNrcyBhcmUgZnVuZGFtZW50YWwgZWxlbWVudHMgdXNlZCB0byBjb25zdHJ1Y3QgYSBQREYgZG9jdW1lbnQuXG4gKlxuICogWW91IGNhbiBhY2Nlc3MgYFBkZkJyaWNrYCBvYmplY3RzIHdpdGhpbiBmdW5jdGlvbnMgdGhhdCBoYW5kbGUgYFN1cnZleVBERmAncyBbYG9uUmVuZGVyUXVlc3Rpb25gXShodHRwczovL3N1cnZleWpzLmlvL3BkZi1nZW5lcmF0b3IvZG9jdW1lbnRhdGlvbi9hcGktcmVmZXJlbmNlL3N1cnZleXBkZiNvblJlbmRlclF1ZXN0aW9uKSwgW2BvblJlbmRlclBhbmVsYF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9wZGYtZ2VuZXJhdG9yL2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9zdXJ2ZXlwZGYjb25SZW5kZXJQYW5lbCksIGFuZCBbYG9uUmVuZGVyUGFnZWBdKGh0dHBzOi8vc3VydmV5anMuaW8vcGRmLWdlbmVyYXRvci9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2Uvc3VydmV5cGRmI29uUmVuZGVyUGFnZSkgZXZlbnRzLlxuICpcbiAqIFtWaWV3IERlbW9dKGh0dHBzOi8vc3VydmV5anMuaW8vcGRmLWdlbmVyYXRvci9leGFtcGxlcy9hZGQtbWFya3VwLXRvLWN1c3RvbWl6ZS1wZGYtZm9ybXMvIChsaW5rU3R5bGUpKVxuICovXG5leHBvcnQgY2xhc3MgUGRmQnJpY2sgaW1wbGVtZW50cyBJUGRmQnJpY2sge1xuICAgIHByb3RlY3RlZCBfeExlZnQ6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgX3hSaWdodDogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBfeVRvcDogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBfeUJvdDogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogQW4gWC1jb29yZGluYXRlIGZvciB0aGUgbGVmdCBicmljayBlZGdlLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgeExlZnQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3hMZWZ0O1xuICAgIH1cbiAgICBwdWJsaWMgc2V0IHhMZWZ0KHZhbDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuc2V0WExlZnQodmFsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW4gWC1jb29yZGluYXRlIGZvciB0aGUgcmlnaHQgYnJpY2sgZWRnZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHhSaWdodCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5feFJpZ2h0O1xuICAgIH1cbiAgICBwdWJsaWMgc2V0IHhSaWdodCh2YWw6IG51bWJlcikge1xuICAgICAgICB0aGlzLnNldFhSaWdodCh2YWwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIFktY29vcmRpbmF0ZSBmb3IgdGhlIHRvcCBicmljayBlZGdlLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgeVRvcCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5feVRvcDtcbiAgICB9XG4gICAgcHVibGljIHNldCB5VG9wKHZhbDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuc2V0WVRvcCh2YWwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIFktY29vcmRpbmF0ZSBmb3IgdGhlIGJvdHRvbSBicmljayBlZGdlLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgeUJvdCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5feUJvdDtcbiAgICB9XG4gICAgcHVibGljIHNldCB5Qm90KHZhbDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuc2V0WUJvdHRvbSh2YWwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb250IHNpemUgaW4gcG9pbnRzLlxuICAgICAqXG4gICAgICogRGVmYXVsdCB2YWx1ZTogMTQgKGluaGVyaXRlZCBmcm9tIHRoZSBwYXJlbnQgUERGIGRvY3VtZW50KVxuICAgICAqL1xuICAgIHB1YmxpYyBmb250U2l6ZTogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIFRoZSBjb2xvciBvZiB0ZXh0IHdpdGhpbiB0aGUgYnJpY2suXG4gICAgICpcbiAgICAgKiBEZWZhdWx0IHZhbHVlOiBgXCIjNDA0MDQwXCJgXG4gICAgICovXG4gICAgcHVibGljIHRleHRDb2xvcjogc3RyaW5nID0gU3VydmV5SGVscGVyLlRFWFRfQ09MT1I7XG4gICAgcHVibGljIGZvcm1Cb3JkZXJDb2xvcjogc3RyaW5nID0gU3VydmV5SGVscGVyLkZPUk1fQk9SREVSX0NPTE9SO1xuICAgIHB1YmxpYyBpc1BhZ2VCcmVhazogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgcXVlc3Rpb246IElRdWVzdGlvbixcbiAgICAgICAgcHJvdGVjdGVkIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsIHJlY3Q6IElSZWN0KSB7XG4gICAgICAgIHRoaXMueExlZnQgPSByZWN0LnhMZWZ0O1xuICAgICAgICB0aGlzLnhSaWdodCA9IHJlY3QueFJpZ2h0O1xuICAgICAgICB0aGlzLnlUb3AgPSByZWN0LnlUb3A7XG4gICAgICAgIHRoaXMueUJvdCA9IHJlY3QueUJvdDtcbiAgICAgICAgdGhpcy5mb250U2l6ZSA9ICEhY29udHJvbGxlciA/XG4gICAgICAgICAgICBjb250cm9sbGVyLmZvbnRTaXplIDogRG9jQ29udHJvbGxlci5GT05UX1NJWkU7XG4gICAgfVxuICAgIHRyYW5zbGF0ZVgoZnVuYzogVHJhbnNsYXRlWEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGZ1bmModGhpcy54TGVmdCwgdGhpcy54UmlnaHQpO1xuICAgICAgICB0aGlzLnhMZWZ0ID0gcmVzLnhMZWZ0O1xuICAgICAgICB0aGlzLnhSaWdodCA9IHJlcy54UmlnaHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBicmljaydzIHdpZHRoIGluIHBpeGVscy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHdpZHRoKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnhSaWdodCAtIHRoaXMueExlZnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBicmljaydzIGhlaWdodCBpbiBwaXhlbHMuXG4gICAgICovXG4gICAgcHVibGljIGdldCBoZWlnaHQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueUJvdCAtIHRoaXMueVRvcDtcbiAgICB9XG4gICAgcHJvdGVjdGVkIGdldFNob3VsZFJlbmRlclJlYWRPbmx5KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gU3VydmV5SGVscGVyLnNob3VsZFJlbmRlclJlYWRPbmx5KHRoaXMucXVlc3Rpb24sIHRoaXMuY29udHJvbGxlcik7XG4gICAgfVxuICAgIHB1YmxpYyBhZnRlclJlbmRlckNhbGxiYWNrOiAoKSA9PiB2b2lkO1xuICAgIHB1YmxpYyBhc3luYyByZW5kZXIoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICh0aGlzLmdldFNob3VsZFJlbmRlclJlYWRPbmx5KCkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyUmVhZE9ubHkoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGF3YWl0IHRoaXMucmVuZGVySW50ZXJhY3RpdmUoKTtcbiAgICAgICAgdGhpcy5hZnRlclJlbmRlckNhbGxiYWNrICYmIHRoaXMuYWZ0ZXJSZW5kZXJDYWxsYmFjaygpO1xuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgcmVuZGVySW50ZXJhY3RpdmUoKTogUHJvbWlzZTx2b2lkPiB7IH1cbiAgICBwdWJsaWMgYXN5bmMgcmVuZGVyUmVhZE9ubHkoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucmVuZGVySW50ZXJhY3RpdmUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWxsb3dzIHlvdSB0byBnZXQgYSBmbGF0IGFycmF5IG9mIG5lc3RlZCBQREYgYnJpY2tzLlxuICAgICAqIEByZXR1cm5zIEEgZmxhdCBhcnJheSBvZiBuZXN0ZWQgUERGIGJyaWNrcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdW5mb2xkKCk6IElQZGZCcmlja1tdIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzXTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIGdldENvcnJlY3RlZFRleHQodmFsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250cm9sbGVyLmlzUlRMID8gKHZhbCB8fCAnJykuc3BsaXQoJycpLnJldmVyc2UoKS5qb2luKCcnKTogdmFsO1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgc2V0WExlZnQodmFsOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5feExlZnQgPSB2YWw7XG4gICAgfVxuICAgIHByb3RlY3RlZCBzZXRYUmlnaHQodmFsOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5feFJpZ2h0ID0gdmFsO1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgc2V0WVRvcCh2YWw6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLl95VG9wID0gdmFsO1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgc2V0WUJvdHRvbSh2YWw6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLl95Qm90ID0gdmFsO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9wZGZfcmVuZGVyL3BkZl9icmljay50cyIsImltcG9ydCB7IGpzUERGLCBqc1BERk9wdGlvbnMgfSBmcm9tICdqc3BkZic7XG5pbXBvcnQgeyBJSFRNTFJlbmRlclR5cGUgfSBmcm9tICcuL2ZsYXRfbGF5b3V0L2ZsYXRfaHRtbCc7XG5pbXBvcnQgeyBTdXJ2ZXlIZWxwZXIgfSBmcm9tICcuL2hlbHBlcl9zdXJ2ZXknO1xuaW1wb3J0IHsgTG9jYWxpemFibGVTdHJpbmcgfSBmcm9tICdzdXJ2ZXktY29yZSc7XG4vLyBpbXBvcnQgRm9udHMgZnJvbSAnLi9mb250cyc7XG5pbXBvcnQgc2V0UmFkaW9BcHBlYXJhbmNlIGZyb20gJy4vanNwZGZfcGx1Z2lucy9hY3JvZm9ybSc7XG5pbXBvcnQgJy4vanNwZGZfcGx1Z2lucy9hY3JvZm9ybS5qcyc7XG5pbXBvcnQgJy4vanNwZGZfcGx1Z2lucy9mcm9tX2h0bWwuanMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElQb2ludCB7XG4gICAgLyoqXG4gICAgICogQW4gWC1jb29yZGluYXRlIGZvciB0aGUgbGVmdCBlbGVtZW50IGVkZ2UuXG4gICAgICovXG4gICAgeExlZnQ6IG51bWJlcjtcbiAgICAvKipcbiAgICAgKiBBIFktY29vcmRpbmF0ZSBmb3IgdGhlIHRvcCBlbGVtZW50IGVkZ2UuXG4gICAgICovXG4gICAgeVRvcDogbnVtYmVyO1xufVxuLyoqXG4gKiBBbiBpbnRlcmZhY2UgdGhhdCBkZXNjcmliZXMgYSByZWN0YW5nbGUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVJlY3QgZXh0ZW5kcyBJUG9pbnQge1xuICAgIC8qKlxuICAgICAqIEFuIFgtY29vcmRpbmF0ZSBmb3IgdGhlIHJpZ2h0IGVsZW1lbnQgZWRnZS5cbiAgICAgKi9cbiAgICB4UmlnaHQ6IG51bWJlcjtcbiAgICAvKipcbiAgICAgKiBBIFktY29vcmRpbmF0ZSBmb3IgdGhlIGJvdHRvbSBlbGVtZW50IGVkZ2UuXG4gICAgICovXG4gICAgeUJvdDogbnVtYmVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBJU2l6ZSB7XG4gICAgd2lkdGg6IG51bWJlcjtcbiAgICBoZWlnaHQ6IG51bWJlcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSU1hcmdpbkxSIHtcbiAgICAvKipcbiAgICAgKiBBIGxlZnQgbWFyZ2luLlxuICAgICAqL1xuICAgIGxlZnQ/OiBudW1iZXI7XG4gICAgLyoqXG4gICAgICogQSByaWdodCBtYXJnaW4uXG4gICAgICovXG4gICAgcmlnaHQ/OiBudW1iZXI7XG59XG4vKipcbiAqIEFuIGludGVyZmFjZSB0aGF0IGRlc2NyaWJlcyBtYXJnaW5zLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElNYXJnaW4gZXh0ZW5kcyBJTWFyZ2luTFIge1xuICAgIC8qKlxuICAgICAqIEEgdG9wIG1hcmdpbi5cbiAgICAgKi9cbiAgICB0b3A/OiBudW1iZXI7XG4gICAgLyoqXG4gICAgICogQSBib3R0b20gbWFyZ2luLlxuICAgICAqL1xuICAgIGJvdD86IG51bWJlcjtcbn1cbi8qKlxuICogUERGIGRvY3VtZW50IGNvbmZpZ3VyYXRpb24uIFBhc3MgaXQgYXMgdGhlIHNlY29uZCBhcmd1bWVudCB0byB0aGUgYFN1cnZleVBERmAgY29uc3RydWN0b3I6XG4gKlxuICogYGBganNcbiAqIGNvbnN0IHN1cnZleVBkZiA9IG5ldyBTdXJ2ZXlQREYuU3VydmV5UERGKHN1cnZleUpzb24sIHBkZkRvY09wdGlvbnMpO1xuICpcbiAqIC8vIEluIG1vZHVsYXIgYXBwbGljYXRpb25zOlxuICogaW1wb3J0IHsgU3VydmV5UERGIH0gZnJvbSBcInN1cnZleS1wZGZcIjtcbiAqIGNvbnN0IHN1cnZleVBkZiA9IG5ldyBTdXJ2ZXlQREYoc3VydmV5SnNvbiwgcGRmRG9jT3B0aW9ucyk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJRG9jT3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogUGFnZSBvcmllbnRhdGlvbi5cbiAgICAgKlxuICAgICAqIFBvc3NpYmxlIHZhbHVlczpcbiAgICAgKlxuICAgICAqIC0gYFwicFwiYCAoZGVmYXVsdCkgLSBQb3J0cmFpdCBvcmllbnRhdGlvbi5cbiAgICAgKiAtIGBcImxcImAgLSBMYW5kc2NhcGUgb3JpZW50YXRpb24uXG4gICAgICpcbiAgICAgKiBAc2VlIGZvcm1hdFxuICAgICAqL1xuICAgIG9yaWVudGF0aW9uPzogJ3AnIHwgJ2wnO1xuXG4gICAgLyoqXG4gICAgICogUGFnZSBmb3JtYXQuXG4gICAgICpcbiAgICAgKiBQb3NzaWJsZSB2YWx1ZXM6XG4gICAgICpcbiAgICAgKiAtIGBcImEwXCJgIC0gYFwiYTEwXCJgIChgXCJhNFwiYCBpcyBkZWZhdWx0KVxuICAgICAqIC0gYFwiYjBcImAgLSBgXCJiMTBcImBcbiAgICAgKiAtIGBcImMwXCJgIC0gYFwiYzEwXCJgXG4gICAgICogLSBgXCJkbFwiYFxuICAgICAqIC0gYFwibGV0dGVyXCJgXG4gICAgICogLSBgXCJnb3Zlcm5tZW50LWxldHRlclwiYFxuICAgICAqIC0gYFwibGVnYWxcImBcbiAgICAgKiAtIGBcImp1bmlvci1sZWdhbFwiYFxuICAgICAqIC0gYFwibGVkZ2VyXCJgXG4gICAgICogLSBgXCJ0YWJsb2lkXCJgXG4gICAgICogLSBgXCJjcmVkaXQtY2FyZFwiYFxuICAgICAqIC0gQXJyYXk8bnVtYmVyPiAtIGN1c3RvbSBwYWdlIHNpemUgaW4gbWlsbGltZXRlcnMsIGZvciBleGFtcGxlLCBgWzIxMCwgMjk3XWAuXG4gICAgICpcbiAgICAgKiBAc2VlIG9yaWVudGF0aW9uXG4gICAgICovXG4gICAgZm9ybWF0Pzogc3RyaW5nIHwgbnVtYmVyW107XG5cbiAgICAvKipcbiAgICAgKiBGb250IHNpemUgaW4gcG9pbnRzLlxuICAgICAqXG4gICAgICogRGVmYXVsdCB2YWx1ZTogMTRcbiAgICAgKlxuICAgICAqIEBzZWUgZm9udE5hbWVcbiAgICAgKi9cbiAgICBmb250U2l6ZT86IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIEZvbnQgbmFtZS5cbiAgICAgKlxuICAgICAqIFBvc3NpYmxlIHZhbHVlczpcbiAgICAgKlxuICAgICAqIC0gYFwiSGVsdmV0aWNhXCJgIChkZWZhdWx0KVxuICAgICAqIC0gYFwiQ291cmllclwiYFxuICAgICAqIC0gYFwiVGltZXNcImBcbiAgICAgKiAtIGBcIlN5bWJvbFwiYFxuICAgICAqIC0gYFwiWmFwZkRpbmdiYXRzXCJgXG4gICAgICogLSBbQ3VzdG9tIGZvbnQgbmFtZV0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9Eb2N1bWVudGF0aW9uL1BkZi1FeHBvcnQ/aWQ9Q3VzdG9taXphdGlvbi1DaGFuZ2VGb250cyN1c2UtY3VzdG9tLWZvbnQpXG4gICAgICpcbiAgICAgKiBbVmlldyBEZW1vXShodHRwczovL3N1cnZleWpzLmlvL3BkZi1nZW5lcmF0b3IvZXhhbXBsZXMvY2hhbmdlLWZvbnQtaW4tcGRmLWZvcm0vIChsaW5rU3R5bGUpKVxuICAgICAqIEBzZWUgZm9udFNpemVcbiAgICAgKi9cbiAgICBmb250TmFtZT86IHN0cmluZztcblxuICAgIGJhc2U2NE5vcm1hbD86IHN0cmluZztcbiAgICBiYXNlNjRCb2xkPzogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHRvIGFwcGx5IGEgY3VzdG9tIGZvbnQgdG8gW0hUTUwgcXVlc3Rpb25zXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9leGFtcGxlcy9xdWVzdGlvbnR5cGUtaHRtbC8pLlxuICAgICAqXG4gICAgICogRGVmYXVsdCB2YWx1ZTogYGZhbHNlYFxuICAgICAqXG4gICAgICogW1ZpZXcgRGVtb10oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9wZGYtZ2VuZXJhdG9yL2V4YW1wbGVzL2NoYW5nZS1mb250LWluLXBkZi1mb3JtLyAobGlua1N0eWxlKSlcbiAgICAgKiBAc2VlIGh0bWxSZW5kZXJBc1xuICAgICAqL1xuICAgIHVzZUN1c3RvbUZvbnRJbkh0bWw/OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogUGFnZSBtYXJnaW5zLiBTZXQgdGhpcyBwcm9wZXJ0eSB0byBhbiBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIGZpZWxkczogYHRvcGAsIGBib3RgLCBgbGVmdGAsIGByaWdodGAuXG4gICAgICovXG4gICAgbWFyZ2lucz86IElNYXJnaW47XG5cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgaG93IHRvIHJlbmRlciBbSFRNTCBxdWVzdGlvbnNdKGh0dHBzOi8vc3VydmV5anMuaW8vRG9jdW1lbnRhdGlvbi9MaWJyYXJ5P2lkPXF1ZXN0aW9uaHRtbG1vZGVsKSBpbnRvIFBERi5cbiAgICAgKlxuICAgICAqIFBvc3NpYmxlIHZhbHVlczpcbiAgICAgKlxuICAgICAqIC0gYFwic3RhbmRhcmRcImAgLSBSZW5kZXIgSFRNTCBxdWVzdGlvbnMgYXMgc2VsZWN0YWJsZSB0ZXh0LlxuICAgICAqIC0gYFwiaW1hZ2VcImAgLSBSZW5kZXIgSFRNTCBxdWVzdGlvbnMgYXMgaW1hZ2VzLlxuICAgICAqIC0gYFwiYXV0b1wiYCAoZGVmYXVsdCkgLSBTZWxlY3QgYmV0d2VlbiB0aGUgYFwic3RhbmRhcmRcImAgYW5kIGBcImltYWdlXCJgIG1vZGVzIGF1dG9tYXRpY2FsbHkgYmFzZWQgb24gdGhlIEhUTUwgY29udGVudC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBwcm9wZXJ0eSBmb3IgYW4gaW5kaXZpZHVhbCBIVE1MIHF1ZXN0aW9uLiBTZXQgdGhlIHF1ZXN0aW9uJ3MgYHJlbmRlckFzYCBwcm9wZXJ0eSB0byBgXCJzdGFuZGFyZFwiYCBvciBgXCJpbWFnZVwiYCBpbiB0aGUgc3VydmV5IEpTT04gc2NoZW1hLlxuICAgICAqIEBzZWUgdXNlQ3VzdG9tRm9udEluSHRtbFxuICAgICAqL1xuICAgIGh0bWxSZW5kZXJBcz86IElIVE1MUmVuZGVyVHlwZTtcblxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyBob3cgdG8gcmVuZGVyIFtNYXRyaXhdKGh0dHBzOi8vc3VydmV5anMuaW8vRG9jdW1lbnRhdGlvbi9MaWJyYXJ5P2lkPXF1ZXN0aW9ubWF0cml4bW9kZWwpLCBbTWF0cml4IERyb3Bkb3duXShodHRwczovL3N1cnZleWpzLmlvL0RvY3VtZW50YXRpb24vTGlicmFyeT9pZD1xdWVzdGlvbm1hdHJpeGRyb3Bkb3dubW9kZWwpLCBhbmQgW01hdHJpeCBEeW5hbWljXShodHRwczovL3N1cnZleWpzLmlvL0RvY3VtZW50YXRpb24vTGlicmFyeT9pZD1xdWVzdGlvbm1hdHJpeGR5bmFtaWNtb2RlbCkgcXVlc3Rpb25zIGludG8gUERGLlxuICAgICAqXG4gICAgICogUG9zc2libGUgdmFsdWVzOlxuICAgICAqXG4gICAgICogLSBgXCJsaXN0XCJgIC0gUmVuZGVyIG1hdHJpeC1saWtlIHF1ZXN0aW9ucyBhcyBsaXN0cy5cbiAgICAgKiAtIGBcImF1dG9cImAgKGRlZmF1bHQpIC0gUmVuZGVyIG1hdHJpeC1saWtlIHF1ZXN0aW9ucyBhcyB0YWJsZXMgaWYgdGhleSBmaXQgaW50byB0aGUgYXZhaWxhYmxlIHNwYWNlLiBPdGhlcndpc2UsIHJlbmRlciB0aGUgcXVlc3Rpb25zIGFzIGxpc3RzLlxuICAgICAqXG4gICAgICogWW91IGNhbiBvdmVycmlkZSB0aGlzIHByb3BlcnR5IGZvciBhbiBpbmRpdmlkdWFsIG1hdHJpeC1saWtlIHF1ZXN0aW9uLiBTZXQgdGhlIHF1ZXN0aW9uJ3MgYHJlbmRlckFzYCBwcm9wZXJ0eSB0byBgXCJsaXN0XCJgIGluIHRoZSBzdXJ2ZXkgSlNPTiBzY2hlbWEuXG4gICAgICovXG4gICAgbWF0cml4UmVuZGVyQXM/OiAnYXV0bycgfCAnbGlzdCc7XG4gICAgdXNlTGVnYWN5Qm9vbGVhblJlbmRlcmluZz86IGJvb2xlYW47XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIGhvdyB0byByZW5kZXIgcmVhZC1vbmx5IHF1ZXN0aW9ucy5cbiAgICAgKlxuICAgICAqIFBvc3NpYmxlIHZhbHVlczpcbiAgICAgKlxuICAgICAqIC0gYFwidGV4dFwiYCAtIFJlbmRlciByZWFkLW9ubHkgcXVlc3Rpb25zIGFzIHBsYWluIHRleHQgYW5kIGN1c3RvbSBwcmltaXRpdmVzLlxuICAgICAqIC0gYFwiYWNyb2Zvcm1cImAgLSBVc2UgQWRvYmUgQWNyb0Zvcm1zIHRvIHJlbmRlciBxdWVzdGlvbnMgdGhhdCBzdXBwb3J0IHRoZW0gYXMgaW50ZXJhY3RpdmUgZm9ybSBlbGVtZW50cyBzd2l0Y2hlZCB0byB0aGVpciBuYXRpdmUgcmVhZC1vbmx5IHN0YXRlLiBPdGhlciBxdWVzdGlvbnMgYXJlIHJlbmRlcmVkIGluIGBcInRleHRcImAgbW9kZS5cbiAgICAgKiAtIGBcImF1dG9cImAgKGRlZmF1bHQpIC0gUHJlZmVyIHRoZSBgXCJ0ZXh0XCJgIG1vZGUgYnV0IHVzZSBgXCJhY3JvZm9ybVwiYCBmb3IgW0ZpbGUgVXBsb2FkXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvZmlsZS1tb2RlbCkgcXVlc3Rpb25zIGFuZCBsaW5rcy5cbiAgICAgKi9cbiAgICByZWFkb25seVJlbmRlckFzPzogJ2F1dG8nIHwgJ3RleHQnIHwgJ2Fjcm9mb3JtJztcblxuICAgIHRleHRGaWVsZFJlbmRlckFzPzogJ3NpbmdsZUxpbmUnIHwgJ211bHRpTGluZSc7XG5cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgd2hldGhlciB0byBjb21wcmVzcyB0aGUgUERGIGRvY3VtZW50LiBDb21wcmVzc2VkIGRvY3VtZW50cyBkbyBub3Qgc3VwcG9ydCBbY3VzdG9tIGZvbnRzXShodHRwczovL3N1cnZleWpzLmlvL0RvY3VtZW50YXRpb24vUGRmLUV4cG9ydD9pZD1DdXN0b21pemF0aW9uLUNoYW5nZUZvbnRzI3VzZS1jdXN0b20tZm9udCkuXG4gICAgICpcbiAgICAgKiBEZWZhdWx0IHZhbHVlOiBgZmFsc2VgXG4gICAgICovXG4gICAgY29tcHJlc3M/OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHdoZXRoZXIgdG8gYXBwbHkgYGltYWdlRml0YCBzZXR0aW5ncyBzcGVjaWZpZWQgaW4gdGhlIHN1cnZleSBKU09OIHNjaGVtYSB0byBleHBvcnRlZCBpbWFnZXMuXG4gICAgICpcbiAgICAgKiBEZWZhdWx0IHZhbHVlOiBgZmFsc2VgXG4gICAgICpcbiAgICAgKiBUaGlzIHByb3BlcnR5IGFwcGxpZXMgdGhlIGZvbGxvd2luZyBzZXR0aW5nczpcbiAgICAgKlxuICAgICAqIC0gW2BpbWFnZUZpdGBdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9hZGQtaW1hZ2UtdG8tc3VydmV5I2ltYWdlRml0KSB0byBleHBvcnRlZCBbSW1hZ2VdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9hZGQtaW1hZ2UtdG8tc3VydmV5KSBxdWVzdGlvbnNcbiAgICAgKiAtIFtgaW1hZ2VGaXRgXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvaW1hZ2UtcGlja2VyLXF1ZXN0aW9uLW1vZGVsI2ltYWdlRml0KSB0byBleHBvcnRlZCBbSW1hZ2UgUGlja2VyXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvaW1hZ2UtcGlja2VyLXF1ZXN0aW9uLW1vZGVsKSBxdWVzdGlvbnNcbiAgICAgKiAtIFtgbG9nb0ZpdGBdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9zdXJ2ZXktZGF0YS1tb2RlbCNsb2dvRml0KSB0byBhbiBleHBvcnRlZCBsb2dvIGluIHRoZSBzdXJ2ZXkgaGVhZGVyXG4gICAgICpcbiAgICAgKiBJZiB5b3UgZW5hYmxlIHRoZSBgYXBwbHlJbWFnZUZpdGAgcHJvcGVydHksIHRoZSBxdWFsaXR5IG9mIGltYWdlcyBtYXkgYmUgbG93ZXIgYmVjYXVzZSB0aGV5IHBhc3MgdGhyb3VnaCBzZXZlcmFsIGNvbnZlcnNpb25zLiBJZiBgYXBwbHlJbWFnZUZpdGAgaXMgZGlzYWJsZWQsIGV4cG9ydGVkIGltYWdlcyBmaWxsIHRoZSBlbnRpcmUgY29udGFpbmVyIGFuZCBkbyBub3QgcHJlc2VydmUgdGhlaXIgYXNwZWN0IHJhdGlvLCBidXQgdGhlaXIgcXVhbGl0eSByZW1haW5zIHRoZSBzYW1lIGJlY2F1c2UgdGhleSBhcmUgZXhwb3J0ZWQgYXMgaXMuXG4gICAgICovXG4gICAgYXBwbHlJbWFnZUZpdD86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgd2hldGhlciB0aGUgUERGIGRvY3VtZW50IGNvbnRhaW5zIHRleHQgaW4gcmlnaHQtdG8tbGVmdCBsYW5ndWFnZXMuXG4gICAgICpcbiAgICAgKiBEZWZhdWx0IHZhbHVlOiBgZmFsc2VgXG4gICAgICovXG4gICAgaXNSVEw/OiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHRvIGluY2x1ZGUgb25seSBzZWxlY3RlZCBjaG9pY2VzIHdoZW4gUERGIEdlbmVyYXRvciByZW5kZXJzIGEgW011bHRpLVNlbGVjdCBEcm9wZG93biAoVGFnIEJveCldKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2V4YW1wbGVzL2hvdy10by1jcmVhdGUtbXVsdGlzZWxlY3QtdGFnLWJveC8pIHF1ZXN0aW9uLlxuICAgICAqXG4gICAgICogRGVmYXVsdCB2YWx1ZTogYGZhbHNlYCAoaW5jbHVkZSBhbGwgY2hvaWNlcylcbiAgICAgKi9cbiAgICB0YWdib3hTZWxlY3RlZENob2ljZXNPbmx5PzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIERvY09wdGlvbnMgaW1wbGVtZW50cyBJRG9jT3B0aW9ucyB7XG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBNTV9UT19QVCA9IDcyIC8gMjUuNDtcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEZPTlRfU0laRSA9IDE0O1xuICAgIHByb3RlY3RlZCBfb3JpZW50YXRpb246ICdsJyB8ICdwJztcbiAgICBwcm90ZWN0ZWQgX2Zvcm1hdDogc3RyaW5nIHwgbnVtYmVyW107XG4gICAgcHJvdGVjdGVkIF9mb250U2l6ZTogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBfZm9udE5hbWU6IHN0cmluZztcbiAgICBwdWJsaWMgc3RhdGljIFNFR09FX05PUk1BTDogc3RyaW5nO1xuICAgIHB1YmxpYyBzdGF0aWMgU0VHT0VfQk9MRDogc3RyaW5nO1xuICAgIHByb3RlY3RlZCBfYmFzZTY0Tm9ybWFsOiBzdHJpbmcgPSB1bmRlZmluZWQ7XG4gICAgcHJvdGVjdGVkIF9iYXNlNjRCb2xkOiBzdHJpbmcgPSB1bmRlZmluZWQ7XG4gICAgcHJvdGVjdGVkIF91c2VDdXN0b21Gb250SW5IdG1sOiBib29sZWFuO1xuICAgIHByb3RlY3RlZCBfbWFyZ2luczogSU1hcmdpbjtcbiAgICBwcm90ZWN0ZWQgX2h0bWxSZW5kZXJBczogSUhUTUxSZW5kZXJUeXBlO1xuICAgIHByb3RlY3RlZCBfbWF0cml4UmVuZGVyQXM6ICdhdXRvJyB8ICdsaXN0JztcbiAgICBwcm90ZWN0ZWQgX3JlYWRvbmx5UmVuZGVyQXM6ICdhdXRvJyB8ICd0ZXh0JyB8ICdhY3JvZm9ybSc7XG4gICAgcHJvdGVjdGVkIF9jb21wcmVzczogYm9vbGVhbjtcbiAgICBwcm90ZWN0ZWQgX2FwcGx5SW1hZ2VGaXQ6IGJvb2xlYW47XG4gICAgcHJvdGVjdGVkIF91c2VMZWdhY3lCb29sZWFuUmVuZGVyaW5nOiBib29sZWFuXG4gICAgcHJvdGVjdGVkIF9pc1JUTDogYm9vbGVhbjtcbiAgICBwcm90ZWN0ZWQgX3RhZ2JveFNlbGVjdGVkQ2hvaWNlc09ubHk6IGJvb2xlYW47XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKG9wdGlvbnM6IElEb2NPcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5vcmllbnRhdGlvbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5mb3JtYXQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5mb3JtYXRbMF0gPCBvcHRpb25zLmZvcm1hdFsxXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX29yaWVudGF0aW9uID0gJ3AnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB0aGlzLl9vcmllbnRhdGlvbiA9ICdsJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHRoaXMuX29yaWVudGF0aW9uID0gb3B0aW9ucy5vcmllbnRhdGlvbjtcbiAgICAgICAgdGhpcy5fZm9ybWF0ID0gb3B0aW9ucy5mb3JtYXQgfHwgJ2E0JztcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5fZm9ybWF0KSkge1xuICAgICAgICAgICAgdGhpcy5fZm9ybWF0ID0gdGhpcy5fZm9ybWF0Lm1hcChmID0+IGYgKiBEb2NPcHRpb25zLk1NX1RPX1BUKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9mb250U2l6ZSA9IG9wdGlvbnMuZm9udFNpemUgfHwgRG9jT3B0aW9ucy5GT05UX1NJWkU7XG4gICAgICAgIGlmKCFvcHRpb25zLmZvbnROYW1lKSB7XG4gICAgICAgICAgICBpZighRG9jT3B0aW9ucy5TRUdPRV9CT0xEICYmICFEb2NPcHRpb25zLlNFR09FX05PUk1BTCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ZvbnROYW1lID0gU3VydmV5SGVscGVyLlNUQU5EQVJEX0ZPTlQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ZvbnROYW1lID0gJ3NlZ29lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2ZvbnROYW1lID0gb3B0aW9ucy5mb250TmFtZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHR5cGVvZiBvcHRpb25zLmZvbnROYW1lICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgKHR5cGVvZiBvcHRpb25zLmJhc2U2NE5vcm1hbCAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5iYXNlNjRCb2xkICE9PSAndW5kZWZpbmVkJykpKSB7XG4gICAgICAgICAgICB0aGlzLl9iYXNlNjROb3JtYWwgPSBvcHRpb25zLmJhc2U2NE5vcm1hbCB8fCBvcHRpb25zLmJhc2U2NEJvbGQ7XG4gICAgICAgICAgICB0aGlzLl9iYXNlNjRCb2xkID0gb3B0aW9ucy5iYXNlNjRCb2xkIHx8IG9wdGlvbnMuYmFzZTY0Tm9ybWFsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZm9udE5hbWUgPT09ICdzZWdvZScpIHtcbiAgICAgICAgICAgIC8vIHRoaXMuX2Jhc2U2NE5vcm1hbCA9IEZvbnRzLlNFR09FX05PUk1BTDtcbiAgICAgICAgICAgIC8vIHRoaXMuX2Jhc2U2NEJvbGQgPSBGb250cy5TRUdPRV9CT0xEO1xuICAgICAgICAgICAgdGhpcy5fYmFzZTY0Tm9ybWFsID0gRG9jT3B0aW9ucy5TRUdPRV9OT1JNQUw7XG4gICAgICAgICAgICB0aGlzLl9iYXNlNjRCb2xkID0gRG9jT3B0aW9ucy5TRUdPRV9CT0xEO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21hcmdpbnMgPSBTdXJ2ZXlIZWxwZXIuY2xvbmUob3B0aW9ucy5tYXJnaW5zKTtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9tYXJnaW5zID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5fbWFyZ2lucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fbWFyZ2lucy50b3AgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLl9tYXJnaW5zLnRvcCA9IDEwLjA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9tYXJnaW5zLmJvdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuX21hcmdpbnMuYm90ID0gMTAuMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuX21hcmdpbnMubGVmdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuX21hcmdpbnMubGVmdCA9IDEwLjA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9tYXJnaW5zLnJpZ2h0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5fbWFyZ2lucy5yaWdodCA9IDEwLjA7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5fbWFyZ2lucykuZm9yRWFjaCgobmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAoPGFueT50aGlzLl9tYXJnaW5zKVtuYW1lXSA9ICg8YW55PnRoaXMuX21hcmdpbnMpW25hbWVdICogRG9jT3B0aW9ucy5NTV9UT19QVDtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2h0bWxSZW5kZXJBcyA9IG9wdGlvbnMuaHRtbFJlbmRlckFzIHx8ICdhdXRvJztcbiAgICAgICAgdGhpcy5fbWF0cml4UmVuZGVyQXMgPSBvcHRpb25zLm1hdHJpeFJlbmRlckFzIHx8ICdhdXRvJztcbiAgICAgICAgdGhpcy5fcmVhZG9ubHlSZW5kZXJBcyA9IG9wdGlvbnMucmVhZG9ubHlSZW5kZXJBcyB8fCAnYXV0byc7XG4gICAgICAgIHRoaXMuX2NvbXByZXNzID0gb3B0aW9ucy5jb21wcmVzcyB8fCBmYWxzZTtcbiAgICAgICAgdGhpcy5fYXBwbHlJbWFnZUZpdCA9IG9wdGlvbnMuYXBwbHlJbWFnZUZpdCB8fCBmYWxzZTtcbiAgICAgICAgdGhpcy5fdXNlTGVnYWN5Qm9vbGVhblJlbmRlcmluZyA9IG9wdGlvbnMudXNlTGVnYWN5Qm9vbGVhblJlbmRlcmluZyB8fCBmYWxzZTtcbiAgICAgICAgdGhpcy5faXNSVEwgPSBvcHRpb25zLmlzUlRMIHx8IGZhbHNlO1xuICAgICAgICB0aGlzLl90YWdib3hTZWxlY3RlZENob2ljZXNPbmx5ID0gb3B0aW9ucy50YWdib3hTZWxlY3RlZENob2ljZXNPbmx5IHx8IGZhbHNlO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0IGxlZnRUb3BQb2ludCgpOiBJUG9pbnQge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeExlZnQ6IHRoaXMubWFyZ2lucy5sZWZ0LFxuICAgICAgICAgICAgeVRvcDogdGhpcy5tYXJnaW5zLnRvcFxuICAgICAgICB9O1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0IGZvbnRTaXplKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb250U2l6ZTtcbiAgICB9XG4gICAgcHVibGljIGdldCBmb250TmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9udE5hbWU7XG4gICAgfVxuICAgIHB1YmxpYyBnZXQgYmFzZTY0Tm9ybWFsKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iYXNlNjROb3JtYWw7XG4gICAgfVxuICAgIHB1YmxpYyBnZXQgYmFzZTY0Qm9sZCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmFzZTY0Qm9sZDtcbiAgICB9XG4gICAgcHVibGljIGdldCB1c2VDdXN0b21Gb250SW5IdG1sKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXNlQ3VzdG9tRm9udEluSHRtbDtcbiAgICB9XG4gICAgcHVibGljIGdldCBtYXJnaW5zKCk6IElNYXJnaW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFyZ2lucztcbiAgICB9XG4gICAgcHVibGljIGdldCBmb3JtYXQoKTogc3RyaW5nIHwgbnVtYmVyW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybWF0O1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0IG9yaWVudGF0aW9uKCk6ICdsJyB8ICdwJyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcmllbnRhdGlvbjtcbiAgICB9XG4gICAgcHVibGljIGdldCBodG1sUmVuZGVyQXMoKTogSUhUTUxSZW5kZXJUeXBlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2h0bWxSZW5kZXJBcztcbiAgICB9XG4gICAgcHVibGljIGdldCBtYXRyaXhSZW5kZXJBcygpOiAnYXV0bycgfCAnbGlzdCcge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWF0cml4UmVuZGVyQXM7XG4gICAgfVxuICAgIHB1YmxpYyBnZXQgcmVhZG9ubHlSZW5kZXJBcygpOiAnYXV0bycgfCAndGV4dCcgfCAnYWNyb2Zvcm0nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlYWRvbmx5UmVuZGVyQXM7XG4gICAgfVxuICAgIHB1YmxpYyBnZXQgY29tcHJlc3MoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb21wcmVzcztcbiAgICB9XG4gICAgcHVibGljIGdldCBhcHBseUltYWdlRml0KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlJbWFnZUZpdDtcbiAgICB9XG4gICAgcHVibGljIGdldCB1c2VMZWdhY3lCb29sZWFuUmVuZGVyaW5nKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXNlTGVnYWN5Qm9vbGVhblJlbmRlcmluZztcbiAgICB9XG4gICAgcHVibGljIGdldCBpc1JUTCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzUlRMO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0IHRhZ2JveFNlbGVjdGVkQ2hvaWNlc09ubHkoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YWdib3hTZWxlY3RlZENob2ljZXNPbmx5O1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGUgYERvY0NvbnRyb2xsZXJgIG9iamVjdCBpbmNsdWRlcyBhbiBBUEkgdGhhdCBhbGxvd3MgeW91IHRvIGNvbmZpZ3VyZSB0aGUgcmVzdWx0aW5nIFBERiBkb2N1bWVudC4gWW91IGNhbiBhY2Nlc3MgdGhpcyBvYmplY3Qgd2l0aGluIGZ1bmN0aW9ucyB0aGF0IGhhbmRsZSB0aGUgYFN1cnZleVBERmAncyBbYG9uUmVuZGVyLi4uYF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9wZGYtZ2VuZXJhdG9yL2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9zdXJ2ZXlwZGYjb25SZW5kZXJGb290ZXIpIGV2ZW50cy5cbiAqXG4gKiBbVmlldyBEZW1vXShodHRwczovL3N1cnZleWpzLmlvL3BkZi1nZW5lcmF0b3IvZXhhbXBsZXMvaG93LXRvLXVzZS1hZG9ybmVycy1pbi1wZGYtZm9ybXMvIChsaW5rU3R5bGUpKVxuICovXG5leHBvcnQgY2xhc3MgRG9jQ29udHJvbGxlciBleHRlbmRzIERvY09wdGlvbnMge1xuICAgIHByaXZhdGUgX2RvYzoganNQREY7XG4gICAgcHJpdmF0ZSBfaGVscGVyRG9jOiBqc1BERjtcbiAgICBwcml2YXRlIF9mb250U3R5bGU6IHN0cmluZztcbiAgICBwcml2YXRlIG1hcmdpbnNTdGFjazogSU1hcmdpbkxSW107XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKG9wdGlvbnM6IElEb2NPcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGpzcGRmT3B0aW9uczoganNQREZPcHRpb25zID0ge1xuICAgICAgICAgICAgb3JpZW50YXRpb246IHRoaXMub3JpZW50YXRpb24sXG4gICAgICAgICAgICB1bml0OiAncHQnLFxuICAgICAgICAgICAgZm9ybWF0OiB0aGlzLmZvcm1hdCxcbiAgICAgICAgICAgIGNvbXByZXNzOiB0aGlzLmNvbXByZXNzXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2RvYyA9IG5ldyBqc1BERihqc3BkZk9wdGlvbnMpO1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuYmFzZTY0Tm9ybWFsICE9PSAndW5kZWZpbmVkJyAmJiAhU3VydmV5SGVscGVyLmlzRm9udEV4aXN0KHRoaXMsIHRoaXMuZm9udE5hbWUpKSB7XG4gICAgICAgICAgICBEb2NDb250cm9sbGVyLmFkZEZvbnQodGhpcy5mb250TmFtZSwgdGhpcy5iYXNlNjROb3JtYWwsICdub3JtYWwnKTtcbiAgICAgICAgICAgIERvY0NvbnRyb2xsZXIuYWRkRm9udCh0aGlzLmZvbnROYW1lLCB0aGlzLmJhc2U2NEJvbGQsICdib2xkJyk7XG4gICAgICAgICAgICB0aGlzLl9kb2MgPSBuZXcganNQREYoanNwZGZPcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRSYWRpb0FwcGVhcmFuY2UodGhpcy5fZG9jKTtcbiAgICAgICAgdGhpcy5fdXNlQ3VzdG9tRm9udEluSHRtbCA9IG9wdGlvbnMudXNlQ3VzdG9tRm9udEluSHRtbCAmJiBTdXJ2ZXlIZWxwZXIuaXNGb250RXhpc3QodGhpcywgdGhpcy5mb250TmFtZSk7XG4gICAgICAgIHRoaXMuX2hlbHBlckRvYyA9IG5ldyBqc1BERihqc3BkZk9wdGlvbnMpO1xuICAgICAgICB0aGlzLl9kb2Muc2V0Rm9udCh0aGlzLmZvbnROYW1lKTtcbiAgICAgICAgdGhpcy5faGVscGVyRG9jLnNldEZvbnQodGhpcy5mb250TmFtZSk7XG4gICAgICAgIHRoaXMuX2RvYy5zZXRGb250U2l6ZSh0aGlzLmZvbnRTaXplKTtcbiAgICAgICAgdGhpcy5faGVscGVyRG9jLnNldEZvbnRTaXplKHRoaXMuZm9udFNpemUpO1xuICAgICAgICB0aGlzLl9mb250U3R5bGUgPSAnbm9ybWFsJztcbiAgICAgICAgdGhpcy5tYXJnaW5zU3RhY2sgPSBbXTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBjdXN0b21Gb250czogeyBbbmFtZTogc3RyaW5nXTogeyBub3JtYWw6IHN0cmluZywgYm9sZDogc3RyaW5nLCBpdGFsaWM6IHN0cmluZywgYm9sZGl0YWxpYzogc3RyaW5nIH0gfSA9IHt9O1xuICAgIHB1YmxpYyBzdGF0aWMgYWRkRm9udChmb250TmFtZTogc3RyaW5nLCBiYXNlNjQ6IHN0cmluZywgZm9udFN0eWxlOiAnbm9ybWFsJyB8ICdib2xkJyB8ICdpdGFsaWMnIHwgJ2JvbGRpdGFsaWMnKSB7XG4gICAgICAgIGxldCBmb250ID0gRG9jQ29udHJvbGxlci5jdXN0b21Gb250c1tmb250TmFtZV07XG4gICAgICAgIGlmICghZm9udCkge1xuICAgICAgICAgICAgZm9udCA9IDxhbnk+e307XG4gICAgICAgICAgICBEb2NDb250cm9sbGVyLmN1c3RvbUZvbnRzW2ZvbnROYW1lXSA9IGZvbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZm9udFtmb250U3R5bGVdID0gYmFzZTY0O1xuICAgICAgICBjb25zdCBhZGRGb250Q2FsbGJhY2s6ICgpID0+IHZvaWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zdCBjdXN0b21Gb250ID0gRG9jQ29udHJvbGxlci5jdXN0b21Gb250c1tmb250TmFtZV07XG4gICAgICAgICAgICBpZiAoISFjdXN0b21Gb250ICYmICEhY3VzdG9tRm9udFtmb250U3R5bGVdKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm9udEZpbGU6IHN0cmluZyA9IGAke2ZvbnROYW1lfS0ke2ZvbnRTdHlsZX0udHRmYDtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEZpbGVUb1ZGUyhmb250RmlsZSwgY3VzdG9tRm9udFtmb250U3R5bGVdKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEZvbnQoZm9udEZpbGUsIGZvbnROYW1lLCBmb250U3R5bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAoPGFueT5qc1BERikuQVBJLmV2ZW50cy5wdXNoKFsnYWRkRm9udHMnLCBhZGRGb250Q2FsbGJhY2tdKTtcbiAgICB9XG4gICAgcHVibGljIGdldCBkb2MoKTogYW55IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RvYztcbiAgICB9XG4gICAgcHVibGljIGdldCBoZWxwZXJEb2MoKTogYW55IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hlbHBlckRvYztcbiAgICB9XG4gICAgcHVibGljIGdldCBmb250TmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9udE5hbWU7XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgZm9udE5hbWUoZm9udE5hbWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9mb250TmFtZSA9IGZvbnROYW1lO1xuICAgICAgICB0aGlzLl9kb2Muc2V0Rm9udChmb250TmFtZSk7XG4gICAgICAgIHRoaXMuX2hlbHBlckRvYy5zZXRGb250KGZvbnROYW1lKTtcbiAgICB9XG4gICAgcHVibGljIGdldCBmb250U2l6ZSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9udFNpemU7XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgZm9udFNpemUoZm9udFNpemU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9mb250U2l6ZSA9IGZvbnRTaXplO1xuICAgICAgICB0aGlzLl9kb2Muc2V0Rm9udFNpemUoZm9udFNpemUpO1xuICAgICAgICB0aGlzLl9oZWxwZXJEb2Muc2V0Rm9udFNpemUoZm9udFNpemUpO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0IGZvbnRTdHlsZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9udFN0eWxlO1xuICAgIH1cbiAgICBwdWJsaWMgc2V0IGZvbnRTdHlsZShmb250U3R5bGU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9mb250U3R5bGUgPSBmb250U3R5bGU7XG4gICAgICAgIHRoaXMuX2RvYy5zZXRGb250KHRoaXMuX2ZvbnROYW1lLCBmb250U3R5bGUpO1xuICAgICAgICB0aGlzLl9oZWxwZXJEb2Muc2V0Rm9udCh0aGlzLl9mb250TmFtZSwgZm9udFN0eWxlKTtcbiAgICB9XG4gICAgcHVibGljIG1lYXN1cmVUZXh0KHRleHQ6IHN0cmluZyB8IExvY2FsaXphYmxlU3RyaW5nIHwgbnVtYmVyID0gMSwgZm9udFN0eWxlOiBzdHJpbmcgPSB0aGlzLl9mb250U3R5bGUsXG4gICAgICAgIGZvbnRTaXplOiBudW1iZXIgPSB0aGlzLl9mb250U2l6ZSk6IElTaXplIHtcbiAgICAgICAgY29uc3Qgb2xkRm9udFNpemU6IG51bWJlciA9IHRoaXMuX2hlbHBlckRvYy5nZXRGb250U2l6ZSgpO1xuICAgICAgICB0aGlzLl9oZWxwZXJEb2Muc2V0Rm9udFNpemUoZm9udFNpemUpO1xuICAgICAgICB0aGlzLl9oZWxwZXJEb2Muc2V0Rm9udCh0aGlzLl9mb250TmFtZSwgZm9udFN0eWxlKTtcbiAgICAgICAgY29uc3QgaGVpZ2h0OiBudW1iZXIgPSB0aGlzLl9oZWxwZXJEb2MuZ2V0TGluZUhlaWdodCgpIC8gdGhpcy5faGVscGVyRG9jLmludGVybmFsLnNjYWxlRmFjdG9yO1xuICAgICAgICBsZXQgd2lkdGg6IG51bWJlciA9IDAuMDtcbiAgICAgICAgaWYgKHR5cGVvZiB0ZXh0ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgd2lkdGggPSBoZWlnaHQgKiB0ZXh0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGV4dCA9IHR5cGVvZiB0ZXh0ID09PSAnc3RyaW5nJyA/IHRleHQgOiBTdXJ2ZXlIZWxwZXIuZ2V0TG9jU3RyaW5nKHRleHQpO1xuICAgICAgICAgICAgd2lkdGggPSB0ZXh0LnNwbGl0KCcnKS5yZWR1Y2UoKHNtOiBudW1iZXIsIGNyOiBzdHJpbmcpID0+XG4gICAgICAgICAgICAgICAgc20gKyB0aGlzLl9oZWxwZXJEb2MuZ2V0VGV4dFdpZHRoKGNyKSwgMC4wKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9oZWxwZXJEb2Muc2V0Rm9udFNpemUob2xkRm9udFNpemUpO1xuICAgICAgICB0aGlzLl9oZWxwZXJEb2Muc2V0Rm9udCh0aGlzLl9mb250TmFtZSwgJ25vcm1hbCcpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHdpZHRoIG9mIG9uZSBjaGFyYWN0ZXIgaW4gcGl4ZWxzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgdW5pdFdpZHRoKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lYXN1cmVUZXh0KCkud2lkdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBoZWlndGggb2Ygb25lIGNoYXJhY3RlciBpbiBwaXhlbHMuXG4gICAgICovXG4gICAgcHVibGljIGdldCB1bml0SGVpZ2h0KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lYXN1cmVUZXh0KCkuaGVpZ2h0O1xuICAgIH1cbiAgICBwdWJsaWMgcHVzaE1hcmdpbnMobGVmdD86IG51bWJlciwgcmlnaHQ/OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tYXJnaW5zU3RhY2sucHVzaCh7IGxlZnQ6IHRoaXMubWFyZ2lucy5sZWZ0LCByaWdodDogdGhpcy5tYXJnaW5zLnJpZ2h0IH0pO1xuICAgICAgICBpZiAodHlwZW9mIGxlZnQgIT09ICd1bmRlZmluZWQnKSB0aGlzLm1hcmdpbnMubGVmdCA9IGxlZnQ7XG4gICAgICAgIGlmICh0eXBlb2YgcmlnaHQgIT09ICd1bmRlZmluZWQnKSB0aGlzLm1hcmdpbnMucmlnaHQgPSByaWdodDtcbiAgICB9XG4gICAgcHVibGljIHBvcE1hcmdpbnMoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IG1hcmdpbnM6IElNYXJnaW5MUiA9IHRoaXMubWFyZ2luc1N0YWNrLnBvcCgpO1xuICAgICAgICB0aGlzLm1hcmdpbnMubGVmdCA9IG1hcmdpbnMubGVmdDtcbiAgICAgICAgdGhpcy5tYXJnaW5zLnJpZ2h0ID0gbWFyZ2lucy5yaWdodDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHdpZHRoIG9mIGEgUERGIHBhZ2UgaW4gcGl4ZWxzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgcGFwZXJXaWR0aCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2MuaW50ZXJuYWwucGFnZVNpemUud2lkdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBoZWlnaHQgb2YgYSBQREYgcGFnZSBpbiBwaXhlbHMuXG4gICAgICovXG4gICAgcHVibGljIGdldCBwYXBlckhlaWdodCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2MuaW50ZXJuYWwucGFnZVNpemUuaGVpZ2h0O1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0TnVtYmVyT2ZQYWdlcygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2MuZ2V0TnVtYmVyT2ZQYWdlcygpO1xuICAgIH1cbiAgICBwdWJsaWMgYWRkUGFnZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kb2MuYWRkUGFnZSgpO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0Q3VycmVudFBhZ2VJbmRleCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2MuZ2V0Q3VycmVudFBhZ2VJbmZvKCkucGFnZU51bWJlciAtIDE7XG4gICAgfVxuICAgIHB1YmxpYyBzZXRQYWdlKGluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kb2Muc2V0UGFnZShpbmRleCArIDEpO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9kb2NfY29udHJvbGxlci50cyIsImltcG9ydCB7IElRdWVzdGlvbiwgSXRlbVZhbHVlLCBRdWVzdGlvblJhZGlvZ3JvdXBNb2RlbCB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCB7IFN1cnZleVBERiB9IGZyb20gJy4uL3N1cnZleSc7XG5pbXBvcnQgeyBJUmVjdCwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IEZsYXRSZXBvc2l0b3J5IH0gZnJvbSAnLi9mbGF0X3JlcG9zaXRvcnknO1xuaW1wb3J0IHsgSVBkZkJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfYnJpY2snO1xuaW1wb3J0IHsgUmFkaW9Hcm91cFdyYXAsIFJhZGlvSXRlbUJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfcmFkaW9pdGVtJztcbmltcG9ydCB7IEZsYXRTZWxlY3RCYXNlIH0gZnJvbSAnLi9mbGF0X3NlbGVjdGJhc2UnO1xuXG5leHBvcnQgY2xhc3MgRmxhdFJhZGlvZ3JvdXAgZXh0ZW5kcyBGbGF0U2VsZWN0QmFzZSB7XG4gICAgcHJvdGVjdGVkIHF1ZXN0aW9uOiBRdWVzdGlvblJhZGlvZ3JvdXBNb2RlbDtcbiAgICBwcml2YXRlIHJhZGlvR3JvdXBXcmFwOiBSYWRpb0dyb3VwV3JhcDtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHJvdGVjdGVkIHN1cnZleTogU3VydmV5UERGLFxuICAgICAgICBxdWVzdGlvbjogSVF1ZXN0aW9uLCBwcm90ZWN0ZWQgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcikge1xuICAgICAgICBzdXBlcihzdXJ2ZXksIHF1ZXN0aW9uLCBjb250cm9sbGVyKTtcbiAgICAgICAgdGhpcy5xdWVzdGlvbiA9IDxRdWVzdGlvblJhZGlvZ3JvdXBNb2RlbD5xdWVzdGlvbjtcbiAgICB9XG4gICAgcHJvdGVjdGVkIGlzSXRlbVNlbGVjdGVkKGl0ZW06IEl0ZW1WYWx1ZSwgY2hlY2tlZD86IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICh0eXBlb2YgY2hlY2tlZCA9PT0gJ3VuZGVmaW5lZCcpID9cbiAgICAgICAgICAgIChpdGVtID09PSB0aGlzLnF1ZXN0aW9uLm90aGVySXRlbSA/IHRoaXMucXVlc3Rpb24uaXNPdGhlclNlbGVjdGVkIDpcbiAgICAgICAgICAgICAgICAoaXRlbS52YWx1ZSA9PT0gdGhpcy5xdWVzdGlvbi52YWx1ZSB8fFxuICAgICAgICAgICAgICAgICAgICAodHlwZW9mIHRoaXMucXVlc3Rpb24uaXNJdGVtU2VsZWN0ZWQgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9uLmlzSXRlbVNlbGVjdGVkKGl0ZW0pKSkpIDogY2hlY2tlZDtcbiAgICB9XG4gICAgcHVibGljIGdlbmVyYXRlRmxhdEl0ZW0ocmVjdDogSVJlY3QsIGl0ZW06IEl0ZW1WYWx1ZSxcbiAgICAgICAgaW5kZXg6IG51bWJlciwga2V5Pzogc3RyaW5nLCBjaGVja2VkPzogYm9vbGVhbiwgY29udGV4dDogYW55ID0ge30pOiBJUGRmQnJpY2sge1xuICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucmFkaW9Hcm91cFdyYXAgPSBuZXcgUmFkaW9Hcm91cFdyYXAodGhpcy5xdWVzdGlvbi5pZCArICgodHlwZW9mIGtleSA9PT0gJ3VuZGVmaW5lZCcpID8gJycgOiBrZXkpLFxuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlciwgeyByZWFkT25seTogdGhpcy5xdWVzdGlvbi5pc1JlYWRPbmx5LCBxdWVzdGlvbjogdGhpcy5xdWVzdGlvbiwgLi4uY29udGV4dCB9KTtcbiAgICAgICAgICAgICg8YW55PnRoaXMucXVlc3Rpb24pLnBkZlJhZGlvR3JvdXBXcmFwID0gdGhpcy5yYWRpb0dyb3VwV3JhcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdGhpcy5yYWRpb0dyb3VwV3JhcCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMucmFkaW9Hcm91cFdyYXAgPSAoPGFueT50aGlzLnF1ZXN0aW9uKS5wZGZSYWRpb0dyb3VwV3JhcDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc0NoZWNrZWQ6IGJvb2xlYW4gPSB0aGlzLmlzSXRlbVNlbGVjdGVkKGl0ZW0sIGNoZWNrZWQpO1xuICAgICAgICByZXR1cm4gbmV3IFJhZGlvSXRlbUJyaWNrKHRoaXMuY29udHJvbGxlciwgcmVjdCxcbiAgICAgICAgICAgIHsgcXVlc3Rpb246IHRoaXMucXVlc3Rpb24sIGluZGV4OiBpbmRleCwgY2hlY2tlZDogaXNDaGVja2VkLCBpdGVtOiBpdGVtIH0sIHRoaXMucmFkaW9Hcm91cFdyYXApO1xuICAgIH1cbn1cblxuRmxhdFJlcG9zaXRvcnkuZ2V0SW5zdGFuY2UoKS5yZWdpc3RlcigncmFkaW9ncm91cCcsIEZsYXRSYWRpb2dyb3VwKTtcbkZsYXRSZXBvc2l0b3J5LmdldEluc3RhbmNlKCkucmVnaXN0ZXIoJ2J1dHRvbmdyb3VwJywgRmxhdFJhZGlvZ3JvdXApO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9mbGF0X2xheW91dC9mbGF0X3JhZGlvZ3JvdXAudHMiLCJpbXBvcnQgeyBJRWxlbWVudCwgUXVlc3Rpb24sIFBhbmVsTW9kZWxCYXNlLCBQYW5lbE1vZGVsIH0gZnJvbSAnc3VydmV5LWNvcmUnO1xuaW1wb3J0IHsgU3VydmV5UERGIH0gZnJvbSAnLi4vc3VydmV5JztcbmltcG9ydCB7IElQb2ludCwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IElQZGZCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2JyaWNrJztcbmltcG9ydCB7IENvbXBvc2l0ZUJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfY29tcG9zaXRlJztcbmltcG9ydCB7IFJvd2xpbmVCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX3Jvd2xpbmUnO1xuaW1wb3J0IHsgU3VydmV5SGVscGVyIH0gZnJvbSAnLi4vaGVscGVyX3N1cnZleSc7XG5pbXBvcnQgeyBBZG9ybmVyc1BhbmVsT3B0aW9ucywgQWRvcm5lcnNQYWdlT3B0aW9ucyB9IGZyb20gJy4uL2V2ZW50X2hhbmRsZXIvYWRvcm5lcnMnO1xuaW1wb3J0IHsgRmxhdFJlcG9zaXRvcnkgfSBmcm9tICcuLi9lbnRyaWVzL3BkZic7XG5pbXBvcnQgKiBhcyBTdXJ2ZXlQREZNb2R1bGUgZnJvbSAnLi4vZW50cmllcy9wZGYnO1xuXG5leHBvcnQgY2xhc3MgRmxhdFN1cnZleSB7XG4gICAgcHVibGljIHN0YXRpYyBRVUVTX0dBUF9WRVJUX1NDQUxFOiBudW1iZXIgPSAxLjU7XG4gICAgcHVibGljIHN0YXRpYyBQQU5FTF9DT05UX0dBUF9TQ0FMRTogbnVtYmVyID0gMS4wO1xuICAgIHB1YmxpYyBzdGF0aWMgUEFORUxfREVTQ19HQVBfU0NBTEU6IG51bWJlciA9IDAuMjU7XG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBnZW5lcmF0ZUZsYXRzUGFuZWwoc3VydmV5OiBTdXJ2ZXlQREYsIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsXG4gICAgICAgIHBhbmVsOiBQYW5lbE1vZGVsLCBwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2tbXT4ge1xuICAgICAgICBjb25zdCBwYW5lbEZsYXRzOiBJUGRmQnJpY2tbXSA9IFtdO1xuICAgICAgICBjb25zdCBwYW5lbENvbnRlbnRQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNsb25lKHBvaW50KTtcbiAgICAgICAgY29udHJvbGxlci5wdXNoTWFyZ2lucygpO1xuICAgICAgICBjb250cm9sbGVyLm1hcmdpbnMubGVmdCArPSBjb250cm9sbGVyLm1lYXN1cmVUZXh0KHBhbmVsLmlubmVySW5kZW50KS53aWR0aDtcbiAgICAgICAgcGFuZWxDb250ZW50UG9pbnQueExlZnQgKz0gY29udHJvbGxlci5tZWFzdXJlVGV4dChwYW5lbC5pbm5lckluZGVudCkud2lkdGg7XG4gICAgICAgIHBhbmVsRmxhdHMucHVzaCguLi5hd2FpdCB0aGlzLmdlbmVyYXRlRmxhdHNQYWdlUGFuZWwoc3VydmV5LFxuICAgICAgICAgICAgY29udHJvbGxlciwgcGFuZWwsIHBhbmVsQ29udGVudFBvaW50KSk7XG4gICAgICAgIGNvbnRyb2xsZXIucG9wTWFyZ2lucygpO1xuICAgICAgICBjb25zdCBhZG9ybmVyc09wdGlvbnM6IEFkb3JuZXJzUGFuZWxPcHRpb25zID0gbmV3IEFkb3JuZXJzUGFuZWxPcHRpb25zKHBvaW50LFxuICAgICAgICAgICAgcGFuZWxGbGF0cywgcGFuZWwsIGNvbnRyb2xsZXIsIEZsYXRSZXBvc2l0b3J5LmdldEluc3RhbmNlKCksIFN1cnZleVBERk1vZHVsZSk7XG4gICAgICAgIGF3YWl0IHN1cnZleS5vblJlbmRlclBhbmVsLmZpcmUoc3VydmV5LCBhZG9ybmVyc09wdGlvbnMpO1xuICAgICAgICByZXR1cm4gWy4uLmFkb3JuZXJzT3B0aW9ucy5icmlja3NdO1xuICAgIH1cbiAgICBwcml2YXRlIHN0YXRpYyBhc3luYyBnZW5lcmF0ZUZsYXRzUGFnZVBhbmVsKHN1cnZleTogU3VydmV5UERGLCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLFxuICAgICAgICBwYWdlUGFuZWw6IFBhbmVsTW9kZWxCYXNlLCBwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2tbXT4ge1xuICAgICAgICBpZiAoIXBhZ2VQYW5lbC5pc1Zpc2libGUpIHJldHVybjtcbiAgICAgICAgcGFnZVBhbmVsLm9uRmlyc3RSZW5kZXJpbmcoKTtcbiAgICAgICAgY29uc3QgcGFnZVBhbmVsRmxhdHM6IElQZGZCcmlja1tdID0gW107XG4gICAgICAgIGxldCBjdXJyUG9pbnQ6IElQb2ludCA9IFN1cnZleUhlbHBlci5jbG9uZShwb2ludCk7XG4gICAgICAgIGlmIChwYWdlUGFuZWwuZ2V0VHlwZSgpICE9PSAncGFnZScgfHwgc3VydmV5LnNob3dQYWdlVGl0bGVzKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wb3NpdGVGbGF0OiBDb21wb3NpdGVCcmljayA9IG5ldyBDb21wb3NpdGVCcmljaygpO1xuICAgICAgICAgICAgaWYgKHBhZ2VQYW5lbC50aXRsZSkge1xuICAgICAgICAgICAgICAgIGlmIChwYWdlUGFuZWwgaW5zdGFuY2VvZiBQYW5lbE1vZGVsICYmIHBhZ2VQYW5lbC5ubykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub0ZsYXQ6IElQZGZCcmljayA9IGF3YWl0IFN1cnZleUhlbHBlci5jcmVhdGVUaXRsZVBhbmVsRmxhdChcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJQb2ludCwgY29udHJvbGxlciwgcGFnZVBhbmVsLm5vLCBwYWdlUGFuZWwuZ2V0VHlwZSgpID09PSAncGFnZScpO1xuICAgICAgICAgICAgICAgICAgICBjb21wb3NpdGVGbGF0LmFkZEJyaWNrKG5vRmxhdCk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJQb2ludC54TGVmdCA9IG5vRmxhdC54UmlnaHQgKyBjb250cm9sbGVyLm1lYXN1cmVUZXh0KCcgJykud2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2VsUGFuZWxUaXRsZUZsYXQ6IElQZGZCcmljayA9IGF3YWl0IFN1cnZleUhlbHBlci5jcmVhdGVUaXRsZVBhbmVsRmxhdChcbiAgICAgICAgICAgICAgICAgICAgY3VyclBvaW50LCBjb250cm9sbGVyLCBwYWdlUGFuZWwubG9jVGl0bGUsIHBhZ2VQYW5lbC5nZXRUeXBlKCkgPT09ICdwYWdlJyk7XG4gICAgICAgICAgICAgICAgY29tcG9zaXRlRmxhdC5hZGRCcmljayhwYWdlbFBhbmVsVGl0bGVGbGF0KTtcbiAgICAgICAgICAgICAgICBjdXJyUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlUG9pbnQocGFnZWxQYW5lbFRpdGxlRmxhdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFnZVBhbmVsLmRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhZ2VQYW5lbC50aXRsZSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyUG9pbnQueVRvcCArPSBjb250cm9sbGVyLnVuaXRXaWR0aCAqIEZsYXRTdXJ2ZXkuUEFORUxfREVTQ19HQVBfU0NBTEU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2VQYW5lbERlc2NGbGF0OiBJUGRmQnJpY2sgPSBhd2FpdCBTdXJ2ZXlIZWxwZXIuY3JlYXRlRGVzY0ZsYXQoXG4gICAgICAgICAgICAgICAgICAgIGN1cnJQb2ludCwgbnVsbCwgY29udHJvbGxlciwgcGFnZVBhbmVsLmxvY0Rlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICBjb21wb3NpdGVGbGF0LmFkZEJyaWNrKHBhZ2VQYW5lbERlc2NGbGF0KTtcbiAgICAgICAgICAgICAgICBjdXJyUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlUG9pbnQocGFnZVBhbmVsRGVzY0ZsYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjb21wb3NpdGVGbGF0LmlzRW1wdHkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByb3dMaW5lUG9pbnQ6IElQb2ludCA9IFN1cnZleUhlbHBlci5jcmVhdGVQb2ludChjb21wb3NpdGVGbGF0KTtcbiAgICAgICAgICAgICAgICBjb21wb3NpdGVGbGF0LmFkZEJyaWNrKFN1cnZleUhlbHBlci5jcmVhdGVSb3dsaW5lRmxhdChyb3dMaW5lUG9pbnQsIGNvbnRyb2xsZXIpKTtcbiAgICAgICAgICAgICAgICBwYWdlUGFuZWxGbGF0cy5wdXNoKGNvbXBvc2l0ZUZsYXQpO1xuICAgICAgICAgICAgICAgIGN1cnJQb2ludC55VG9wICs9IGNvbnRyb2xsZXIudW5pdEhlaWdodCAqIEZsYXRTdXJ2ZXkuUEFORUxfQ09OVF9HQVBfU0NBTEUgKyBTdXJ2ZXlIZWxwZXIuRVBTSUxPTjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiBwYWdlUGFuZWwucm93cykge1xuICAgICAgICAgICAgaWYgKCFyb3cudmlzaWJsZSkgY29udGludWU7XG4gICAgICAgICAgICBjb250cm9sbGVyLnB1c2hNYXJnaW5zKCk7XG4gICAgICAgICAgICBjb25zdCB3aWR0aDogbnVtYmVyID0gU3VydmV5SGVscGVyLmdldFBhZ2VBdmFpbGFibGVXaWR0aChjb250cm9sbGVyKTtcbiAgICAgICAgICAgIGxldCBuZXh0TWFyZ2luTGVmdDogbnVtYmVyID0gY29udHJvbGxlci5tYXJnaW5zLmxlZnQ7XG4gICAgICAgICAgICBjb25zdCByb3dGbGF0czogSVBkZkJyaWNrW10gPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IHZpc2libGVFbGVtZW50cyA9IHJvdy5lbGVtZW50cy5maWx0ZXIoZWwgPT4gZWwuaXNWaXNpYmxlKTtcbiAgICAgICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB2aXNpYmxlRWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgZWxlbWVudDogSUVsZW1lbnQgPSB2aXNpYmxlRWxlbWVudHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50LmlzVmlzaWJsZSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgY29uc3QgcGVyc1dpZHRoOiBudW1iZXIgPSBTdXJ2ZXlIZWxwZXIucGFyc2VXaWR0aChlbGVtZW50LnJlbmRlcldpZHRoLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aCAtICh2aXNpYmxlRWxlbWVudHMubGVuZ3RoIC0gMSkgKiBjb250cm9sbGVyLnVuaXRXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZUVsZW1lbnRzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5tYXJnaW5zLmxlZnQgPSBuZXh0TWFyZ2luTGVmdCArICgoaSAhPT0gMCkgPyBjb250cm9sbGVyLnVuaXRXaWR0aCA6IDApO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIubWFyZ2lucy5yaWdodCA9IGNvbnRyb2xsZXIucGFwZXJXaWR0aCAtIGNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0IC0gcGVyc1dpZHRoO1xuICAgICAgICAgICAgICAgIGN1cnJQb2ludC54TGVmdCA9IGNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0O1xuICAgICAgICAgICAgICAgIG5leHRNYXJnaW5MZWZ0ID0gY29udHJvbGxlci5tYXJnaW5zLmxlZnQgKyBwZXJzV2lkdGg7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBQYW5lbE1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd0ZsYXRzLnB1c2goLi4uYXdhaXQgdGhpcy5nZW5lcmF0ZUZsYXRzUGFuZWwoXG4gICAgICAgICAgICAgICAgICAgICAgICBzdXJ2ZXksIGNvbnRyb2xsZXIsIGVsZW1lbnQsIGN1cnJQb2ludCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcm93RmxhdHMucHVzaCguLi5hd2FpdCBTdXJ2ZXlIZWxwZXIuZ2VuZXJhdGVRdWVzdGlvbkZsYXRzKHN1cnZleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIsIDxRdWVzdGlvbj5lbGVtZW50LCBjdXJyUG9pbnQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250cm9sbGVyLnBvcE1hcmdpbnMoKTtcbiAgICAgICAgICAgIGN1cnJQb2ludC54TGVmdCA9IGNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0O1xuICAgICAgICAgICAgaWYgKHJvd0ZsYXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGN1cnJQb2ludC55VG9wID0gU3VydmV5SGVscGVyLm1lcmdlUmVjdHMoLi4ucm93RmxhdHMpLnlCb3Q7XG4gICAgICAgICAgICAgICAgY3VyclBvaW50LnhMZWZ0ID0gcG9pbnQueExlZnQ7XG4gICAgICAgICAgICAgICAgY3VyclBvaW50LnlUb3AgKz0gY29udHJvbGxlci51bml0SGVpZ2h0ICogRmxhdFN1cnZleS5RVUVTX0dBUF9WRVJUX1NDQUxFO1xuICAgICAgICAgICAgICAgIHBhZ2VQYW5lbEZsYXRzLnB1c2goLi4ucm93RmxhdHMpO1xuICAgICAgICAgICAgICAgIHBhZ2VQYW5lbEZsYXRzLnB1c2goU3VydmV5SGVscGVyLmNyZWF0ZVJvd2xpbmVGbGF0KGN1cnJQb2ludCwgY29udHJvbGxlcikpO1xuICAgICAgICAgICAgICAgIGN1cnJQb2ludC55VG9wICs9IFN1cnZleUhlbHBlci5FUFNJTE9OO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYWdlUGFuZWxGbGF0cztcbiAgICB9XG4gICAgcHJpdmF0ZSBzdGF0aWMgcG9wUm93bGluZXMoZmxhdHM6IElQZGZCcmlja1tdKSB7XG4gICAgICAgIHdoaWxlIChmbGF0cy5sZW5ndGggPiAwICYmIGZsYXRzW2ZsYXRzLmxlbmd0aCAtIDFdIGluc3RhbmNlb2YgUm93bGluZUJyaWNrKSB7XG4gICAgICAgICAgICBmbGF0cy5wb3AoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcml2YXRlIHN0YXRpYyBhc3luYyBnZW5lcmF0ZUZsYXRUaXRsZShzdXJ2ZXk6IFN1cnZleVBERiwgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcixcbiAgICAgICAgcG9pbnQ6IElQb2ludCk6IFByb21pc2U8Q29tcG9zaXRlQnJpY2s+IHtcbiAgICAgICAgY29uc3QgY29tcG9zaXRlRmxhdDogQ29tcG9zaXRlQnJpY2sgPSBuZXcgQ29tcG9zaXRlQnJpY2soKTtcbiAgICAgICAgaWYgKHN1cnZleS5zaG93VGl0bGUpIHtcbiAgICAgICAgICAgIGlmIChzdXJ2ZXkudGl0bGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdXJ2ZXlUaXRsZUZsYXQ6IElQZGZCcmljayA9IGF3YWl0IFN1cnZleUhlbHBlci5jcmVhdGVUaXRsZVN1cnZleUZsYXQoXG4gICAgICAgICAgICAgICAgICAgIHBvaW50LCBjb250cm9sbGVyLCBzdXJ2ZXkubG9jVGl0bGUpO1xuICAgICAgICAgICAgICAgIGNvbXBvc2l0ZUZsYXQuYWRkQnJpY2soc3VydmV5VGl0bGVGbGF0KTtcbiAgICAgICAgICAgICAgICBwb2ludCA9IFN1cnZleUhlbHBlci5jcmVhdGVQb2ludChzdXJ2ZXlUaXRsZUZsYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN1cnZleS5kZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgIGlmIChzdXJ2ZXkudGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQueVRvcCArPSBjb250cm9sbGVyLnVuaXRXaWR0aCAqIEZsYXRTdXJ2ZXkuUEFORUxfREVTQ19HQVBfU0NBTEU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbXBvc2l0ZUZsYXQuYWRkQnJpY2soYXdhaXQgU3VydmV5SGVscGVyLmNyZWF0ZURlc2NGbGF0KFxuICAgICAgICAgICAgICAgICAgICBwb2ludCwgbnVsbCwgY29udHJvbGxlciwgc3VydmV5LmxvY0Rlc2NyaXB0aW9uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbXBvc2l0ZUZsYXQ7XG4gICAgfVxuICAgIHByaXZhdGUgc3RhdGljIGFzeW5jIGdlbmVyYXRlRmxhdExvZ29JbWFnZShzdXJ2ZXk6IFN1cnZleVBERiwgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcixcbiAgICAgICAgcG9pbnQ6IElQb2ludCk6IFByb21pc2U8SVBkZkJyaWNrPiB7XG4gICAgICAgIGNvbnN0IGxvZ29VcmwgPSBTdXJ2ZXlIZWxwZXIuZ2V0TG9jU3RyaW5nKHN1cnZleS5sb2NMb2dvKTtcbiAgICAgICAgY29uc3QgbG9nb1NpemUgPSBhd2FpdCBTdXJ2ZXlIZWxwZXIuZ2V0Q29ycmVjdGVkSW1hZ2VTaXplKGNvbnRyb2xsZXIsIHsgaW1hZ2VMaW5rOiBsb2dvVXJsLCBpbWFnZUhlaWdodDogc3VydmV5LmxvZ29IZWlnaHQsIGltYWdlV2lkdGg6IHN1cnZleS5sb2dvV2lkdGggfSk7XG4gICAgICAgIGNvbnN0IGxvZ29GbGF0OiBJUGRmQnJpY2sgPSBhd2FpdCBTdXJ2ZXlIZWxwZXIuY3JlYXRlSW1hZ2VGbGF0KFxuICAgICAgICAgICAgcG9pbnQsIG51bGwsIGNvbnRyb2xsZXIsIHsgbGluazogbG9nb1VybCxcbiAgICAgICAgICAgICAgICB3aWR0aDogbG9nb1NpemUud2lkdGgsIGhlaWdodDogbG9nb1NpemUuaGVpZ2h0IH0pO1xuICAgICAgICBsZXQgc2hpZnQ6IG51bWJlciA9IDA7XG4gICAgICAgIGlmIChzdXJ2ZXkubG9nb1Bvc2l0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICBzaGlmdCA9IFN1cnZleUhlbHBlci5nZXRQYWdlQXZhaWxhYmxlV2lkdGgoY29udHJvbGxlcikgLSBsb2dvRmxhdC53aWR0aDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdXJ2ZXkubG9nb1Bvc2l0aW9uICE9PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIHNoaWZ0ID0gU3VydmV5SGVscGVyLmdldFBhZ2VBdmFpbGFibGVXaWR0aChjb250cm9sbGVyKSAvIDIuMCAtIGxvZ29GbGF0LndpZHRoIC8gMi4wO1xuICAgICAgICB9XG4gICAgICAgIGxvZ29GbGF0LnhMZWZ0ICs9IHNoaWZ0O1xuICAgICAgICBsb2dvRmxhdC54UmlnaHQgKz0gc2hpZnQ7XG4gICAgICAgIHJldHVybiBsb2dvRmxhdDtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBnZW5lcmF0ZUZsYXRzKHN1cnZleTogU3VydmV5UERGLCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyKTogUHJvbWlzZTxJUGRmQnJpY2tbXVtdPiB7XG4gICAgICAgIGNvbnN0IGZsYXRzOiBJUGRmQnJpY2tbXVtdID0gW107XG4gICAgICAgIGlmICghc3VydmV5Lmhhc0xvZ28pIHtcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlRmxhdDogQ29tcG9zaXRlQnJpY2sgPSBhd2FpdCB0aGlzLmdlbmVyYXRlRmxhdFRpdGxlKFxuICAgICAgICAgICAgICAgIHN1cnZleSwgY29udHJvbGxlciwgY29udHJvbGxlci5sZWZ0VG9wUG9pbnQpO1xuICAgICAgICAgICAgaWYgKCF0aXRsZUZsYXQuaXNFbXB0eSkgZmxhdHMucHVzaChbdGl0bGVGbGF0XSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3VydmV5LmlzTG9nb0JlZm9yZSkge1xuICAgICAgICAgICAgY29uc3QgbG9nb0ZsYXQ6IElQZGZCcmljayA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVGbGF0TG9nb0ltYWdlKFxuICAgICAgICAgICAgICAgIHN1cnZleSwgY29udHJvbGxlciwgY29udHJvbGxlci5sZWZ0VG9wUG9pbnQpO1xuICAgICAgICAgICAgZmxhdHMucHVzaChbbG9nb0ZsYXRdKTtcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlUG9pbnQ6IElQb2ludCA9IFN1cnZleUhlbHBlci5jcmVhdGVQb2ludChsb2dvRmxhdCxcbiAgICAgICAgICAgICAgICBzdXJ2ZXkubG9nb1Bvc2l0aW9uID09PSAndG9wJywgc3VydmV5LmxvZ29Qb3NpdGlvbiAhPT0gJ3RvcCcpO1xuICAgICAgICAgICAgaWYgKHN1cnZleS5sb2dvUG9zaXRpb24gIT09ICd0b3AnKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5wdXNoTWFyZ2lucygpO1xuICAgICAgICAgICAgICAgIHRpdGxlUG9pbnQueExlZnQgKz0gY29udHJvbGxlci51bml0V2lkdGg7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5tYXJnaW5zLmxlZnQgKz0gbG9nb0ZsYXQud2lkdGggKyBjb250cm9sbGVyLnVuaXRXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRpdGxlUG9pbnQueExlZnQgPSBjb250cm9sbGVyLmxlZnRUb3BQb2ludC54TGVmdDtcbiAgICAgICAgICAgICAgICB0aXRsZVBvaW50LnlUb3AgKz0gY29udHJvbGxlci51bml0SGVpZ2h0IC8gMi4wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdGl0bGVGbGF0OiBDb21wb3NpdGVCcmljayA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVGbGF0VGl0bGUoXG4gICAgICAgICAgICAgICAgc3VydmV5LCBjb250cm9sbGVyLCB0aXRsZVBvaW50KTtcbiAgICAgICAgICAgIGlmIChzdXJ2ZXkubG9nb1Bvc2l0aW9uICE9PSAndG9wJykgY29udHJvbGxlci5wb3BNYXJnaW5zKCk7XG4gICAgICAgICAgICBpZiAoIXRpdGxlRmxhdC5pc0VtcHR5KSBmbGF0c1swXS5wdXNoKHRpdGxlRmxhdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoc3VydmV5LmxvZ29Qb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvZ29GbGF0OiBJUGRmQnJpY2sgPSBhd2FpdCB0aGlzLmdlbmVyYXRlRmxhdExvZ29JbWFnZShcbiAgICAgICAgICAgICAgICAgICAgc3VydmV5LCBjb250cm9sbGVyLCBjb250cm9sbGVyLmxlZnRUb3BQb2ludCk7XG4gICAgICAgICAgICAgICAgZmxhdHMucHVzaChbbG9nb0ZsYXRdKTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLnB1c2hNYXJnaW5zKCk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5tYXJnaW5zLnJpZ2h0ICs9IGxvZ29GbGF0LndpZHRoICsgY29udHJvbGxlci51bml0V2lkdGg7XG4gICAgICAgICAgICAgICAgY29uc3QgdGl0bGVGbGF0OiBDb21wb3NpdGVCcmljayA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVGbGF0VGl0bGUoXG4gICAgICAgICAgICAgICAgICAgIHN1cnZleSwgY29udHJvbGxlciwgY29udHJvbGxlci5sZWZ0VG9wUG9pbnQpO1xuICAgICAgICAgICAgICAgIGlmICghdGl0bGVGbGF0LmlzRW1wdHkpIGZsYXRzWzBdLnVuc2hpZnQodGl0bGVGbGF0KTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLnBvcE1hcmdpbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlRmxhdDogQ29tcG9zaXRlQnJpY2sgPSBhd2FpdCB0aGlzLmdlbmVyYXRlRmxhdFRpdGxlKFxuICAgICAgICAgICAgICAgICAgICBzdXJ2ZXksIGNvbnRyb2xsZXIsIGNvbnRyb2xsZXIubGVmdFRvcFBvaW50KTtcbiAgICAgICAgICAgICAgICBsZXQgbG9nb1BvaW50OiBJUG9pbnQgPSBjb250cm9sbGVyLmxlZnRUb3BQb2ludDtcbiAgICAgICAgICAgICAgICBpZiAoIXRpdGxlRmxhdC5pc0VtcHR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGZsYXRzLnB1c2goW3RpdGxlRmxhdF0pO1xuICAgICAgICAgICAgICAgICAgICBsb2dvUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlUG9pbnQodGl0bGVGbGF0KTtcbiAgICAgICAgICAgICAgICAgICAgbG9nb1BvaW50LnlUb3AgKz0gY29udHJvbGxlci51bml0SGVpZ2h0IC8gMi4wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBsb2dvRmxhdDogSVBkZkJyaWNrID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUZsYXRMb2dvSW1hZ2UoXG4gICAgICAgICAgICAgICAgICAgIHN1cnZleSwgY29udHJvbGxlciwgbG9nb1BvaW50KTtcbiAgICAgICAgICAgICAgICBpZiAoZmxhdHMubGVuZ3RoICE9PSAwKSBmbGF0c1swXS5wdXNoKGxvZ29GbGF0KTtcbiAgICAgICAgICAgICAgICBlbHNlIGZsYXRzLnB1c2goW2xvZ29GbGF0XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBvaW50OiBJUG9pbnQgPSBjb250cm9sbGVyLmxlZnRUb3BQb2ludDtcbiAgICAgICAgaWYgKGZsYXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgcG9pbnQueVRvcCA9IFN1cnZleUhlbHBlci5jcmVhdGVQb2ludChTdXJ2ZXlIZWxwZXIubWVyZ2VSZWN0cyguLi5mbGF0c1swXSkpLnlUb3A7XG4gICAgICAgICAgICBmbGF0c1swXS5wdXNoKFN1cnZleUhlbHBlci5jcmVhdGVSb3dsaW5lRmxhdChwb2ludCwgY29udHJvbGxlcikpO1xuICAgICAgICAgICAgcG9pbnQueVRvcCArPSBjb250cm9sbGVyLnVuaXRIZWlnaHQgKiBGbGF0U3VydmV5LlBBTkVMX0NPTlRfR0FQX1NDQUxFICsgU3VydmV5SGVscGVyLkVQU0lMT047XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHN1cnZleS52aXNpYmxlUGFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHN1cnZleS5jdXJyZW50UGFnZSA9IHN1cnZleS52aXNpYmxlUGFnZXNbaV07XG4gICAgICAgICAgICBsZXQgcGFnZUZsYXRzOiBJUGRmQnJpY2tbXSA9IFtdO1xuICAgICAgICAgICAgcGFnZUZsYXRzLnB1c2goLi4uYXdhaXQgdGhpcy5nZW5lcmF0ZUZsYXRzUGFnZVBhbmVsKFxuICAgICAgICAgICAgICAgIHN1cnZleSwgY29udHJvbGxlciwgc3VydmV5LnZpc2libGVQYWdlc1tpXSwgcG9pbnQpKTtcbiAgICAgICAgICAgIGNvbnN0IGFkb3JuZXJzT3B0aW9uczogQWRvcm5lcnNQYWdlT3B0aW9ucyA9IG5ldyBBZG9ybmVyc1BhZ2VPcHRpb25zKHBvaW50LFxuICAgICAgICAgICAgICAgIHBhZ2VGbGF0cywgc3VydmV5LnZpc2libGVQYWdlc1tpXSwgY29udHJvbGxlciwgRmxhdFJlcG9zaXRvcnkuZ2V0SW5zdGFuY2UoKSwgU3VydmV5UERGTW9kdWxlKTtcbiAgICAgICAgICAgIGF3YWl0IHN1cnZleS5vblJlbmRlclBhZ2UuZmlyZShzdXJ2ZXksIGFkb3JuZXJzT3B0aW9ucyk7XG4gICAgICAgICAgICBwYWdlRmxhdHMgPSBbLi4uYWRvcm5lcnNPcHRpb25zLmJyaWNrc107XG4gICAgICAgICAgICBpZiAoaSA9PT0gMCAmJiBmbGF0cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICBmbGF0c1swXS5wdXNoKC4uLnBhZ2VGbGF0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGZsYXRzLnB1c2gocGFnZUZsYXRzKTtcbiAgICAgICAgICAgIHRoaXMucG9wUm93bGluZXMoZmxhdHNbZmxhdHMubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgcG9pbnQueVRvcCA9IGNvbnRyb2xsZXIubGVmdFRvcFBvaW50LnlUb3A7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsYXRzO1xuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9zdXJ2ZXkudHMiLCJpbXBvcnQgeyBJUXVlc3Rpb24sIEl0ZW1WYWx1ZSwgUXVlc3Rpb25DaGVja2JveE1vZGVsIH0gZnJvbSAnc3VydmV5LWNvcmUnO1xuaW1wb3J0IHsgSVJlY3QsIElTaXplLCBEb2NDb250cm9sbGVyLCBJUG9pbnQgfSBmcm9tICcuLi9kb2NfY29udHJvbGxlcic7XG5pbXBvcnQgeyBJUGRmQnJpY2ssIFBkZkJyaWNrIH0gZnJvbSAnLi9wZGZfYnJpY2snO1xuaW1wb3J0IHsgVGV4dEJyaWNrIH0gZnJvbSAnLi9wZGZfdGV4dCc7XG5pbXBvcnQgeyBTdXJ2ZXlIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXJfc3VydmV5JztcbmltcG9ydCB7IFN1cnZleVBERiB9IGZyb20gJy4uL3N1cnZleSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNoZWNrSXRlbUJyaWNrQ29udGV4dCB7XG4gICAgcXVlc3Rpb246IElRdWVzdGlvbjtcbiAgICByZWFkT25seTogYm9vbGVhbjtcbiAgICBjaGVja2VkOiBib29sZWFuO1xuICAgIGl0ZW0/OiBJdGVtVmFsdWU7XG4gICAgaW5kZXg/OiBudW1iZXI7XG59XG5leHBvcnQgY2xhc3MgQ2hlY2tJdGVtQnJpY2sgZXh0ZW5kcyBQZGZCcmljayB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgRk9OVF9TSVpFX1NDQUxFOiBudW1iZXIgPSAwLjc7XG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgQ0hFQ0tNQVJLX1JFQURPTkxZX1NZTUJPTDogc3RyaW5nID0gJzMnO1xuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IENIRUNLTUFSS19SRUFET05MWV9GT05UOiBzdHJpbmcgPSAnemFwZmRpbmdiYXRzJztcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IENIRUNLTUFSS19SRUFET05MWV9GT05UX1NJWkVfU0NBTEU6IG51bWJlciA9IDEuMCAtIE1hdGguRSAvIDEwLjA7XG4gICAgcHJvdGVjdGVkIHF1ZXN0aW9uOiBRdWVzdGlvbkNoZWNrYm94TW9kZWw7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsXG4gICAgICAgIHJlY3Q6IElSZWN0LCBwcm90ZWN0ZWQgZmllbGROYW1lOiBzdHJpbmcsIHByb3RlY3RlZCBjb250ZXh0OiBJQ2hlY2tJdGVtQnJpY2tDb250ZXh0KSB7XG4gICAgICAgIHN1cGVyKGNvbnRleHQucXVlc3Rpb24sIGNvbnRyb2xsZXIsIHJlY3QpO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uID0gPFF1ZXN0aW9uQ2hlY2tib3hNb2RlbD50aGlzLmNvbnRleHQucXVlc3Rpb247XG4gICAgICAgIHRoaXMudGV4dENvbG9yID0gdGhpcy5mb3JtQm9yZGVyQ29sb3I7XG4gICAgfVxuICAgIHByb3RlY3RlZCBnZXRTaG91bGRSZW5kZXJSZWFkT25seSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5yZWFkT25seSAmJiBTdXJ2ZXlIZWxwZXIuZ2V0UmVhZG9ubHlSZW5kZXJBcyhcbiAgICAgICAgICAgIHRoaXMucXVlc3Rpb24sIHRoaXMuY29udHJvbGxlcikgIT09ICdhY3JvZm9ybScgfHwgdGhpcy5jb250cm9sbGVyLmNvbXByZXNzO1xuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgcmVuZGVySW50ZXJhY3RpdmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGNoZWNrQm94OiBhbnkgPSBuZXcgKDxhbnk+dGhpcy5jb250cm9sbGVyLmRvYy5BY3JvRm9ybUNoZWNrQm94KSgpO1xuICAgICAgICBjb25zdCBmb3JtU2NhbGU6IG51bWJlciA9IFN1cnZleUhlbHBlci5mb3JtU2NhbGUodGhpcy5jb250cm9sbGVyLCB0aGlzKTtcbiAgICAgICAgY29uc3Qgb3B0aW9uczogYW55ID0ge307XG4gICAgICAgIG9wdGlvbnMubWF4Rm9udFNpemUgPSB0aGlzLmhlaWdodCAqIGZvcm1TY2FsZSAqIENoZWNrSXRlbUJyaWNrLkZPTlRfU0laRV9TQ0FMRTtcbiAgICAgICAgb3B0aW9ucy5jYXB0aW9uID0gQ2hlY2tJdGVtQnJpY2suQ0hFQ0tNQVJLX1JFQURPTkxZX1NZTUJPTDtcbiAgICAgICAgb3B0aW9ucy50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgb3B0aW9ucy5maWVsZE5hbWUgPSB0aGlzLmZpZWxkTmFtZTtcbiAgICAgICAgb3B0aW9ucy5yZWFkT25seSA9IHRoaXMuY29udGV4dC5yZWFkT25seTtcbiAgICAgICAgb3B0aW9ucy5jb2xvciA9IHRoaXMuZm9ybUJvcmRlckNvbG9yO1xuICAgICAgICBvcHRpb25zLnZhbHVlID0gdGhpcy5jb250ZXh0LmNoZWNrZWQgPyAnT24nIDogZmFsc2U7XG4gICAgICAgIG9wdGlvbnMuQVMgPSB0aGlzLmNvbnRleHQuY2hlY2tlZCA/ICcvT24nIDogJy9PZmYnO1xuICAgICAgICBvcHRpb25zLmNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG5cbiAgICAgICAgb3B0aW9ucy5SZWN0ID0gU3VydmV5SGVscGVyLmNyZWF0ZUFjcm9mb3JtUmVjdChcbiAgICAgICAgICAgIFN1cnZleUhlbHBlci5zY2FsZVJlY3QodGhpcywgZm9ybVNjYWxlKSk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5kb2MuYWRkRmllbGQoY2hlY2tCb3gpO1xuICAgICAgICAoPFN1cnZleVBERj50aGlzLnF1ZXN0aW9uLnN1cnZleSk/LmdldFVwZGF0ZWRDaGVja0l0ZW1BY3JvZm9ybU9wdGlvbnMob3B0aW9ucyk7XG5cbiAgICAgICAgY2hlY2tCb3gubWF4Rm9udFNpemUgPSBvcHRpb25zLm1heEZvbnRTaXplO1xuICAgICAgICBjaGVja0JveC5jYXB0aW9uID0gb3B0aW9ucy5jYXB0aW9uO1xuICAgICAgICBjaGVja0JveC50ZXh0QWxpZ24gPSBvcHRpb25zLnRleHRBbGlnbjtcbiAgICAgICAgY2hlY2tCb3guZmllbGROYW1lID0gb3B0aW9ucy5maWVsZE5hbWU7XG4gICAgICAgIGNoZWNrQm94LnJlYWRPbmx5ID0gb3B0aW9ucy5yZWFkT25seTtcbiAgICAgICAgY2hlY2tCb3guY29sb3IgPSBvcHRpb25zLmNvbG9yO1xuICAgICAgICBjaGVja0JveC52YWx1ZSA9IG9wdGlvbnMudmFsdWU7XG4gICAgICAgIGNoZWNrQm94LkFTID0gb3B0aW9ucy5BUztcbiAgICAgICAgY2hlY2tCb3guUmVjdCA9IG9wdGlvbnMuUmVjdDtcblxuICAgICAgICBTdXJ2ZXlIZWxwZXIucmVuZGVyRmxhdEJvcmRlcnModGhpcy5jb250cm9sbGVyLCB0aGlzKTtcbiAgICB9XG4gICAgcHVibGljIGFzeW5jIHJlbmRlclJlYWRPbmx5KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBTdXJ2ZXlIZWxwZXIucmVuZGVyRmxhdEJvcmRlcnModGhpcy5jb250cm9sbGVyLCB0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuY29udGV4dC5jaGVja2VkKSB7XG4gICAgICAgICAgICBjb25zdCBjaGVja21hcmtQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNyZWF0ZVBvaW50KHRoaXMsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgY29uc3Qgb2xkRm9udE5hbWU6IHN0cmluZyA9IHRoaXMuY29udHJvbGxlci5mb250TmFtZTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5mb250TmFtZSA9IENoZWNrSXRlbUJyaWNrLkNIRUNLTUFSS19SRUFET05MWV9GT05UO1xuICAgICAgICAgICAgY29uc3Qgb2xkRm9udFNpemU6IG51bWJlciA9IHRoaXMuY29udHJvbGxlci5mb250U2l6ZTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5mb250U2l6ZSA9IG9sZEZvbnRTaXplICpcbiAgICAgICAgICAgICAgICBDaGVja0l0ZW1Ccmljay5DSEVDS01BUktfUkVBRE9OTFlfRk9OVF9TSVpFX1NDQUxFO1xuICAgICAgICAgICAgY29uc3QgY2hlY2ttYXJrU2l6ZTogSVNpemUgPSB0aGlzLmNvbnRyb2xsZXIubWVhc3VyZVRleHQoXG4gICAgICAgICAgICAgICAgQ2hlY2tJdGVtQnJpY2suQ0hFQ0tNQVJLX1JFQURPTkxZX1NZTUJPTCk7XG4gICAgICAgICAgICBjaGVja21hcmtQb2ludC54TGVmdCArPSB0aGlzLndpZHRoIC8gMi4wIC0gY2hlY2ttYXJrU2l6ZS53aWR0aCAvIDIuMDtcbiAgICAgICAgICAgIGNoZWNrbWFya1BvaW50LnlUb3AgKz0gdGhpcy5oZWlnaHQgLyAyLjAgLSBjaGVja21hcmtTaXplLmhlaWdodCAvIDIuMDtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrbWFya0ZsYXQ6IElQZGZCcmljayA9IGF3YWl0IFN1cnZleUhlbHBlci5jcmVhdGVUZXh0RmxhdChcbiAgICAgICAgICAgICAgICBjaGVja21hcmtQb2ludCwgdGhpcy5xdWVzdGlvbiwgdGhpcy5jb250cm9sbGVyLFxuICAgICAgICAgICAgICAgIENoZWNrSXRlbUJyaWNrLkNIRUNLTUFSS19SRUFET05MWV9TWU1CT0wsIFRleHRCcmljayk7XG4gICAgICAgICAgICAoPGFueT5jaGVja21hcmtGbGF0LnVuZm9sZCgpWzBdKS50ZXh0Q29sb3IgPSB0aGlzLnRleHRDb2xvcjtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5mb250U2l6ZSA9IG9sZEZvbnRTaXplO1xuICAgICAgICAgICAgYXdhaXQgY2hlY2ttYXJrRmxhdC5yZW5kZXIoKTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5mb250TmFtZSA9IG9sZEZvbnROYW1lO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9wZGZfcmVuZGVyL3BkZl9jaGVja2l0ZW0udHMiLCJpbXBvcnQgeyBQZGZCcmljayB9IGZyb20gJy4vcGRmX2JyaWNrJztcbmltcG9ydCB7IERvY0NvbnRyb2xsZXIsIElSZWN0IH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgU3VydmV5SGVscGVyIH0gZnJvbSAnLi4vaGVscGVyX3N1cnZleSc7XG5cbmV4cG9ydCBjbGFzcyBFbXB0eUJyaWNrIGV4dGVuZHMgUGRmQnJpY2sge1xuICAgIHByaXZhdGUgaXNCb3JkZXJWaXNpYmxlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3RvcihyZWN0OiBJUmVjdCxcbiAgICAgICAgcHJvdGVjdGVkIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIgPSBudWxsLFxuICAgICAgICBpc0JvcmRlclZpc2libGU6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgICAgICBzdXBlcihudWxsLCBjb250cm9sbGVyLCByZWN0KTtcbiAgICAgICAgdGhpcy5pc0JvcmRlclZpc2libGUgPSBpc0JvcmRlclZpc2libGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXNpemVCb3JkZXIoaXNJbmNyZWFzZTogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBjb25zdCBjb2VmOiBudW1iZXIgPSBpc0luY3JlYXNlID8gMSA6IC0xO1xuICAgICAgICBjb25zdCBib3JkZXJQYWRkaW5nOiBudW1iZXIgPSB0aGlzLmNvbnRyb2xsZXIuZG9jLmdldEZvbnRTaXplKCkgKiBTdXJ2ZXlIZWxwZXIuVkFMVUVfUkVBRE9OTFlfUEFERElOR19TQ0FMRTtcbiAgICAgICAgdGhpcy54TGVmdCAtPSBjb2VmICogYm9yZGVyUGFkZGluZztcbiAgICAgICAgdGhpcy54UmlnaHQgKz0gY29lZiAqIGJvcmRlclBhZGRpbmc7XG4gICAgICAgIHRoaXMueUJvdCArPSBjb2VmICogYm9yZGVyUGFkZGluZztcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgcmVuZGVySW50ZXJhY3RpdmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICh0aGlzLmlzQm9yZGVyVmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5yZXNpemVCb3JkZXIodHJ1ZSk7XG4gICAgICAgICAgICBTdXJ2ZXlIZWxwZXIucmVuZGVyRmxhdEJvcmRlcnModGhpcy5jb250cm9sbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucmVzaXplQm9yZGVyKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcGRmX3JlbmRlci9wZGZfZW1wdHkudHMiLCJpbXBvcnQgeyBJUXVlc3Rpb24gfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5pbXBvcnQgeyBJUmVjdCwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IFRleHRCcmljayB9IGZyb20gJy4vcGRmX3RleHQnO1xuXG5leHBvcnQgY2xhc3MgVGV4dEJvbGRCcmljayBleHRlbmRzIFRleHRCcmljayB7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHF1ZXN0aW9uOiBJUXVlc3Rpb24sIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsXG4gICAgICAgIHJlY3Q6IElSZWN0LCB0ZXh0OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIocXVlc3Rpb24sIGNvbnRyb2xsZXIsIHJlY3QsIHRleHQpO1xuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgcmVuZGVySW50ZXJhY3RpdmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5mb250U3R5bGUgPSAnYm9sZCc7XG4gICAgICAgIGF3YWl0IHN1cGVyLnJlbmRlckludGVyYWN0aXZlKCk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5mb250U3R5bGUgPSAnbm9ybWFsJztcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3BkZl9yZW5kZXIvcGRmX3RleHRib2xkLnRzIiwiZXhwb3J0IHsgU3VydmV5UERGIH0gZnJvbSAnLi4vc3VydmV5JztcbmV4cG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuZXhwb3J0IHsgSVBvaW50LCBJUmVjdCwgSVNpemUsIElNYXJnaW5MUiwgSU1hcmdpbiwgSURvY09wdGlvbnMsIERvY09wdGlvbnMsIERvY0NvbnRyb2xsZXIgfSBmcm9tICcuLi9kb2NfY29udHJvbGxlcic7XG5leHBvcnQgeyBGbGF0UmVwb3NpdG9yeSB9IGZyb20gJy4uL2ZsYXRfbGF5b3V0L2ZsYXRfcmVwb3NpdG9yeSc7XG5leHBvcnQgeyBJRmxhdFF1ZXN0aW9uLCBGbGF0UXVlc3Rpb24gfSBmcm9tICcuLi9mbGF0X2xheW91dC9mbGF0X3F1ZXN0aW9uJztcbmV4cG9ydCB7IEZsYXRRdWVzdGlvbkRlZmF1bHQgfSBmcm9tICcuLi9mbGF0X2xheW91dC9mbGF0X2RlZmF1bHQnO1xuZXhwb3J0IHsgRmxhdEJvb2xlYW5DaGVja2JveCBhcyBGbGF0Qm9vbGVhbiB9IGZyb20gJy4uL2ZsYXRfbGF5b3V0L2ZsYXRfYm9vbGVhbic7XG5leHBvcnQgeyBGbGF0Q2hlY2tib3ggfSBmcm9tICcuLi9mbGF0X2xheW91dC9mbGF0X2NoZWNrYm94JztcbmV4cG9ydCB7IEZsYXRDdXN0b21Nb2RlbCB9IGZyb20gJy4uL2ZsYXRfbGF5b3V0L2ZsYXRfY3VzdG9tX21vZGVsJztcbmV4cG9ydCB7IEZsYXRDb21tZW50IH0gZnJvbSAnLi4vZmxhdF9sYXlvdXQvZmxhdF9jb21tZW50JztcbmV4cG9ydCB7IEZsYXREcm9wZG93biB9IGZyb20gJy4uL2ZsYXRfbGF5b3V0L2ZsYXRfZHJvcGRvd24nO1xuZXhwb3J0IHsgRmxhdEV4cHJlc3Npb24gfSBmcm9tICcuLi9mbGF0X2xheW91dC9mbGF0X2V4cHJlc3Npb24nO1xuZXhwb3J0IHsgRmxhdEZpbGUgfSBmcm9tICcuLi9mbGF0X2xheW91dC9mbGF0X2ZpbGUnO1xuZXhwb3J0IHsgRmxhdEhUTUwgfSBmcm9tICcuLi9mbGF0X2xheW91dC9mbGF0X2h0bWwnO1xuZXhwb3J0IHsgRmxhdEltYWdlIH0gZnJvbSAnLi4vZmxhdF9sYXlvdXQvZmxhdF9pbWFnZSc7XG5leHBvcnQgeyBGbGF0SW1hZ2VQaWNrZXIgfSBmcm9tICcuLi9mbGF0X2xheW91dC9mbGF0X2ltYWdlcGlja2VyJztcbmV4cG9ydCB7IEZsYXRQYW5lbER5bmFtaWMgfSBmcm9tICcuLi9mbGF0X2xheW91dC9mbGF0X3BhbmVsZHluYW1pYyc7XG5leHBvcnQgeyBGbGF0UmFkaW9ncm91cCB9IGZyb20gJy4uL2ZsYXRfbGF5b3V0L2ZsYXRfcmFkaW9ncm91cCc7XG5leHBvcnQgeyBGbGF0UmFua2luZyB9IGZyb20gJy4uL2ZsYXRfbGF5b3V0L2ZsYXRfcmFua2luZyc7XG5leHBvcnQgeyBGbGF0UmF0aW5nIH0gZnJvbSAnLi4vZmxhdF9sYXlvdXQvZmxhdF9yYXRpbmcnO1xuZXhwb3J0IHsgRmxhdFNlbGVjdEJhc2UgfSBmcm9tICcuLi9mbGF0X2xheW91dC9mbGF0X3NlbGVjdGJhc2UnO1xuZXhwb3J0IHsgRmxhdFNpZ25hdHVyZVBhZCB9IGZyb20gJy4uL2ZsYXRfbGF5b3V0L2ZsYXRfc2lnbmF0dXJlcGFkJztcbmV4cG9ydCB7IEZsYXRUZXh0Ym94IH0gZnJvbSAnLi4vZmxhdF9sYXlvdXQvZmxhdF90ZXh0Ym94JztcbmV4cG9ydCB7IEZsYXRTdXJ2ZXkgfSBmcm9tICcuLi9mbGF0X2xheW91dC9mbGF0X3N1cnZleSc7XG5leHBvcnQgeyBGbGF0TWF0cml4IH0gZnJvbSAnLi4vZmxhdF9sYXlvdXQvZmxhdF9tYXRyaXgnO1xuZXhwb3J0IHsgRmxhdE1hdHJpeE11bHRpcGxlIH0gZnJvbSAnLi4vZmxhdF9sYXlvdXQvZmxhdF9tYXRyaXhtdWx0aXBsZSc7XG5leHBvcnQgeyBGbGF0TWF0cml4RHluYW1pYyB9IGZyb20gJy4uL2ZsYXRfbGF5b3V0L2ZsYXRfbWF0cml4ZHluYW1pYyc7XG5leHBvcnQgeyBGbGF0TXVsdGlwbGVUZXh0IH0gZnJvbSAnLi4vZmxhdF9sYXlvdXQvZmxhdF9tdWx0aXBsZXRleHQnO1xuZXhwb3J0IHsgUGFnZVBhY2tlciB9IGZyb20gJy4uL3BhZ2VfbGF5b3V0L3BhZ2VfcGFja2VyJztcbmV4cG9ydCB7IEV2ZW50SGFuZGxlciB9IGZyb20gJy4uL2V2ZW50X2hhbmRsZXIvZXZlbnRfaGFuZGxlcic7XG5leHBvcnQgeyBIb3Jpem9udGFsQWxpZ24sIFZlcnRpY2FsQWxpZ24sIElEcmF3UmVjdE9wdGlvbnMsIElEcmF3VGV4dE9wdGlvbnMsIElEcmF3SW1hZ2VPcHRpb25zLCBEcmF3Q2FudmFzIH0gZnJvbSAnLi4vZXZlbnRfaGFuZGxlci9kcmF3X2NhbnZhcyc7XG5leHBvcnQgeyBJUGRmQnJpY2ssIFBkZkJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfYnJpY2snO1xuZXhwb3J0IHsgQm9vbGVhbkl0ZW1CcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2Jvb2xlYW5pdGVtJztcbmV4cG9ydCB7IENoZWNrYm94SXRlbUJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfY2hlY2tib3hpdGVtJztcbmV4cG9ydCB7IENoZWNrSXRlbUJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfY2hlY2tpdGVtJztcbmV4cG9ydCB7IENvbW1lbnRCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2NvbW1lbnQnO1xuZXhwb3J0IHsgQ29tcG9zaXRlQnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9jb21wb3NpdGUnO1xuZXhwb3J0IHsgQ3VzdG9tQnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9jdXN0b20nO1xuZXhwb3J0IHsgRHJvcGRvd25CcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2Ryb3Bkb3duJztcbmV4cG9ydCB7IEVtcHR5QnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9lbXB0eSc7XG5leHBvcnQgeyBIVE1MQnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9odG1sJztcbmV4cG9ydCB7IEltYWdlQnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9pbWFnZSc7XG5leHBvcnQgeyBMaW5rQnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9saW5rJztcbmV4cG9ydCB7IFJhZGlvSXRlbUJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfcmFkaW9pdGVtJztcbmV4cG9ydCB7IFJhbmtpbmdJdGVtQnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9yYW5raW5naXRlbSc7XG5leHBvcnQgeyBSb3dsaW5lQnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9yb3dsaW5lJztcbmV4cG9ydCB7IFRleHRGaWVsZEJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfdGV4dGZpZWxkJztcbmV4cG9ydCB7IFRleHRCb2xkQnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl90ZXh0Ym9sZCc7XG5leHBvcnQgeyBUZXh0Qm94QnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl90ZXh0Ym94JztcbmV4cG9ydCB7IFRleHRCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX3RleHQnO1xuZXhwb3J0IHsgVGl0bGVQYW5lbEJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfdGl0bGVwYW5lbCc7XG5cbmltcG9ydCB7IGNoZWNrTGlicmFyeVZlcnNpb24gfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5jaGVja0xpYnJhcnlWZXJzaW9uKGAke3Byb2Nlc3MuZW52LlZFUlNJT059YCwgJ3N1cnZleS1wZGYnKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZW50cmllcy9wZGYudHMiLCJpbXBvcnQgeyBJUXVlc3Rpb24sIEl0ZW1WYWx1ZSwgUXVlc3Rpb25DaGVja2JveEJhc2UgfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5pbXBvcnQgeyBTdXJ2ZXlQREYgfSBmcm9tICcuLi9zdXJ2ZXknO1xuaW1wb3J0IHsgSVBvaW50LCBJUmVjdCwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IEZsYXRRdWVzdGlvbiB9IGZyb20gJy4vZmxhdF9xdWVzdGlvbic7XG5pbXBvcnQgeyBJUGRmQnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9icmljayc7XG5pbXBvcnQgeyBUZXh0QnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl90ZXh0JztcbmltcG9ydCB7IENvbXBvc2l0ZUJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfY29tcG9zaXRlJztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgRmxhdFNlbGVjdEJhc2UgZXh0ZW5kcyBGbGF0UXVlc3Rpb24ge1xuICAgIHByb3RlY3RlZCBxdWVzdGlvbjogUXVlc3Rpb25DaGVja2JveEJhc2U7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBzdXJ2ZXk6IFN1cnZleVBERixcbiAgICAgICAgcXVlc3Rpb246IElRdWVzdGlvbiwgcHJvdGVjdGVkIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIpIHtcbiAgICAgICAgc3VwZXIoc3VydmV5LCBxdWVzdGlvbiwgY29udHJvbGxlcik7XG4gICAgICAgIHRoaXMucXVlc3Rpb24gPSA8UXVlc3Rpb25DaGVja2JveEJhc2U+cXVlc3Rpb247XG4gICAgfVxuICAgIHB1YmxpYyBhYnN0cmFjdCBnZW5lcmF0ZUZsYXRJdGVtKHJlY3Q6IElSZWN0LCBpdGVtOiBJdGVtVmFsdWUsIGluZGV4OiBudW1iZXIpOiBJUGRmQnJpY2s7XG4gICAgcHJvdGVjdGVkIGFzeW5jIGdlbmVyYXRlRmxhdENvbXBvc2l0ZShwb2ludDogSVBvaW50LCBpdGVtOiBJdGVtVmFsdWUsIGluZGV4OiBudW1iZXIpOiBQcm9taXNlPElQZGZCcmljaz4ge1xuICAgICAgICBjb25zdCBjb21wb3NpdGVGbGF0OiBDb21wb3NpdGVCcmljayA9IG5ldyBDb21wb3NpdGVCcmljaygpO1xuICAgICAgICBjb25zdCBpdGVtUmVjdDogSVJlY3QgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlUmVjdChwb2ludCxcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci51bml0V2lkdGgsIHRoaXMuY29udHJvbGxlci51bml0SGVpZ2h0KTtcbiAgICAgICAgY29uc3QgaXRlbUZsYXQ6IElQZGZCcmljayA9IHRoaXMuZ2VuZXJhdGVGbGF0SXRlbShTdXJ2ZXlIZWxwZXIubW92ZVJlY3QoXG4gICAgICAgICAgICBTdXJ2ZXlIZWxwZXIuc2NhbGVSZWN0KGl0ZW1SZWN0LCBTdXJ2ZXlIZWxwZXIuU0VMRUNUX0lURU1fRkxBVF9TQ0FMRSksXG4gICAgICAgICAgICBwb2ludC54TGVmdCksIGl0ZW0sIGluZGV4KTtcbiAgICAgICAgY29tcG9zaXRlRmxhdC5hZGRCcmljayhpdGVtRmxhdCk7XG4gICAgICAgIGNvbnN0IHRleHRQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNsb25lKHBvaW50KTtcbiAgICAgICAgdGV4dFBvaW50LnhMZWZ0ID0gaXRlbUZsYXQueFJpZ2h0ICsgdGhpcy5jb250cm9sbGVyLnVuaXRXaWR0aCAqIFN1cnZleUhlbHBlci5HQVBfQkVUV0VFTl9JVEVNX1RFWFQ7XG4gICAgICAgIGlmIChpdGVtLmxvY1RleHQucmVuZGVyZWRIdG1sICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb21wb3NpdGVGbGF0LmFkZEJyaWNrKGF3YWl0IFN1cnZleUhlbHBlci5jcmVhdGVUZXh0RmxhdChcbiAgICAgICAgICAgICAgICB0ZXh0UG9pbnQsIHRoaXMucXVlc3Rpb24sIHRoaXMuY29udHJvbGxlciwgaXRlbS5sb2NUZXh0LCBUZXh0QnJpY2spKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbSA9PT0gdGhpcy5xdWVzdGlvbi5vdGhlckl0ZW0gJiYgKGl0ZW0udmFsdWUgPT09IHRoaXMucXVlc3Rpb24udmFsdWUgfHxcbiAgICAgICAgICAgICh0eXBlb2YgdGhpcy5xdWVzdGlvbi5pc090aGVyU2VsZWN0ZWQgIT09ICd1bmRlZmluZWQnICYmIHRoaXMucXVlc3Rpb24uaXNPdGhlclNlbGVjdGVkKSkpIHtcbiAgICAgICAgICAgIGNvbnN0IG90aGVyUG9pbnQ6IElQb2ludCA9IFN1cnZleUhlbHBlci5jcmVhdGVQb2ludChjb21wb3NpdGVGbGF0KTtcbiAgICAgICAgICAgIG90aGVyUG9pbnQueVRvcCArPSB0aGlzLmNvbnRyb2xsZXIudW5pdEhlaWdodCAqIFN1cnZleUhlbHBlci5HQVBfQkVUV0VFTl9ST1dTO1xuICAgICAgICAgICAgY29tcG9zaXRlRmxhdC5hZGRCcmljayhhd2FpdCBTdXJ2ZXlIZWxwZXIuY3JlYXRlQ29tbWVudEZsYXQoXG4gICAgICAgICAgICAgICAgb3RoZXJQb2ludCwgdGhpcy5xdWVzdGlvbiwgdGhpcy5jb250cm9sbGVyLCBmYWxzZSwgeyBpbmRleCwgcm93czogU3VydmV5SGVscGVyLk9USEVSX1JPV1NfQ09VTlQgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb21wb3NpdGVGbGF0O1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgZ2V0VmlzaWJsZUNob2ljZXMoKTogQXJyYXk8SXRlbVZhbHVlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uLnZpc2libGVDaG9pY2VzO1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgZ2V0Q29sQ291bnQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb24uY29sQ291bnQ7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUZsYXRzQ29udGVudChwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2tbXT4ge1xuICAgICAgICBjb25zdCBjb2xDb3VudCA9IHRoaXMuZ2V0Q29sQ291bnQoKTtcbiAgICAgICAgY29uc3QgdmlzaWJsZUNob2ljZXMgPSB0aGlzLmdldFZpc2libGVDaG9pY2VzKCk7XG4gICAgICAgIGxldCBjdXJyZW50Q29sQ291bnQ6IG51bWJlciA9IGNvbENvdW50O1xuICAgICAgICBpZiAoY29sQ291bnQgPT0gMCkge1xuICAgICAgICAgICAgY3VycmVudENvbENvdW50ID0gTWF0aC5mbG9vcihTdXJ2ZXlIZWxwZXIuZ2V0UGFnZUF2YWlsYWJsZVdpZHRoKHRoaXMuY29udHJvbGxlcilcbiAgICAgICAgICAgICAgICAvIHRoaXMuY29udHJvbGxlci5tZWFzdXJlVGV4dChTdXJ2ZXlIZWxwZXIuTUFUUklYX0NPTFVNTl9XSURUSCkud2lkdGgpIHx8IDE7XG4gICAgICAgICAgICBpZiAodmlzaWJsZUNob2ljZXMubGVuZ3RoIDwgY3VycmVudENvbENvdW50KSB7XG4gICAgICAgICAgICAgICAgY3VycmVudENvbENvdW50ID0gdmlzaWJsZUNob2ljZXMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbENvdW50ID4gMSkge1xuICAgICAgICAgICAgY3VycmVudENvbENvdW50ID0gKFN1cnZleUhlbHBlci5nZXRDb2x1bW5XaWR0aCh0aGlzLmNvbnRyb2xsZXIsIGNvbENvdW50KSA8XG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLm1lYXN1cmVUZXh0KFN1cnZleUhlbHBlci5NQVRSSVhfQ09MVU1OX1dJRFRIKS53aWR0aCkgPyAxIDogY29sQ291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChjdXJyZW50Q29sQ291bnQgPT0gMSkgPyBhd2FpdCB0aGlzLmdlbmVyYXRlVmVydGljYWxseUl0ZW1zKHBvaW50LCB2aXNpYmxlQ2hvaWNlcykgOlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5nZW5lcmF0ZUhvcmlzb250YWxseUl0ZW1zKHBvaW50LCBjdXJyZW50Q29sQ291bnQpO1xuXG4gICAgfVxuICAgIHByb3RlY3RlZCBhc3luYyBnZW5lcmF0ZVZlcnRpY2FsbHlJdGVtcyhwb2ludDogSVBvaW50LCBpdGVtVmFsdWVzOiBJdGVtVmFsdWVbXSk6IFByb21pc2U8SVBkZkJyaWNrW10+IHtcbiAgICAgICAgY29uc3QgY3VyclBvaW50OiBJUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY2xvbmUocG9pbnQpO1xuICAgICAgICBjb25zdCBmbGF0czogSVBkZkJyaWNrW10gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IGl0ZW1WYWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1GbGF0OiBJUGRmQnJpY2sgPSBhd2FpdCB0aGlzLmdlbmVyYXRlRmxhdENvbXBvc2l0ZShjdXJyUG9pbnQsIGl0ZW1WYWx1ZXNbaV0sIGkpO1xuICAgICAgICAgICAgY3VyclBvaW50LnlUb3AgPSBpdGVtRmxhdC55Qm90ICsgU3VydmV5SGVscGVyLkdBUF9CRVRXRUVOX1JPV1MgKiB0aGlzLmNvbnRyb2xsZXIudW5pdEhlaWdodDtcbiAgICAgICAgICAgIGZsYXRzLnB1c2goaXRlbUZsYXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbGF0cztcbiAgICB9XG4gICAgcHJvdGVjdGVkIGFzeW5jIGdlbmVyYXRlSG9yaXNvbnRhbGx5SXRlbXMocG9pbnQ6IElQb2ludCwgY29sQ291bnQ6IG51bWJlcik6IFByb21pc2U8SVBkZkJyaWNrW10+IHtcbiAgICAgICAgY29uc3QgdmlzaWJsZUNob2ljZXMgPSB0aGlzLmdldFZpc2libGVDaG9pY2VzKCk7XG4gICAgICAgIGNvbnN0IGN1cnJQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNsb25lKHBvaW50KTtcbiAgICAgICAgY29uc3QgZmxhdHM6IElQZGZCcmlja1tdID0gW107XG4gICAgICAgIGxldCByb3c6IENvbXBvc2l0ZUJyaWNrID0gbmV3IENvbXBvc2l0ZUJyaWNrKCk7XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB2aXNpYmxlQ2hvaWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnB1c2hNYXJnaW5zKHRoaXMuY29udHJvbGxlci5tYXJnaW5zLmxlZnQsIHRoaXMuY29udHJvbGxlci5tYXJnaW5zLnJpZ2h0KTtcbiAgICAgICAgICAgIFN1cnZleUhlbHBlci5zZXRDb2x1bW5NYXJnaW5zKHRoaXMuY29udHJvbGxlciwgY29sQ291bnQsIGkgJSBjb2xDb3VudCk7XG4gICAgICAgICAgICBjdXJyUG9pbnQueExlZnQgPSB0aGlzLmNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0O1xuICAgICAgICAgICAgY29uc3QgaXRlbUZsYXQ6IElQZGZCcmljayA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVGbGF0Q29tcG9zaXRlKFxuICAgICAgICAgICAgICAgIGN1cnJQb2ludCwgdmlzaWJsZUNob2ljZXNbaV0sIGkpO1xuICAgICAgICAgICAgcm93LmFkZEJyaWNrKGl0ZW1GbGF0KTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5wb3BNYXJnaW5zKCk7XG4gICAgICAgICAgICBpZiAoaSAlIGNvbENvdW50ID09PSBjb2xDb3VudCAtIDEgfHwgaSA9PT0gdmlzaWJsZUNob2ljZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvd0xpbmVGbGF0OiBJUGRmQnJpY2sgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlUm93bGluZUZsYXQoXG4gICAgICAgICAgICAgICAgICAgIFN1cnZleUhlbHBlci5jcmVhdGVQb2ludChyb3cpLCB0aGlzLmNvbnRyb2xsZXIpO1xuICAgICAgICAgICAgICAgIGN1cnJQb2ludC55VG9wID0gcm93TGluZUZsYXQueUJvdCArXG4gICAgICAgICAgICAgICAgICAgIFN1cnZleUhlbHBlci5HQVBfQkVUV0VFTl9ST1dTICogdGhpcy5jb250cm9sbGVyLnVuaXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgZmxhdHMucHVzaChyb3csIHJvd0xpbmVGbGF0KTtcbiAgICAgICAgICAgICAgICByb3cgPSBuZXcgQ29tcG9zaXRlQnJpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxhdHM7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2ZsYXRfbGF5b3V0L2ZsYXRfc2VsZWN0YmFzZS50cyIsImltcG9ydCB7IElSZWN0LCBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgSVBkZkJyaWNrLCBUcmFuc2xhdGVYRnVuY3Rpb24gfSBmcm9tICcuL3BkZl9icmljayc7XG5cbmV4cG9ydCBjbGFzcyBSb3dsaW5lQnJpY2sgaW1wbGVtZW50cyBJUGRmQnJpY2sge1xuICAgIHhMZWZ0OiBudW1iZXI7XG4gICAgeFJpZ2h0OiBudW1iZXI7XG4gICAgeVRvcDogbnVtYmVyO1xuICAgIHlCb3Q6IG51bWJlcjtcbiAgICBwdWJsaWMgaXNQYWdlQnJlYWs6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHJvdGVjdGVkIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsXG4gICAgICAgIHJlY3Q6IElSZWN0LCBwcm90ZWN0ZWQgY29sb3I6IHN0cmluZykge1xuICAgICAgICB0aGlzLnhMZWZ0ID0gcmVjdC54TGVmdDtcbiAgICAgICAgdGhpcy54UmlnaHQgPSByZWN0LnhSaWdodDtcbiAgICAgICAgdGhpcy55VG9wID0gcmVjdC55VG9wO1xuICAgICAgICB0aGlzLnlCb3QgPSByZWN0LnlCb3Q7XG4gICAgfVxuICAgIHB1YmxpYyBnZXQgd2lkdGgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueFJpZ2h0IC0gdGhpcy54TGVmdDtcbiAgICB9XG4gICAgcHVibGljIGdldCBoZWlnaHQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueUJvdCAtIHRoaXMueVRvcDtcbiAgICB9XG4gICAgcHVibGljIGFzeW5jIHJlbmRlcigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKHRoaXMuY29sb3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxldCBvbGREcmF3Q29sb3I6IHN0cmluZyA9IHRoaXMuY29udHJvbGxlci5kb2MuZ2V0RHJhd0NvbG9yKCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZG9jLnNldERyYXdDb2xvcih0aGlzLmNvbG9yKTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5kb2MubGluZSh0aGlzLnhMZWZ0LCB0aGlzLnlUb3AsIHRoaXMueFJpZ2h0LCB0aGlzLnlUb3ApO1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLmRvYy5zZXREcmF3Q29sb3Iob2xkRHJhd0NvbG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgdW5mb2xkKCk6IElQZGZCcmlja1tdIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzXTtcbiAgICB9XG4gICAgdHJhbnNsYXRlWChfOiBUcmFuc2xhdGVYRnVuY3Rpb24pOiB2b2lkIHt9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3BkZl9yZW5kZXIvcGRmX3Jvd2xpbmUudHMiLCJpbXBvcnQgeyBJUXVlc3Rpb24sIFF1ZXN0aW9uVGV4dE1vZGVsLCBRdWVzdGlvbiB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCB7IElSZWN0LCBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgVGV4dEZpZWxkQnJpY2sgfSBmcm9tICcuL3BkZl90ZXh0ZmllbGQnO1xuaW1wb3J0IHsgU3VydmV5SGVscGVyIH0gZnJvbSAnLi4vaGVscGVyX3N1cnZleSc7XG5cbmV4cG9ydCBjbGFzcyBUZXh0Qm94QnJpY2sgZXh0ZW5kcyBUZXh0RmllbGRCcmljayB7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHF1ZXN0aW9uOiBJUXVlc3Rpb24sIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsXG4gICAgICAgIHJlY3Q6IElSZWN0LCBwcm90ZWN0ZWQgaXNRdWVzdGlvbjogYm9vbGVhbiA9IHRydWUsXG4gICAgICAgIHByb3RlY3RlZCBpc011bHRpbGluZTogYm9vbGVhbiA9IGZhbHNlLCBpbmRleDogbnVtYmVyID0gMCkge1xuICAgICAgICBzdXBlcihxdWVzdGlvbiwgY29udHJvbGxlciwgcmVjdCwgaXNRdWVzdGlvbixcbiAgICAgICAgICAgICg8UXVlc3Rpb25UZXh0TW9kZWw+cXVlc3Rpb24pLmlkICsgKGlzUXVlc3Rpb24gPyAnJyA6ICdfY29tbWVudCcgKyBpbmRleCksXG4gICAgICAgICAgICBTdXJ2ZXlIZWxwZXIuZ2V0UXVlc3Rpb25PckNvbW1lbnRWYWx1ZSg8UXVlc3Rpb24+cXVlc3Rpb24sIGlzUXVlc3Rpb24pLFxuICAgICAgICAgICAgaXNRdWVzdGlvbiAmJiAoPFF1ZXN0aW9uVGV4dE1vZGVsPnF1ZXN0aW9uKS5sb2NQbGFjZUhvbGRlciA/IFN1cnZleUhlbHBlci5nZXRMb2NTdHJpbmcoKDxRdWVzdGlvblRleHRNb2RlbD5xdWVzdGlvbikubG9jUGxhY2VIb2xkZXIpIDogJycsXG4gICAgICAgICAgICBxdWVzdGlvbi5pc1JlYWRPbmx5LCBpc011bHRpbGluZSxcbiAgICAgICAgICAgICg8UXVlc3Rpb25UZXh0TW9kZWw+cXVlc3Rpb24pLmlucHV0VHlwZSk7XG4gICAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9wZGZfcmVuZGVyL3BkZl90ZXh0Ym94LnRzIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzE4X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwge1wicm9vdFwiOlwianNwZGZcIixcImNvbW1vbmpzMlwiOlwianNwZGZcIixcImNvbW1vbmpzXCI6XCJqc3BkZlwiLFwiYW1kXCI6XCJqc3BkZlwifVxuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IHsgSVJlY3QsIElNYXJnaW4sIElTaXplLCBEb2NPcHRpb25zLCBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgSVBkZkJyaWNrLCBQZGZCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2JyaWNrJztcbmltcG9ydCB7IFRleHRCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX3RleHQnO1xuaW1wb3J0IHsgVGV4dEJvbGRCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX3RleHRib2xkJztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuXG4vKipcbiAqIEhvcml6b250YWwgYWxpZ25tZW50IHR5cGVzIGluIG9uUmVuZGVySGVhZGVyIGFuZCBvblJlbmRlckZvb3RlciBldmVudHNcbiAqL1xuZXhwb3J0IGVudW0gSG9yaXpvbnRhbEFsaWduIHtcbiAgICBOb3RTZXQgPSAnbm90c2V0JyxcbiAgICBMZWZ0ID0gJ2xlZnQnLFxuICAgIENlbnRlciA9ICdjZW50ZXInLFxuICAgIFJpZ2h0ID0gJ3JpZ2h0J1xufVxuLyoqXG4gKiBWZXJ0aWNhbCBhbGlnbm1lbnQgdHlwZXMgaW4gb25SZW5kZXJIZWFkZXIgYW5kIG9uUmVuZGVyRm9vdGVyIGV2ZW50c1xuICovXG5leHBvcnQgZW51bSBWZXJ0aWNhbEFsaWduIHtcbiAgICBOb3RTZXQgPSAnbm90c2V0JyxcbiAgICBUb3AgPSAndG9wJyxcbiAgICBNaWRkbGUgPSAnbWlkZGxlJyxcbiAgICBCb3R0b20gPSAnYm90dG9tJ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEcmF3UmVjdE9wdGlvbnMge1xuICAgIC8qKlxuICAgICAqIEhvcml6b250YWwgYWxpZ25tZW50IHdpdGhpbiB0aGUgcmVjdGFuZ2xlIHRoYXQgbGltaXRzIHRoZSBkcmF3aW5nIGFyZWEuXG4gICAgICpcbiAgICAgKiBQb3NzaWJsZSB2YWx1ZXM6XG4gICAgICpcbiAgICAgKiAtIGBcImNlbnRlclwiYCAoZGVmYXVsdClcbiAgICAgKiAtIGBcImxlZnRcImBcbiAgICAgKiAtIGBcInJpZ2h0XCJgXG4gICAgICovXG4gICAgaG9yaXpvbnRhbEFsaWduPzogSG9yaXpvbnRhbEFsaWduO1xuICAgIC8qKlxuICAgICAqIFZlcnRpY2FsIGFsaWdubWVudCB3aXRoaW4gdGhlIHJlY3RhbmdsZSB0aGF0IGxpbWl0cyB0aGUgZHJhd2luZyBhcmVhLlxuICAgICAqXG4gICAgICogUG9zc2libGUgdmFsdWVzOlxuICAgICAqXG4gICAgICogLSBgXCJtaWRkbGVcImAgKGRlZmF1bHQpXG4gICAgICogLSBgXCJ0b3BcImBcbiAgICAgKiAtIGBcImJvdHRvbVwiYFxuICAgICAqL1xuICAgIHZlcnRpY2FsQWxpZ24/OiBWZXJ0aWNhbEFsaWduO1xuICAgIC8qKlxuICAgICAqIFRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBjb250ZW50IGFuZCB0aGUgYm9yZGVycyBvZiB0aGUgcmVjdGFuZ2xlLiBUaGlzIHByb3BlcnR5IGFwcGxpZXMgb25seSBpZiB0aGUgY29udGVudCBpcyBhbGlnbmVkIHRvIHRoZSBsZWZ0L3JpZ2h0IG9yIHRvcC9ib3R0b20uXG4gICAgICovXG4gICAgbWFyZ2lucz86IElNYXJnaW47XG4gICAgLyoqXG4gICAgICogQW4gb2JqZWN0IHdpdGggY29vcmRpbmF0ZXMgb2YgdGhlIHJlY3RhbmdsZS5cbiAgICAgKi9cbiAgICByZWN0PzogSVJlY3Q7XG59XG4vKipcbiAqIEFuIG9iamVjdCB0aGF0IGNvbmZpZ3VyZXMgcmVuZGVyaW5nIGEgcGllY2Ugb2YgdGV4dC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJRHJhd1RleHRPcHRpb25zIGV4dGVuZHMgSURyYXdSZWN0T3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogQSB0ZXh0IHN0cmluZyB0byBiZSBkcmF3bi5cbiAgICAgKi9cbiAgICB0ZXh0OiBzdHJpbmc7XG4gICAgLyoqXG4gICAgICogRm9udCBzaXplIGluIHBvaW50cy5cbiAgICAgKlxuICAgICAqIERlZmF1bHQgdmFsdWU6IDE0XG4gICAgICovXG4gICAgZm9udFNpemU/OiBudW1iZXI7XG4gICAgLyoqXG4gICAgICogRW5hYmxlIHRoaXMgcHJvcGVydHkgdG8gcmVuZGVyIHRoZSB0ZXh0IHN0cmluZyBib2xkLlxuICAgICAqXG4gICAgICogRGVmYXVsdCB2YWx1ZTogYGZhbHNlYFxuICAgICAqL1xuICAgIGlzQm9sZD86IGJvb2xlYW47XG59XG4vKipcbiAqIEFuIG9iamVjdCB0aGF0IGNvbmZpZ3VyZXMgcmVuZGVyaW5nIGFuIGltYWdlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElEcmF3SW1hZ2VPcHRpb25zIGV4dGVuZHMgSURyYXdSZWN0T3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogQW4gaW1hZ2Ugd2lkdGggaW4gcGl4ZWxzLiBEZWZhdWx0cyB0byB0aGUgW3JlY3RhbmdsZSB3aWR0aF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9wZGYtZ2VuZXJhdG9yL2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9pZHJhd2ltYWdlb3B0aW9ucyNyZWN0KS5cbiAgICAgKi9cbiAgICB3aWR0aD86IG51bWJlcjtcbiAgICAvKipcbiAgICAgKiBBbiBpbWFnZSBoZWlnaHQgaW4gcGl4ZWxzLiBEZWZhdWx0cyB0byB0aGUgW3JlY3RhbmdsZSBoZWlnaHRdKGh0dHBzOi8vc3VydmV5anMuaW8vcGRmLWdlbmVyYXRvci9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvaWRyYXdpbWFnZW9wdGlvbnMjcmVjdCkuXG4gICAgICovXG4gICAgaGVpZ2h0PzogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHZhbHVlIHdpdGggYSBiYXNlNjQtZW5jb2RlZCBpbWFnZSB0byBiZSBkcmF3bi5cbiAgICAgKi9cbiAgICBiYXNlNjQ6IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgaG93IHRvIHJlc2l6ZSB0aGUgaW1hZ2UgdG8gZml0IGl0IGludG8gaXRzIGNvbnRhaW5lci5cbiAgICAgKlxuICAgICAqIERlZmF1bHQgdmFsdWU6IGBcImNvbnRhaW5cImAgaWYgW2BhcHBseUltYWdlRml0YF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9wZGYtZ2VuZXJhdG9yL2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9pZG9jb3B0aW9ucyNhcHBseUltYWdlRml0KSBpcyBlbmFibGVkIG9yIGB1bmRlZmluZWRgIGlmIG5vdC5cbiAgICAgKlxuICAgICAqIFJlZmVyIHRvIHRoZSBbYG9iamVjdC1maXRgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1Mvb2JqZWN0LWZpdCkgQ1NTIHByb3BlcnR5IGRlc2NyaXB0aW9uIGZvciBpbmZvcm1hdGlvbiBvbiBhY2NlcHRlZCB2YWx1ZXMuXG4gICAgICovXG4gICAgaW1hZ2VGaXQ/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogQW4gb2JqZWN0IHRoYXQgZGVzY3JpYmVzIGEgZHJhd2luZyBhcmVhIGFuZCBlbmFibGVzIHlvdSB0byBkcmF3IGFuIGltYWdlIG9yIGEgcGllY2Ugb2YgdGV4dCB3aXRoaW4gdGhlIGFyZWEuIFlvdSBjYW4gYWNjZXNzIHRoaXMgb2JqZWN0IHdpdGhpbiBmdW5jdGlvbnMgdGhhdCBoYW5kbGUgYFN1cnZleVBERmAncyBbYG9uUmVuZGVySGVhZGVyYF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9wZGYtZ2VuZXJhdG9yL2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9zdXJ2ZXlwZGYjb25SZW5kZXJIZWFkZXIpIGFuZCBbYG9uUmVuZGVyRm9vdGVyYF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9wZGYtZ2VuZXJhdG9yL2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9zdXJ2ZXlwZGYjb25SZW5kZXJGb290ZXIpIGV2ZW50cy5cbiAqXG4gKiBbVmlldyBEZW1vXShodHRwczovL3N1cnZleWpzLmlvL3BkZi1nZW5lcmF0b3IvZXhhbXBsZXMvY3VzdG9taXplLWhlYWRlci1hbmQtZm9vdGVyLW9mLXBkZi1mb3JtLyAobGlua1N0eWxlKSlcbiAqL1xuZXhwb3J0IGNsYXNzIERyYXdDYW52YXMge1xuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgcGFja3M6IElQZGZCcmlja1tdLFxuICAgICAgICBwdWJsaWMgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcixcbiAgICAgICAgcHJvdGVjdGVkIF9yZWN0OiBJUmVjdCxcbiAgICAgICAgcHJvdGVjdGVkIF9jb3VudFBhZ2VzOiBudW1iZXIsXG4gICAgICAgIHByb3RlY3RlZCBfcGFnZU51bWJlcjogbnVtYmVyKSB7IH1cbiAgICAvKipcbiAgICAgKiBBIHRvdGFsIG51bWJlciBvZiBwYWdlcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgcHVibGljIGdldCBwYWdlQ291bnQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvdW50UGFnZXM7XG4gICAgfVxuICAgIHB1YmxpYyBnZXQgY291bnRQYWdlcygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fY291bnRQYWdlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiB0aGUgcGFnZSB0aGF0IGNvbnRhaW5zIHRoZSBkcmF3aW5nIGFyZWEuIEVudW1lcmF0aW9uIHN0YXJ0cyB3aXRoIDEuXG4gICAgICovXG4gICAgcHVibGljIGdldCBwYWdlTnVtYmVyKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYWdlTnVtYmVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbiBvYmplY3Qgd2l0aCBjb29yZGluYXRlcyBvZiBhIHJlY3RhbmdsZSB0aGF0IGxpbWl0cyB0aGUgZHJhd2luZyBhcmVhLiBUaGlzIG9iamVjdCBjb250YWluIHRoZSBmb2xsb3dpbmcgZmllbGRzOiBgeExlZnRgLCBgeFJpZ2h0YCwgYHlUb3BgLCBgeUJvdGAuXG4gICAgICovXG4gICAgcHVibGljIGdldCByZWN0KCk6IElSZWN0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlY3Q7XG4gICAgfVxuICAgIHByaXZhdGUgYWxpZ25SZWN0KHJlY3RPcHRpb25zOiBJRHJhd1JlY3RPcHRpb25zLCBpdGVtU2l6ZTogSVNpemUpOiBJUmVjdCB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVjdE9wdGlvbnMubWFyZ2lucyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJlY3RPcHRpb25zLm1hcmdpbnMgPSB7IGxlZnQ6IDAuMCwgcmlnaHQ6IDAuMCwgdG9wOiAwLjAsIGJvdDogMC4wIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlY3RPcHRpb25zLm1hcmdpbnMubGVmdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICByZWN0T3B0aW9ucy5tYXJnaW5zLmxlZnQgPSAwLjA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlY3RPcHRpb25zLm1hcmdpbnMucmlnaHQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgcmVjdE9wdGlvbnMubWFyZ2lucy5yaWdodCA9IDAuMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVjdE9wdGlvbnMubWFyZ2lucy50b3AgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgcmVjdE9wdGlvbnMubWFyZ2lucy50b3AgPSAwLjA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlY3RPcHRpb25zLm1hcmdpbnMuYm90ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHJlY3RPcHRpb25zLm1hcmdpbnMuYm90ID0gMC4wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcmVjdE9wdGlvbnMucmVjdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVjdE9wdGlvbnMuaG9yaXpvbnRhbEFsaWduID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgICAgIHJlY3RPcHRpb25zLmhvcml6b250YWxBbGlnbiA9PT0gSG9yaXpvbnRhbEFsaWduLk5vdFNldCkge1xuICAgICAgICAgICAgICAgIHJlY3RPcHRpb25zLmhvcml6b250YWxBbGlnbiA9IEhvcml6b250YWxBbGlnbi5DZW50ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlY3RPcHRpb25zLnZlcnRpY2FsQWxpZ24gPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICAgICAgcmVjdE9wdGlvbnMudmVydGljYWxBbGlnbiA9PT0gVmVydGljYWxBbGlnbi5Ob3RTZXQpIHtcbiAgICAgICAgICAgICAgICByZWN0T3B0aW9ucy52ZXJ0aWNhbEFsaWduID0gVmVydGljYWxBbGlnbi5NaWRkbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVjdDogSVJlY3QgPSBTdXJ2ZXlIZWxwZXIuY2xvbmUodGhpcy5yZWN0KTtcbiAgICAgICAgaWYgKHR5cGVvZiByZWN0T3B0aW9ucy5ob3Jpem9udGFsQWxpZ24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHJlY3RPcHRpb25zLmhvcml6b250YWxBbGlnbikge1xuICAgICAgICAgICAgICAgIGNhc2UgSG9yaXpvbnRhbEFsaWduLkxlZnQ6XG4gICAgICAgICAgICAgICAgICAgIHJlY3QueExlZnQgPSB0aGlzLnJlY3QueExlZnQgKyByZWN0T3B0aW9ucy5tYXJnaW5zLmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIHJlY3QueFJpZ2h0ID0gTWF0aC5taW4odGhpcy5yZWN0LnhSaWdodCAtIHJlY3RPcHRpb25zLm1hcmdpbnMucmlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY3QueExlZnQgKyByZWN0T3B0aW9ucy5tYXJnaW5zLmxlZnQgKyBpdGVtU2l6ZS53aWR0aCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgSG9yaXpvbnRhbEFsaWduLkNlbnRlcjpcbiAgICAgICAgICAgICAgICAgICAgcmVjdC54TGVmdCA9IE1hdGgubWF4KHRoaXMucmVjdC54TGVmdCArIHJlY3RPcHRpb25zLm1hcmdpbnMubGVmdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnJlY3QueExlZnQgKyB0aGlzLnJlY3QueFJpZ2h0IC0gaXRlbVNpemUud2lkdGgpIC8gMi4wKTtcbiAgICAgICAgICAgICAgICAgICAgcmVjdC54UmlnaHQgPSBNYXRoLm1pbih0aGlzLnJlY3QueFJpZ2h0IC0gcmVjdE9wdGlvbnMubWFyZ2lucy5yaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnJlY3QueExlZnQgKyB0aGlzLnJlY3QueFJpZ2h0ICsgaXRlbVNpemUud2lkdGgpIC8gMi4wKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBIb3Jpem9udGFsQWxpZ24uUmlnaHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlY3QueExlZnQgPSBNYXRoLm1heCh0aGlzLnJlY3QueExlZnQgKyByZWN0T3B0aW9ucy5tYXJnaW5zLmxlZnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY3QueFJpZ2h0IC0gcmVjdE9wdGlvbnMubWFyZ2lucy5yaWdodCAtIGl0ZW1TaXplLndpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVjdC54UmlnaHQgPSB0aGlzLnJlY3QueFJpZ2h0IC0gcmVjdE9wdGlvbnMubWFyZ2lucy5yaWdodDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZWN0LnhMZWZ0ID0gcmVjdE9wdGlvbnMucmVjdC54TGVmdCB8fCB0aGlzLnJlY3QueExlZnQ7XG4gICAgICAgICAgICByZWN0LnhSaWdodCA9IHJlY3RPcHRpb25zLnJlY3QueFJpZ2h0IHx8IHRoaXMucmVjdC54UmlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiByZWN0T3B0aW9ucy52ZXJ0aWNhbEFsaWduICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgc3dpdGNoIChyZWN0T3B0aW9ucy52ZXJ0aWNhbEFsaWduKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBWZXJ0aWNhbEFsaWduLlRvcDpcbiAgICAgICAgICAgICAgICAgICAgcmVjdC55VG9wID0gdGhpcy5yZWN0LnlUb3AgKyByZWN0T3B0aW9ucy5tYXJnaW5zLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgcmVjdC55Qm90ID0gTWF0aC5taW4odGhpcy5yZWN0LnlCb3QgLSByZWN0T3B0aW9ucy5tYXJnaW5zLmJvdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVjdC55VG9wICsgcmVjdE9wdGlvbnMubWFyZ2lucy50b3AgKyBpdGVtU2l6ZS5oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFZlcnRpY2FsQWxpZ24uTWlkZGxlOlxuICAgICAgICAgICAgICAgICAgICByZWN0LnlUb3AgPSBNYXRoLm1heCh0aGlzLnJlY3QueVRvcCArIHJlY3RPcHRpb25zLm1hcmdpbnMudG9wLFxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucmVjdC55VG9wICsgdGhpcy5yZWN0LnlCb3QgLSBpdGVtU2l6ZS5oZWlnaHQpIC8gMi4wKTtcbiAgICAgICAgICAgICAgICAgICAgcmVjdC55Qm90ID0gTWF0aC5taW4odGhpcy5yZWN0LnlCb3QgLSByZWN0T3B0aW9ucy5tYXJnaW5zLmJvdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnJlY3QueVRvcCArIHRoaXMucmVjdC55Qm90ICsgaXRlbVNpemUuaGVpZ2h0KSAvIDIuMCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgVmVydGljYWxBbGlnbi5Cb3R0b206XG4gICAgICAgICAgICAgICAgICAgIHJlY3QueVRvcCA9IE1hdGgubWF4KHRoaXMucmVjdC55VG9wICsgcmVjdE9wdGlvbnMubWFyZ2lucy50b3AsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY3QueUJvdCAtIHJlY3RPcHRpb25zLm1hcmdpbnMuYm90IC0gaXRlbVNpemUuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVjdC55Qm90ID0gdGhpcy5yZWN0LnlCb3QgLSByZWN0T3B0aW9ucy5tYXJnaW5zLmJvdDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZWN0LnlUb3AgPSByZWN0T3B0aW9ucy5yZWN0LnlUb3AgfHwgdGhpcy5yZWN0LnlUb3A7XG4gICAgICAgICAgICByZWN0LnlCb3QgPSByZWN0T3B0aW9ucy5yZWN0LnlCb3QgfHwgdGhpcy5yZWN0LnlCb3Q7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlY3Q7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERyYXdzIGEgcGllY2Ugb2YgdGV4dCB3aXRoaW4gdGhlIGRyYXdpbmcgYXJlYS5cbiAgICAgKiBAcGFyYW0gdGV4dE9wdGlvbnMgQW4gW2BJRHJhd1RleHRPcHRpb25zYF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9wZGYtZ2VuZXJhdG9yL2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9pZHJhd3RleHRvcHRpb25zKSBvYmplY3QgdGhhdCBjb25maWd1cmVzIHRoZSBkcmF3aW5nLlxuICAgICAqL1xuICAgIHB1YmxpYyBkcmF3VGV4dCh0ZXh0T3B0aW9uczogSURyYXdUZXh0T3B0aW9ucyk6IHZvaWQge1xuICAgICAgICB0ZXh0T3B0aW9ucyA9IFN1cnZleUhlbHBlci5jbG9uZSh0ZXh0T3B0aW9ucyk7XG4gICAgICAgIGlmICh0eXBlb2YgdGV4dE9wdGlvbnMuZm9udFNpemUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0ZXh0T3B0aW9ucy5mb250U2l6ZSA9IERvY09wdGlvbnMuRk9OVF9TSVpFO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGV4dE9wdGlvbnMuaXNCb2xkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGV4dE9wdGlvbnMuaXNCb2xkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGV4dFNpemU6IElTaXplID0gdGhpcy5jb250cm9sbGVyLm1lYXN1cmVUZXh0KHRleHRPcHRpb25zLnRleHQsXG4gICAgICAgICAgICB0ZXh0T3B0aW9ucy5pc0JvbGQgPyAnYm9sZCcgOiAnbm9ybWFsJywgdGV4dE9wdGlvbnMuZm9udFNpemUpO1xuICAgICAgICBjb25zdCB0ZXh0UmVjdDogSVJlY3QgPSB0aGlzLmFsaWduUmVjdCh0ZXh0T3B0aW9ucywgdGV4dFNpemUpO1xuICAgICAgICBpZiAoIXRleHRPcHRpb25zLmlzQm9sZCkge1xuICAgICAgICAgICAgdGhpcy5wYWNrcy5wdXNoKG5ldyBUZXh0QnJpY2sobnVsbCwgdGhpcy5jb250cm9sbGVyLFxuICAgICAgICAgICAgICAgIHRleHRSZWN0LCB0ZXh0T3B0aW9ucy50ZXh0KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBhY2tzLnB1c2gobmV3IFRleHRCb2xkQnJpY2sobnVsbCwgdGhpcy5jb250cm9sbGVyLFxuICAgICAgICAgICAgICAgIHRleHRSZWN0LCB0ZXh0T3B0aW9ucy50ZXh0KSk7XG4gICAgICAgIH1cbiAgICAgICAgKDxQZGZCcmljaz50aGlzLnBhY2tzW3RoaXMucGFja3MubGVuZ3RoIC0gMV0pLmZvbnRTaXplID0gdGV4dE9wdGlvbnMuZm9udFNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERyYXdzIGFuIGltYWdlIHdpdGhpbiB0aGUgZHJhd2luZyBhcmVhLlxuICAgICAqIEBwYXJhbSBpbWFnZU9wdGlvbnMgQW4gW2BJRHJhd0ltYWdlT3B0aW9uc2BdKGh0dHBzOi8vc3VydmV5anMuaW8vcGRmLWdlbmVyYXRvci9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvaWRyYXdpbWFnZW9wdGlvbnMpIG9iamVjdCB0aGF0IGNvbmZpZ3VyZXMgZHJhd2luZy5cbiAgICAgKi9cbiAgICBwdWJsaWMgYXN5bmMgZHJhd0ltYWdlKGltYWdlT3B0aW9uczogSURyYXdJbWFnZU9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaW1hZ2VPcHRpb25zID0gU3VydmV5SGVscGVyLmNsb25lKGltYWdlT3B0aW9ucyk7XG4gICAgICAgIGlmICh0eXBlb2YgaW1hZ2VPcHRpb25zLndpZHRoID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaW1hZ2VPcHRpb25zLndpZHRoID0gdGhpcy5yZWN0LnhSaWdodCAtIHRoaXMucmVjdC54TGVmdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGltYWdlT3B0aW9ucy5oZWlnaHQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpbWFnZU9wdGlvbnMuaGVpZ2h0ID0gdGhpcy5yZWN0LnlCb3QgLSB0aGlzLnJlY3QueVRvcDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbWFnZVNpemU6IElTaXplID0ge1xuICAgICAgICAgICAgd2lkdGg6IGltYWdlT3B0aW9ucy53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogaW1hZ2VPcHRpb25zLmhlaWdodFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBpbWFnZVJlY3Q6IElSZWN0ID0gdGhpcy5hbGlnblJlY3QoaW1hZ2VPcHRpb25zLCBpbWFnZVNpemUpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIucHVzaE1hcmdpbnMoMCwgMCk7XG4gICAgICAgIHRoaXMucGFja3MucHVzaChhd2FpdCBTdXJ2ZXlIZWxwZXIuY3JlYXRlSW1hZ2VGbGF0KFxuICAgICAgICAgICAgU3VydmV5SGVscGVyLmNyZWF0ZVBvaW50KGltYWdlUmVjdCwgdHJ1ZSwgdHJ1ZSksXG4gICAgICAgICAgICBudWxsLCB0aGlzLmNvbnRyb2xsZXIsIHsgbGluazogaW1hZ2VPcHRpb25zLmJhc2U2NCxcbiAgICAgICAgICAgICAgICB3aWR0aDogaW1hZ2VSZWN0LnhSaWdodCAtIGltYWdlUmVjdC54TGVmdCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGltYWdlUmVjdC55Qm90IC0gaW1hZ2VSZWN0LnlUb3AsIG9iamVjdEZpdDogaW1hZ2VPcHRpb25zLmltYWdlRml0IH0sICEhaW1hZ2VPcHRpb25zLmltYWdlRml0IHx8IHRoaXMuY29udHJvbGxlci5hcHBseUltYWdlRml0KSk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5wb3BNYXJnaW5zKCk7XG4gICAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9ldmVudF9oYW5kbGVyL2RyYXdfY2FudmFzLnRzIiwiaW1wb3J0IHsgRXZlbnQsIEV2ZW50QmFzZSB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCB7IFN1cnZleVBERiB9IGZyb20gJy4uL3N1cnZleSc7XG5pbXBvcnQgeyBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgSVBkZkJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfYnJpY2snO1xuaW1wb3J0IHsgRHJhd0NhbnZhcyB9IGZyb20gJy4vZHJhd19jYW52YXMnO1xuaW1wb3J0IHsgU3VydmV5SGVscGVyIH0gZnJvbSAnLi4vaGVscGVyX3N1cnZleSc7XG5cbmV4cG9ydCBjbGFzcyBFdmVudEFzeW5jPFNlbmRlciwgT3B0aW9ucz4gZXh0ZW5kcyBFdmVudEJhc2U8U2VuZGVyLCBPcHRpb25zPiB7XG4gICAgcHVibGljIHVuc2hpZnQoZnVuYzogKHNlbmRlcjogU2VuZGVyLCBvcHRpb25zOiBPcHRpb25zKSA9PiBhbnkpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzRnVuYyhmdW5jKSkgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5jYWxsYmFja3MgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5jYWxsYmFja3MgPSBuZXcgQXJyYXk8KHNlbmRlcjogU2VuZGVyLCBvcHRpb25zOiBPcHRpb25zKSA9PiBhbnk+KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWxsYmFja3MudW5zaGlmdChmdW5jKTtcbiAgICB9XG4gICAgcHVibGljIGFzeW5jIGZpcmUoc2VuZGVyOiBTZW5kZXIsIG9wdGlvbnM6IE9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FsbGJhY2tzID09IG51bGwpIHJldHVybjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jYWxsYmFja3NbaV0oc2VuZGVyLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBFdmVudEhhbmRsZXIge1xuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgcHJvY2Vzc19oZWFkZXJfZXZlbnRzKHN1cnZleTogU3VydmV5UERGLFxuICAgICAgICBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLCBwYWNrczogSVBkZkJyaWNrW11bXSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIXN1cnZleS5oYXZlQ29tbWVyY2lhbExpY2Vuc2UpIHtcbiAgICAgICAgICAgIHN1cnZleS5vblJlbmRlckhlYWRlci5hZGQoKF8sIGNhbnZhcykgPT4ge1xuICAgICAgICAgICAgICAgIGNhbnZhcy5kcmF3VGV4dCh7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdTdXJ2ZXlKUyBQREYgfCBQbGVhc2UgcHVyY2hhc2UgYSBTdXJ2ZXlKUyBQREYgZGV2ZWxvcGVyIGxpY2Vuc2UgdG8gdXNlIGl0IGluIHlvdXIgYXBwIHwgaHR0cHM6Ly9zdXJ2ZXlqcy5pby9CdXknLFxuICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogMTBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBwYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXdhaXQgc3VydmV5Lm9uUmVuZGVySGVhZGVyLmZpcmUoc3VydmV5LCBuZXcgRHJhd0NhbnZhcyhwYWNrc1tpXSwgY29udHJvbGxlcixcbiAgICAgICAgICAgICAgICBTdXJ2ZXlIZWxwZXIuY3JlYXRlSGVhZGVyUmVjdChjb250cm9sbGVyKSwgcGFja3MubGVuZ3RoLCBpICsgMSkpO1xuICAgICAgICAgICAgYXdhaXQgc3VydmV5Lm9uUmVuZGVyRm9vdGVyLmZpcmUoc3VydmV5LCBuZXcgRHJhd0NhbnZhcyhwYWNrc1tpXSwgY29udHJvbGxlcixcbiAgICAgICAgICAgICAgICBTdXJ2ZXlIZWxwZXIuY3JlYXRlRm9vdGVyUmVjdChjb250cm9sbGVyKSwgcGFja3MubGVuZ3RoLCBpICsgMSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9ldmVudF9oYW5kbGVyL2V2ZW50X2hhbmRsZXIudHMiLCJpbXBvcnQgeyBJUG9pbnQgfSBmcm9tICcuLi9kb2NfY29udHJvbGxlcic7XG5pbXBvcnQgeyBTdXJ2ZXlIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXJfc3VydmV5JztcbmltcG9ydCB7IElQZGZCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2JyaWNrJztcbmltcG9ydCB7IFRleHRCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX3RleHQnO1xuaW1wb3J0IHsgRmxhdFF1ZXN0aW9uIH0gZnJvbSAnLi9mbGF0X3F1ZXN0aW9uJztcblxuZXhwb3J0IGNsYXNzIEZsYXRRdWVzdGlvbkRlZmF1bHQgZXh0ZW5kcyBGbGF0UXVlc3Rpb24ge1xuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUZsYXRzQ29udGVudChwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2tbXT4ge1xuICAgICAgICBjb25zdCB2YWx1ZUJyaWNrID0gYXdhaXQgU3VydmV5SGVscGVyLmNyZWF0ZVRleHRGbGF0KHBvaW50LCB0aGlzLnF1ZXN0aW9uLCB0aGlzLmNvbnRyb2xsZXIsIGAke3RoaXMucXVlc3Rpb24uZGlzcGxheVZhbHVlfWAsIFRleHRCcmljayk7XG4gICAgICAgIHJldHVybiBbdmFsdWVCcmlja107XG4gICAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9mbGF0X2xheW91dC9mbGF0X2RlZmF1bHQudHMiLCJpbXBvcnQge1xuICAgIElRdWVzdGlvbiwgUXVlc3Rpb25NYXRyaXhEcm9wZG93bk1vZGVsQmFzZSwgUXVlc3Rpb25NYXRyaXhEcm9wZG93blJlbmRlcmVkVGFibGUsXG4gICAgUXVlc3Rpb25NYXRyaXhEcm9wZG93blJlbmRlcmVkUm93LCBRdWVzdGlvbk1hdHJpeERyb3Bkb3duUmVuZGVyZWRDZWxsLCBTZXJpYWxpemVyLCBQYW5lbE1vZGVsLCBRdWVzdGlvbk1hdHJpeER5bmFtaWNNb2RlbCxcbiAgICBMb2NhbGl6YWJsZVN0cmluZ1xufSBmcm9tICdzdXJ2ZXktY29yZSc7XG5pbXBvcnQgeyBTdXJ2ZXlQREYgfSBmcm9tICcuLi9zdXJ2ZXknO1xuaW1wb3J0IHsgSVBvaW50LCBJUmVjdCwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IElGbGF0UXVlc3Rpb24sIEZsYXRRdWVzdGlvbiB9IGZyb20gJy4vZmxhdF9xdWVzdGlvbic7XG5pbXBvcnQgeyBGbGF0U2VsZWN0QmFzZSB9IGZyb20gJy4vZmxhdF9zZWxlY3RiYXNlJztcbmltcG9ydCB7IEZsYXRSZXBvc2l0b3J5IH0gZnJvbSAnLi9mbGF0X3JlcG9zaXRvcnknO1xuaW1wb3J0IHsgSVBkZkJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfYnJpY2snO1xuaW1wb3J0IHsgVGV4dEJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfdGV4dCc7XG5pbXBvcnQgeyBDb21wb3NpdGVCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2NvbXBvc2l0ZSc7XG5pbXBvcnQgeyBTdXJ2ZXlIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXJfc3VydmV5JztcbmltcG9ydCB7IEZsYXRTdXJ2ZXkgfSBmcm9tICcuL2ZsYXRfc3VydmV5JztcblxuZXhwb3J0IGNsYXNzIEZsYXRNYXRyaXhNdWx0aXBsZSBleHRlbmRzIEZsYXRRdWVzdGlvbiB7XG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBHQVBfQkVUV0VFTl9ST1dTOiBudW1iZXIgPSAwLjU7XG4gICAgcHJvdGVjdGVkIHF1ZXN0aW9uOiBRdWVzdGlvbk1hdHJpeERyb3Bkb3duTW9kZWxCYXNlO1xuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgc3VydmV5OiBTdXJ2ZXlQREYsIHF1ZXN0aW9uOiBJUXVlc3Rpb24sIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsXG4gICAgICAgIHByb3RlY3RlZCBpc011bHRpcGxlOiBib29sZWFuID0gdHJ1ZSkge1xuICAgICAgICBzdXBlcihzdXJ2ZXksIHF1ZXN0aW9uLCBjb250cm9sbGVyKTtcbiAgICAgICAgdGhpcy5xdWVzdGlvbiA9IDxRdWVzdGlvbk1hdHJpeERyb3Bkb3duTW9kZWxCYXNlPnF1ZXN0aW9uO1xuICAgIH1cbiAgICBwcml2YXRlIHZpc2libGVSb3dzVmFsdWU6IFF1ZXN0aW9uTWF0cml4RHJvcGRvd25SZW5kZXJlZFJvd1tdO1xuICAgIHByaXZhdGUgZ2V0IHZpc2libGVSb3dzKCkge1xuICAgICAgICBpZighdGhpcy52aXNpYmxlUm93c1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGVSb3dzVmFsdWUgPSB0aGlzLnF1ZXN0aW9uLnJlbmRlcmVkVGFibGUucm93cy5maWx0ZXIocm93ID0+IHJvdy52aXNpYmxlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy52aXNpYmxlUm93c1ZhbHVlO1xuICAgIH1cbiAgICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlRmxhdHNDZWxsVGl0bGUocG9pbnQ6IElQb2ludCwgbG9jVGl0bGU6IExvY2FsaXphYmxlU3RyaW5nKTogUHJvbWlzZTxDb21wb3NpdGVCcmljaz4ge1xuICAgICAgICBjb25zdCBjb21wb3NpdGU6IENvbXBvc2l0ZUJyaWNrID0gbmV3IENvbXBvc2l0ZUJyaWNrKCk7XG4gICAgICAgIGNvbXBvc2l0ZS5hZGRCcmljayhhd2FpdCBTdXJ2ZXlIZWxwZXIuY3JlYXRlVGV4dEZsYXQocG9pbnQsXG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uLCB0aGlzLmNvbnRyb2xsZXIsIGxvY1RpdGxlLCBUZXh0QnJpY2spKTtcbiAgICAgICAgcmV0dXJuIGNvbXBvc2l0ZTtcbiAgICB9XG4gICAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUZsYXRzQ2VsbChwb2ludDogSVBvaW50LCBjZWxsOiBRdWVzdGlvbk1hdHJpeERyb3Bkb3duUmVuZGVyZWRDZWxsLFxuICAgICAgICBsb2NhdGlvbj86ICdoZWFkZXInIHwgJ2Zvb3RlcicsIGlzV2lkZTogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPENvbXBvc2l0ZUJyaWNrPiB7XG4gICAgICAgIGNvbnN0IGNvbXBvc2l0ZTogQ29tcG9zaXRlQnJpY2sgPSBuZXcgQ29tcG9zaXRlQnJpY2soKTtcbiAgICAgICAgaWYgKGNlbGwuaGFzUXVlc3Rpb24pIHtcbiAgICAgICAgICAgIGlmKGxvY2F0aW9uID09ICdmb290ZXInICYmICFjZWxsLnF1ZXN0aW9uLmlzQW5zd2VyZWQpIHt9XG4gICAgICAgICAgICBlbHNlIGlmIChpc1dpZGUgJiYgY2VsbC5pc0Nob2ljZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZsYXRNdWx0aXBsZUNvbHVtbnNRdWVzdGlvbjogSUZsYXRRdWVzdGlvbiA9IEZsYXRSZXBvc2l0b3J5LmdldEluc3RhbmNlKCkuY3JlYXRlKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1cnZleSwgY2VsbC5xdWVzdGlvbiwgdGhpcy5jb250cm9sbGVyLCBjZWxsLnF1ZXN0aW9uLmdldFR5cGUoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbVJlY3Q6IElSZWN0ID0gU3VydmV5SGVscGVyLm1vdmVSZWN0KFN1cnZleUhlbHBlci5zY2FsZVJlY3QoXG4gICAgICAgICAgICAgICAgICAgIFN1cnZleUhlbHBlci5jcmVhdGVSZWN0KHBvaW50LCB0aGlzLmNvbnRyb2xsZXIudW5pdEhlaWdodCwgdGhpcy5jb250cm9sbGVyLnVuaXRIZWlnaHQpLFxuICAgICAgICAgICAgICAgICAgICBTdXJ2ZXlIZWxwZXIuU0VMRUNUX0lURU1fRkxBVF9TQ0FMRSksIHBvaW50LnhMZWZ0KTtcbiAgICAgICAgICAgICAgICBjb21wb3NpdGUuYWRkQnJpY2soKDxGbGF0U2VsZWN0QmFzZT5mbGF0TXVsdGlwbGVDb2x1bW5zUXVlc3Rpb24pXG4gICAgICAgICAgICAgICAgICAgIC5nZW5lcmF0ZUZsYXRJdGVtKGl0ZW1SZWN0LCBjZWxsLml0ZW0sIGNlbGwuY2hvaWNlSW5kZXgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNlbGwucXVlc3Rpb24udGl0bGVMb2NhdGlvbiA9IFN1cnZleUhlbHBlci5USVRMRV9MT0NBVElPTl9NQVRSSVg7XG4gICAgICAgICAgICAgICAgY29tcG9zaXRlLmFkZEJyaWNrKC4uLmF3YWl0IFN1cnZleUhlbHBlci5nZW5lcmF0ZVF1ZXN0aW9uRmxhdHMoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3VydmV5LCB0aGlzLmNvbnRyb2xsZXIsIGNlbGwucXVlc3Rpb24sIHBvaW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2VsbC5oYXNUaXRsZSkge1xuICAgICAgICAgICAgaWYgKGxvY2F0aW9uID09ICdoZWFkZXInKSB7XG4gICAgICAgICAgICAgICAgY29tcG9zaXRlLmFkZEJyaWNrKGF3YWl0IFN1cnZleUhlbHBlci5jcmVhdGVCb2xkVGV4dEZsYXQocG9pbnQsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb24sIHRoaXMuY29udHJvbGxlciwgY2VsbC5sb2NUaXRsZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29tcG9zaXRlLmFkZEJyaWNrKGF3YWl0IFN1cnZleUhlbHBlci5jcmVhdGVUZXh0RmxhdChwb2ludCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbiwgdGhpcy5jb250cm9sbGVyLCBjZWxsLmxvY1RpdGxlLCBUZXh0QnJpY2spKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcG9zaXRlO1xuICAgIH1cbiAgICBwcml2YXRlIGdldCBoYXNEZXRhaWxQYW5lbCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlzaWJsZVJvd3Muc29tZSgocmVuZGVyZWRSb3cpID0+IHJlbmRlcmVkUm93LnJvdyAmJiB0aGlzLnF1ZXN0aW9uLmhhc0RldGFpbFBhbmVsKHJlbmRlcmVkUm93LnJvdykpO1xuICAgIH1cbiAgICBwcml2YXRlIGlnbm9yZUNlbGwoY2VsbDogUXVlc3Rpb25NYXRyaXhEcm9wZG93blJlbmRlcmVkQ2VsbCwgaW5kZXg6IG51bWJlciwgbG9jYXRpb24/OiAnaGVhZGVyJyB8ICdmb290ZXInLCBpc1dpZGU6IGJvb2xlYW4gPSB0cnVlKTogYm9vbGVhbiB7XG4gICAgICAgIGlmKCFpc1dpZGUgJiYgbG9jYXRpb24gPT0gJ2Zvb3RlcicgJiYgY2VsbC5oYXNRdWVzdGlvbiAmJiAhY2VsbC5xdWVzdGlvbi5pc0Fuc3dlcmVkKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuICEoY2VsbC5oYXNRdWVzdGlvbiB8fCBjZWxsLmhhc1RpdGxlIHx8ICh0aGlzLmlzTXVsdGlwbGUgJiYgKHRoaXMuaGFzRGV0YWlsUGFuZWwgPyBpbmRleCA9PSAxIDogaW5kZXggPT0gMCkpKTtcbiAgICB9XG4gICAgcHJpdmF0ZSBnZXRSb3dMb2NhdGlvbihyb3c6IFF1ZXN0aW9uTWF0cml4RHJvcGRvd25SZW5kZXJlZFJvdykge1xuICAgICAgICByZXR1cm4gcm93ID09PSB0aGlzLnF1ZXN0aW9uLnJlbmRlcmVkVGFibGUuaGVhZGVyUm93ID8gJ2hlYWRlcicgOiAodGhpcy5xdWVzdGlvbi5yZW5kZXJlZFRhYmxlLmZvb3RlclJvdyA9PT0gcm93ID8gJ2Zvb3RlcicgOiB1bmRlZmluZWQpO1xuICAgIH1cbiAgICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlRmxhdHNSb3dIb3Jpc29udGFsKHBvaW50OiBJUG9pbnQsIHJvdzogUXVlc3Rpb25NYXRyaXhEcm9wZG93blJlbmRlcmVkUm93LCBjb2x1bW5XaWR0aDogbnVtYmVyW10pOiBQcm9taXNlPENvbXBvc2l0ZUJyaWNrPiB7XG4gICAgICAgIGNvbnN0IGNvbXBvc2l0ZTogQ29tcG9zaXRlQnJpY2sgPSBuZXcgQ29tcG9zaXRlQnJpY2soKTtcbiAgICAgICAgY29uc3QgY3VyclBvaW50OiBJUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY2xvbmUocG9pbnQpO1xuICAgICAgICBsZXQgbGFzdFJpZ2h0TWFyZ2luOiBudW1iZXIgPSB0aGlzLmNvbnRyb2xsZXIucGFwZXJXaWR0aCAtIHRoaXMuY29udHJvbGxlci5tYXJnaW5zLmxlZnQgK1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnVuaXRXaWR0aCAqIFN1cnZleUhlbHBlci5HQVBfQkVUV0VFTl9DT0xVTU5TO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIucHVzaE1hcmdpbnMoKTtcbiAgICAgICAgbGV0IGNudCA9IDA7XG4gICAgICAgIGNvbnN0IHJvd0xvY2F0aW9uID0gdGhpcy5nZXRSb3dMb2NhdGlvbihyb3cpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvdy5jZWxscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuaWdub3JlQ2VsbChyb3cuY2VsbHNbaV0sIGksIHJvd0xvY2F0aW9uKSkgY29udGludWU7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0ID0gdGhpcy5jb250cm9sbGVyLnBhcGVyV2lkdGggLSBsYXN0UmlnaHRNYXJnaW4gK1xuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci51bml0V2lkdGggKiBTdXJ2ZXlIZWxwZXIuR0FQX0JFVFdFRU5fQ09MVU1OUztcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5tYXJnaW5zLnJpZ2h0ID0gdGhpcy5jb250cm9sbGVyLnBhcGVyV2lkdGggLVxuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5tYXJnaW5zLmxlZnQgLSBjb2x1bW5XaWR0aFtjbnRdO1xuICAgICAgICAgICAgbGFzdFJpZ2h0TWFyZ2luID0gdGhpcy5jb250cm9sbGVyLm1hcmdpbnMucmlnaHQ7XG4gICAgICAgICAgICBjdXJyUG9pbnQueExlZnQgPSB0aGlzLmNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0O1xuICAgICAgICAgICAgY29uc3QgY2VsbENvbnRlbnQ6IENvbXBvc2l0ZUJyaWNrID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUZsYXRzQ2VsbChcbiAgICAgICAgICAgICAgICBjdXJyUG9pbnQsIHJvdy5jZWxsc1tpXSwgcm93TG9jYXRpb24pO1xuICAgICAgICAgICAgaWYgKCFjZWxsQ29udGVudC5pc0VtcHR5KSB7XG4gICAgICAgICAgICAgICAgY29tcG9zaXRlLmFkZEJyaWNrKGNlbGxDb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNudCsrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5wb3BNYXJnaW5zKCk7XG4gICAgICAgIHJldHVybiBjb21wb3NpdGU7XG4gICAgfVxuICAgIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVGbGF0c1Jvd1ZlcnRpY2FsKHBvaW50OiBJUG9pbnQsIHJvdzogUXVlc3Rpb25NYXRyaXhEcm9wZG93blJlbmRlcmVkUm93KTogUHJvbWlzZTxDb21wb3NpdGVCcmljaz4ge1xuICAgICAgICBjb25zdCBjb21wb3NpdGU6IENvbXBvc2l0ZUJyaWNrID0gbmV3IENvbXBvc2l0ZUJyaWNrKCk7XG4gICAgICAgIGNvbnN0IGN1cnJQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNsb25lKHBvaW50KTtcbiAgICAgICAgY29uc3Qgcm93TG9jYXRpb24gPSB0aGlzLmdldFJvd0xvY2F0aW9uKHJvdyk7XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCByb3cuY2VsbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlnbm9yZUNlbGwocm93LmNlbGxzW2ldLCBpLCByb3dMb2NhdGlvbiwgZmFsc2UpKSBjb250aW51ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uLnJlbmRlcmVkVGFibGUuc2hvd0hlYWRlciAmJiAoIXRoaXMuaXNNdWx0aXBsZSB8fCBpID4gMCkgJiYgcm93LmNlbGxzW2ldLmNlbGw/LmNvbHVtbj8ubG9jVGl0bGUpIHtcbiAgICAgICAgICAgICAgICBjb21wb3NpdGUuYWRkQnJpY2soYXdhaXQgdGhpcy5nZW5lcmF0ZUZsYXRzQ2VsbFRpdGxlKGN1cnJQb2ludCwgcm93LmNlbGxzW2ldLmNlbGwuY29sdW1uLmxvY1RpdGxlKSk7XG4gICAgICAgICAgICAgICAgY3VyclBvaW50LnlUb3AgPSBjb21wb3NpdGUueUJvdCArIEZsYXRNYXRyaXhNdWx0aXBsZS5HQVBfQkVUV0VFTl9ST1dTICogdGhpcy5jb250cm9sbGVyLnVuaXRIZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb21wb3NpdGUuYWRkQnJpY2soYXdhaXQgdGhpcy5nZW5lcmF0ZUZsYXRzQ2VsbChjdXJyUG9pbnQsIHJvdy5jZWxsc1tpXSwgcm93TG9jYXRpb24sIGZhbHNlKSk7XG4gICAgICAgICAgICBjdXJyUG9pbnQueVRvcCA9IGNvbXBvc2l0ZS55Qm90ICsgRmxhdE1hdHJpeE11bHRpcGxlLkdBUF9CRVRXRUVOX1JPV1MgKiB0aGlzLmNvbnRyb2xsZXIudW5pdEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcG9zaXRlO1xuICAgIH1cbiAgICBwcml2YXRlIGdldEF2YWxhYmxlV2lkdGgoY29sQ291bnQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBTdXJ2ZXlIZWxwZXIuZ2V0UGFnZUF2YWlsYWJsZVdpZHRoKHRoaXMuY29udHJvbGxlcikgLVxuICAgICAgICAoY29sQ291bnQgLSAxKSAqIHRoaXMuY29udHJvbGxlci51bml0V2lkdGggKiBTdXJ2ZXlIZWxwZXIuR0FQX0JFVFdFRU5fQ09MVU1OUztcbiAgICB9XG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVDb2x1bW5XaWR0aChyb3dzOiBRdWVzdGlvbk1hdHJpeERyb3Bkb3duUmVuZGVyZWRSb3dbXSwgY29sQ291bnQ6IG51bWJlcik6IG51bWJlcltdIHtcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlV2lkdGg6IG51bWJlciA9IHRoaXMuZ2V0QXZhbGFibGVXaWR0aChjb2xDb3VudCk7XG4gICAgICAgIGxldCByZW1haW5XaWR0aDogbnVtYmVyID0gYXZhaWxhYmxlV2lkdGg7XG4gICAgICAgIGxldCByZW1haW5Db2xDb3VudDogbnVtYmVyID0gY29sQ291bnQ7XG4gICAgICAgIGNvbnN0IGNvbHVtbldpZHRoOiBudW1iZXJbXSA9IFtdO1xuICAgICAgICBjb25zdCB1bnNldENlbGxzOiBRdWVzdGlvbk1hdHJpeERyb3Bkb3duUmVuZGVyZWRDZWxsW10gPSBbXTtcbiAgICAgICAgbGV0IGNlbGxzID0gcm93c1swXS5jZWxscy5maWx0ZXIoKGNlbGw6IFF1ZXN0aW9uTWF0cml4RHJvcGRvd25SZW5kZXJlZENlbGwsIGluZGV4OiBudW1iZXIpID0+ICF0aGlzLmlnbm9yZUNlbGwoY2VsbCwgaW5kZXgpKTtcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IGNvbENvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoOiBudW1iZXIgPSBTdXJ2ZXlIZWxwZXIucGFyc2VXaWR0aChjZWxsc1tpXS53aWR0aCxcbiAgICAgICAgICAgICAgICBhdmFpbGFibGVXaWR0aCwgY29sQ291bnQpIHx8IDAuMDtcbiAgICAgICAgICAgIHJlbWFpbldpZHRoIC09IHdpZHRoO1xuICAgICAgICAgICAgaWYgKHdpZHRoICE9PSAwLjApIHtcbiAgICAgICAgICAgICAgICByZW1haW5Db2xDb3VudC0tO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1bnNldENlbGxzLnB1c2goY2VsbHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sdW1uV2lkdGgucHVzaCh3aWR0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlbWFpbkNvbENvdW50ID09PSAwKSByZXR1cm4gY29sdW1uV2lkdGg7XG4gICAgICAgIGNvbnN0IGhldXJpc3RpY1dpZHRoOiBudW1iZXIgPSB0aGlzLmNvbnRyb2xsZXIubWVhc3VyZVRleHQoU3VydmV5SGVscGVyLk1BVFJJWF9DT0xVTU5fV0lEVEgpLndpZHRoO1xuICAgICAgICB1bnNldENlbGxzLnNvcnQoKGNlbGwxOiBRdWVzdGlvbk1hdHJpeERyb3Bkb3duUmVuZGVyZWRDZWxsLCBjZWxsMjogUXVlc3Rpb25NYXRyaXhEcm9wZG93blJlbmRlcmVkQ2VsbCkgPT4ge1xuICAgICAgICAgICAgbGV0IG1pbldpZHRoMSA9IFN1cnZleUhlbHBlci5wYXJzZVdpZHRoKGNlbGwxLm1pbldpZHRoLCBhdmFpbGFibGVXaWR0aCwgY29sQ291bnQpIHx8IDAuMDtcbiAgICAgICAgICAgIGxldCBtaW5XaWR0aDIgPSBTdXJ2ZXlIZWxwZXIucGFyc2VXaWR0aChjZWxsMi5taW5XaWR0aCwgYXZhaWxhYmxlV2lkdGgsIGNvbENvdW50KSB8fCAwLjA7XG4gICAgICAgICAgICByZXR1cm4gbWluV2lkdGgyID4gbWluV2lkdGgxID8gMSA6IC0xO1xuICAgICAgICB9KS5mb3JFYWNoKChjZWxsOiBRdWVzdGlvbk1hdHJpeERyb3Bkb3duUmVuZGVyZWRDZWxsKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlcXVhbFdpZHRoOiBudW1iZXIgPSByZW1haW5XaWR0aCAvIHJlbWFpbkNvbENvdW50O1xuICAgICAgICAgICAgY29uc3QgY29sdW1uTWluV2lkdGg6IG51bWJlciA9IFN1cnZleUhlbHBlci5wYXJzZVdpZHRoKGNlbGwubWluV2lkdGgsIGF2YWlsYWJsZVdpZHRoLCBjb2xDb3VudCkgfHwgMC4wO1xuICAgICAgICAgICAgaWYoY29sdW1uTWluV2lkdGggPiBlcXVhbFdpZHRoICYmIGNvbHVtbk1pbldpZHRoID4gaGV1cmlzdGljV2lkdGgpIHtcbiAgICAgICAgICAgICAgICByZW1haW5XaWR0aCAtPSBjb2x1bW5NaW5XaWR0aDtcbiAgICAgICAgICAgICAgICByZW1haW5Db2xDb3VudC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sdW1uV2lkdGhbY2VsbHMuaW5kZXhPZihjZWxsKV0gPSBNYXRoLm1heChoZXVyaXN0aWNXaWR0aCwgY29sdW1uTWluV2lkdGgsIGVxdWFsV2lkdGgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNvbHVtbldpZHRoO1xuICAgIH1cbiAgICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlT25lUm93KHBvaW50OiBJUG9pbnQsIHJvdzogUXVlc3Rpb25NYXRyaXhEcm9wZG93blJlbmRlcmVkUm93LCBpc1dpZGU6IGJvb2xlYW4sIGNvbHVtbldpZHRoOiBudW1iZXJbXSk6IFByb21pc2U8Q29tcG9zaXRlQnJpY2s+IHtcbiAgICAgICAgaWYgKGlzV2lkZSkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2VuZXJhdGVGbGF0c1Jvd0hvcmlzb250YWwocG9pbnQsIHJvdywgY29sdW1uV2lkdGgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdlbmVyYXRlRmxhdHNSb3dWZXJ0aWNhbChwb2ludCwgcm93KTtcbiAgICB9XG4gICAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUZsYXRzUm93cyhwb2ludDogSVBvaW50LCByb3dzOiBRdWVzdGlvbk1hdHJpeERyb3Bkb3duUmVuZGVyZWRSb3dbXSxcbiAgICAgICAgY29sQ291bnQ6IG51bWJlciwgaXNXaWRlOiBib29sZWFuKTogUHJvbWlzZTxDb21wb3NpdGVCcmlja1tdPiB7XG4gICAgICAgIGNvbnN0IGN1cnJQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNsb25lKHBvaW50KTtcbiAgICAgICAgY29uc3Qgcm93c0ZsYXRzOiBDb21wb3NpdGVCcmlja1tdID0gW107XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcm93RmxhdDogQ29tcG9zaXRlQnJpY2sgPSBhd2FpdCB0aGlzLmdlbmVyYXRlT25lUm93KGN1cnJQb2ludCwgcm93c1tpXSxcbiAgICAgICAgICAgICAgICBpc1dpZGUsIHRoaXMuY2FsY3VsYXRlQ29sdW1uV2lkdGgocm93cywgY29sQ291bnQpKTtcbiAgICAgICAgICAgIGlmIChyb3dGbGF0LmlzRW1wdHkgJiYgIShyb3dzW2ldLnJvdyAmJiByb3dzW2ldLnJvdy5oYXNQYW5lbCkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYoIXJvd0ZsYXQuaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgIGlmIChpICE9PSByb3dzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VyclBvaW50LnlUb3AgPSByb3dGbGF0LnlCb3Q7XG4gICAgICAgICAgICAgICAgICAgIHJvd0ZsYXQuYWRkQnJpY2soU3VydmV5SGVscGVyLmNyZWF0ZVJvd2xpbmVGbGF0KGN1cnJQb2ludCwgdGhpcy5jb250cm9sbGVyKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJvd3NGbGF0cy5wdXNoKHJvd0ZsYXQpO1xuICAgICAgICAgICAgICAgIGN1cnJQb2ludC55VG9wID0gcm93RmxhdC55Qm90ICsgRmxhdE1hdHJpeE11bHRpcGxlLkdBUF9CRVRXRUVOX1JPV1MgKiB0aGlzLmNvbnRyb2xsZXIudW5pdEhlaWdodDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCEhcm93c1tpXS5yb3cgJiYgcm93c1tpXS5yb3cuaGFzUGFuZWwpIHtcbiAgICAgICAgICAgICAgICByb3dzW2ldLnJvdy5zaG93RGV0YWlsUGFuZWwoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50RGV0YWlsUGFuZWw6IFBhbmVsTW9kZWwgPSByb3dzW2ldLnJvdy5kZXRhaWxQYW5lbDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGN1cnJlbnREZXRhaWxQYW5lbC5xdWVzdGlvbnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudERldGFpbFBhbmVsLnF1ZXN0aW9uc1tqXS5pZCArPSAnXycgKyBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBwYW5lbEJyaWNrczogSVBkZkJyaWNrW10gPSBhd2FpdCBGbGF0U3VydmV5LmdlbmVyYXRlRmxhdHNQYW5lbChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdXJ2ZXksIHRoaXMuY29udHJvbGxlciwgY3VycmVudERldGFpbFBhbmVsLCBjdXJyUG9pbnQpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY3VyckNvbXBvc2l0ZTogQ29tcG9zaXRlQnJpY2sgPSBuZXcgQ29tcG9zaXRlQnJpY2soKTtcbiAgICAgICAgICAgICAgICBjdXJyQ29tcG9zaXRlLmFkZEJyaWNrKC4uLnBhbmVsQnJpY2tzKTtcbiAgICAgICAgICAgICAgICBjdXJyUG9pbnQueVRvcCA9IGN1cnJDb21wb3NpdGUueUJvdCArIEZsYXRNYXRyaXhNdWx0aXBsZS5HQVBfQkVUV0VFTl9ST1dTICogdGhpcy5jb250cm9sbGVyLnVuaXRIZWlnaHQ7XG5cbiAgICAgICAgICAgICAgICByb3dzRmxhdHMucHVzaChjdXJyQ29tcG9zaXRlKTtcbiAgICAgICAgICAgICAgICBpZiAoaSAhPT0gcm93cy5sZW5ndGggLSAxICYmIHRoaXMucXVlc3Rpb24ucmVuZGVyZWRUYWJsZS5zaG93SGVhZGVyICYmIGlzV2lkZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXI6IENvbXBvc2l0ZUJyaWNrID0gYXdhaXQgdGhpcy5nZW5lcmF0ZU9uZVJvdyhjdXJyUG9pbnQsIHJvd3NbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1dpZGUsIHRoaXMuY2FsY3VsYXRlQ29sdW1uV2lkdGgocm93cywgY29sQ291bnQpKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJZVG9wID0gY3VyckNvbXBvc2l0ZS55Qm90O1xuICAgICAgICAgICAgICAgICAgICBpZighaGVhZGVyLmlzRW1wdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJZVG9wID0gaGVhZGVyLnlCb3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzRmxhdHMucHVzaChoZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGN1cnJQb2ludC55VG9wID0gY3VycllUb3AgKyBGbGF0TWF0cml4TXVsdGlwbGUuR0FQX0JFVFdFRU5fUk9XUyAqIHRoaXMuY29udHJvbGxlci51bml0SGVpZ2h0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcm93c0ZsYXRzO1xuICAgIH1cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUlzV2lkZSh0YWJsZTogUXVlc3Rpb25NYXRyaXhEcm9wZG93blJlbmRlcmVkVGFibGUsIGNvbENvdW50OiBudW1iZXIpIHtcbiAgICAgICAgY29uc3Qgcm93czogUXVlc3Rpb25NYXRyaXhEcm9wZG93blJlbmRlcmVkUm93W10gPSBbXTtcbiAgICAgICAgaWYodGFibGUuc2hvd0hlYWRlcikge1xuICAgICAgICAgICAgcm93cy5wdXNoKHRhYmxlLmhlYWRlclJvdyk7XG4gICAgICAgIH1cbiAgICAgICAgcm93cy5wdXNoKC4uLnRoaXMudmlzaWJsZVJvd3MpO1xuICAgICAgICBpZihyb3dzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG4gICAgICAgIGNvbnN0IGNvbHVtbldpZHRoU3VtID0gdGhpcy5jYWxjdWxhdGVDb2x1bW5XaWR0aChyb3dzLCBjb2xDb3VudCkucmVkdWNlKCh3aWR0aFN1bTogbnVtYmVyLCB3aWR0aDogbnVtYmVyKSA9PiB3aWR0aFN1bSArPSB3aWR0aCwgMCk7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uLnJlbmRlckFzICE9PSAnbGlzdCcgJiYgdGhpcy5jb250cm9sbGVyLm1hdHJpeFJlbmRlckFzICE9PSAnbGlzdCcgJiYgTWF0aC5mbG9vcihjb2x1bW5XaWR0aFN1bSkgPD0gTWF0aC5mbG9vcih0aGlzLmdldEF2YWxhYmxlV2lkdGgoY29sQ291bnQpKTtcbiAgICB9XG4gICAgcHJpdmF0ZSBnZXRSb3dzVG9SZW5kZXIodGFibGU6IFF1ZXN0aW9uTWF0cml4RHJvcGRvd25SZW5kZXJlZFRhYmxlLCBpc1ZlcnRpY2FsOiBib29sZWFuLCBpc1dpZGU6IGJvb2xlYW4pIHtcbiAgICAgICAgY29uc3Qgcm93czogUXVlc3Rpb25NYXRyaXhEcm9wZG93blJlbmRlcmVkUm93W10gPSBbXTtcbiAgICAgICAgY29uc3QgcmVuZGVyZWRSb3dzID0gdGhpcy52aXNpYmxlUm93cztcbiAgICAgICAgaWYgKHRhYmxlLnNob3dIZWFkZXIgJiYgaXNXaWRlKSByb3dzLnB1c2godGFibGUuaGVhZGVyUm93KTtcbiAgICAgICAgcm93cy5wdXNoKC4uLnJlbmRlcmVkUm93cyk7XG4gICAgICAgIGlmICh0YWJsZS5oYXNSZW1vdmVSb3dzICYmIGlzVmVydGljYWwpIHJvd3MucG9wKCk7XG4gICAgICAgIGlmICh0YWJsZS5zaG93Rm9vdGVyKSByb3dzLnB1c2godGFibGUuZm9vdGVyUm93KTtcbiAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfVxuICAgIHByaXZhdGUgZ2V0Q29sQ291bnQodGFibGU6IFF1ZXN0aW9uTWF0cml4RHJvcGRvd25SZW5kZXJlZFRhYmxlLCByZW5kZXJlZFJvd3M6IEFycmF5PFF1ZXN0aW9uTWF0cml4RHJvcGRvd25SZW5kZXJlZFJvdz4pOiBudW1iZXIge1xuICAgICAgICBpZiAoISFyZW5kZXJlZFJvd3NbMF0pIHtcbiAgICAgICAgICAgIHJldHVybiByZW5kZXJlZFJvd3NbMF0uY2VsbHMuZmlsdGVyKChjZWxsOiBRdWVzdGlvbk1hdHJpeERyb3Bkb3duUmVuZGVyZWRDZWxsLCBpbmRleDogbnVtYmVyKSA9PiAhdGhpcy5pZ25vcmVDZWxsKGNlbGwsIGluZGV4KSkubGVuZ3RoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRhYmxlLnNob3dIZWFkZXIgJiYgdGFibGUuaGVhZGVyUm93ID8gdGFibGUuaGVhZGVyUm93LmNlbGxzLmxlbmd0aCA6XG4gICAgICAgICAgICAgICAgdGFibGUuc2hvd0Zvb3RlciAmJiB0YWJsZS5mb290ZXJSb3cgPyB0YWJsZS5mb290ZXJSb3cuY2VsbHMubGVuZ3RoIDogMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUZsYXRzQ29udGVudChwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2tbXT4ge1xuICAgICAgICBsZXQgdGFibGU6IFF1ZXN0aW9uTWF0cml4RHJvcGRvd25SZW5kZXJlZFRhYmxlID0gdGhpcy5xdWVzdGlvbi5yZW5kZXJlZFRhYmxlO1xuICAgICAgICBsZXQgaXNWZXJ0aWNhbDogYm9vbGVhbiA9IHRoaXMucXVlc3Rpb24uY29sdW1uTGF5b3V0ID09PSAndmVydGljYWwnO1xuICAgICAgICBsZXQgY29sQ291bnQ6IG51bWJlciA9IHRoaXMuZ2V0Q29sQ291bnQodGFibGUsIHRoaXMudmlzaWJsZVJvd3MpO1xuICAgICAgICBpZiAoY29sQ291bnQgPT09IDAgJiYgIXRoaXMuaGFzRGV0YWlsUGFuZWwpIHtcbiAgICAgICAgICAgIHJldHVybiBbbmV3IENvbXBvc2l0ZUJyaWNrKFN1cnZleUhlbHBlci5jcmVhdGVSb3dsaW5lRmxhdChwb2ludCwgdGhpcy5jb250cm9sbGVyKSldO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzV2lkZSA9IHRoaXMuY2FsY3VsYXRlSXNXaWRlKHRhYmxlLCBjb2xDb3VudCk7XG4gICAgICAgIGlmKCFpc1dpZGUpIHtcbiAgICAgICAgICAgIHRoaXMucXVlc3Rpb24uaXNNb2JpbGUgPSB0cnVlO1xuICAgICAgICAgICAgaXNWZXJ0aWNhbCA9IGZhbHNlO1xuICAgICAgICAgICAgdGFibGUgPSB0aGlzLnF1ZXN0aW9uLnJlbmRlcmVkVGFibGU7XG4gICAgICAgICAgICB0aGlzLnZpc2libGVSb3dzVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb2xDb3VudCA9IHRoaXMuZ2V0Q29sQ291bnQodGFibGUsIHRoaXMudmlzaWJsZVJvd3MpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJvd3MgPSB0aGlzLmdldFJvd3NUb1JlbmRlcih0YWJsZSwgaXNWZXJ0aWNhbCwgaXNXaWRlKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2VuZXJhdGVGbGF0c1Jvd3MocG9pbnQsIHJvd3MsIGNvbENvdW50LCBpc1dpZGUpO1xuICAgIH1cbn1cblxuU2VyaWFsaXplci5yZW1vdmVQcm9wZXJ0eSgnbWF0cml4ZHJvcGRvd24nLCAncmVuZGVyQXMnKTtcblNlcmlhbGl6ZXIuYWRkUHJvcGVydHkoJ21hdHJpeGRyb3Bkb3duJywge1xuICAgIG5hbWU6ICdyZW5kZXJBcycsXG4gICAgZGVmYXVsdDogJ2F1dG8nLFxuICAgIHZpc2libGU6IGZhbHNlLFxuICAgIGNob2ljZXM6IFsnYXV0bycsICdsaXN0J11cbn0pO1xuRmxhdFJlcG9zaXRvcnkuZ2V0SW5zdGFuY2UoKS5yZWdpc3RlcignbWF0cml4ZHJvcGRvd24nLCBGbGF0TWF0cml4TXVsdGlwbGUpO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9mbGF0X2xheW91dC9mbGF0X21hdHJpeG11bHRpcGxlLnRzIiwiaW1wb3J0IEludGVydmFsVHJlZSBmcm9tICdub2RlLWludGVydmFsLXRyZWUnO1xuaW1wb3J0IHsgRG9jT3B0aW9ucywgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IElQZGZCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2JyaWNrJztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuXG5pbnRlcmZhY2UgUGFja0ludGVydmFsIHtcbiAgICBwYWdlSW5kZXg6IG51bWJlcjtcbiAgICB4TGVmdDogbnVtYmVyO1xuICAgIHhSaWdodDogbnVtYmVyO1xuICAgIHlCb3Q6IG51bWJlcjtcbiAgICBhYnNCb3Q6IG51bWJlcjtcbn1cbmV4cG9ydCBjbGFzcyBQYWdlUGFja2VyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5kQm90SW50ZXJ2YWwodHJlZTogSW50ZXJ2YWxUcmVlPFBhY2tJbnRlcnZhbD4sXG4gICAgICAgIHhMZWZ0OiBudW1iZXIsIHhSaWdodDogbnVtYmVyLCBvcHRpb25zOiBEb2NPcHRpb25zKTogUGFja0ludGVydmFsIHtcbiAgICAgICAgY29uc3QgaW50ZXJ2YWxzOiBQYWNrSW50ZXJ2YWxbXSA9IHRyZWUuc2VhcmNoKHhMZWZ0LCB4UmlnaHQpO1xuICAgICAgICBpbnRlcnZhbHMucHVzaCh7XG4gICAgICAgICAgICBwYWdlSW5kZXg6IDAsIHhMZWZ0OlxuICAgICAgICAgICAgICAgIG9wdGlvbnMubWFyZ2lucy5sZWZ0LCB4UmlnaHQ6IG9wdGlvbnMubWFyZ2lucy5sZWZ0LFxuICAgICAgICAgICAgeUJvdDogb3B0aW9ucy5tYXJnaW5zLnRvcCwgYWJzQm90OiBvcHRpb25zLm1hcmdpbnMudG9wXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaW50ZXJ2YWxzLnJlZHVjZSgobXgsIGNyKSA9PiB7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoY3IueFJpZ2h0IC0geExlZnQpIDwgU3VydmV5SGVscGVyLkVQU0lMT04gfHxcbiAgICAgICAgICAgICAgICBNYXRoLmFicyhjci54TGVmdCAtIHhSaWdodCkgPCBTdXJ2ZXlIZWxwZXIuRVBTSUxPTikgcmV0dXJuIG14O1xuICAgICAgICAgICAgaWYgKGNyLnBhZ2VJbmRleCA8IG14LnBhZ2VJbmRleCkgcmV0dXJuIG14O1xuICAgICAgICAgICAgaWYgKGNyLnBhZ2VJbmRleCA+IG14LnBhZ2VJbmRleCkgcmV0dXJuIGNyO1xuICAgICAgICAgICAgcmV0dXJuIGNyLnlCb3QgPiBteC55Qm90ID8gY3IgOiBteDtcbiAgICAgICAgfSwgaW50ZXJ2YWxzW2ludGVydmFscy5sZW5ndGggLSAxXSk7XG4gICAgfVxuICAgIHByaXZhdGUgc3RhdGljIGFkZFBhY2socGFja3M6IElQZGZCcmlja1tdW10sIGluZGV4OiBudW1iZXIsIGJyaWNrOiBJUGRmQnJpY2spIHtcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gcGFja3MubGVuZ3RoOyBpIDw9IGluZGV4OyBpKyspIHtcbiAgICAgICAgICAgIHBhY2tzLnB1c2goW10pO1xuICAgICAgICB9XG4gICAgICAgIHBhY2tzW2luZGV4XS5wdXNoKGJyaWNrKTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBwYWNrKGZsYXRzOiBJUGRmQnJpY2tbXVtdLCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyKTogSVBkZkJyaWNrW11bXSB7XG4gICAgICAgIGNvbnN0IHBhZ2VIZWlnaHQ6IG51bWJlciA9IGNvbnRyb2xsZXIucGFwZXJIZWlnaHQgLVxuICAgICAgICAgICAgY29udHJvbGxlci5tYXJnaW5zLnRvcCAtIGNvbnRyb2xsZXIubWFyZ2lucy5ib3Q7XG4gICAgICAgIGNvbnN0IHVuZm9sZEZsYXRzOiBJUGRmQnJpY2tbXVtdID0gW107XG4gICAgICAgIGZsYXRzLmZvckVhY2goKGZsYXRzUGFnZTogSVBkZkJyaWNrW10pID0+IHtcbiAgICAgICAgICAgIHVuZm9sZEZsYXRzLnB1c2goW10pO1xuICAgICAgICAgICAgZmxhdHNQYWdlLmZvckVhY2goKGZsYXQ6IElQZGZCcmljaykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChmbGF0LmhlaWdodCA+IHBhZ2VIZWlnaHQgKyBTdXJ2ZXlIZWxwZXIuRVBTSUxPTikge1xuICAgICAgICAgICAgICAgICAgICB1bmZvbGRGbGF0c1t1bmZvbGRGbGF0cy5sZW5ndGggLSAxXS5wdXNoKC4uLmZsYXQudW5mb2xkKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHVuZm9sZEZsYXRzW3VuZm9sZEZsYXRzLmxlbmd0aCAtIDFdLnB1c2goZmxhdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHVuZm9sZEZsYXRzLmZvckVhY2goKHVuZm9sZEZsYXRzUGFnZTogSVBkZkJyaWNrW10pID0+IHtcbiAgICAgICAgICAgIHVuZm9sZEZsYXRzUGFnZS5zb3J0KChhOiBJUGRmQnJpY2ssIGI6IElQZGZCcmljaykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhLnlUb3AgPCBiLnlUb3ApIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICBpZiAoYS55VG9wID4gYi55VG9wKSByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICBpZiAoYS54TGVmdCA+IGIueExlZnQpIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIGlmIChhLnhMZWZ0IDwgYi54TGVmdCkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgcGFnZUluZGV4TW9kZWw6IG51bWJlciA9IDA7XG4gICAgICAgIGNvbnN0IHBhY2tzOiBJUGRmQnJpY2tbXVtdID0gW107XG4gICAgICAgIGNvbnN0IHBhZ2VCb3Q6IG51bWJlciA9IGNvbnRyb2xsZXIucGFwZXJIZWlnaHQgLSBjb250cm9sbGVyLm1hcmdpbnMuYm90O1xuICAgICAgICB1bmZvbGRGbGF0cy5mb3JFYWNoKCh1bmZvbGRGbGF0c1BhZ2U6IElQZGZCcmlja1tdKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0cmVlOiBJbnRlcnZhbFRyZWU8UGFja0ludGVydmFsPiA9IG5ldyBJbnRlcnZhbFRyZWUoKTtcbiAgICAgICAgICAgIGxldCBwYWdlSW5kZXhTaGlmdDogbnVtYmVyID0gMDtcbiAgICAgICAgICAgIHVuZm9sZEZsYXRzUGFnZS5mb3JFYWNoKChmbGF0OiBJUGRmQnJpY2spID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgeyBwYWdlSW5kZXgsIHlCb3QsIGFic0JvdCB9ID0gUGFnZVBhY2tlci5maW5kQm90SW50ZXJ2YWwoXG4gICAgICAgICAgICAgICAgICAgIHRyZWUsIGZsYXQueExlZnQsIGZsYXQueFJpZ2h0LCBjb250cm9sbGVyKTtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHQ6IG51bWJlciA9IGZsYXQuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIGZsYXQueVRvcCA9IHlCb3QgKyBmbGF0LnlUb3AgLSBhYnNCb3Q7XG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGZsYXQueVRvcCAtIGNvbnRyb2xsZXIubWFyZ2lucy50b3ApID4gU3VydmV5SGVscGVyLkVQU0lMT04gJiZcbiAgICAgICAgICAgICAgICAgICAgZmxhdC55VG9wICsgaGVpZ2h0ID4gcGFnZUJvdCArIFN1cnZleUhlbHBlci5FUFNJTE9OIHx8IGZsYXQuaXNQYWdlQnJlYWspIHtcbiAgICAgICAgICAgICAgICAgICAgZmxhdC55VG9wID0gY29udHJvbGxlci5tYXJnaW5zLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgcGFnZUluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VJbmRleFNoaWZ0ID0gTWF0aC5tYXgocGFnZUluZGV4U2hpZnQsIHBhZ2VJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyZWUuaW5zZXJ0KGZsYXQueExlZnQsIGZsYXQueFJpZ2h0LCB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VJbmRleDogcGFnZUluZGV4LFxuICAgICAgICAgICAgICAgICAgICB4TGVmdDogZmxhdC54TGVmdCwgeFJpZ2h0OiBmbGF0LnhSaWdodCxcbiAgICAgICAgICAgICAgICAgICAgeUJvdDogZmxhdC55VG9wICsgaGVpZ2h0LCBhYnNCb3Q6IGZsYXQueUJvdFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZsYXQueUJvdCA9IGZsYXQueVRvcCArIGhlaWdodDtcbiAgICAgICAgICAgICAgICBQYWdlUGFja2VyLmFkZFBhY2socGFja3MsIHBhZ2VJbmRleE1vZGVsICsgcGFnZUluZGV4LCBmbGF0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcGFnZUluZGV4TW9kZWwgKz0gcGFnZUluZGV4U2hpZnQgKyAxO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBhY2tzO1xuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcGFnZV9sYXlvdXQvcGFnZV9wYWNrZXIudHMiLCJpbXBvcnQgeyBJUXVlc3Rpb24sIFF1ZXN0aW9uQm9vbGVhbk1vZGVsIH0gZnJvbSAnc3VydmV5LWNvcmUnO1xuaW1wb3J0IHsgSVJlY3QsIERvY0NvbnRyb2xsZXIgfSBmcm9tICcuLi9kb2NfY29udHJvbGxlcic7XG5pbXBvcnQgeyBDaGVja0l0ZW1CcmljayB9IGZyb20gJy4vcGRmX2NoZWNraXRlbSc7XG5cbmV4cG9ydCBjbGFzcyBCb29sZWFuSXRlbUJyaWNrIGV4dGVuZHMgQ2hlY2tJdGVtQnJpY2sge1xuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihxdWVzdGlvbjogSVF1ZXN0aW9uLCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLFxuICAgICAgICByZWN0OiBJUmVjdCkge1xuICAgICAgICBzdXBlcihjb250cm9sbGVyLCByZWN0LFxuICAgICAgICAgICAgKDxRdWVzdGlvbkJvb2xlYW5Nb2RlbD5xdWVzdGlvbikuaWQsXG4gICAgICAgICAgICB7IHF1ZXN0aW9uOiBxdWVzdGlvbiwgcmVhZE9ubHk6IHF1ZXN0aW9uLmlzUmVhZE9ubHksIGNoZWNrZWQ6ICg8UXVlc3Rpb25Cb29sZWFuTW9kZWw+cXVlc3Rpb24pLmNoZWNrZWRWYWx1ZSB9KTtcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3BkZl9yZW5kZXIvcGRmX2Jvb2xlYW5pdGVtLnRzIiwiaW1wb3J0IHsgSVF1ZXN0aW9uLCBRdWVzdGlvbkNoZWNrYm94TW9kZWwsIEl0ZW1WYWx1ZSB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCB7IElSZWN0LCBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgQ2hlY2tJdGVtQnJpY2sgfSBmcm9tICcuL3BkZl9jaGVja2l0ZW0nO1xuXG5leHBvcnQgY2xhc3MgQ2hlY2tib3hJdGVtQnJpY2sgZXh0ZW5kcyBDaGVja0l0ZW1CcmljayB7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHF1ZXN0aW9uOiBJUXVlc3Rpb24sIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsXG4gICAgICAgIHJlY3Q6IElSZWN0LCBpdGVtOiBJdGVtVmFsdWUsIGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoY29udHJvbGxlciwgcmVjdCxcbiAgICAgICAgICAgICg8UXVlc3Rpb25DaGVja2JveE1vZGVsPnF1ZXN0aW9uKS5pZCArICdpbmRleCcgKyBpbmRleCxcbiAgICAgICAgICAgIHsgcXVlc3Rpb246IHF1ZXN0aW9uLCByZWFkT25seTogcXVlc3Rpb24uaXNSZWFkT25seSB8fCAhaXRlbS5pc0VuYWJsZWQsIGl0ZW06IGl0ZW0sIGNoZWNrZWQ6ICg8UXVlc3Rpb25DaGVja2JveE1vZGVsPnF1ZXN0aW9uKS5pc0l0ZW1TZWxlY3RlZChpdGVtKSwgaW5kZXg6IGluZGV4IH0pO1xuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcGRmX3JlbmRlci9wZGZfY2hlY2tib3hpdGVtLnRzIiwiaW1wb3J0IHsgSVF1ZXN0aW9uLCBzZXR0aW5ncyB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCB7IElSZWN0LCBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgVGV4dEJveEJyaWNrIH0gZnJvbSAnLi9wZGZfdGV4dGJveCc7XG5cbmV4cG9ydCBjbGFzcyBDb21tZW50QnJpY2sgZXh0ZW5kcyBUZXh0Qm94QnJpY2sge1xuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihxdWVzdGlvbjogSVF1ZXN0aW9uLCBwcm90ZWN0ZWQgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcixcbiAgICAgICAgcmVjdDogSVJlY3QsIGlzUXVlc3Rpb246IGJvb2xlYW4sIGluZGV4OiBudW1iZXIgPSAwKSB7XG4gICAgICAgIHN1cGVyKHF1ZXN0aW9uLCBjb250cm9sbGVyLCByZWN0LCBpc1F1ZXN0aW9uLCB0cnVlLCBpbmRleCk7XG4gICAgfVxuICAgIHByb3RlY3RlZCBzaG91bGRSZW5kZXJGbGF0Qm9yZGVycygpOiBib29sZWFuIHtcbiAgICAgICAgaWYodGhpcy5pc1F1ZXN0aW9uICYmIHRoaXMucXVlc3Rpb24uZ2V0VHlwZSgpICE9PSAnY29tbWVudCcpIHJldHVybiBzdXBlci5zaG91bGRSZW5kZXJGbGF0Qm9yZGVycygpO1xuICAgICAgICByZXR1cm4gc2V0dGluZ3MucmVhZE9ubHlDb21tZW50UmVuZGVyTW9kZSA9PT0gJ3RleHRhcmVhJztcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3BkZl9yZW5kZXIvcGRmX2NvbW1lbnQudHMiLCJpbXBvcnQgeyBJUXVlc3Rpb24sIFF1ZXN0aW9uRHJvcGRvd25Nb2RlbCwgSXRlbVZhbHVlIH0gZnJvbSAnc3VydmV5LWNvcmUnO1xuaW1wb3J0IHsgSVJlY3QsIERvY0NvbnRyb2xsZXIgfSBmcm9tICcuLi9kb2NfY29udHJvbGxlcic7XG5pbXBvcnQgeyBQZGZCcmljayB9IGZyb20gJy4vcGRmX2JyaWNrJztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuXG5leHBvcnQgY2xhc3MgRHJvcGRvd25CcmljayBleHRlbmRzIFBkZkJyaWNrIHtcbiAgICBwcm90ZWN0ZWQgcXVlc3Rpb246IFF1ZXN0aW9uRHJvcGRvd25Nb2RlbDtcbiAgICBwcm90ZWN0ZWQgaXNRdWVzdGlvbjogYm9vbGVhbjtcbiAgICBwcm90ZWN0ZWQgaXNNdWx0aWxpbmU6IGJvb2xlYW47XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHF1ZXN0aW9uOiBJUXVlc3Rpb24sXG4gICAgICAgIHByb3RlY3RlZCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLCByZWN0OiBJUmVjdCkge1xuICAgICAgICBzdXBlcihxdWVzdGlvbiwgY29udHJvbGxlciwgcmVjdCk7XG4gICAgICAgIHRoaXMucXVlc3Rpb24gPSA8UXVlc3Rpb25Ecm9wZG93bk1vZGVsPnF1ZXN0aW9uO1xuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgcmVuZGVySW50ZXJhY3RpdmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGNvbWJvQm94ID0gbmV3ICg8YW55PnRoaXMuY29udHJvbGxlci5kb2MuQWNyb0Zvcm1Db21ib0JveCkoKTtcbiAgICAgICAgY29tYm9Cb3guZmllbGROYW1lID0gdGhpcy5xdWVzdGlvbi5pZDtcbiAgICAgICAgY29tYm9Cb3guUmVjdCA9IFN1cnZleUhlbHBlci5jcmVhdGVBY3JvZm9ybVJlY3QoXG4gICAgICAgICAgICBTdXJ2ZXlIZWxwZXIuc2NhbGVSZWN0KHRoaXMsXG4gICAgICAgICAgICAgICAgU3VydmV5SGVscGVyLmZvcm1TY2FsZSh0aGlzLmNvbnRyb2xsZXIsIHRoaXMpKSk7XG4gICAgICAgIGNvbWJvQm94LmVkaXQgPSBmYWxzZTtcbiAgICAgICAgY29tYm9Cb3guY29sb3IgPSB0aGlzLnRleHRDb2xvcjtcbiAgICAgICAgY29uc3Qgb3B0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgaWYgKHRoaXMucXVlc3Rpb24uc2hvd09wdGlvbnNDYXB0aW9uKSB7XG4gICAgICAgICAgICBvcHRpb25zLnB1c2godGhpcy5nZXRDb3JyZWN0ZWRUZXh0KHRoaXMucXVlc3Rpb24ub3B0aW9uc0NhcHRpb24pKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXN0aW9uLnZpc2libGVDaG9pY2VzLmZvckVhY2goKGl0ZW06IEl0ZW1WYWx1ZSkgPT4ge1xuICAgICAgICAgICAgb3B0aW9ucy5wdXNoKHRoaXMuZ2V0Q29ycmVjdGVkVGV4dChTdXJ2ZXlIZWxwZXIuZ2V0TG9jU3RyaW5nKGl0ZW0ubG9jVGV4dCkpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbWJvQm94LnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIGNvbWJvQm94LmZvbnROYW1lID0gdGhpcy5jb250cm9sbGVyLmZvbnROYW1lO1xuICAgICAgICBjb21ib0JveC5mb250U2l6ZSA9IHRoaXMuZm9udFNpemU7XG4gICAgICAgIGNvbWJvQm94LnJlYWRPbmx5ID0gdGhpcy5xdWVzdGlvbi5pc1JlYWRPbmx5O1xuICAgICAgICBjb21ib0JveC5pc1VuaWNvZGUgPSBTdXJ2ZXlIZWxwZXIuaXNDdXN0b21Gb250KFxuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLCBjb21ib0JveC5mb250TmFtZSk7XG4gICAgICAgIGNvbWJvQm94LlYgPSB0aGlzLmdldENvcnJlY3RlZFRleHQoU3VydmV5SGVscGVyLmdldERyb3Bkb3duUXVlc3Rpb25WYWx1ZSh0aGlzLnF1ZXN0aW9uKSk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5kb2MuYWRkRmllbGQoY29tYm9Cb3gpO1xuICAgICAgICBTdXJ2ZXlIZWxwZXIucmVuZGVyRmxhdEJvcmRlcnModGhpcy5jb250cm9sbGVyLCB0aGlzKTtcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3BkZl9yZW5kZXIvcGRmX2Ryb3Bkb3duLnRzIiwiaW1wb3J0IHsgSVF1ZXN0aW9uIH0gZnJvbSAnc3VydmV5LWNvcmUnO1xuaW1wb3J0IHsgUGRmQnJpY2sgfSBmcm9tICcuL3BkZl9icmljayc7XG5pbXBvcnQgeyBJUmVjdCwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcblxuZXhwb3J0IGNsYXNzIEhUTUxCcmljayBleHRlbmRzIFBkZkJyaWNrIHtcbiAgICBwcml2YXRlIG1hcmdpbnM6IHsgdG9wOiBudW1iZXIsIGJvdHRvbTogbnVtYmVyIH07XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHF1ZXN0aW9uOiBJUXVlc3Rpb24sIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsXG4gICAgICAgIHJlY3Q6IElSZWN0LCBwcm90ZWN0ZWQgaHRtbDogc3RyaW5nLCBpc0ltYWdlOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgc3VwZXIocXVlc3Rpb24sIGNvbnRyb2xsZXIsIHJlY3QpO1xuICAgICAgICBpZiAoaXNJbWFnZSkge1xuICAgICAgICAgICAgdGhpcy5tYXJnaW5zID0ge1xuICAgICAgICAgICAgICAgIHRvcDogMC4wLFxuICAgICAgICAgICAgICAgIGJvdHRvbTogMC4wXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5tYXJnaW5zID0ge1xuICAgICAgICAgICAgICAgIHRvcDogY29udHJvbGxlci5tYXJnaW5zLnRvcCxcbiAgICAgICAgICAgICAgICBib3R0b206IGNvbnRyb2xsZXIubWFyZ2lucy5ib3RcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHVibGljIGFzeW5jIHJlbmRlckludGVyYWN0aXZlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBsZXQgb2xkRm9udFNpemU6IG51bWJlciA9IHRoaXMuY29udHJvbGxlci5mb250U2l6ZTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLmZvbnRTaXplID0gdGhpcy5mb250U2l6ZTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5kb2MuZnJvbUhUTUwodGhpcy5odG1sLCB0aGlzLnhMZWZ0LCB0aGlzLnlUb3AsIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy53aWR0aCwgcGFnZXNwbGl0OiB0cnVlLFxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNqcy1wZGYtaGlkZGVuLWh0bWwtZGl2JykpLmZvckVhY2goXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlbDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9LCB0aGlzLm1hcmdpbnMpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLmZvbnRTaXplID0gb2xkRm9udFNpemU7XG4gICAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9wZGZfcmVuZGVyL3BkZl9odG1sLnRzIiwiaW1wb3J0IHsgSVF1ZXN0aW9uIH0gZnJvbSAnc3VydmV5LWNvcmUnO1xuaW1wb3J0IHsgUGRmQnJpY2sgfSBmcm9tICcuL3BkZl9icmljayc7XG5pbXBvcnQgeyBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgSVBvaW50IH0gZnJvbSAnLi4vZW50cmllcy9wZGYnO1xuXG5leHBvcnQgY2xhc3MgSW1hZ2VCcmljayBleHRlbmRzIFBkZkJyaWNrIHtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocXVlc3Rpb246IElRdWVzdGlvbiwgY29udHJvbGxlcjogRG9jQ29udHJvbGxlciwgcHJvdGVjdGVkIGltYWdlOiBzdHJpbmcsXG4gICAgICAgIHBvaW50OiBJUG9pbnQsIHByb3RlY3RlZCBvcmlnaW5hbFdpZHRoOiBudW1iZXIsIHByb3RlY3RlZCBvcmlnaW5hbEhlaWdodDogbnVtYmVyKSB7XG4gICAgICAgIHN1cGVyKHF1ZXN0aW9uLCBjb250cm9sbGVyLCB7XG4gICAgICAgICAgICB4TGVmdDogcG9pbnQueExlZnQsXG4gICAgICAgICAgICB4UmlnaHQ6IHBvaW50LnhMZWZ0ICsgKG9yaWdpbmFsV2lkdGggfHwgMCksXG4gICAgICAgICAgICB5VG9wOiBwb2ludC55VG9wLFxuICAgICAgICAgICAgeUJvdDogcG9pbnQueVRvcCArIChvcmlnaW5hbEhlaWdodCB8fCAwKVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pc1BhZ2VCcmVhayA9IHRoaXMub3JpZ2luYWxIZWlnaHQgPT09IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcHVibGljIGFzeW5jIHJlbmRlckludGVyYWN0aXZlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZG9jLmFkZEltYWdlKHRoaXMuaW1hZ2UsICdQTkcnLCB0aGlzLnhMZWZ0LCB0aGlzLnlUb3AsIHRoaXMub3JpZ2luYWxXaWR0aCwgdGhpcy5vcmlnaW5hbEhlaWdodCk7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9wZGZfcmVuZGVyL3BkZl9pbWFnZS50cyIsImltcG9ydCB7IFF1ZXN0aW9uIH0gZnJvbSAnc3VydmV5LWNvcmUnO1xuaW1wb3J0IHsgVGV4dEJyaWNrIH0gZnJvbSAnLi9wZGZfdGV4dCc7XG5pbXBvcnQgeyBTdXJ2ZXlIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXJfc3VydmV5JztcblxuZXhwb3J0IGNsYXNzIExpbmtCcmljayBleHRlbmRzIFRleHRCcmljayB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgU0NBTEVfRkFDVE9SX01BR0lDOiBudW1iZXIgPSAwLjk1NTtcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IENPTE9SOiBzdHJpbmcgPSAnIzAwMDBFRSc7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHRleHRGbGF0OiBUZXh0QnJpY2ssIHByb3RlY3RlZCBsaW5rOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoKDxMaW5rQnJpY2s+dGV4dEZsYXQpLnF1ZXN0aW9uLFxuICAgICAgICAgICAgKDxMaW5rQnJpY2s+dGV4dEZsYXQpLmNvbnRyb2xsZXIsXG4gICAgICAgICAgICB0ZXh0RmxhdCwgKDxMaW5rQnJpY2s+dGV4dEZsYXQpLnRleHQpO1xuICAgICAgICB0aGlzLnRleHRDb2xvciA9IExpbmtCcmljay5DT0xPUjtcbiAgICB9XG4gICAgcHVibGljIGFzeW5jIHJlbmRlckludGVyYWN0aXZlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBsZXQgb2xkVGV4dENvbG9yOiBzdHJpbmcgPSB0aGlzLmNvbnRyb2xsZXIuZG9jLmdldFRleHRDb2xvcigpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZG9jLnNldFRleHRDb2xvcihTdXJ2ZXlIZWxwZXIuQkFDS0dST1VORF9DT0xPUik7XG4gICAgICAgIGxldCBkZXNjZW50OiBudW1iZXIgPSB0aGlzLmNvbnRyb2xsZXIudW5pdEhlaWdodCAqXG4gICAgICAgICAgICAodGhpcy5jb250cm9sbGVyLmRvYy5nZXRMaW5lSGVpZ2h0RmFjdG9yKCkgLVxuICAgICAgICAgICAgICAgIExpbmtCcmljay5TQ0FMRV9GQUNUT1JfTUFHSUMpO1xuICAgICAgICBsZXQgeVRvcExpbms6IG51bWJlciA9IHRoaXMueVRvcCArXG4gICAgICAgICAgICAodGhpcy55Qm90IC0gdGhpcy55VG9wKSAtIGRlc2NlbnQ7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5kb2MudGV4dFdpdGhMaW5rKHRoaXMudGV4dCwgdGhpcy54TGVmdCxcbiAgICAgICAgICAgIHlUb3BMaW5rLCB7IHVybDogdGhpcy5saW5rIH0pO1xuICAgICAgICBhd2FpdCBzdXBlci5yZW5kZXJJbnRlcmFjdGl2ZSgpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZG9jLnNldFRleHRDb2xvcihvbGRUZXh0Q29sb3IpO1xuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgcmVuZGVyUmVhZE9ubHkoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChTdXJ2ZXlIZWxwZXIuZ2V0UmVhZG9ubHlSZW5kZXJBcyg8UXVlc3Rpb24+dGhpcy5xdWVzdGlvbixcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlcikgIT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVySW50ZXJhY3RpdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBzdXBlci5yZW5kZXJJbnRlcmFjdGl2ZSgpO1xuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcGRmX3JlbmRlci9wZGZfbGluay50cyIsImltcG9ydCB7IElRdWVzdGlvbiwgSXRlbVZhbHVlLCBRdWVzdGlvbiB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCB7IElQb2ludCwgSVJlY3QsIElTaXplLCBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgSVBkZkJyaWNrLCBQZGZCcmljayB9IGZyb20gJy4vcGRmX2JyaWNrJztcbmltcG9ydCB7IFRleHRCcmljayB9IGZyb20gJy4vcGRmX3RleHQnO1xuaW1wb3J0IHsgU3VydmV5UERGIH0gZnJvbSAnLi4vc3VydmV5JztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuXG5leHBvcnQgaW50ZXJmYWNlIElSYWRpb2dyb3VwV3JhcENvbnRleHQge1xuICAgIHF1ZXN0aW9uOiBJUXVlc3Rpb247XG4gICAgcmVhZE9ubHk6IGJvb2xlYW47XG59XG5leHBvcnQgY2xhc3MgUmFkaW9Hcm91cFdyYXAge1xuICAgIHByaXZhdGUgX3JhZGlvR3JvdXA6IGFueTtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHVibGljIG5hbWU6IHN0cmluZyxcbiAgICAgICAgcHJpdmF0ZSBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLFxuICAgICAgICBwcml2YXRlIGNvbnRleHQ6IElSYWRpb2dyb3VwV3JhcENvbnRleHQpIHtcbiAgICB9XG4gICAgcHVibGljIGFkZFRvUGRmKGNvbG9yOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fcmFkaW9Hcm91cCA9IG5ldyB0aGlzLmNvbnRyb2xsZXIuZG9jLkFjcm9Gb3JtUmFkaW9CdXR0b24oKTtcbiAgICAgICAgY29uc3Qgb3B0aW9uczogYW55ID0ge307XG4gICAgICAgIG9wdGlvbnMuZmllbGROYW1lID0gdGhpcy5uYW1lO1xuICAgICAgICBvcHRpb25zLnJlYWRPbmx5ID0gdGhpcy5yZWFkT25seTtcbiAgICAgICAgb3B0aW9ucy5jb2xvciA9IGNvbG9yO1xuICAgICAgICBvcHRpb25zLmNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgICg8U3VydmV5UERGPnRoaXMuY29udGV4dC5xdWVzdGlvbi5zdXJ2ZXkpPy5nZXRVcGRhdGVkUmFkaW9Hcm91cFdyYXBPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLl9yYWRpb0dyb3VwLmZpZWxkTmFtZSA9IG9wdGlvbnMuZmllbGROYW1lO1xuICAgICAgICB0aGlzLl9yYWRpb0dyb3VwLnJlYWRPbmx5ID0gb3B0aW9ucy5yZWFkT25seTtcbiAgICAgICAgdGhpcy5fcmFkaW9Hcm91cC5jb2xvciA9IG9wdGlvbnMuY29sb3I7XG5cbiAgICAgICAgdGhpcy5fcmFkaW9Hcm91cC52YWx1ZSA9ICcnO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZG9jLmFkZEZpZWxkKHRoaXMuX3JhZGlvR3JvdXApO1xuICAgIH1cbiAgICBnZXQgcmFkaW9Hcm91cCgpOiBhbnkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmFkaW9Hcm91cDtcbiAgICB9XG4gICAgZ2V0IHJlYWRPbmx5KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LnJlYWRPbmx5O1xuICAgIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUmFkaW9Hcm91cEl0ZW1Ccmlja0NvbnRleHQge1xuICAgIHF1ZXN0aW9uOiBJUXVlc3Rpb247XG4gICAgY2hlY2tlZDogYm9vbGVhbjtcbiAgICBpbmRleDogbnVtYmVyO1xuICAgIGl0ZW06IEl0ZW1WYWx1ZTtcbn1cblxuZXhwb3J0IGNsYXNzIFJhZGlvSXRlbUJyaWNrIGV4dGVuZHMgUGRmQnJpY2sge1xuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFJBRElPTUFSS0VSX1JFQURPTkxZX1NZTUJPTDogc3RyaW5nID0gJ2wnO1xuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFJBRElPTUFSS0VSX1JFQURPTkxZX0ZPTlQ6IHN0cmluZyA9ICd6YXBmZGluZ2JhdHMnO1xuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUkFESU9NQVJLRVJfUkVBRE9OTFlfRk9OVF9TSVpFX1NDQUxFOiBudW1iZXIgPSAxLjAgLSAoKDIuMCArIE1hdGguRSkgLyAxMC4wKTtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoY29udHJvbGxlcjogRG9jQ29udHJvbGxlcixcbiAgICAgICAgcmVjdDogSVJlY3QsIHByaXZhdGUgY29udGV4dDogSVJhZGlvR3JvdXBJdGVtQnJpY2tDb250ZXh0LFxuICAgICAgICBwcml2YXRlIHJhZGlvR3JvdXBXcmFwOiBSYWRpb0dyb3VwV3JhcCkge1xuICAgICAgICBzdXBlcihjb250ZXh0LnF1ZXN0aW9uLCBjb250cm9sbGVyLCByZWN0KTtcbiAgICAgICAgdGhpcy50ZXh0Q29sb3IgPSB0aGlzLmZvcm1Cb3JkZXJDb2xvcjtcbiAgICB9XG4gICAgcHJvdGVjdGVkIGdldFNob3VsZFJlbmRlclJlYWRPbmx5KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpb0dyb3VwV3JhcC5yZWFkT25seSAmJiBTdXJ2ZXlIZWxwZXIuZ2V0UmVhZG9ubHlSZW5kZXJBcyhcbiAgICAgICAgICAgIDxRdWVzdGlvbj50aGlzLnF1ZXN0aW9uLCB0aGlzLmNvbnRyb2xsZXIpICE9PSAnYWNyb2Zvcm0nIHx8IHRoaXMuY29udHJvbGxlci5jb21wcmVzcztcbiAgICB9XG4gICAgcHVibGljIGFzeW5jIHJlbmRlckludGVyYWN0aXZlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodGhpcy5jb250ZXh0LmluZGV4ID09IDApIHtcbiAgICAgICAgICAgIHRoaXMucmFkaW9Hcm91cFdyYXAuYWRkVG9QZGYodGhpcy5mb3JtQm9yZGVyQ29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9wdGlvbnM6IGFueSA9IHt9O1xuICAgICAgICBvcHRpb25zLmZpZWxkTmFtZSA9IHRoaXMucmFkaW9Hcm91cFdyYXAubmFtZSArICdpbmRleCcgKyB0aGlzLmNvbnRleHQuaW5kZXg7XG4gICAgICAgIGxldCBmb3JtU2NhbGU6IG51bWJlciA9IFN1cnZleUhlbHBlci5mb3JtU2NhbGUodGhpcy5jb250cm9sbGVyLCB0aGlzKTtcbiAgICAgICAgb3B0aW9ucy5SZWN0ID0gU3VydmV5SGVscGVyLmNyZWF0ZUFjcm9mb3JtUmVjdChcbiAgICAgICAgICAgIFN1cnZleUhlbHBlci5zY2FsZVJlY3QodGhpcywgZm9ybVNjYWxlKSk7XG4gICAgICAgIG9wdGlvbnMuY29sb3IgPSB0aGlzLmZvcm1Cb3JkZXJDb2xvcjtcbiAgICAgICAgb3B0aW9ucy5hcHBlYXJhbmNlID0gdGhpcy5jb250cm9sbGVyLmRvYy5BY3JvRm9ybS5BcHBlYXJhbmNlLlJhZGlvQnV0dG9uLkNpcmNsZTtcbiAgICAgICAgb3B0aW9ucy5yYWRpb0dyb3VwID0gdGhpcy5yYWRpb0dyb3VwV3JhcC5yYWRpb0dyb3VwO1xuICAgICAgICBvcHRpb25zLmNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG5cbiAgICAgICAgKDxTdXJ2ZXlQREY+dGhpcy5jb250ZXh0LnF1ZXN0aW9uLnN1cnZleSk/LmdldFVwZGF0ZWRSYWRpb0l0ZW1BY3JvZm9ybU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIGxldCByYWRpb0J1dHRvbjogYW55ID0gdGhpcy5yYWRpb0dyb3VwV3JhcC5yYWRpb0dyb3VwLmNyZWF0ZU9wdGlvbihvcHRpb25zLmZpZWxkTmFtZSk7XG5cbiAgICAgICAgaWYgKHRoaXMuY29udGV4dC5jaGVja2VkKSB7XG4gICAgICAgICAgICBpZighb3B0aW9ucy5BUykge1xuICAgICAgICAgICAgICAgIHJhZGlvQnV0dG9uLkFTID0gJy8nICsgb3B0aW9ucy5maWVsZE5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZighdGhpcy5yYWRpb0dyb3VwV3JhcC5yYWRpb0dyb3VwLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yYWRpb0dyb3VwV3JhcC5yYWRpb0dyb3VwLnZhbHVlID0gb3B0aW9ucy5maWVsZE5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZighb3B0aW9ucy5BUykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuQVMgPSAnL09mZic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmFkaW9CdXR0b24uUmVjdCA9IG9wdGlvbnMuUmVjdDtcbiAgICAgICAgcmFkaW9CdXR0b24uY29sb3IgPSBvcHRpb25zLmNvbG9yO1xuXG4gICAgICAgIFN1cnZleUhlbHBlci5yZW5kZXJGbGF0Qm9yZGVycyh0aGlzLmNvbnRyb2xsZXIsIHRoaXMpO1xuICAgICAgICB0aGlzLnJhZGlvR3JvdXBXcmFwLnJhZGlvR3JvdXAuc2V0QXBwZWFyYW5jZShcbiAgICAgICAgICAgIG9wdGlvbnMuYXBwZWFyYW5jZVxuICAgICAgICApO1xuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgcmVuZGVyUmVhZE9ubHkoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIFN1cnZleUhlbHBlci5yZW5kZXJGbGF0Qm9yZGVycyh0aGlzLmNvbnRyb2xsZXIsIHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5jb250ZXh0LmNoZWNrZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJhZGlvbWFya2VyUG9pbnQ6IElQb2ludCA9IFN1cnZleUhlbHBlci5jcmVhdGVQb2ludCh0aGlzLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIGNvbnN0IG9sZEZvbnRTaXplOiBudW1iZXIgPSB0aGlzLmNvbnRyb2xsZXIuZm9udFNpemU7XG4gICAgICAgICAgICBjb25zdCBvbGRGb250TmFtZTogc3RyaW5nID0gdGhpcy5jb250cm9sbGVyLmZvbnROYW1lO1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLmZvbnROYW1lID0gUmFkaW9JdGVtQnJpY2suUkFESU9NQVJLRVJfUkVBRE9OTFlfRk9OVDtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5mb250U2l6ZSA9IG9sZEZvbnRTaXplICpcbiAgICAgICAgICAgICAgICBSYWRpb0l0ZW1Ccmljay5SQURJT01BUktFUl9SRUFET05MWV9GT05UX1NJWkVfU0NBTEU7XG4gICAgICAgICAgICBsZXQgcmFkaW9tYXJrZXJTaXplOiBJU2l6ZSA9IHRoaXMuY29udHJvbGxlci5tZWFzdXJlVGV4dChcbiAgICAgICAgICAgICAgICBSYWRpb0l0ZW1Ccmljay5SQURJT01BUktFUl9SRUFET05MWV9TWU1CT0wpO1xuICAgICAgICAgICAgcmFkaW9tYXJrZXJQb2ludC54TGVmdCArPSB0aGlzLndpZHRoIC8gMi4wIC0gcmFkaW9tYXJrZXJTaXplLndpZHRoIC8gMi4wO1xuICAgICAgICAgICAgcmFkaW9tYXJrZXJQb2ludC55VG9wICs9IHRoaXMuaGVpZ2h0IC8gMi4wIC0gcmFkaW9tYXJrZXJTaXplLmhlaWdodCAvIDIuMDtcbiAgICAgICAgICAgIGxldCByYWRpb21hcmtlckZsYXQ6IElQZGZCcmljayA9IGF3YWl0IFN1cnZleUhlbHBlci5jcmVhdGVUZXh0RmxhdChcbiAgICAgICAgICAgICAgICByYWRpb21hcmtlclBvaW50LCB0aGlzLnF1ZXN0aW9uLCB0aGlzLmNvbnRyb2xsZXIsXG4gICAgICAgICAgICAgICAgUmFkaW9JdGVtQnJpY2suUkFESU9NQVJLRVJfUkVBRE9OTFlfU1lNQk9MLCBUZXh0QnJpY2spO1xuICAgICAgICAgICAgKDxhbnk+cmFkaW9tYXJrZXJGbGF0LnVuZm9sZCgpWzBdKS50ZXh0Q29sb3IgPSB0aGlzLnRleHRDb2xvcjtcbiAgICAgICAgICAgIGF3YWl0IHJhZGlvbWFya2VyRmxhdC5yZW5kZXIoKTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5mb250U2l6ZSA9IG9sZEZvbnRTaXplO1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLmZvbnROYW1lID0gb2xkRm9udE5hbWU7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3BkZl9yZW5kZXIvcGRmX3JhZGlvaXRlbS50cyIsImltcG9ydCB7IElRdWVzdGlvbiwgUXVlc3Rpb25SYW5raW5nTW9kZWwgfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5pbXBvcnQgeyBJUmVjdCwgSVNpemUsIERvY0NvbnRyb2xsZXIsIElQb2ludCB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IElQZGZCcmljaywgUGRmQnJpY2sgfSBmcm9tICcuL3BkZl9icmljayc7XG5pbXBvcnQgeyBUZXh0QnJpY2sgfSBmcm9tICcuL3BkZl90ZXh0JztcbmltcG9ydCB7IENoZWNrSXRlbUJyaWNrIH0gZnJvbSAnLi9wZGZfY2hlY2tpdGVtJztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuXG5leHBvcnQgY2xhc3MgUmFua2luZ0l0ZW1CcmljayBleHRlbmRzIFBkZkJyaWNrIHtcbiAgICBwcm90ZWN0ZWQgcXVlc3Rpb246IFF1ZXN0aW9uUmFua2luZ01vZGVsO1xuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihxdWVzdGlvbjogSVF1ZXN0aW9uLCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLFxuICAgICAgICByZWN0OiBJUmVjdCwgcHJvdGVjdGVkIG1hcms6IHN0cmluZykge1xuICAgICAgICBzdXBlcihxdWVzdGlvbiwgY29udHJvbGxlciwgcmVjdCk7XG4gICAgICAgIHRoaXMucXVlc3Rpb24gPSA8UXVlc3Rpb25SYW5raW5nTW9kZWw+cXVlc3Rpb247XG4gICAgICAgIHRoaXMudGV4dENvbG9yID0gdGhpcy5mb3JtQm9yZGVyQ29sb3I7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyByZW5kZXJJbnRlcmFjdGl2ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgU3VydmV5SGVscGVyLnJlbmRlckZsYXRCb3JkZXJzKHRoaXMuY29udHJvbGxlciwgdGhpcyk7XG4gICAgICAgIGNvbnN0IG1hcmtQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNyZWF0ZVBvaW50KHRoaXMsIHRydWUsIHRydWUpO1xuICAgICAgICBjb25zdCBvbGRGb250U2l6ZTogbnVtYmVyID0gdGhpcy5jb250cm9sbGVyLmZvbnRTaXplO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZm9udFNpemUgPSBvbGRGb250U2l6ZSAqXG4gICAgICAgICAgICBDaGVja0l0ZW1Ccmljay5DSEVDS01BUktfUkVBRE9OTFlfRk9OVF9TSVpFX1NDQUxFO1xuICAgICAgICBjb25zdCBtYXJrU2l6ZTogSVNpemUgPSB0aGlzLmNvbnRyb2xsZXIubWVhc3VyZVRleHQodGhpcy5tYXJrKTtcbiAgICAgICAgbWFya1BvaW50LnhMZWZ0ICs9IHRoaXMud2lkdGggLyAyLjAgLSBtYXJrU2l6ZS53aWR0aCAvIDIuMDtcbiAgICAgICAgbWFya1BvaW50LnlUb3AgKz0gdGhpcy5oZWlnaHQgLyAyLjAgLSBtYXJrU2l6ZS5oZWlnaHQgLyAyLjA7XG4gICAgICAgIGNvbnN0IG1hcmtGbGF0OiBJUGRmQnJpY2sgPSBhd2FpdCBTdXJ2ZXlIZWxwZXIuY3JlYXRlVGV4dEZsYXQoXG4gICAgICAgICAgICBtYXJrUG9pbnQsIHRoaXMucXVlc3Rpb24sIHRoaXMuY29udHJvbGxlciwgdGhpcy5tYXJrLCBUZXh0QnJpY2spO1xuICAgICAgICAoPGFueT5tYXJrRmxhdC51bmZvbGQoKVswXSkudGV4dENvbG9yID0gdGhpcy50ZXh0Q29sb3I7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5mb250U2l6ZSA9IG9sZEZvbnRTaXplO1xuICAgICAgICBhd2FpdCBtYXJrRmxhdC5yZW5kZXIoKTtcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3BkZl9yZW5kZXIvcGRmX3JhbmtpbmdpdGVtLnRzIiwiaW1wb3J0IHsgSVF1ZXN0aW9uLCBRdWVzdGlvblRleHRNb2RlbCwgc2V0dGluZ3MgfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5pbXBvcnQgeyBJUmVjdCwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IElQZGZCcmljaywgUGRmQnJpY2ssIFRyYW5zbGF0ZVhGdW5jdGlvbiB9IGZyb20gJy4vcGRmX2JyaWNrJztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuaW1wb3J0IHsgQ29tcG9zaXRlQnJpY2sgfSBmcm9tICcuL3BkZl9jb21wb3NpdGUnO1xuXG5leHBvcnQgY2xhc3MgVGV4dEZpZWxkQnJpY2sgZXh0ZW5kcyBQZGZCcmljayB7XG4gICAgcHJvdGVjdGVkIHF1ZXN0aW9uOiBRdWVzdGlvblRleHRNb2RlbDtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocXVlc3Rpb246IElRdWVzdGlvbiwgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcixcbiAgICAgICAgcmVjdDogSVJlY3QsIHByb3RlY3RlZCBpc1F1ZXN0aW9uOiBib29sZWFuLFxuICAgICAgICBwcm90ZWN0ZWQgZmllbGROYW1lOiBzdHJpbmcsIHByb3RlY3RlZCB2YWx1ZTogc3RyaW5nLFxuICAgICAgICBwcm90ZWN0ZWQgcGxhY2Vob2xkZXI6IHN0cmluZywgcHVibGljIGlzUmVhZE9ubHk6IGJvb2xlYW4sXG4gICAgICAgIHByb3RlY3RlZCBpc011bHRpbGluZTogYm9vbGVhbiwgcHJvdGVjdGVkIGlucHV0VHlwZTogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKHF1ZXN0aW9uLCBjb250cm9sbGVyLCByZWN0KTtcbiAgICAgICAgdGhpcy5xdWVzdGlvbiA9IDxRdWVzdGlvblRleHRNb2RlbD5xdWVzdGlvbjtcbiAgICB9XG4gICAgcHJpdmF0ZSByZW5kZXJDb2xvclF1ZXN0aW9uKCk6IHZvaWQge1xuICAgICAgICBsZXQgb2xkRmlsbENvbG9yOiBzdHJpbmcgPSB0aGlzLmNvbnRyb2xsZXIuZG9jLmdldEZpbGxDb2xvcigpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZG9jLnNldEZpbGxDb2xvcih0aGlzLnF1ZXN0aW9uLnZhbHVlIHx8ICdibGFjaycpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZG9jLnJlY3QodGhpcy54TGVmdCwgdGhpcy55VG9wLFxuICAgICAgICAgICAgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsICdGJyk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5kb2Muc2V0RmlsbENvbG9yKG9sZEZpbGxDb2xvcik7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyByZW5kZXJJbnRlcmFjdGl2ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKHRoaXMuaW5wdXRUeXBlID09PSAnY29sb3InKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckNvbG9yUXVlc3Rpb24oKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbnB1dEZpZWxkOiBhbnkgPSB0aGlzLmlucHV0VHlwZSA9PT0gJ3Bhc3N3b3JkJyA/XG4gICAgICAgICAgICBuZXcgKDxhbnk+dGhpcy5jb250cm9sbGVyLmRvYy5BY3JvRm9ybVBhc3N3b3JkRmllbGQpKCkgOlxuICAgICAgICAgICAgbmV3ICg8YW55PnRoaXMuY29udHJvbGxlci5kb2MuQWNyb0Zvcm1UZXh0RmllbGQpKCk7XG4gICAgICAgIGlucHV0RmllbGQuZmllbGROYW1lID0gdGhpcy5maWVsZE5hbWU7XG4gICAgICAgIGlucHV0RmllbGQuZm9udE5hbWUgPSB0aGlzLmNvbnRyb2xsZXIuZm9udE5hbWU7XG4gICAgICAgIGlucHV0RmllbGQuZm9udFNpemUgPSB0aGlzLmZvbnRTaXplO1xuICAgICAgICBpbnB1dEZpZWxkLmlzVW5pY29kZSA9IFN1cnZleUhlbHBlci5pc0N1c3RvbUZvbnQoXG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIsIGlucHV0RmllbGQuZm9udE5hbWUpO1xuICAgICAgICBpZiAodGhpcy5pbnB1dFR5cGUgIT09ICdwYXNzd29yZCcpIHtcbiAgICAgICAgICAgIGlucHV0RmllbGQuViA9ICcgJyArIHRoaXMuZ2V0Q29ycmVjdGVkVGV4dCh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIGlucHV0RmllbGQuRFYgPSAnICcgKyB0aGlzLmdldENvcnJlY3RlZFRleHQodGhpcy5wbGFjZWhvbGRlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpbnB1dEZpZWxkLnZhbHVlID0gJyc7XG4gICAgICAgIGlucHV0RmllbGQubXVsdGlsaW5lID0gdGhpcy5pc011bHRpbGluZTtcbiAgICAgICAgaW5wdXRGaWVsZC5yZWFkT25seSA9IHRoaXMuaXNSZWFkT25seTtcbiAgICAgICAgaW5wdXRGaWVsZC5jb2xvciA9IHRoaXMudGV4dENvbG9yO1xuICAgICAgICBsZXQgZm9ybVNjYWxlOiBudW1iZXIgPSBTdXJ2ZXlIZWxwZXIuZm9ybVNjYWxlKHRoaXMuY29udHJvbGxlciwgdGhpcyk7XG4gICAgICAgIGlucHV0RmllbGQubWF4Rm9udFNpemUgPSB0aGlzLmNvbnRyb2xsZXIuZm9udFNpemUgKiBmb3JtU2NhbGU7XG4gICAgICAgIGlucHV0RmllbGQuUmVjdCA9IFN1cnZleUhlbHBlci5jcmVhdGVBY3JvZm9ybVJlY3QoXG4gICAgICAgICAgICBTdXJ2ZXlIZWxwZXIuc2NhbGVSZWN0KHRoaXMsIGZvcm1TY2FsZSkpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZG9jLmFkZEZpZWxkKGlucHV0RmllbGQpO1xuICAgICAgICBTdXJ2ZXlIZWxwZXIucmVuZGVyRmxhdEJvcmRlcnModGhpcy5jb250cm9sbGVyLCB0aGlzKTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIHNob3VsZFJlbmRlckZsYXRCb3JkZXJzKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gc2V0dGluZ3MucmVhZE9ubHlUZXh0UmVuZGVyTW9kZSA9PT0gJ2lucHV0JztcbiAgICB9XG4gICAgcHJvdGVjdGVkIGdldFNob3VsZFJlbmRlclJlYWRPbmx5KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gU3VydmV5SGVscGVyLnNob3VsZFJlbmRlclJlYWRPbmx5KHRoaXMucXVlc3Rpb24sIHRoaXMuY29udHJvbGxlciwgdGhpcy5pc1JlYWRPbmx5KTtcbiAgICB9XG4gICAgcHJpdmF0ZSBfdGV4dEJyaWNrOiBJUGRmQnJpY2s7XG4gICAgcHVibGljIGdldCB0ZXh0QnJpY2soKTogSVBkZkJyaWNrIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RleHRCcmljaztcbiAgICB9XG4gICAgcHVibGljIHNldCB0ZXh0QnJpY2sodmFsOiBJUGRmQnJpY2spIHtcbiAgICAgICAgdGhpcy5fdGV4dEJyaWNrID0gdmFsO1xuICAgICAgICBjb25zdCB1bkZvbGRlZEJyaWNrcyA9IHZhbC51bmZvbGQoKTtcbiAgICAgICAgY29uc3QgYnJpY2tzQ291bnQgPSB1bkZvbGRlZEJyaWNrcy5sZW5ndGg7XG4gICAgICAgIGxldCByZW5kZXJlZEJyaWNrc0NvdW50ID0gMDtcbiAgICAgICAgY29uc3QgYnJpY2tzQnlQYWdlOiB7IFtpbmRleDogbnVtYmVyXTogQXJyYXk8UGRmQnJpY2s+IH0gPSB7fTtcbiAgICAgICAgY29uc3QgYWZ0ZXJSZW5kZXJUZXh0QnJpY2tDYWxsYmFjayA9IChicmljazogUGRmQnJpY2spID0+IHtcbiAgICAgICAgICAgIGlmKHRoaXMuc2hvdWxkUmVuZGVyRmxhdEJvcmRlcnMoKSkge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVkQnJpY2tzQ291bnQrKztcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UGFnZU51bWJlciA9IHRoaXMuY29udHJvbGxlci5nZXRDdXJyZW50UGFnZUluZGV4KCk7XG4gICAgICAgICAgICAgICAgaWYoIWJyaWNrc0J5UGFnZVtjdXJyZW50UGFnZU51bWJlcl0pIHtcbiAgICAgICAgICAgICAgICAgICAgYnJpY2tzQnlQYWdlW2N1cnJlbnRQYWdlTnVtYmVyXSA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmlja3NCeVBhZ2VbY3VycmVudFBhZ2VOdW1iZXJdLnB1c2goYnJpY2spO1xuICAgICAgICAgICAgICAgIGlmKHJlbmRlcmVkQnJpY2tzQ291bnQgPj0gYnJpY2tzQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGJyaWNrc0J5UGFnZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbmRlcmVkT25PbmVQYWdlID0ga2V5cy5sZW5ndGggPT0gMTtcbiAgICAgICAgICAgICAgICAgICAga2V5cy5mb3JFYWNoKChrZXk6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcG9zaXRlQnJpY2sgPSBuZXcgQ29tcG9zaXRlQnJpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyaWNrc0J5UGFnZVtrZXkgYXMgYW55XS5mb3JFYWNoKChicmljazogUGRmQnJpY2spID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb3NpdGVCcmljay5hZGRCcmljayhicmljayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZGRpbmcgPSB0aGlzLmNvbnRyb2xsZXIudW5pdEhlaWdodCAqIFN1cnZleUhlbHBlci5WQUxVRV9SRUFET05MWV9QQURESU5HX1NDQUxFO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYm9yZGVyUmVjdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4TGVmdDogdGhpcy54TGVmdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4UmlnaHQ6IHRoaXMueFJpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlUb3A6IHJlbmRlcmVkT25PbmVQYWdlID8gdGhpcy55VG9wIDogY29tcG9zaXRlQnJpY2sueVRvcCAtIHBhZGRpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeUJvdDogcmVuZGVyZWRPbk9uZVBhZ2UgPyB0aGlzLnlCb3QgOiBjb21wb3NpdGVCcmljay55Qm90ICsgcGFkZGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHJlbmRlcmVkT25PbmVQYWdlID8gdGhpcy5oZWlnaHQgOiBjb21wb3NpdGVCcmljay5oZWlnaHQgKyAyICogcGFkZGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtQm9yZGVyQ29sb3I6IHRoaXMuZm9ybUJvcmRlckNvbG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5zZXRQYWdlKE51bWJlcihrZXkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN1cnZleUhlbHBlci5yZW5kZXJGbGF0Qm9yZGVycyh0aGlzLmNvbnRyb2xsZXIsIGJvcmRlclJlY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnNldFBhZ2UoY3VycmVudFBhZ2VOdW1iZXIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHVuRm9sZGVkQnJpY2tzLmZvckVhY2goKGJyaWNrOiBQZGZCcmljaykgPT4ge1xuICAgICAgICAgICAgYnJpY2suYWZ0ZXJSZW5kZXJDYWxsYmFjayA9IGFmdGVyUmVuZGVyVGV4dEJyaWNrQ2FsbGJhY2suYmluZCh0aGlzLCBicmljayk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgcmVuZGVyUmVhZE9ubHkoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5wdXNoTWFyZ2lucyh0aGlzLnhMZWZ0LFxuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnBhcGVyV2lkdGggLSB0aGlzLnhSaWdodCk7XG4gICAgICAgIGlmICh0aGlzLmlucHV0VHlwZSA9PT0gJ2NvbG9yJykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJDb2xvclF1ZXN0aW9uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnRleHRCcmljay5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbnRyb2xsZXIucG9wTWFyZ2lucygpO1xuICAgIH1cbiAgICBwdWJsaWMgdW5mb2xkKCk6IElQZGZCcmlja1tdIHtcbiAgICAgICAgaWYgKHRoaXMuZ2V0U2hvdWxkUmVuZGVyUmVhZE9ubHkoKSAmJiB0aGlzLmlucHV0VHlwZSAhPT0gJ2NvbG9yJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGV4dEJyaWNrLnVuZm9sZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnVuZm9sZCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyB0cmFuc2xhdGVYKGZ1bmM6IFRyYW5zbGF0ZVhGdW5jdGlvbik6IHZvaWQge1xuICAgICAgICBjb25zdCByZXMgPSBmdW5jKHRoaXMueExlZnQsIHRoaXMueFJpZ2h0KTtcbiAgICAgICAgdGhpcy5feExlZnQgPSByZXMueExlZnQ7XG4gICAgICAgIHRoaXMuX3hSaWdodCA9IHJlcy54UmlnaHQ7XG4gICAgICAgIGlmKHRoaXMudGV4dEJyaWNrKSB7XG4gICAgICAgICAgICB0aGlzLnRleHRCcmljay50cmFuc2xhdGVYKGZ1bmMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb3RlY3RlZCBzZXRYTGVmdCh2YWw6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCBkZWx0YSA9IHZhbCAtIHRoaXMuX3hMZWZ0O1xuICAgICAgICBzdXBlci5zZXRYTGVmdCh2YWwpO1xuICAgICAgICBpZih0aGlzLnRleHRCcmljaykge1xuICAgICAgICAgICAgdGhpcy50ZXh0QnJpY2sueExlZnQgPSB0aGlzLnRleHRCcmljay54TGVmdCArIGRlbHRhO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb3RlY3RlZCBzZXRYUmlnaHQodmFsOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZGVsdGEgPSB2YWwgLSB0aGlzLl94UmlnaHQ7XG4gICAgICAgIHN1cGVyLnNldFhSaWdodCh2YWwpO1xuICAgICAgICBpZih0aGlzLnRleHRCcmljaykge1xuICAgICAgICAgICAgdGhpcy50ZXh0QnJpY2sueFJpZ2h0ID0gdGhpcy50ZXh0QnJpY2sueFJpZ2h0ICsgZGVsdGE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvdGVjdGVkIHNldFlUb3AodmFsOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZGVsdGEgPSB2YWwgLSB0aGlzLl95VG9wO1xuICAgICAgICBzdXBlci5zZXRZVG9wKHZhbCk7XG4gICAgICAgIGlmKHRoaXMudGV4dEJyaWNrKSB7XG4gICAgICAgICAgICB0aGlzLnRleHRCcmljay55VG9wID0gdGhpcy50ZXh0QnJpY2sueVRvcCArIGRlbHRhO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb3RlY3RlZCBzZXRZQm90dG9tKHZhbDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGRlbHRhID0gdmFsIC0gdGhpcy5feUJvdDtcbiAgICAgICAgc3VwZXIuc2V0WUJvdHRvbSh2YWwpO1xuICAgICAgICBpZih0aGlzLnRleHRCcmljaykge1xuICAgICAgICAgICAgdGhpcy50ZXh0QnJpY2sueUJvdCA9IHRoaXMudGV4dEJyaWNrLnlCb3QgKyBkZWx0YTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcGRmX3JlbmRlci9wZGZfdGV4dGZpZWxkLnRzIiwiaW1wb3J0IHsgSVF1ZXN0aW9uLCBRdWVzdGlvblRleHRNb2RlbCB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCB7IElSZWN0LCBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgVGV4dEJvbGRCcmljayB9IGZyb20gJy4vcGRmX3RleHRib2xkJztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuXG5leHBvcnQgY2xhc3MgVGl0bGVQYW5lbEJyaWNrIGV4dGVuZHMgVGV4dEJvbGRCcmljayB7XG4gICAgcHJvdGVjdGVkIHF1ZXN0aW9uOiBRdWVzdGlvblRleHRNb2RlbDtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocXVlc3Rpb246IElRdWVzdGlvbiwgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcixcbiAgICAgICAgcmVjdDogSVJlY3QsIHRleHQ6IHN0cmluZykge1xuICAgICAgICBzdXBlcihxdWVzdGlvbiwgY29udHJvbGxlciwgcmVjdCwgdGV4dCk7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyByZW5kZXJJbnRlcmFjdGl2ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgbGV0IG9sZEZvbnRTaXplID0gdGhpcy5jb250cm9sbGVyLmZvbnRTaXplO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZm9udFNpemUgPSBvbGRGb250U2l6ZSAqIFN1cnZleUhlbHBlci5USVRMRV9QQU5FTF9GT05UX1NJWkVfU0NBTEU7XG4gICAgICAgIGF3YWl0IHN1cGVyLnJlbmRlckludGVyYWN0aXZlKCk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5mb250U2l6ZSA9IG9sZEZvbnRTaXplO1xuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcGRmX3JlbmRlci9wZGZfdGl0bGVwYW5lbC50cyIsImltcG9ydCB7IElRdWVzdGlvbiwgUGFuZWxNb2RlbCwgUGFnZU1vZGVsLCBRdWVzdGlvbiB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCB7IElQb2ludCwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IEZsYXRSZXBvc2l0b3J5IH0gZnJvbSAnLi4vZmxhdF9sYXlvdXQvZmxhdF9yZXBvc2l0b3J5JztcbmltcG9ydCB7IElQZGZCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2JyaWNrJztcblxuZXhwb3J0IGNsYXNzIEFkb3JuZXJzQmFzZU9wdGlvbnMge1xuICAgIHB1YmxpYyBwb2ludDogSVBvaW50O1xuICAgIHB1YmxpYyBicmlja3M6IElQZGZCcmlja1tdO1xuICAgIHB1YmxpYyBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyO1xuICAgIHB1YmxpYyByZXBvc2l0b3J5OiBGbGF0UmVwb3NpdG9yeTtcbiAgICBwdWJsaWMgbW9kdWxlOiBhbnk7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IocG9pbnQ6IElQb2ludCwgYnJpY2tzOiBJUGRmQnJpY2tbXSxcbiAgICAgICAgY29udHJvbGxlcjogRG9jQ29udHJvbGxlciwgcmVwb3NpdG9yeTogRmxhdFJlcG9zaXRvcnksIG1vZHVsZTogYW55KSB7XG4gICAgICAgIHRoaXMucG9pbnQgPSBwb2ludDtcbiAgICAgICAgdGhpcy5icmlja3MgPSBicmlja3M7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7XG4gICAgICAgIHRoaXMucmVwb3NpdG9yeSA9IHJlcG9zaXRvcnk7XG4gICAgICAgIHRoaXMubW9kdWxlID0gbW9kdWxlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBZG9ybmVyc09wdGlvbnMgZXh0ZW5kcyBBZG9ybmVyc0Jhc2VPcHRpb25zIHtcbiAgICBwdWJsaWMgcXVlc3Rpb246IFF1ZXN0aW9uO1xuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwb2ludDogSVBvaW50LCBicmlja3M6IElQZGZCcmlja1tdLFxuICAgICAgICBxdWVzdGlvbjogUXVlc3Rpb24sIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsXG4gICAgICAgIHJlcG9zaXRvcnk6IEZsYXRSZXBvc2l0b3J5LCBtb2R1bGU6IGFueSkge1xuICAgICAgICBzdXBlcihwb2ludCwgYnJpY2tzLCBjb250cm9sbGVyLCByZXBvc2l0b3J5LCBtb2R1bGUpO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uID0gcXVlc3Rpb247XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEFkb3JuZXJzUGFuZWxPcHRpb25zIGV4dGVuZHMgQWRvcm5lcnNCYXNlT3B0aW9ucyB7XG4gICAgcHVibGljIHBhbmVsOiBQYW5lbE1vZGVsO1xuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwb2ludDogSVBvaW50LCBicmlja3M6IElQZGZCcmlja1tdLFxuICAgICAgICBwYW5lbDogUGFuZWxNb2RlbCwgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcixcbiAgICAgICAgcmVwb3NpdG9yeTogRmxhdFJlcG9zaXRvcnksIG1vZHVsZTogYW55KSB7XG4gICAgICAgIHN1cGVyKHBvaW50LCBicmlja3MsIGNvbnRyb2xsZXIsIHJlcG9zaXRvcnksIG1vZHVsZSk7XG4gICAgICAgIHRoaXMucGFuZWwgPSBwYW5lbDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBZG9ybmVyc1BhZ2VPcHRpb25zIGV4dGVuZHMgQWRvcm5lcnNCYXNlT3B0aW9ucyB7XG4gICAgcHVibGljIHBhZ2U6IFBhZ2VNb2RlbDtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocG9pbnQ6IElQb2ludCwgYnJpY2tzOiBJUGRmQnJpY2tbXSxcbiAgICAgICAgcGFnZTogUGFnZU1vZGVsLCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLFxuICAgICAgICByZXBvc2l0b3J5OiBGbGF0UmVwb3NpdG9yeSwgbW9kdWxlOiBhbnkpIHtcbiAgICAgICAgc3VwZXIocG9pbnQsIGJyaWNrcywgY29udHJvbGxlciwgcmVwb3NpdG9yeSwgbW9kdWxlKTtcbiAgICAgICAgdGhpcy5wYWdlID0gcGFnZTtcbiAgICB9XG59XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9ldmVudF9oYW5kbGVyL2Fkb3JuZXJzLnRzIiwiaW1wb3J0IHsgSVF1ZXN0aW9uLCBJdGVtVmFsdWUsIExvY2FsaXphYmxlU3RyaW5nLCBRdWVzdGlvbkJvb2xlYW5Nb2RlbCwgUXVlc3Rpb25SYWRpb2dyb3VwTW9kZWwsIFN1cnZleU1vZGVsIH0gZnJvbSAnc3VydmV5LWNvcmUnO1xuaW1wb3J0IHsgU3VydmV5UERGIH0gZnJvbSAnLi4vc3VydmV5JztcbmltcG9ydCB7IElQb2ludCwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IEZsYXRRdWVzdGlvbiB9IGZyb20gJy4vZmxhdF9xdWVzdGlvbic7XG5pbXBvcnQgeyBGbGF0UmVwb3NpdG9yeSB9IGZyb20gJy4vZmxhdF9yZXBvc2l0b3J5JztcbmltcG9ydCB7IElQZGZCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2JyaWNrJztcbmltcG9ydCB7IFRleHRCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX3RleHQnO1xuaW1wb3J0IHsgQm9vbGVhbkl0ZW1CcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2Jvb2xlYW5pdGVtJztcbmltcG9ydCB7IENvbXBvc2l0ZUJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfY29tcG9zaXRlJztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuaW1wb3J0IHsgRmxhdFJhZGlvZ3JvdXAgfSBmcm9tICcuL2ZsYXRfcmFkaW9ncm91cCc7XG5cbmV4cG9ydCBjbGFzcyBGbGF0Qm9vbGVhbkNoZWNrYm94IGV4dGVuZHMgRmxhdFF1ZXN0aW9uIHtcbiAgICBwcm90ZWN0ZWQgcXVlc3Rpb246IFF1ZXN0aW9uQm9vbGVhbk1vZGVsO1xuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBzdXJ2ZXk6IFN1cnZleVBERixcbiAgICAgICAgcXVlc3Rpb246IElRdWVzdGlvbiwgcHJvdGVjdGVkIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIpIHtcbiAgICAgICAgc3VwZXIoc3VydmV5LCBxdWVzdGlvbiwgY29udHJvbGxlcik7XG4gICAgICAgIHRoaXMucXVlc3Rpb24gPSA8UXVlc3Rpb25Cb29sZWFuTW9kZWw+cXVlc3Rpb247XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUZsYXRzQ29udGVudChwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2tbXT4ge1xuICAgICAgICBjb25zdCBjb21wb3NpdGVGbGF0OiBDb21wb3NpdGVCcmljayA9IG5ldyBDb21wb3NpdGVCcmljaygpO1xuICAgICAgICBjb25zdCBoZWlnaHQ6IG51bWJlciA9IHRoaXMuY29udHJvbGxlci51bml0SGVpZ2h0O1xuICAgICAgICBjb25zdCBpdGVtRmxhdDogSVBkZkJyaWNrID0gbmV3IEJvb2xlYW5JdGVtQnJpY2sodGhpcy5xdWVzdGlvbiwgdGhpcy5jb250cm9sbGVyLFxuICAgICAgICAgICAgU3VydmV5SGVscGVyLm1vdmVSZWN0KFxuICAgICAgICAgICAgICAgIFN1cnZleUhlbHBlci5zY2FsZVJlY3QoU3VydmV5SGVscGVyLmNyZWF0ZVJlY3QocG9pbnQsIGhlaWdodCwgaGVpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgU3VydmV5SGVscGVyLlNFTEVDVF9JVEVNX0ZMQVRfU0NBTEUpLCBwb2ludC54TGVmdCkpO1xuICAgICAgICBjb21wb3NpdGVGbGF0LmFkZEJyaWNrKGl0ZW1GbGF0KTtcbiAgICAgICAgY29uc3QgdGV4dFBvaW50OiBJUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY2xvbmUocG9pbnQpO1xuICAgICAgICB0ZXh0UG9pbnQueExlZnQgPSBpdGVtRmxhdC54UmlnaHQgKyB0aGlzLmNvbnRyb2xsZXIudW5pdFdpZHRoICogU3VydmV5SGVscGVyLkdBUF9CRVRXRUVOX0lURU1fVEVYVDtcbiAgICAgICAgY29uc3QgbG9jTGFiZWxUZXh0OiBMb2NhbGl6YWJsZVN0cmluZyA9IHRoaXMucXVlc3Rpb24uaXNJbmRldGVybWluYXRlID8gbnVsbCA6XG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uLmNoZWNrZWRWYWx1ZSA/IHRoaXMucXVlc3Rpb24ubG9jTGFiZWxUcnVlIDogdGhpcy5xdWVzdGlvbi5sb2NMYWJlbEZhbHNlO1xuICAgICAgICBpZiAobG9jTGFiZWxUZXh0ICE9PSBudWxsICYmIGxvY0xhYmVsVGV4dC5yZW5kZXJlZEh0bWwgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbXBvc2l0ZUZsYXQuYWRkQnJpY2soYXdhaXQgU3VydmV5SGVscGVyLmNyZWF0ZVRleHRGbGF0KFxuICAgICAgICAgICAgICAgIHRleHRQb2ludCwgdGhpcy5xdWVzdGlvbiwgdGhpcy5jb250cm9sbGVyLCBsb2NMYWJlbFRleHQsIFRleHRCcmljaykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbY29tcG9zaXRlRmxhdF07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEZsYXRCb29sZWFuIGV4dGVuZHMgRmxhdFJhZGlvZ3JvdXAge1xuICAgIHByaXZhdGUgaXRlbXM6IEFycmF5PEl0ZW1WYWx1ZT47XG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIHN1cnZleTogU3VydmV5UERGLFxuICAgICAgICBxdWVzdGlvbjogSVF1ZXN0aW9uLCBwcm90ZWN0ZWQgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcikge1xuICAgICAgICBzdXBlcihzdXJ2ZXksIHF1ZXN0aW9uLCBjb250cm9sbGVyKTtcbiAgICAgICAgdGhpcy5idWlsZEl0ZW1zKCk7XG4gICAgfVxuICAgIHByaXZhdGUgYnVpbGRJdGVtcygpIHtcbiAgICAgICAgY29uc3QgcXVlc3Rpb24gPSA8UXVlc3Rpb25Cb29sZWFuTW9kZWw+KDxhbnk+dGhpcy5xdWVzdGlvbik7XG4gICAgICAgIGNvbnN0IGZhbHNlQ2hvaWNlID0gbmV3IEl0ZW1WYWx1ZSgoPFF1ZXN0aW9uQm9vbGVhbk1vZGVsPnF1ZXN0aW9uKS52YWx1ZUZhbHNlICE9PSB1bmRlZmluZWQgPyAoPFF1ZXN0aW9uQm9vbGVhbk1vZGVsPnF1ZXN0aW9uKS52YWx1ZUZhbHNlIDogZmFsc2UpO1xuICAgICAgICBjb25zdCB0cnVlQ2hvaWNlID0gbmV3IEl0ZW1WYWx1ZSgoPFF1ZXN0aW9uQm9vbGVhbk1vZGVsPnF1ZXN0aW9uKS52YWx1ZVRydWUgIT09IHVuZGVmaW5lZCA/ICg8UXVlc3Rpb25Cb29sZWFuTW9kZWw+cXVlc3Rpb24pLnZhbHVlVHJ1ZSA6IHRydWUpO1xuICAgICAgICBmYWxzZUNob2ljZS5sb2NPd25lciA9IHF1ZXN0aW9uO1xuICAgICAgICBmYWxzZUNob2ljZS5zZXRMb2NUZXh0KCg8UXVlc3Rpb25Cb29sZWFuTW9kZWw+cXVlc3Rpb24pLmxvY0xhYmVsRmFsc2UpO1xuICAgICAgICB0cnVlQ2hvaWNlLmxvY093bmVyID0gcXVlc3Rpb247XG4gICAgICAgIHRydWVDaG9pY2Uuc2V0TG9jVGV4dCgoPFF1ZXN0aW9uQm9vbGVhbk1vZGVsPnF1ZXN0aW9uKS5sb2NMYWJlbFRydWUpO1xuICAgICAgICB0aGlzLml0ZW1zID0gW2ZhbHNlQ2hvaWNlLCB0cnVlQ2hvaWNlXTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIGdldFZpc2libGVDaG9pY2VzKCk6IEFycmF5PEl0ZW1WYWx1ZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcztcbiAgICB9XG4gICAgcHJvdGVjdGVkIGdldENvbENvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbn1cblxuRmxhdFJlcG9zaXRvcnkuZ2V0SW5zdGFuY2UoKS5yZWdpc3RlcignYm9vbGVhbicsIEZsYXRCb29sZWFuKTtcbkZsYXRSZXBvc2l0b3J5LmdldEluc3RhbmNlKCkucmVnaXN0ZXIoJ2Jvb2xlYW4tY2hlY2tib3gnLCBGbGF0Qm9vbGVhbkNoZWNrYm94KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9mbGF0X2xheW91dC9mbGF0X2Jvb2xlYW4udHMiLCJpbXBvcnQgeyBJUXVlc3Rpb24sIEl0ZW1WYWx1ZSwgUXVlc3Rpb25DaGVja2JveE1vZGVsLCBRdWVzdGlvblRhZ2JveE1vZGVsIH0gZnJvbSAnc3VydmV5LWNvcmUnO1xuaW1wb3J0IHsgU3VydmV5UERGIH0gZnJvbSAnLi4vc3VydmV5JztcbmltcG9ydCB7IElSZWN0LCBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgRmxhdFNlbGVjdEJhc2UgfSBmcm9tICcuL2ZsYXRfc2VsZWN0YmFzZSc7XG5pbXBvcnQgeyBGbGF0UmVwb3NpdG9yeSB9IGZyb20gJy4vZmxhdF9yZXBvc2l0b3J5JztcbmltcG9ydCB7IElQZGZCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2JyaWNrJztcbmltcG9ydCB7IENoZWNrYm94SXRlbUJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfY2hlY2tib3hpdGVtJztcblxuZXhwb3J0IGNsYXNzIEZsYXRDaGVja2JveCBleHRlbmRzIEZsYXRTZWxlY3RCYXNlIHtcbiAgICBwcm90ZWN0ZWQgcXVlc3Rpb246IFF1ZXN0aW9uQ2hlY2tib3hNb2RlbDtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHJvdGVjdGVkIHN1cnZleTogU3VydmV5UERGLFxuICAgICAgICBxdWVzdGlvbjogSVF1ZXN0aW9uLCBwcm90ZWN0ZWQgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcikge1xuICAgICAgICBzdXBlcihzdXJ2ZXksIHF1ZXN0aW9uLCBjb250cm9sbGVyKTtcbiAgICAgICAgdGhpcy5xdWVzdGlvbiA9IDxRdWVzdGlvbkNoZWNrYm94TW9kZWw+cXVlc3Rpb247XG4gICAgfVxuICAgIHB1YmxpYyBnZW5lcmF0ZUZsYXRJdGVtKHJlY3Q6IElSZWN0LCBpdGVtOiBJdGVtVmFsdWUsIGluZGV4OiBudW1iZXIpOiBJUGRmQnJpY2sge1xuICAgICAgICByZXR1cm4gbmV3IENoZWNrYm94SXRlbUJyaWNrKHRoaXMucXVlc3Rpb24sIHRoaXMuY29udHJvbGxlciwgcmVjdCwgaXRlbSwgaW5kZXgpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBGbGF0VGFnYm94IGV4dGVuZHMgRmxhdENoZWNrYm94IHtcbiAgICBwcm90ZWN0ZWQgcXVlc3Rpb246IFF1ZXN0aW9uVGFnYm94TW9kZWw7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBzdXJ2ZXk6IFN1cnZleVBERixcbiAgICAgICAgcXVlc3Rpb246IElRdWVzdGlvbiwgcHJvdGVjdGVkIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIpIHtcbiAgICAgICAgc3VwZXIoc3VydmV5LCBxdWVzdGlvbiwgY29udHJvbGxlcik7XG4gICAgICAgIHRoaXMucXVlc3Rpb24gPSA8UXVlc3Rpb25UYWdib3hNb2RlbD5xdWVzdGlvbjtcbiAgICB9XG4gICAgcHJvdGVjdGVkIGdldFZpc2libGVDaG9pY2VzKCk6IEFycmF5PEl0ZW1WYWx1ZT4ge1xuICAgICAgICBpZih0aGlzLmNvbnRyb2xsZXIudGFnYm94U2VsZWN0ZWRDaG9pY2VzT25seSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb24uc2VsZWN0ZWRDaG9pY2VzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmdldFZpc2libGVDaG9pY2VzKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5GbGF0UmVwb3NpdG9yeS5nZXRJbnN0YW5jZSgpLnJlZ2lzdGVyKCd0YWdib3gnLCBGbGF0VGFnYm94KTtcbkZsYXRSZXBvc2l0b3J5LmdldEluc3RhbmNlKCkucmVnaXN0ZXIoJ2NoZWNrYm94JywgRmxhdENoZWNrYm94KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9jaGVja2JveC50cyIsImltcG9ydCB7IElRdWVzdGlvbiwgUXVlc3Rpb25Db21tZW50TW9kZWwgfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5pbXBvcnQgeyBTdXJ2ZXlQREYgfSBmcm9tICcuLi9zdXJ2ZXknO1xuaW1wb3J0IHsgSVBvaW50LCBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgRmxhdFF1ZXN0aW9uIH0gZnJvbSAnLi9mbGF0X3F1ZXN0aW9uJztcbmltcG9ydCB7IEZsYXRSZXBvc2l0b3J5IH0gZnJvbSAnLi9mbGF0X3JlcG9zaXRvcnknO1xuaW1wb3J0IHsgSVBkZkJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfYnJpY2snO1xuaW1wb3J0IHsgU3VydmV5SGVscGVyIH0gZnJvbSAnLi4vaGVscGVyX3N1cnZleSc7XG5cbmV4cG9ydCBjbGFzcyBGbGF0Q29tbWVudCBleHRlbmRzIEZsYXRRdWVzdGlvbiB7XG4gICAgcHJvdGVjdGVkIHF1ZXN0aW9uOiBRdWVzdGlvbkNvbW1lbnRNb2RlbDtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHJvdGVjdGVkIHN1cnZleTogU3VydmV5UERGLFxuICAgICAgICBxdWVzdGlvbjogSVF1ZXN0aW9uLCBwcm90ZWN0ZWQgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcikge1xuICAgICAgICBzdXBlcihzdXJ2ZXksIHF1ZXN0aW9uLCBjb250cm9sbGVyKTtcbiAgICAgICAgdGhpcy5xdWVzdGlvbiA9IDxRdWVzdGlvbkNvbW1lbnRNb2RlbD5xdWVzdGlvbjtcbiAgICB9XG4gICAgcHVibGljIGFzeW5jIGdlbmVyYXRlRmxhdHNDb250ZW50KHBvaW50OiBJUG9pbnQpOiBQcm9taXNlPElQZGZCcmlja1tdPiB7XG4gICAgICAgIHJldHVybiBbYXdhaXQgU3VydmV5SGVscGVyLmNyZWF0ZUNvbW1lbnRGbGF0KFxuICAgICAgICAgICAgcG9pbnQsIHRoaXMucXVlc3Rpb24sIHRoaXMuY29udHJvbGxlciwgdHJ1ZSwgeyByb3dzOiB0aGlzLnF1ZXN0aW9uLnJvd3MgfSldO1xuICAgIH1cbn1cblxuRmxhdFJlcG9zaXRvcnkuZ2V0SW5zdGFuY2UoKS5yZWdpc3RlcignY29tbWVudCcsIEZsYXRDb21tZW50KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9jb21tZW50LnRzIiwiaW1wb3J0IHsgSVF1ZXN0aW9uLCBRdWVzdGlvbkN1c3RvbU1vZGVsIH0gZnJvbSAnc3VydmV5LWNvcmUnO1xuaW1wb3J0IHsgU3VydmV5UERGIH0gZnJvbSAnLi4vc3VydmV5JztcbmltcG9ydCB7IElQb2ludCwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IEZsYXRRdWVzdGlvbiB9IGZyb20gJy4vZmxhdF9xdWVzdGlvbic7XG5pbXBvcnQgeyBGbGF0UmVwb3NpdG9yeSB9IGZyb20gJy4vZmxhdF9yZXBvc2l0b3J5JztcbmltcG9ydCB7IElQZGZCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2JyaWNrJztcblxuZXhwb3J0IGNsYXNzIEZsYXRDdXN0b21Nb2RlbCBleHRlbmRzIEZsYXRRdWVzdGlvbiB7XG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIHN1cnZleTogU3VydmV5UERGLFxuICAgICAgICBxdWVzdGlvbjogSVF1ZXN0aW9uLCBwcm90ZWN0ZWQgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcikge1xuICAgICAgICBzdXBlcihzdXJ2ZXksIHF1ZXN0aW9uLCBjb250cm9sbGVyKTtcbiAgICB9XG4gICAgcHVibGljIGFzeW5jIGdlbmVyYXRlRmxhdHNDb250ZW50KHBvaW50OiBJUG9pbnQpOiBQcm9taXNlPElQZGZCcmlja1tdPiB7XG4gICAgICAgIGNvbnN0IGZsYXQgPSBGbGF0UmVwb3NpdG9yeS5nZXRJbnN0YW5jZSgpLmNyZWF0ZSh0aGlzLnN1cnZleSwgdGhpcy5xdWVzdGlvbiwgdGhpcy5jb250cm9sbGVyLCB0aGlzLnF1ZXN0aW9uLmdldFR5cGUoKSk7XG4gICAgICAgIHJldHVybiBmbGF0LmdlbmVyYXRlRmxhdHNDb250ZW50KHBvaW50KTtcbiAgICB9XG59XG5cbkZsYXRSZXBvc2l0b3J5LmdldEluc3RhbmNlKCkucmVnaXN0ZXIoJ2N1c3RvbV9tb2RlbCcsIEZsYXRDdXN0b21Nb2RlbCk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2ZsYXRfbGF5b3V0L2ZsYXRfY3VzdG9tX21vZGVsLnRzIiwiaW1wb3J0IHsgSVF1ZXN0aW9uLCBRdWVzdGlvbkRyb3Bkb3duTW9kZWwgfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5pbXBvcnQgeyBTdXJ2ZXlQREYgfSBmcm9tICcuLi9zdXJ2ZXknO1xuaW1wb3J0IHsgSVBvaW50LCBJUmVjdCwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IEZsYXRRdWVzdGlvbiB9IGZyb20gJy4vZmxhdF9xdWVzdGlvbic7XG5pbXBvcnQgeyBGbGF0UmVwb3NpdG9yeSB9IGZyb20gJy4vZmxhdF9yZXBvc2l0b3J5JztcbmltcG9ydCB7IElQZGZCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2JyaWNrJztcbmltcG9ydCB7IERyb3Bkb3duQnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9kcm9wZG93bic7XG5pbXBvcnQgeyBDb21wb3NpdGVCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2NvbXBvc2l0ZSc7XG5pbXBvcnQgeyBTdXJ2ZXlIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXJfc3VydmV5JztcblxuZXhwb3J0IGNsYXNzIEZsYXREcm9wZG93biBleHRlbmRzIEZsYXRRdWVzdGlvbiB7XG4gICAgcHJvdGVjdGVkIHF1ZXN0aW9uOiBRdWVzdGlvbkRyb3Bkb3duTW9kZWw7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBzdXJ2ZXk6IFN1cnZleVBERixcbiAgICAgICAgcXVlc3Rpb246IElRdWVzdGlvbiwgcHJvdGVjdGVkIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIpIHtcbiAgICAgICAgc3VwZXIoc3VydmV5LCBxdWVzdGlvbiwgY29udHJvbGxlcik7XG4gICAgICAgIHRoaXMucXVlc3Rpb24gPSA8UXVlc3Rpb25Ecm9wZG93bk1vZGVsPnF1ZXN0aW9uO1xuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgZ2VuZXJhdGVGbGF0c0NvbnRlbnQocG9pbnQ6IElQb2ludCk6IFByb21pc2U8SVBkZkJyaWNrW10+IHtcbiAgICAgICAgY29uc3QgdmFsdWVCcmljayA9ICF0aGlzLnNob3VsZFJlbmRlckFzQ29tbWVudCA/IG5ldyBEcm9wZG93bkJyaWNrKHRoaXMucXVlc3Rpb24sIHRoaXMuY29udHJvbGxlciwgU3VydmV5SGVscGVyLmNyZWF0ZVRleHRGaWVsZFJlY3QocG9pbnQsIHRoaXMuY29udHJvbGxlcikpIDogYXdhaXQgU3VydmV5SGVscGVyLmNyZWF0ZUNvbW1lbnRGbGF0KHBvaW50LCB0aGlzLnF1ZXN0aW9uLCB0aGlzLmNvbnRyb2xsZXIsIHRydWUsIHsgdmFsdWU6IFN1cnZleUhlbHBlci5nZXREcm9wZG93blF1ZXN0aW9uVmFsdWUodGhpcy5xdWVzdGlvbikgfSk7XG4gICAgICAgIGNvbnN0IGNvbXBvc2l0ZUZsYXQ6IENvbXBvc2l0ZUJyaWNrID0gbmV3IENvbXBvc2l0ZUJyaWNrKHZhbHVlQnJpY2spO1xuICAgICAgICBpZiAodGhpcy5xdWVzdGlvbi5pc090aGVyU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG90aGVyUG9pbnQ6IElQb2ludCA9IFN1cnZleUhlbHBlci5jcmVhdGVQb2ludChjb21wb3NpdGVGbGF0KTtcbiAgICAgICAgICAgIG90aGVyUG9pbnQueVRvcCArPSB0aGlzLmNvbnRyb2xsZXIudW5pdEhlaWdodCAqIFN1cnZleUhlbHBlci5HQVBfQkVUV0VFTl9ST1dTO1xuICAgICAgICAgICAgY29tcG9zaXRlRmxhdC5hZGRCcmljayhhd2FpdCBTdXJ2ZXlIZWxwZXIuY3JlYXRlQ29tbWVudEZsYXQoXG4gICAgICAgICAgICAgICAgb3RoZXJQb2ludCwgdGhpcy5xdWVzdGlvbiwgdGhpcy5jb250cm9sbGVyLCBmYWxzZSwgeyByb3dzOiBTdXJ2ZXlIZWxwZXIuT1RIRVJfUk9XU19DT1VOVCB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtjb21wb3NpdGVGbGF0XTtcbiAgICB9XG59XG5cbkZsYXRSZXBvc2l0b3J5LmdldEluc3RhbmNlKCkucmVnaXN0ZXIoJ2Ryb3Bkb3duJywgRmxhdERyb3Bkb3duKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9kcm9wZG93bi50cyIsImltcG9ydCB7IElRdWVzdGlvbiwgUXVlc3Rpb25FeHByZXNzaW9uTW9kZWwgfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5pbXBvcnQgeyBTdXJ2ZXlQREYgfSBmcm9tICcuLi9zdXJ2ZXknO1xuaW1wb3J0IHsgSVBvaW50LCBJUmVjdCwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IEZsYXRRdWVzdGlvbiB9IGZyb20gJy4vZmxhdF9xdWVzdGlvbic7XG5pbXBvcnQgeyBGbGF0UmVwb3NpdG9yeSB9IGZyb20gJy4vZmxhdF9yZXBvc2l0b3J5JztcbmltcG9ydCB7IElQZGZCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2JyaWNrJztcbmltcG9ydCB7IFRleHRGaWVsZEJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfdGV4dGZpZWxkJztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuXG5leHBvcnQgY2xhc3MgRmxhdEV4cHJlc3Npb24gZXh0ZW5kcyBGbGF0UXVlc3Rpb24ge1xuICAgIHByb3RlY3RlZCBxdWVzdGlvbjogUXVlc3Rpb25FeHByZXNzaW9uTW9kZWw7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBzdXJ2ZXk6IFN1cnZleVBERixcbiAgICAgICAgcXVlc3Rpb246IElRdWVzdGlvbiwgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcikge1xuICAgICAgICBzdXBlcihzdXJ2ZXksIHF1ZXN0aW9uLCBjb250cm9sbGVyKTtcbiAgICAgICAgdGhpcy5xdWVzdGlvbiA9IDxRdWVzdGlvbkV4cHJlc3Npb25Nb2RlbD5xdWVzdGlvbjtcbiAgICB9XG4gICAgcHVibGljIGFzeW5jIGdlbmVyYXRlRmxhdHNDb250ZW50KHBvaW50OiBJUG9pbnQpOiBQcm9taXNlPElQZGZCcmlja1tdPiB7XG4gICAgICAgIHJldHVybiBbYXdhaXQgU3VydmV5SGVscGVyLmNyZWF0ZUNvbW1lbnRGbGF0KHBvaW50LCB0aGlzLnF1ZXN0aW9uLCB0aGlzLmNvbnRyb2xsZXIsIHRydWUsIHsgdmFsdWU6IHRoaXMucXVlc3Rpb24uZGlzcGxheVZhbHVlLCByZWFkT25seTogdHJ1ZSB9KV07XG4gICAgfVxufVxuXG5GbGF0UmVwb3NpdG9yeS5nZXRJbnN0YW5jZSgpLnJlZ2lzdGVyKCdleHByZXNzaW9uJywgRmxhdEV4cHJlc3Npb24pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9mbGF0X2xheW91dC9mbGF0X2V4cHJlc3Npb24udHMiLCJpbXBvcnQgeyBJUXVlc3Rpb24sIFF1ZXN0aW9uRmlsZU1vZGVsLCBzdXJ2ZXlMb2NhbGl6YXRpb24gfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5pbXBvcnQgeyBTdXJ2ZXlQREYgfSBmcm9tICcuLi9zdXJ2ZXknO1xuaW1wb3J0IHsgSVBvaW50LCBJU2l6ZSwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IEZsYXRRdWVzdGlvbiB9IGZyb20gJy4vZmxhdF9xdWVzdGlvbic7XG5pbXBvcnQgeyBGbGF0UmVwb3NpdG9yeSB9IGZyb20gJy4vZmxhdF9yZXBvc2l0b3J5JztcbmltcG9ydCB7IElQZGZCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2JyaWNrJztcbmltcG9ydCB7IFRleHRCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX3RleHQnO1xuaW1wb3J0IHsgQ29tcG9zaXRlQnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9jb21wb3NpdGUnO1xuaW1wb3J0IHsgU3VydmV5SGVscGVyIH0gZnJvbSAnLi4vaGVscGVyX3N1cnZleSc7XG5cbmV4cG9ydCBjbGFzcyBGbGF0RmlsZSBleHRlbmRzIEZsYXRRdWVzdGlvbiB7XG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBJTUFHRV9HQVBfU0NBTEU6IG51bWJlciA9IDAuMTk1O1xuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgVEVYVF9NSU5fU0NBTEU6IG51bWJlciA9IDUuMDtcbiAgICBwdWJsaWMgc3RhdGljIERFRkFVTFRfSU1BR0VfRklUOiBzdHJpbmcgPSAnY29udGFpbic7XG4gICAgcHJvdGVjdGVkIHF1ZXN0aW9uOiBRdWVzdGlvbkZpbGVNb2RlbDtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHJvdGVjdGVkIHN1cnZleTogU3VydmV5UERGLFxuICAgICAgICBxdWVzdGlvbjogSVF1ZXN0aW9uLCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyKSB7XG4gICAgICAgIHN1cGVyKHN1cnZleSwgcXVlc3Rpb24sIGNvbnRyb2xsZXIpO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uID0gPFF1ZXN0aW9uRmlsZU1vZGVsPnF1ZXN0aW9uO1xuICAgIH1cbiAgICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlRmxhdEl0ZW0ocG9pbnQ6IElQb2ludCwgaXRlbToge1xuICAgICAgICBuYW1lOiBzdHJpbmcsIHR5cGU6IHN0cmluZywgY29udGVudDogc3RyaW5nLCBpbWFnZVNpemU/OiBJU2l6ZSxcbiAgICB9KTogUHJvbWlzZTxJUGRmQnJpY2s+IHtcbiAgICAgICAgY29uc3QgY29tcG9zaXRlRmxhdDogQ29tcG9zaXRlQnJpY2sgPSBuZXcgQ29tcG9zaXRlQnJpY2soYXdhaXQgU3VydmV5SGVscGVyLmNyZWF0ZUxpbmtGbGF0KFxuICAgICAgICAgICAgcG9pbnQsIHRoaXMucXVlc3Rpb24sIHRoaXMuY29udHJvbGxlciwgaXRlbS5uYW1lID09PSB1bmRlZmluZWQgPyAnaW1hZ2UnIDogaXRlbS5uYW1lLCBpdGVtLmNvbnRlbnQpKTtcbiAgICAgICAgaWYgKFN1cnZleUhlbHBlci5jYW5QcmV2aWV3SW1hZ2UodGhpcy5xdWVzdGlvbiwgaXRlbSwgaXRlbS5jb250ZW50KSkge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2VQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNyZWF0ZVBvaW50KGNvbXBvc2l0ZUZsYXQpO1xuICAgICAgICAgICAgaW1hZ2VQb2ludC55VG9wICs9IHRoaXMuY29udHJvbGxlci51bml0SGVpZ2h0ICogRmxhdEZpbGUuSU1BR0VfR0FQX1NDQUxFO1xuICAgICAgICAgICAgY29tcG9zaXRlRmxhdC5hZGRCcmljayhhd2FpdCBTdXJ2ZXlIZWxwZXIuY3JlYXRlSW1hZ2VGbGF0KGltYWdlUG9pbnQsIHRoaXMucXVlc3Rpb24sIHRoaXMuY29udHJvbGxlciwgeyBsaW5rOiBpdGVtLmNvbnRlbnQsIHdpZHRoOiBpdGVtLmltYWdlU2l6ZS53aWR0aCwgaGVpZ2h0OiBpdGVtLmltYWdlU2l6ZS5oZWlnaHQsIG9iamVjdEZpdDogRmxhdEZpbGUuREVGQVVMVF9JTUFHRV9GSVQgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb21wb3NpdGVGbGF0O1xuICAgIH1cbiAgICBwcml2YXRlIGFkZExpbmUocm93c0ZsYXRzOiBDb21wb3NpdGVCcmlja1tdLCBjdXJyUG9pbnQ6IElQb2ludCwgaW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBpZiAoaW5kZXggIT09IHRoaXMucXVlc3Rpb24ucHJldmlld1ZhbHVlLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIHJvd3NGbGF0c1tyb3dzRmxhdHMubGVuZ3RoIC0gMV0uYWRkQnJpY2soXG4gICAgICAgICAgICAgICAgU3VydmV5SGVscGVyLmNyZWF0ZVJvd2xpbmVGbGF0KGN1cnJQb2ludCwgdGhpcy5jb250cm9sbGVyKSk7XG4gICAgICAgICAgICBjdXJyUG9pbnQueVRvcCArPSBTdXJ2ZXlIZWxwZXIuRVBTSUxPTjtcbiAgICAgICAgICAgIHJvd3NGbGF0cy5wdXNoKG5ldyBDb21wb3NpdGVCcmljaygpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZ2V0SW1hZ2VQcmV2aWV3Q29udGVudFdpZHRoKGl0ZW06IHsgbmFtZTogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZywgaW1hZ2VTaXplPzogSVNpemUgfSkge1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoaXRlbS5pbWFnZVNpemUud2lkdGgsIEZsYXRGaWxlLlRFWFRfTUlOX1NDQUxFICogdGhpcy5jb250cm9sbGVyLnVuaXRXaWR0aCk7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUZsYXRzQ29udGVudChwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2tbXT4ge1xuICAgICAgICBpZiAodGhpcy5xdWVzdGlvbi5wcmV2aWV3VmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gW2F3YWl0IFN1cnZleUhlbHBlci5jcmVhdGVUZXh0RmxhdChwb2ludCwgdGhpcy5xdWVzdGlvbixcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIsIHRoaXMucXVlc3Rpb24ubm9GaWxlQ2hvc2VuQ2FwdGlvbiwgVGV4dEJyaWNrKV07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgcm93c0ZsYXRzOiBDb21wb3NpdGVCcmlja1tdID0gW25ldyBDb21wb3NpdGVCcmljaygpXTtcbiAgICAgICAgY29uc3QgY3VyclBvaW50OiBJUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY2xvbmUocG9pbnQpO1xuICAgICAgICBsZXQgeUJvdDogbnVtYmVyID0gY3VyclBvaW50LnlUb3A7XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLnF1ZXN0aW9uLnByZXZpZXdWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGl0ZW06IHsgbmFtZTogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZywgaW1hZ2VTaXplPzogSVNpemUgfSA9IHsgLi4udGhpcy5xdWVzdGlvbi5wcmV2aWV3VmFsdWVbaV0gfTtcbiAgICAgICAgICAgIGNvbnN0IGNhblByZXZpZXdJbWFnZSA9IFN1cnZleUhlbHBlci5jYW5QcmV2aWV3SW1hZ2UodGhpcy5xdWVzdGlvbiwgaXRlbSwgaXRlbS5jb250ZW50KTtcbiAgICAgICAgICAgIGlmIChjYW5QcmV2aWV3SW1hZ2UpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmltYWdlU2l6ZSA9IGF3YWl0IFN1cnZleUhlbHBlci5nZXRDb3JyZWN0ZWRJbWFnZVNpemUodGhpcy5jb250cm9sbGVyLCB7IGltYWdlV2lkdGg6IHRoaXMucXVlc3Rpb24uaW1hZ2VXaWR0aCwgaW1hZ2VIZWlnaHQ6IHRoaXMucXVlc3Rpb24uaW1hZ2VIZWlnaHQsIGltYWdlTGluazogdGhpcy5xdWVzdGlvbi5wcmV2aWV3VmFsdWVbaV0uY29udGVudCwgZGVmYXVsdEltYWdlV2lkdGg6IDIwMCwgZGVmYXVsdEltYWdlSGVpZ2h0OiAxNTAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhdmFpbGFibGVXaWR0aDogbnVtYmVyID0gdGhpcy5jb250cm9sbGVyLnBhcGVyV2lkdGggLVxuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5tYXJnaW5zLnJpZ2h0IC0gY3VyclBvaW50LnhMZWZ0O1xuICAgICAgICAgICAgaWYgKGNhblByZXZpZXdJbWFnZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvc2l0ZVdpZHRoID0gYXdhaXQgdGhpcy5nZXRJbWFnZVByZXZpZXdDb250ZW50V2lkdGgoaXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKGF2YWlsYWJsZVdpZHRoIDwgY29tcG9zaXRlV2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VyclBvaW50LnhMZWZ0ID0gcG9pbnQueExlZnQ7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJQb2ludC55VG9wID0geUJvdDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRMaW5lKHJvd3NGbGF0cywgY3VyclBvaW50LCBpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnB1c2hNYXJnaW5zKGN1cnJQb2ludC54TGVmdCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnBhcGVyV2lkdGggLSBjdXJyUG9pbnQueExlZnQgLSBjb21wb3NpdGVXaWR0aCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbUZsYXQ6IElQZGZCcmljayA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVGbGF0SXRlbShjdXJyUG9pbnQsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIHJvd3NGbGF0c1tyb3dzRmxhdHMubGVuZ3RoIC0gMV0uYWRkQnJpY2soaXRlbUZsYXQpO1xuICAgICAgICAgICAgICAgIGN1cnJQb2ludC54TGVmdCArPSBpdGVtRmxhdC53aWR0aDtcbiAgICAgICAgICAgICAgICB5Qm90ID0gTWF0aC5tYXgoeUJvdCwgaXRlbUZsYXQueUJvdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnBvcE1hcmdpbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChhdmFpbGFibGVXaWR0aCA8IHRoaXMuY29udHJvbGxlci51bml0V2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VyclBvaW50LnhMZWZ0ID0gcG9pbnQueExlZnQ7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJQb2ludC55VG9wID0geUJvdDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRMaW5lKHJvd3NGbGF0cywgY3VyclBvaW50LCBpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbUZsYXQ6IElQZGZCcmljayA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVGbGF0SXRlbShjdXJyUG9pbnQsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIHJvd3NGbGF0c1tyb3dzRmxhdHMubGVuZ3RoIC0gMV0uYWRkQnJpY2soaXRlbUZsYXQpO1xuICAgICAgICAgICAgICAgIGN1cnJQb2ludC54TGVmdCArPSBpdGVtRmxhdC54UmlnaHQgLSBpdGVtRmxhdC54TGVmdDtcbiAgICAgICAgICAgICAgICB5Qm90ID0gTWF0aC5tYXgoeUJvdCwgaXRlbUZsYXQueUJvdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyUG9pbnQueExlZnQgKz0gdGhpcy5jb250cm9sbGVyLnVuaXRXaWR0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcm93c0ZsYXRzO1xuICAgIH1cbn1cblxuRmxhdFJlcG9zaXRvcnkuZ2V0SW5zdGFuY2UoKS5yZWdpc3RlcignZmlsZScsIEZsYXRGaWxlKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9maWxlLnRzIiwiaW1wb3J0IHsgSVF1ZXN0aW9uLCBRdWVzdGlvbkh0bWxNb2RlbCwgU2VyaWFsaXplciB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCB7IFN1cnZleVBERiB9IGZyb20gJy4uL3N1cnZleSc7XG5pbXBvcnQgeyBJUG9pbnQsIERvY0NvbnRyb2xsZXIgfSBmcm9tICcuLi9kb2NfY29udHJvbGxlcic7XG5pbXBvcnQgeyBGbGF0UXVlc3Rpb24gfSBmcm9tICcuL2ZsYXRfcXVlc3Rpb24nO1xuaW1wb3J0IHsgRmxhdFJlcG9zaXRvcnkgfSBmcm9tICcuL2ZsYXRfcmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBJUGRmQnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9icmljayc7XG5pbXBvcnQgeyBTdXJ2ZXlIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXJfc3VydmV5JztcbmltcG9ydCB7IEVtcHR5QnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9lbXB0eSc7XG5cbmV4cG9ydCB0eXBlIElIVE1MUmVuZGVyVHlwZSA9ICdhdXRvJyB8ICdzdGFuZGFyZCcgfCAnaW1hZ2UnO1xuZXhwb3J0IGNsYXNzIEZsYXRIVE1MIGV4dGVuZHMgRmxhdFF1ZXN0aW9uIHtcbiAgICBwcm90ZWN0ZWQgcXVlc3Rpb246IFF1ZXN0aW9uSHRtbE1vZGVsO1xuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgc3VydmV5OiBTdXJ2ZXlQREYsXG4gICAgICAgIHF1ZXN0aW9uOiBJUXVlc3Rpb24sIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIpIHtcbiAgICAgICAgc3VwZXIoc3VydmV5LCBxdWVzdGlvbiwgY29udHJvbGxlcik7XG4gICAgfVxuICAgIHByaXZhdGUgY2hvb3NlUmVuZGVyKGh0bWw6IHN0cmluZyk6IElIVE1MUmVuZGVyVHlwZSB7XG4gICAgICAgIGlmICgvPFtePl0qc3R5bGVbXjxdKj4vLnRlc3QoaHRtbCkgfHxcbiAgICAgICAgICAgIC88W14+XSp0YWJsZVtePF0qPi8udGVzdChodG1sKSB8fFxuICAgICAgICAgICAgLyZcXHcrOy8udGVzdChodG1sKSkge1xuICAgICAgICAgICAgcmV0dXJuICdpbWFnZSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdzdGFuZGFyZCc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY29ycmVjdEh0bWxSdWxlczogW3sgc2VhcmNoUmVnRXhwOiBSZWdFeHAsIHJlcGxhY2VTdHJpbmc6IHN0cmluZyB9XSA9IFtcbiAgICAgICAgeyBzZWFyY2hSZWdFeHA6IC8oPFxcLz9iclxccyo/XFwvP1xccyo/PlxccyopezIsfS9nLCByZXBsYWNlU3RyaW5nOiAnPGJyPicgfVxuICAgIF1cbiAgICBwcm90ZWN0ZWQgY29ycmVjdEh0bWwoaHRtbDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgRmxhdEhUTUwuY29ycmVjdEh0bWxSdWxlcy5mb3JFYWNoKChydWxlKSA9PiB7XG4gICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKHJ1bGUuc2VhcmNoUmVnRXhwLCBydWxlLnJlcGxhY2VTdHJpbmcpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUZsYXRzQ29udGVudChwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2tbXT4ge1xuICAgICAgICBsZXQgcmVuZGVyQXM6IElIVE1MUmVuZGVyVHlwZSA9IDxJSFRNTFJlbmRlclR5cGU+dGhpcy5xdWVzdGlvbi5yZW5kZXJBcztcbiAgICAgICAgaWYoIVN1cnZleUhlbHBlci5oYXNEb2N1bWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIFtuZXcgRW1wdHlCcmljayhTdXJ2ZXlIZWxwZXIuY3JlYXRlUmVjdChwb2ludCwgMCwgMCkpXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVuZGVyQXMgPT09ICdhdXRvJykgcmVuZGVyQXMgPSB0aGlzLmNvbnRyb2xsZXIuaHRtbFJlbmRlckFzO1xuICAgICAgICBpZiAocmVuZGVyQXMgPT09ICdhdXRvJykgcmVuZGVyQXMgPSB0aGlzLmNob29zZVJlbmRlcihTdXJ2ZXlIZWxwZXIuZ2V0TG9jU3RyaW5nKHRoaXMucXVlc3Rpb24ubG9jSHRtbCkpO1xuICAgICAgICBjb25zdCBodG1sOiBzdHJpbmcgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlSHRtbENvbnRhaW5lckJsb2NrKFN1cnZleUhlbHBlci5nZXRMb2NTdHJpbmcodGhpcy5xdWVzdGlvbi5sb2NIdG1sKSwgdGhpcy5jb250cm9sbGVyLCByZW5kZXJBcyk7XG4gICAgICAgIGlmIChyZW5kZXJBcyA9PT0gJ2ltYWdlJykge1xuICAgICAgICAgICAgY29uc3Qgd2lkdGg6IG51bWJlciA9IFN1cnZleUhlbHBlci5nZXRQYWdlQXZhaWxhYmxlV2lkdGgodGhpcy5jb250cm9sbGVyKTtcbiAgICAgICAgICAgIGNvbnN0IHsgdXJsLCBhc3BlY3QgfTogeyB1cmw6IHN0cmluZywgYXNwZWN0OiBudW1iZXIgfSA9XG4gICAgICAgICAgICBhd2FpdCBTdXJ2ZXlIZWxwZXIuaHRtbFRvSW1hZ2UoaHRtbCwgd2lkdGgsIHRoaXMuY29udHJvbGxlcik7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQ6IG51bWJlciA9IHdpZHRoIC8gYXNwZWN0O1xuICAgICAgICAgICAgcmV0dXJuIFthd2FpdCBTdXJ2ZXlIZWxwZXIuY3JlYXRlSW1hZ2VGbGF0KHBvaW50LCB0aGlzLnF1ZXN0aW9uLCB0aGlzLmNvbnRyb2xsZXIsIHsgbGluazogdXJsLCB3aWR0aCwgaGVpZ2h0IH0pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1N1cnZleUhlbHBlci5zcGxpdEh0bWxSZWN0KHRoaXMuY29udHJvbGxlciwgYXdhaXQgU3VydmV5SGVscGVyLmNyZWF0ZUhUTUxGbGF0KFxuICAgICAgICAgICAgcG9pbnQsIHRoaXMucXVlc3Rpb24sIHRoaXMuY29udHJvbGxlciwgdGhpcy5jb3JyZWN0SHRtbChodG1sKSkpXTtcbiAgICB9XG59XG5cblNlcmlhbGl6ZXIucmVtb3ZlUHJvcGVydHkoJ2h0bWwnLCAncmVuZGVyQXMnKTtcblNlcmlhbGl6ZXIuYWRkUHJvcGVydHkoJ2h0bWwnLCB7XG4gICAgbmFtZTogJ3JlbmRlckFzJyxcbiAgICBkZWZhdWx0OiAnYXV0bycsXG4gICAgdmlzaWJsZTogZmFsc2UsXG4gICAgY2hvaWNlczogWydhdXRvJywgJ3N0YW5kYXJkJywgJ2ltYWdlJ11cbn0pO1xuRmxhdFJlcG9zaXRvcnkuZ2V0SW5zdGFuY2UoKS5yZWdpc3RlcignaHRtbCcsIEZsYXRIVE1MKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9odG1sLnRzIiwiaW1wb3J0IHsgSVF1ZXN0aW9uLCBRdWVzdGlvbkltYWdlTW9kZWwgfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5pbXBvcnQgeyBTdXJ2ZXlQREYgfSBmcm9tICcuLi9zdXJ2ZXknO1xuaW1wb3J0IHsgSVBvaW50LCBEb2NDb250cm9sbGVyLCBJU2l6ZSB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IEZsYXRRdWVzdGlvbiB9IGZyb20gJy4vZmxhdF9xdWVzdGlvbic7XG5pbXBvcnQgeyBGbGF0UmVwb3NpdG9yeSB9IGZyb20gJy4vZmxhdF9yZXBvc2l0b3J5JztcbmltcG9ydCB7IElQZGZCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2JyaWNrJztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuXG5leHBvcnQgY2xhc3MgRmxhdEltYWdlIGV4dGVuZHMgRmxhdFF1ZXN0aW9uIHtcbiAgICBwcm90ZWN0ZWQgcXVlc3Rpb246IFF1ZXN0aW9uSW1hZ2VNb2RlbDtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHJvdGVjdGVkIHN1cnZleTogU3VydmV5UERGLFxuICAgICAgICBxdWVzdGlvbjogSVF1ZXN0aW9uLCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyKSB7XG4gICAgICAgIHN1cGVyKHN1cnZleSwgcXVlc3Rpb24sIGNvbnRyb2xsZXIpO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uID0gPFF1ZXN0aW9uSW1hZ2VNb2RlbD5xdWVzdGlvbjtcbiAgICB9XG4gICAgcHJpdmF0ZSBhc3luYyBnZXRDb3JyZWN0SW1hZ2VTaXplKCk6IFByb21pc2U8SVNpemU+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IFN1cnZleUhlbHBlci5nZXRDb3JyZWN0ZWRJbWFnZVNpemUodGhpcy5jb250cm9sbGVyLCB7IGltYWdlV2lkdGg6IHRoaXMucXVlc3Rpb24uaW1hZ2VXaWR0aCwgaW1hZ2VIZWlnaHQ6IHRoaXMucXVlc3Rpb24uaW1hZ2VIZWlnaHQsIGltYWdlTGluazogdGhpcy5xdWVzdGlvbi5pbWFnZUxpbmsgfSk7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUZsYXRzQ29udGVudChwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2tbXT4ge1xuICAgICAgICBjb25zdCBpbWFnZVNpemUgPSBhd2FpdCB0aGlzLmdldENvcnJlY3RJbWFnZVNpemUoKTtcbiAgICAgICAgcmV0dXJuIFthd2FpdCBTdXJ2ZXlIZWxwZXIuY3JlYXRlSW1hZ2VGbGF0KHBvaW50LCB0aGlzLnF1ZXN0aW9uLFxuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLCB7IGxpbms6IHRoaXMucXVlc3Rpb24uaW1hZ2VMaW5rLCB3aWR0aDogaW1hZ2VTaXplLndpZHRoLCBoZWlnaHQ6IGltYWdlU2l6ZS5oZWlnaHQgfSldO1xuICAgIH1cbn1cblxuRmxhdFJlcG9zaXRvcnkuZ2V0SW5zdGFuY2UoKS5yZWdpc3RlcignaW1hZ2UnLCBGbGF0SW1hZ2UpO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9mbGF0X2xheW91dC9mbGF0X2ltYWdlLnRzIiwiaW1wb3J0IHsgSVF1ZXN0aW9uLCBJdGVtVmFsdWUsIFF1ZXN0aW9uSW1hZ2VQaWNrZXJNb2RlbCB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCB7IFN1cnZleVBERiB9IGZyb20gJy4uL3N1cnZleSc7XG5pbXBvcnQgeyBGbGF0UXVlc3Rpb24gfSBmcm9tICcuL2ZsYXRfcXVlc3Rpb24nO1xuaW1wb3J0IHsgRmxhdFJlcG9zaXRvcnkgfSBmcm9tICcuL2ZsYXRfcmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBJUG9pbnQsIElSZWN0LCBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgSVBkZkJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfYnJpY2snO1xuaW1wb3J0IHsgVGV4dEJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfdGV4dCc7XG5pbXBvcnQgeyBGbGF0UmFkaW9ncm91cCB9IGZyb20gJy4vZmxhdF9yYWRpb2dyb3VwJztcbmltcG9ydCB7IENoZWNrSXRlbUJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfY2hlY2tpdGVtJztcbmltcG9ydCB7IENvbXBvc2l0ZUJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfY29tcG9zaXRlJztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuXG5leHBvcnQgY2xhc3MgRmxhdEltYWdlUGlja2VyIGV4dGVuZHMgRmxhdFF1ZXN0aW9uIHtcbiAgICBwcm90ZWN0ZWQgcXVlc3Rpb246IFF1ZXN0aW9uSW1hZ2VQaWNrZXJNb2RlbDtcbiAgICBwcm90ZWN0ZWQgcmFkaW86IEZsYXRSYWRpb2dyb3VwO1xuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgc3VydmV5OiBTdXJ2ZXlQREYsXG4gICAgICAgIHF1ZXN0aW9uOiBJUXVlc3Rpb24sIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIpIHtcbiAgICAgICAgc3VwZXIoc3VydmV5LCBxdWVzdGlvbiwgY29udHJvbGxlcik7XG4gICAgICAgIHRoaXMucXVlc3Rpb24gPSA8UXVlc3Rpb25JbWFnZVBpY2tlck1vZGVsPnF1ZXN0aW9uO1xuICAgIH1cbiAgICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlRmxhdEl0ZW0ocG9pbnQ6IElQb2ludCwgaXRlbTogSXRlbVZhbHVlLCBpbmRleDogbnVtYmVyKTogUHJvbWlzZTxJUGRmQnJpY2s+IHtcbiAgICAgICAgY29uc3QgcGFnZUF2YWlsYWJsZVdpZHRoID0gU3VydmV5SGVscGVyLmdldFBhZ2VBdmFpbGFibGVXaWR0aCh0aGlzLmNvbnRyb2xsZXIpO1xuICAgICAgICBjb25zdCBpbWFnZUZsYXQgPSBhd2FpdCBTdXJ2ZXlIZWxwZXIuY3JlYXRlSW1hZ2VGbGF0KHBvaW50LCB0aGlzLnF1ZXN0aW9uLCB0aGlzLmNvbnRyb2xsZXIsIHsgbGluazogKDxhbnk+aXRlbSkuaW1hZ2VMaW5rLCB3aWR0aDogcGFnZUF2YWlsYWJsZVdpZHRoLCBoZWlnaHQ6IHBhZ2VBdmFpbGFibGVXaWR0aCAvIFN1cnZleUhlbHBlci5JTUFHRVBJQ0tFUl9SQVRJTyB9KTtcbiAgICAgICAgY29uc3QgY29tcG9zaXRlRmxhdDogQ29tcG9zaXRlQnJpY2sgPSBuZXcgQ29tcG9zaXRlQnJpY2soaW1hZ2VGbGF0KTtcbiAgICAgICAgbGV0IGJ1dHRvblBvaW50OiBJUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlUG9pbnQoY29tcG9zaXRlRmxhdCk7XG4gICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uLnNob3dMYWJlbCkge1xuICAgICAgICAgICAgbGV0IGxhYmVsRmxhdDogSVBkZkJyaWNrID0gYXdhaXQgU3VydmV5SGVscGVyLmNyZWF0ZVRleHRGbGF0KGJ1dHRvblBvaW50LCB0aGlzLnF1ZXN0aW9uLCB0aGlzLmNvbnRyb2xsZXIsIGl0ZW0udGV4dCB8fCBpdGVtLnZhbHVlLCBUZXh0QnJpY2spO1xuICAgICAgICAgICAgY29tcG9zaXRlRmxhdC5hZGRCcmljayhsYWJlbEZsYXQpO1xuICAgICAgICAgICAgYnV0dG9uUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlUG9pbnQobGFiZWxGbGF0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoZWlnaHQ6IG51bWJlciA9IHRoaXMuY29udHJvbGxlci51bml0SGVpZ2h0O1xuICAgICAgICBjb25zdCBidXR0b25SZWN0OiBJUmVjdCA9IFN1cnZleUhlbHBlci5jcmVhdGVSZWN0KGJ1dHRvblBvaW50LCBwYWdlQXZhaWxhYmxlV2lkdGgsIGhlaWdodCk7XG4gICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uLm11bHRpU2VsZWN0KSB7XG4gICAgICAgICAgICBjb21wb3NpdGVGbGF0LmFkZEJyaWNrKG5ldyBDaGVja0l0ZW1Ccmljayh0aGlzLmNvbnRyb2xsZXIsXG4gICAgICAgICAgICAgICAgYnV0dG9uUmVjdCwgdGhpcy5xdWVzdGlvbi5pZCArICdpbmRleCcgKyBpbmRleCwgeyByZWFkT25seTogdGhpcy5xdWVzdGlvbi5pc1JlYWRPbmx5IHx8ICFpdGVtLmlzRW5hYmxlZCwgcXVlc3Rpb246IHRoaXMucXVlc3Rpb24sIGl0ZW06IGl0ZW0sIGNoZWNrZWQ6IHRoaXMucXVlc3Rpb24udmFsdWUuaW5kZXhPZihpdGVtLnZhbHVlKSAhPT0gLTEsIGluZGV4OiBpbmRleCB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb21wb3NpdGVGbGF0LmFkZEJyaWNrKHRoaXMucmFkaW8uZ2VuZXJhdGVGbGF0SXRlbShidXR0b25SZWN0LCBpdGVtLCBpbmRleCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb21wb3NpdGVGbGF0O1xuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgZ2VuZXJhdGVGbGF0c0NvbnRlbnQocG9pbnQ6IElQb2ludCk6IFByb21pc2U8SVBkZkJyaWNrW10+IHtcbiAgICAgICAgdGhpcy5yYWRpbyA9IHRoaXMucXVlc3Rpb24ubXVsdGlTZWxlY3QgPyBudWxsIDpcbiAgICAgICAgICAgIG5ldyBGbGF0UmFkaW9ncm91cCh0aGlzLnN1cnZleSwgdGhpcy5xdWVzdGlvbiwgdGhpcy5jb250cm9sbGVyKTtcbiAgICAgICAgY29uc3Qgcm93c0ZsYXRzOiBDb21wb3NpdGVCcmlja1tdID0gW25ldyBDb21wb3NpdGVCcmljaygpXTtcbiAgICAgICAgY29uc3QgY29sV2lkdGg6IG51bWJlciA9IFN1cnZleUhlbHBlci5nZXRJbWFnZVBpY2tlckF2YWlsYWJsZVdpZHRoKFxuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyKSAvIFN1cnZleUhlbHBlci5JTUFHRVBJQ0tFUl9DT1VOVDtcbiAgICAgICAgbGV0IGNvbHM6IG51bWJlciA9IH5+KFN1cnZleUhlbHBlci5cbiAgICAgICAgICAgIGdldFBhZ2VBdmFpbGFibGVXaWR0aCh0aGlzLmNvbnRyb2xsZXIpIC8gY29sV2lkdGgpIHx8IDE7XG4gICAgICAgIGNvbnN0IGNvdW50OiBudW1iZXIgPSB0aGlzLnF1ZXN0aW9uLnZpc2libGVDaG9pY2VzLmxlbmd0aDtcbiAgICAgICAgY29scyA9IGNvbHMgPD0gY291bnQgPyBjb2xzIDogY291bnQ7XG4gICAgICAgIGNvbnN0IHJvd3M6IG51bWJlciA9IH5+KE1hdGguY2VpbChjb3VudCAvIGNvbHMpKTtcbiAgICAgICAgY29uc3QgY3VyclBvaW50OiBJUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY2xvbmUocG9pbnQpO1xuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgcm93czsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgeUJvdDogbnVtYmVyID0gY3VyclBvaW50LnlUb3A7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIucHVzaE1hcmdpbnMoKTtcbiAgICAgICAgICAgIGxldCBjdXJyTWFyZ2luTGVmdDogbnVtYmVyID0gdGhpcy5jb250cm9sbGVyLm1hcmdpbnMubGVmdDtcbiAgICAgICAgICAgIGZvciAobGV0IGo6IG51bWJlciA9IDA7IGogPCBjb2xzOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleDogbnVtYmVyID0gaSAqIGNvbHMgKyBqO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSBjb3VudCkgYnJlYWs7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLm1hcmdpbnMubGVmdCA9IGN1cnJNYXJnaW5MZWZ0O1xuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5tYXJnaW5zLnJpZ2h0ID0gdGhpcy5jb250cm9sbGVyLnBhcGVyV2lkdGggLVxuICAgICAgICAgICAgICAgICAgICBjdXJyTWFyZ2luTGVmdCAtIGNvbFdpZHRoO1xuICAgICAgICAgICAgICAgIGN1cnJNYXJnaW5MZWZ0ID0gdGhpcy5jb250cm9sbGVyLnBhcGVyV2lkdGggLVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIubWFyZ2lucy5yaWdodCArIHRoaXMuY29udHJvbGxlci51bml0V2lkdGg7XG4gICAgICAgICAgICAgICAgY3VyclBvaW50LnhMZWZ0ID0gdGhpcy5jb250cm9sbGVyLm1hcmdpbnMubGVmdDtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtRmxhdDogSVBkZkJyaWNrID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUZsYXRJdGVtKGN1cnJQb2ludCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbi52aXNpYmxlQ2hvaWNlc1tpbmRleF0sIGluZGV4KTtcbiAgICAgICAgICAgICAgICByb3dzRmxhdHNbcm93c0ZsYXRzLmxlbmd0aCAtIDFdLmFkZEJyaWNrKGl0ZW1GbGF0KTtcbiAgICAgICAgICAgICAgICB5Qm90ID0gTWF0aC5tYXgoeUJvdCwgaXRlbUZsYXQueUJvdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIucG9wTWFyZ2lucygpO1xuICAgICAgICAgICAgY3VyclBvaW50LnhMZWZ0ID0gcG9pbnQueExlZnQ7XG4gICAgICAgICAgICBjdXJyUG9pbnQueVRvcCA9IHlCb3Q7XG4gICAgICAgICAgICBpZiAoaSAhPT0gcm93cyAtIDEpIHtcbiAgICAgICAgICAgICAgICByb3dzRmxhdHNbcm93c0ZsYXRzLmxlbmd0aCAtIDFdLmFkZEJyaWNrKFxuICAgICAgICAgICAgICAgICAgICBTdXJ2ZXlIZWxwZXIuY3JlYXRlUm93bGluZUZsYXQoY3VyclBvaW50LCB0aGlzLmNvbnRyb2xsZXIpKTtcbiAgICAgICAgICAgICAgICBjdXJyUG9pbnQueVRvcCArPSBTdXJ2ZXlIZWxwZXIuRVBTSUxPTjtcbiAgICAgICAgICAgICAgICByb3dzRmxhdHMucHVzaChuZXcgQ29tcG9zaXRlQnJpY2soKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJvd3NGbGF0cztcbiAgICB9XG59XG5cbkZsYXRSZXBvc2l0b3J5LmdldEluc3RhbmNlKCkucmVnaXN0ZXIoJ2ltYWdlcGlja2VyJywgRmxhdEltYWdlUGlja2VyKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9pbWFnZXBpY2tlci50cyIsImltcG9ydCB7IElRdWVzdGlvbiwgUXVlc3Rpb25NYXRyaXhNb2RlbCwgTWF0cml4Um93TW9kZWwsXG4gICAgUXVlc3Rpb25SYWRpb2dyb3VwTW9kZWwsIEl0ZW1WYWx1ZSwgU2VyaWFsaXplciB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCB7IFN1cnZleVBERiB9IGZyb20gJy4uL3N1cnZleSc7XG5pbXBvcnQgeyBEb2NDb250cm9sbGVyLCBJUG9pbnQsIElSZWN0IH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgRmxhdFF1ZXN0aW9uIH0gZnJvbSAnLi9mbGF0X3F1ZXN0aW9uJztcbmltcG9ydCB7IEZsYXRSYWRpb2dyb3VwIH0gZnJvbSAnLi9mbGF0X3JhZGlvZ3JvdXAnO1xuaW1wb3J0IHsgRmxhdFJlcG9zaXRvcnkgfSBmcm9tICcuL2ZsYXRfcmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBJUGRmQnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9icmljayc7XG5pbXBvcnQgeyBUZXh0QnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl90ZXh0JztcbmltcG9ydCB7IENvbXBvc2l0ZUJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfY29tcG9zaXRlJztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuXG5leHBvcnQgY2xhc3MgRmxhdE1hdHJpeCBleHRlbmRzIEZsYXRRdWVzdGlvbiB7XG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBHQVBfQkVUV0VFTl9ST1dTOiBudW1iZXIgPSAwLjU7XG4gICAgcHJvdGVjdGVkIHF1ZXN0aW9uOiBRdWVzdGlvbk1hdHJpeE1vZGVsO1xuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBzdXJ2ZXk6IFN1cnZleVBERixcbiAgICAgICAgcXVlc3Rpb246IElRdWVzdGlvbiwgcHJvdGVjdGVkIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIpIHtcbiAgICAgICAgc3VwZXIoc3VydmV5LCA8UXVlc3Rpb25SYWRpb2dyb3VwTW9kZWw+cXVlc3Rpb24sIGNvbnRyb2xsZXIpO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uID0gPFF1ZXN0aW9uTWF0cml4TW9kZWw+cXVlc3Rpb247XG4gICAgfVxuICAgIHByb3RlY3RlZCBhc3luYyBnZW5lcmF0ZUZsYXRzSGVhZGVyKHBvaW50OiBJUG9pbnQpOiBQcm9taXNlPElQZGZCcmlja1tdPiB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnM6IElQZGZCcmlja1tdID0gW107XG4gICAgICAgIGNvbnN0IGN1cnJQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNsb25lKHBvaW50KTtcbiAgICAgICAgaWYodGhpcy5xdWVzdGlvbi5oYXNSb3dzKSB7XG4gICAgICAgICAgICBjdXJyUG9pbnQueExlZnQgKz0gdGhpcy5yb3dUaXRsZVdpZHRoICsgdGhpcy5jb250cm9sbGVyLnVuaXRXaWR0aCAqIFN1cnZleUhlbHBlci5HQVBfQkVUV0VFTl9DT0xVTU5TO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLnF1ZXN0aW9uLnZpc2libGVDb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIucHVzaE1hcmdpbnMoKTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5tYXJnaW5zLmxlZnQgPSBjdXJyUG9pbnQueExlZnQ7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIubWFyZ2lucy5yaWdodCArPSAoU3VydmV5SGVscGVyLmdldFBhZ2VBdmFpbGFibGVXaWR0aCh0aGlzLmNvbnRyb2xsZXIpIC0gdGhpcy5jb2x1bW5XaWR0aCk7XG4gICAgICAgICAgICBoZWFkZXJzLnB1c2goYXdhaXQgU3VydmV5SGVscGVyLmNyZWF0ZUJvbGRUZXh0RmxhdChjdXJyUG9pbnQsXG4gICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbiwgdGhpcy5jb250cm9sbGVyLCB0aGlzLnF1ZXN0aW9uLnZpc2libGVDb2x1bW5zW2ldLmxvY1RleHQpKTtcbiAgICAgICAgICAgIGN1cnJQb2ludC54TGVmdCArPSB0aGlzLmNvbHVtbldpZHRoICsgdGhpcy5jb250cm9sbGVyLnVuaXRXaWR0aCAqIFN1cnZleUhlbHBlci5HQVBfQkVUV0VFTl9DT0xVTU5TO1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnBvcE1hcmdpbnMoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21wb3NpdGVCcmljazogQ29tcG9zaXRlQnJpY2sgPSBuZXcgQ29tcG9zaXRlQnJpY2soLi4uaGVhZGVycyk7XG4gICAgICAgIHJldHVybiBbY29tcG9zaXRlQnJpY2ssIFN1cnZleUhlbHBlci5jcmVhdGVSb3dsaW5lRmxhdChTdXJ2ZXlIZWxwZXIuY3JlYXRlUG9pbnQoY29tcG9zaXRlQnJpY2spLCB0aGlzLmNvbnRyb2xsZXIpXTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIGFzeW5jIGdlbmVyYXRlRmxhdHNSb3dzKHBvaW50OiBJUG9pbnQsIGlzVmVydGljYWw6IGJvb2xlYW4pOiBQcm9taXNlPElQZGZCcmlja1tdPiB7XG4gICAgICAgIGNvbnN0IGNlbGxzOiBJUGRmQnJpY2tbXSA9IFtdO1xuICAgICAgICBsZXQgY3VyclBvaW50OiBJUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY2xvbmUocG9pbnQpO1xuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5xdWVzdGlvbi52aXNpYmxlUm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qga2V5OiBzdHJpbmcgPSAncm93JyArIGk7XG4gICAgICAgICAgICBjb25zdCBmbGF0c1JvdzogSVBkZkJyaWNrW10gPSBhd2FpdCBuZXcgRmxhdE1hdHJpeFJvdyh0aGlzLnN1cnZleSwgdGhpcy5xdWVzdGlvbiwgdGhpcy5jb250cm9sbGVyLFxuICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb24udmlzaWJsZVJvd3NbaV0sIGksIGtleSwgaSA9PSAwLCBpc1ZlcnRpY2FsLCB0aGlzLnJvd1RpdGxlV2lkdGgsIHRoaXMuY29sdW1uV2lkdGgpLmdlbmVyYXRlRmxhdHNDb250ZW50KGN1cnJQb2ludCk7XG4gICAgICAgICAgICBjdXJyUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlUG9pbnQoU3VydmV5SGVscGVyLm1lcmdlUmVjdHMoLi4uZmxhdHNSb3cpKTtcbiAgICAgICAgICAgIGN1cnJQb2ludC55VG9wICs9IHRoaXMuY29udHJvbGxlci51bml0SGVpZ2h0ICogRmxhdE1hdHJpeC5HQVBfQkVUV0VFTl9ST1dTO1xuICAgICAgICAgICAgY2VsbHMucHVzaCguLi5mbGF0c1Jvdyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNlbGxzO1xuICAgIH1cbiAgICBwcml2YXRlIHJvd1RpdGxlV2lkdGg6IG51bWJlcjtcbiAgICBwcml2YXRlIGNvbHVtbldpZHRoOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVDb2x1bW5zV2lkdGhlcygpIHtcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlV2lkdGggPSBTdXJ2ZXlIZWxwZXIuZ2V0UGFnZUF2YWlsYWJsZVdpZHRoKHRoaXMuY29udHJvbGxlcik7XG4gICAgICAgIGlmKHRoaXMucXVlc3Rpb24uaGFzUm93cyAmJiB0aGlzLnF1ZXN0aW9uLnJvd1RpdGxlV2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5wdXNoTWFyZ2lucygpO1xuICAgICAgICAgICAgdGhpcy5yb3dUaXRsZVdpZHRoID0gU3VydmV5SGVscGVyLnBhcnNlV2lkdGgodGhpcy5xdWVzdGlvbi5yb3dUaXRsZVdpZHRoLCBhdmFpbGFibGVXaWR0aCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0ICs9ICh0aGlzLnJvd1RpdGxlV2lkdGggKyB0aGlzLmNvbnRyb2xsZXIudW5pdFdpZHRoICogU3VydmV5SGVscGVyLkdBUF9CRVRXRUVOX0NPTFVNTlMpO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5XaWR0aCA9IFN1cnZleUhlbHBlci5nZXRDb2x1bW5XaWR0aCh0aGlzLmNvbnRyb2xsZXIsIHRoaXMucXVlc3Rpb24udmlzaWJsZUNvbHVtbnMubGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5wb3BNYXJnaW5zKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbldpZHRoID0gdGhpcy5yb3dUaXRsZVdpZHRoID0gU3VydmV5SGVscGVyLmdldENvbHVtbldpZHRoKHRoaXMuY29udHJvbGxlciwgdGhpcy5xdWVzdGlvbi52aXNpYmxlQ29sdW1ucy5sZW5ndGggKyAodGhpcy5xdWVzdGlvbi5oYXNSb3dzID8gMSA6IDApKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgZ2VuZXJhdGVGbGF0c0NvbnRlbnQocG9pbnQ6IElQb2ludCk6IFByb21pc2U8SVBkZkJyaWNrW10+IHtcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVDb2x1bW5zV2lkdGhlcygpO1xuICAgICAgICBjb25zdCBpc1ZlcnRpY2FsOiBib29sZWFuID0gdGhpcy5xdWVzdGlvbi5yZW5kZXJBcyA9PT0gJ2xpc3QnIHx8IHRoaXMuY29udHJvbGxlci5tYXRyaXhSZW5kZXJBcyA9PT0gJ2xpc3QnIHx8XG4gICAgICAgICAgICB0aGlzLmNvbHVtbldpZHRoIDwgdGhpcy5jb250cm9sbGVyLm1lYXN1cmVUZXh0KFN1cnZleUhlbHBlci5NQVRSSVhfQ09MVU1OX1dJRFRIKS53aWR0aDtcbiAgICAgICAgbGV0IGN1cnJQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNsb25lKHBvaW50KTtcbiAgICAgICAgY29uc3QgY2VsbHM6IElQZGZCcmlja1tdID0gW107XG4gICAgICAgIGlmICghaXNWZXJ0aWNhbCAmJiB0aGlzLnF1ZXN0aW9uLnNob3dIZWFkZXIgJiYgdGhpcy5xdWVzdGlvbi52aXNpYmxlQ29sdW1ucy5sZW5ndGggIT0gMCkge1xuICAgICAgICAgICAgbGV0IGhlYWRlcnM6IElQZGZCcmlja1tdID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUZsYXRzSGVhZGVyKGN1cnJQb2ludCk7XG4gICAgICAgICAgICBjdXJyUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlUG9pbnQoU3VydmV5SGVscGVyLm1lcmdlUmVjdHMoLi4uaGVhZGVycykpO1xuICAgICAgICAgICAgY3VyclBvaW50LnlUb3AgKz0gRmxhdE1hdHJpeC5HQVBfQkVUV0VFTl9ST1dTICogdGhpcy5jb250cm9sbGVyLnVuaXRIZWlnaHQ7XG4gICAgICAgICAgICBjZWxscy5wdXNoKC4uLmhlYWRlcnMpO1xuICAgICAgICB9XG4gICAgICAgIGNlbGxzLnB1c2goLi4uYXdhaXQgdGhpcy5nZW5lcmF0ZUZsYXRzUm93cyhjdXJyUG9pbnQsIGlzVmVydGljYWwpKTtcbiAgICAgICAgcmV0dXJuIGNlbGxzO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZsYXRNYXRyaXhSb3cgZXh0ZW5kcyBGbGF0UmFkaW9ncm91cCB7XG4gICAgcHJvdGVjdGVkIHF1ZXN0aW9uTWF0cml4OiBRdWVzdGlvbk1hdHJpeE1vZGVsO1xuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgc3VydmV5OiBTdXJ2ZXlQREYsXG4gICAgICAgIHF1ZXN0aW9uOiBJUXVlc3Rpb24sIHByb3RlY3RlZCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLCBwcml2YXRlIHJvdzogTWF0cml4Um93TW9kZWwsIHByaXZhdGUgcm93SW5kZXg6IG51bWJlcixcbiAgICAgICAgcHJpdmF0ZSBrZXk6IHN0cmluZywgcHJvdGVjdGVkIGlzRmlyc3Q6IGJvb2xlYW4gPSBmYWxzZSwgcHJvdGVjdGVkIGlzVmVydGljYWw6IGJvb2xlYW4gPSBmYWxzZSwgcHJpdmF0ZSByb3dUaXRsZVdpZHRoOiBudW1iZXIsIHByaXZhdGUgY29sdW1uV2lkdGg6IG51bWJlcikge1xuICAgICAgICBzdXBlcihzdXJ2ZXksIHF1ZXN0aW9uLCBjb250cm9sbGVyKTtcbiAgICAgICAgdGhpcy5xdWVzdGlvbk1hdHJpeCA9IDxRdWVzdGlvbk1hdHJpeE1vZGVsPnF1ZXN0aW9uO1xuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgZ2VuZXJhdGVGbGF0c0NvbnRlbnQocG9pbnQ6IElQb2ludCk6IFByb21pc2U8SVBkZkJyaWNrW10+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNWZXJ0aWNhbCA/XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmdlbmVyYXRlRmxhdHNWZXJ0aWNhbGx5Q2VsbHMocG9pbnQpIDpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2VuZXJhdGVGbGF0c0hvcml6b250YWxseUNlbGxzKHBvaW50KTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIGFzeW5jIGdlbmVyYXRlVGV4dENvbXBvc2l0ZShwb2ludDogSVBvaW50LCBjb2x1bW46IEl0ZW1WYWx1ZSwgaW5kZXg6IG51bWJlcik6IFByb21pc2U8SVBkZkJyaWNrPiB7XG4gICAgICAgIGNvbnN0IGN1cnJQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNsb25lKHBvaW50KTtcbiAgICAgICAgY29uc3QgY2hlY2tlZDogYm9vbGVhbiA9IHRoaXMucm93LnZhbHVlID09IGNvbHVtbi52YWx1ZTtcbiAgICAgICAgY29uc3QgaXRlbVJlY3QgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlUmVjdChjdXJyUG9pbnQsXG4gICAgICAgICAgICBTdXJ2ZXlIZWxwZXIuZ2V0UGFnZUF2YWlsYWJsZVdpZHRoKHRoaXMuY29udHJvbGxlciksIHRoaXMuY29udHJvbGxlci51bml0SGVpZ2h0KTtcbiAgICAgICAgY29uc3QgcmFkaW9GbGF0OiBJUGRmQnJpY2sgPSB0aGlzLmdlbmVyYXRlRmxhdEl0ZW0oaXRlbVJlY3QsIGNvbHVtbiwgaW5kZXgsIHRoaXMua2V5LCBjaGVja2VkLCB7IHJvdzogdGhpcy5yb3csIHJvd0luZGV4OiB0aGlzLnJvd0luZGV4IH0pO1xuICAgICAgICBjdXJyUG9pbnQueVRvcCA9IHJhZGlvRmxhdC55Qm90ICsgdGhpcy5jb250cm9sbGVyLnVuaXRIZWlnaHQgKiBTdXJ2ZXlIZWxwZXIuR0FQX0JFVFdFRU5fSVRFTV9URVhUO1xuICAgICAgICBjb25zdCBjZWxsVGV4dEZsYXQgPSBhd2FpdCBTdXJ2ZXlIZWxwZXIuY3JlYXRlVGV4dEZsYXQoY3VyclBvaW50LCB0aGlzLnF1ZXN0aW9uTWF0cml4LCB0aGlzLmNvbnRyb2xsZXIsXG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uTWF0cml4LmdldENlbGxEaXNwbGF5TG9jVGV4dCh0aGlzLnJvdy5uYW1lLCBjb2x1bW4pLCBUZXh0QnJpY2spO1xuICAgICAgICByZXR1cm4gbmV3IENvbXBvc2l0ZUJyaWNrKHJhZGlvRmxhdCwgY2VsbFRleHRGbGF0KTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIGFzeW5jIGdlbmVyYXRlSXRlbUNvbXBvaXN0ZShwb2ludDogSVBvaW50LCBjb2x1bW46IEl0ZW1WYWx1ZSwgaW5kZXg6IG51bWJlcik6IFByb21pc2U8SVBkZkJyaWNrPiB7XG4gICAgICAgIGNvbnN0IGN1cnJQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNsb25lKHBvaW50KTtcbiAgICAgICAgY29uc3QgY2hlY2tlZDogYm9vbGVhbiA9IHRoaXMucm93LnZhbHVlID09IGNvbHVtbi52YWx1ZTtcbiAgICAgICAgY29uc3QgaXRlbVJlY3Q6IElSZWN0ID0gU3VydmV5SGVscGVyLmNyZWF0ZVJlY3QoY3VyclBvaW50LFxuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnVuaXRIZWlnaHQsIHRoaXMuY29udHJvbGxlci51bml0SGVpZ2h0KTtcbiAgICAgICAgY29uc3QgcmFkaW9GbGF0OiBJUGRmQnJpY2sgPSB0aGlzLmdlbmVyYXRlRmxhdEl0ZW0oU3VydmV5SGVscGVyLm1vdmVSZWN0KFxuICAgICAgICAgICAgU3VydmV5SGVscGVyLnNjYWxlUmVjdChpdGVtUmVjdCwgU3VydmV5SGVscGVyLlNFTEVDVF9JVEVNX0ZMQVRfU0NBTEUpLCBpdGVtUmVjdC54TGVmdCksIGNvbHVtbiwgaW5kZXgsIHRoaXMua2V5LCBjaGVja2VkLCB7IHJvdzogdGhpcy5yb3csIHJvd0luZGV4OiB0aGlzLnJvd0luZGV4IH0pO1xuICAgICAgICBjdXJyUG9pbnQueExlZnQgPSByYWRpb0ZsYXQueFJpZ2h0ICsgdGhpcy5jb250cm9sbGVyLnVuaXRXaWR0aCAqIFN1cnZleUhlbHBlci5HQVBfQkVUV0VFTl9JVEVNX1RFWFQ7XG4gICAgICAgIGNvbnN0IHJhZGlvVGV4dDogSVBkZkJyaWNrID0gYXdhaXQgU3VydmV5SGVscGVyLmNyZWF0ZVRleHRGbGF0KGN1cnJQb2ludCwgdGhpcy5xdWVzdGlvbk1hdHJpeCxcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlciwgY29sdW1uLmxvY1RleHQsIFRleHRCcmljayk7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcG9zaXRlQnJpY2socmFkaW9GbGF0LCByYWRpb1RleHQpO1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgYXN5bmMgZ2VuZXJhdGVGbGF0c0hvcml6b250YWxseUNlbGxzKHBvaW50OiBJUG9pbnQpIHtcbiAgICAgICAgY29uc3QgY2VsbHM6IElQZGZCcmlja1tdID0gW107XG4gICAgICAgIGNvbnN0IGN1cnJQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNsb25lKHBvaW50KTtcbiAgICAgICAgaWYgKHRoaXMucXVlc3Rpb25NYXRyaXguaGFzUm93cykge1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnB1c2hNYXJnaW5zKCk7XG4gICAgICAgICAgICBjdXJyUG9pbnQueExlZnQgPSB0aGlzLmNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0O1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLm1hcmdpbnMucmlnaHQgKz0gKFN1cnZleUhlbHBlci5nZXRQYWdlQXZhaWxhYmxlV2lkdGgodGhpcy5jb250cm9sbGVyKSAtIHRoaXMucm93VGl0bGVXaWR0aCk7XG4gICAgICAgICAgICBjZWxscy5wdXNoKGF3YWl0IFN1cnZleUhlbHBlci5jcmVhdGVUZXh0RmxhdChjdXJyUG9pbnQsIHRoaXMucXVlc3Rpb25NYXRyaXgsIHRoaXMuY29udHJvbGxlciwgdGhpcy5yb3cubG9jVGV4dCwgVGV4dEJyaWNrKSk7XG4gICAgICAgICAgICBjdXJyUG9pbnQueExlZnQgKz0gdGhpcy5yb3dUaXRsZVdpZHRoICsgdGhpcy5jb250cm9sbGVyLnVuaXRXaWR0aCAqIFN1cnZleUhlbHBlci5HQVBfQkVUV0VFTl9DT0xVTU5TO1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnBvcE1hcmdpbnMoKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5xdWVzdGlvbk1hdHJpeC52aXNpYmxlQ29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY29sdW1uOiBJdGVtVmFsdWUgPSB0aGlzLnF1ZXN0aW9uTWF0cml4LnZpc2libGVDb2x1bW5zW2ldO1xuICAgICAgICAgICAgY29uc3QgY2hlY2tlZDogYm9vbGVhbiA9IHRoaXMucm93LnZhbHVlID09IGNvbHVtbi52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5wdXNoTWFyZ2lucygpO1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLm1hcmdpbnMubGVmdCA9IGN1cnJQb2ludC54TGVmdDtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5tYXJnaW5zLnJpZ2h0ICs9IChTdXJ2ZXlIZWxwZXIuZ2V0UGFnZUF2YWlsYWJsZVdpZHRoKHRoaXMuY29udHJvbGxlcikgLSB0aGlzLmNvbHVtbldpZHRoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uTWF0cml4Lmhhc0NlbGxUZXh0KSB7XG4gICAgICAgICAgICAgICAgY2VsbHMucHVzaChhd2FpdCB0aGlzLmdlbmVyYXRlVGV4dENvbXBvc2l0ZShjdXJyUG9pbnQsIGNvbHVtbiwgaSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbVJlY3Q6IElSZWN0ID0gU3VydmV5SGVscGVyLmNyZWF0ZVJlY3QoY3VyclBvaW50LCB0aGlzLmNvbnRyb2xsZXIudW5pdEhlaWdodCwgdGhpcy5jb250cm9sbGVyLnVuaXRIZWlnaHQpO1xuICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUZsYXRJdGVtKFN1cnZleUhlbHBlci5tb3ZlUmVjdChcbiAgICAgICAgICAgICAgICAgICAgU3VydmV5SGVscGVyLnNjYWxlUmVjdChpdGVtUmVjdCwgU3VydmV5SGVscGVyLlNFTEVDVF9JVEVNX0ZMQVRfU0NBTEUpLCBjdXJyUG9pbnQueExlZnQpLCBjb2x1bW4sIGksIHRoaXMua2V5LCBjaGVja2VkLCB7IHJvdzogdGhpcy5yb3csIHJvd0luZGV4OiB0aGlzLnJvd0luZGV4IH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJQb2ludC54TGVmdCArPSB0aGlzLmNvbHVtbldpZHRoICsgdGhpcy5jb250cm9sbGVyLnVuaXRXaWR0aCAqIFN1cnZleUhlbHBlci5HQVBfQkVUV0VFTl9DT0xVTU5TO1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnBvcE1hcmdpbnMoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21wb3NpdGVCcmljayA9IG5ldyBDb21wb3NpdGVCcmljayguLi5jZWxscyk7XG4gICAgICAgIHJldHVybiBbY29tcG9zaXRlQnJpY2ssIFN1cnZleUhlbHBlci5jcmVhdGVSb3dsaW5lRmxhdChTdXJ2ZXlIZWxwZXIuY3JlYXRlUG9pbnQoY29tcG9zaXRlQnJpY2spLCB0aGlzLmNvbnRyb2xsZXIpXTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIGFzeW5jIGdlbmVyYXRlRmxhdHNWZXJ0aWNhbGx5Q2VsbHMocG9pbnQ6IElQb2ludCk6IFByb21pc2U8SVBkZkJyaWNrW10+IHtcbiAgICAgICAgY29uc3QgY2VsbHM6IElQZGZCcmlja1tdID0gW107XG4gICAgICAgIGNvbnN0IGN1cnJQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNsb25lKHBvaW50KTtcbiAgICAgICAgaWYgKHRoaXMucXVlc3Rpb25NYXRyaXguaGFzUm93cykge1xuICAgICAgICAgICAgY29uc3Qgcm93VGV4dEZsYXQgPSBhd2FpdCBTdXJ2ZXlIZWxwZXIuY3JlYXRlVGV4dEZsYXQoY3VyclBvaW50LCB0aGlzLnF1ZXN0aW9uTWF0cml4LFxuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlciwgdGhpcy5yb3cubG9jVGV4dCwgVGV4dEJyaWNrKTtcbiAgICAgICAgICAgIGN1cnJQb2ludC55VG9wID0gcm93VGV4dEZsYXQueUJvdCArIEZsYXRRdWVzdGlvbi5DT05URU5UX0dBUF9WRVJUX1NDQUxFICogdGhpcy5jb250cm9sbGVyLnVuaXRIZWlnaHQ7XG4gICAgICAgICAgICBjZWxscy5wdXNoKHJvd1RleHRGbGF0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmdlbmVyYXRlRmxhdENvbXBvc2l0ZSA9ICh0aGlzLnF1ZXN0aW9uTWF0cml4Lmhhc0NlbGxUZXh0KSA/IHRoaXMuZ2VuZXJhdGVUZXh0Q29tcG9zaXRlIDogdGhpcy5nZW5lcmF0ZUl0ZW1Db21wb2lzdGU7XG4gICAgICAgIGNlbGxzLnB1c2goLi4uYXdhaXQgdGhpcy5nZW5lcmF0ZVZlcnRpY2FsbHlJdGVtcyhjdXJyUG9pbnQsIHRoaXMucXVlc3Rpb25NYXRyaXgudmlzaWJsZUNvbHVtbnMpKTtcbiAgICAgICAgY29uc3QgY29tcG9zaXRlQnJpY2s6IENvbXBvc2l0ZUJyaWNrID0gbmV3IENvbXBvc2l0ZUJyaWNrKC4uLmNlbGxzKTtcbiAgICAgICAgcmV0dXJuIFtjb21wb3NpdGVCcmljaywgU3VydmV5SGVscGVyLmNyZWF0ZVJvd2xpbmVGbGF0KFN1cnZleUhlbHBlci5jcmVhdGVQb2ludChjb21wb3NpdGVCcmljayksIHRoaXMuY29udHJvbGxlcildO1xuICAgIH1cbn1cblxuU2VyaWFsaXplci5yZW1vdmVQcm9wZXJ0eSgnbWF0cml4JywgJ3JlbmRlckFzJyk7XG5TZXJpYWxpemVyLmFkZFByb3BlcnR5KCdtYXRyaXgnLCB7XG4gICAgbmFtZTogJ3JlbmRlckFzJyxcbiAgICBkZWZhdWx0OiAnYXV0bycsXG4gICAgdmlzaWJsZTogZmFsc2UsXG4gICAgY2hvaWNlczogWydhdXRvJywgJ2xpc3QnXVxufSk7XG5GbGF0UmVwb3NpdG9yeS5nZXRJbnN0YW5jZSgpLnJlZ2lzdGVyKCdtYXRyaXgnLCBGbGF0TWF0cml4KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9tYXRyaXgudHMiLCJpbXBvcnQgeyBJUXVlc3Rpb24sIFNlcmlhbGl6ZXIgfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5pbXBvcnQgeyBTdXJ2ZXlQREYgfSBmcm9tICcuLi9zdXJ2ZXknO1xuaW1wb3J0IHsgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IEZsYXRSZXBvc2l0b3J5IH0gZnJvbSAnLi9mbGF0X3JlcG9zaXRvcnknO1xuaW1wb3J0IHsgRmxhdE1hdHJpeE11bHRpcGxlIH0gZnJvbSAnLi9mbGF0X21hdHJpeG11bHRpcGxlJztcblxuZXhwb3J0IGNsYXNzIEZsYXRNYXRyaXhEeW5hbWljIGV4dGVuZHMgRmxhdE1hdHJpeE11bHRpcGxlIHtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHJvdGVjdGVkIHN1cnZleTogU3VydmV5UERGLFxuICAgICAgICBxdWVzdGlvbjogSVF1ZXN0aW9uLCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyKSB7XG4gICAgICAgIHN1cGVyKHN1cnZleSwgcXVlc3Rpb24sIGNvbnRyb2xsZXIsIGZhbHNlKTtcbiAgICB9XG59XG5cblNlcmlhbGl6ZXIucmVtb3ZlUHJvcGVydHkoJ21hdHJpeGR5bmFtaWMnLCAncmVuZGVyQXMnKTtcblNlcmlhbGl6ZXIuYWRkUHJvcGVydHkoJ21hdHJpeGR5bmFtaWMnLCB7XG4gICAgbmFtZTogJ3JlbmRlckFzJyxcbiAgICBkZWZhdWx0OiAnYXV0bycsXG4gICAgdmlzaWJsZTogZmFsc2UsXG4gICAgY2hvaWNlczogWydhdXRvJywgJ2xpc3QnXVxufSk7XG5GbGF0UmVwb3NpdG9yeS5nZXRJbnN0YW5jZSgpLnJlZ2lzdGVyKCdtYXRyaXhkeW5hbWljJywgRmxhdE1hdHJpeER5bmFtaWMpO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9mbGF0X2xheW91dC9mbGF0X21hdHJpeGR5bmFtaWMudHMiLCJpbXBvcnQgeyBJUXVlc3Rpb24sIFF1ZXN0aW9uTXVsdGlwbGVUZXh0TW9kZWwsIE11bHRpcGxlVGV4dEl0ZW1Nb2RlbCB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCB7IFN1cnZleVBERiB9IGZyb20gJy4uL3N1cnZleSc7XG5pbXBvcnQgeyBJUG9pbnQsIERvY0NvbnRyb2xsZXIgfSBmcm9tICcuLi9kb2NfY29udHJvbGxlcic7XG5pbXBvcnQgeyBGbGF0UXVlc3Rpb24sIElGbGF0UXVlc3Rpb24gfSBmcm9tICcuL2ZsYXRfcXVlc3Rpb24nO1xuaW1wb3J0IHsgRmxhdFJlcG9zaXRvcnkgfSBmcm9tICcuL2ZsYXRfcmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBJUGRmQnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9icmljayc7XG5pbXBvcnQgeyBDb21wb3NpdGVCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2NvbXBvc2l0ZSc7XG5pbXBvcnQgeyBTdXJ2ZXlIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXJfc3VydmV5JztcbmltcG9ydCB7IEZsYXRUZXh0Ym94IH0gZnJvbSAnLi9mbGF0X3RleHRib3gnO1xuXG5leHBvcnQgY2xhc3MgRmxhdE11bHRpcGxlVGV4dCBleHRlbmRzIEZsYXRRdWVzdGlvbiB7XG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBST1dTX0dBUF9TQ0FMRTogbnVtYmVyID0gMC4xOTU7XG4gICAgcHJvdGVjdGVkIHF1ZXN0aW9uOiBRdWVzdGlvbk11bHRpcGxlVGV4dE1vZGVsO1xuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgc3VydmV5OiBTdXJ2ZXlQREYsXG4gICAgICAgIHF1ZXN0aW9uOiBJUXVlc3Rpb24sIHByb3RlY3RlZCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyKSB7XG4gICAgICAgIHN1cGVyKHN1cnZleSwgcXVlc3Rpb24sIGNvbnRyb2xsZXIpO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uID0gPFF1ZXN0aW9uTXVsdGlwbGVUZXh0TW9kZWw+cXVlc3Rpb247XG4gICAgfVxuICAgIHByaXZhdGUgZ2V0VmlzaWJsZVJvd3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uLmdldFJvd3MoKS5maWx0ZXIocm93ID0+IHJvdy5pc1Zpc2libGUpO1xuICAgIH1cbiAgICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlRmxhdEl0ZW0ocG9pbnQ6IElQb2ludCwgcm93X2luZGV4OiBudW1iZXIsIGNvbF9pbmRleDogbnVtYmVyLFxuICAgICAgICBpdGVtOiBNdWx0aXBsZVRleHRJdGVtTW9kZWwpOiBQcm9taXNlPElQZGZCcmljaz4ge1xuICAgICAgICBjb25zdCBjb2xXaWR0aDogbnVtYmVyID0gU3VydmV5SGVscGVyLmdldFBhZ2VBdmFpbGFibGVXaWR0aCh0aGlzLmNvbnRyb2xsZXIpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIucHVzaE1hcmdpbnMoKTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLm1hcmdpbnMucmlnaHQgPSB0aGlzLmNvbnRyb2xsZXIucGFwZXJXaWR0aCAtXG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0IC0gY29sV2lkdGggKiBTdXJ2ZXlIZWxwZXIuTVVMVElQTEVURVhUX1RFWFRfUEVSUztcbiAgICAgICAgY29uc3QgY29tcG9zaXRlRmxhdDogQ29tcG9zaXRlQnJpY2sgPSBuZXcgQ29tcG9zaXRlQnJpY2soYXdhaXQgU3VydmV5SGVscGVyLlxuICAgICAgICAgICAgY3JlYXRlQm9sZFRleHRGbGF0KHBvaW50LCB0aGlzLnF1ZXN0aW9uLCB0aGlzLmNvbnRyb2xsZXIsIGl0ZW0ubG9jVGl0bGUpKTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLnBvcE1hcmdpbnMoKTtcblxuICAgICAgICBjb25zdCBmbGF0TXVsdGlwbGVUZXh0SXRlbVF1ZXN0aW9uOiBJRmxhdFF1ZXN0aW9uID0gRmxhdFJlcG9zaXRvcnkuZ2V0SW5zdGFuY2UoKS5jcmVhdGUoXG4gICAgICAgICAgICB0aGlzLnN1cnZleSwgaXRlbS5lZGl0b3IsIHRoaXMuY29udHJvbGxlciwgJ3RleHQnKTtcbiAgICAgICAgY29uc3QgaXRlbVBvaW50OiBJUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlVGV4dEZpZWxkUmVjdCh7XG4gICAgICAgICAgICB4TGVmdDogcG9pbnQueExlZnQgKyBjb2xXaWR0aCAqIFN1cnZleUhlbHBlci5NVUxUSVBMRVRFWFRfVEVYVF9QRVJTLCB5VG9wOiBwb2ludC55VG9wIH0sXG4gICAgICAgIHRoaXMuY29udHJvbGxlcik7XG4gICAgICAgIGNvbXBvc2l0ZUZsYXQuYWRkQnJpY2soLi4uYXdhaXQgKDxGbGF0VGV4dGJveD5mbGF0TXVsdGlwbGVUZXh0SXRlbVF1ZXN0aW9uKS5nZW5lcmF0ZUZsYXRzQ29udGVudChpdGVtUG9pbnQpKTtcblxuICAgICAgICByZXR1cm4gY29tcG9zaXRlRmxhdDtcbiAgICB9XG4gICAgcHVibGljIGFzeW5jIGdlbmVyYXRlRmxhdHNDb250ZW50KHBvaW50OiBJUG9pbnQpOiBQcm9taXNlPElQZGZCcmlja1tdPiB7XG4gICAgICAgIGNvbnN0IHJvd3NGbGF0czogQ29tcG9zaXRlQnJpY2tbXSA9IFtdO1xuICAgICAgICBjb25zdCBjdXJyUG9pbnQ6IElQb2ludCA9IFN1cnZleUhlbHBlci5jbG9uZShwb2ludCk7XG4gICAgICAgIGNvbnN0IHJvd3MgPSB0aGlzLmdldFZpc2libGVSb3dzKCk7XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByb3dzRmxhdHMucHVzaChuZXcgQ29tcG9zaXRlQnJpY2soKSk7XG4gICAgICAgICAgICBsZXQgeUJvdDogbnVtYmVyID0gY3VyclBvaW50LnlUb3A7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIucHVzaE1hcmdpbnMoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGo6IG51bWJlciA9IDA7IGogPCByb3dzW2ldLmNlbGxzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnB1c2hNYXJnaW5zKCk7XG4gICAgICAgICAgICAgICAgU3VydmV5SGVscGVyLnNldENvbHVtbk1hcmdpbnModGhpcy5jb250cm9sbGVyLCB0aGlzLnF1ZXN0aW9uLmNvbENvdW50LCBqKTtcbiAgICAgICAgICAgICAgICBjdXJyUG9pbnQueExlZnQgPSB0aGlzLmNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0O1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1GbGF0OiBJUGRmQnJpY2sgPSBhd2FpdCB0aGlzLmdlbmVyYXRlRmxhdEl0ZW0oXG4gICAgICAgICAgICAgICAgICAgIGN1cnJQb2ludCwgaSwgaiwgcm93c1tpXS5jZWxsc1tqXS5pdGVtKTtcbiAgICAgICAgICAgICAgICByb3dzRmxhdHNbcm93c0ZsYXRzLmxlbmd0aCAtIDFdLmFkZEJyaWNrKGl0ZW1GbGF0KTtcbiAgICAgICAgICAgICAgICB5Qm90ID0gTWF0aC5tYXgoeUJvdCwgaXRlbUZsYXQueUJvdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnBvcE1hcmdpbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5wb3BNYXJnaW5zKCk7XG4gICAgICAgICAgICBjdXJyUG9pbnQueExlZnQgPSBwb2ludC54TGVmdDtcbiAgICAgICAgICAgIGN1cnJQb2ludC55VG9wID0geUJvdDtcbiAgICAgICAgICAgIHJvd3NGbGF0c1tyb3dzRmxhdHMubGVuZ3RoIC0gMV0uYWRkQnJpY2soXG4gICAgICAgICAgICAgICAgU3VydmV5SGVscGVyLmNyZWF0ZVJvd2xpbmVGbGF0KGN1cnJQb2ludCwgdGhpcy5jb250cm9sbGVyKSk7XG4gICAgICAgICAgICBjdXJyUG9pbnQueVRvcCArPSBTdXJ2ZXlIZWxwZXIuRVBTSUxPTjtcbiAgICAgICAgICAgIGN1cnJQb2ludC55VG9wICs9IHRoaXMuY29udHJvbGxlci51bml0SGVpZ2h0ICogRmxhdE11bHRpcGxlVGV4dC5ST1dTX0dBUF9TQ0FMRTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcm93c0ZsYXRzO1xuICAgIH1cbn1cblxuRmxhdFJlcG9zaXRvcnkuZ2V0SW5zdGFuY2UoKS5yZWdpc3RlcignbXVsdGlwbGV0ZXh0JywgRmxhdE11bHRpcGxlVGV4dCk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2ZsYXRfbGF5b3V0L2ZsYXRfbXVsdGlwbGV0ZXh0LnRzIiwiaW1wb3J0IHsgSVF1ZXN0aW9uLCBRdWVzdGlvblBhbmVsRHluYW1pY01vZGVsIH0gZnJvbSAnc3VydmV5LWNvcmUnO1xuaW1wb3J0IHsgU3VydmV5UERGIH0gZnJvbSAnLi4vc3VydmV5JztcbmltcG9ydCB7IElQb2ludCwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IEZsYXRTdXJ2ZXkgfSBmcm9tICcuL2ZsYXRfc3VydmV5JztcbmltcG9ydCB7IEZsYXRRdWVzdGlvbiB9IGZyb20gJy4vZmxhdF9xdWVzdGlvbic7XG5pbXBvcnQgeyBGbGF0UmVwb3NpdG9yeSB9IGZyb20gJy4vZmxhdF9yZXBvc2l0b3J5JztcbmltcG9ydCB7IElQZGZCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2JyaWNrJztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuXG5leHBvcnQgY2xhc3MgRmxhdFBhbmVsRHluYW1pYyBleHRlbmRzIEZsYXRRdWVzdGlvbiB7XG4gICAgcHJvdGVjdGVkIHF1ZXN0aW9uOiBRdWVzdGlvblBhbmVsRHluYW1pY01vZGVsO1xuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgR0FQX0JFVFdFRU5fUEFORUxTOiBudW1iZXIgPSAwLjc1O1xuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgc3VydmV5OiBTdXJ2ZXlQREYsXG4gICAgICAgIHF1ZXN0aW9uOiBJUXVlc3Rpb24sIHByb3RlY3RlZCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyKSB7XG4gICAgICAgIHN1cGVyKHN1cnZleSwgcXVlc3Rpb24sIGNvbnRyb2xsZXIpO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uID0gPFF1ZXN0aW9uUGFuZWxEeW5hbWljTW9kZWw+cXVlc3Rpb247XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUZsYXRzQ29udGVudChwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2tbXT4ge1xuICAgICAgICBjb25zdCBmbGF0czogSVBkZkJyaWNrW10gPSBbXTtcbiAgICAgICAgY29uc3QgY3VyclBvaW50OiBJUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY2xvbmUocG9pbnQpO1xuICAgICAgICBmb3IgKGNvbnN0IHBhbmVsIG9mIHRoaXMucXVlc3Rpb24ucGFuZWxzKSB7XG4gICAgICAgICAgICBjb25zdCBwYW5lbEZsYXRzOiBJUGRmQnJpY2tbXSA9IGF3YWl0IEZsYXRTdXJ2ZXkuZ2VuZXJhdGVGbGF0c1BhbmVsKFxuICAgICAgICAgICAgICAgIHRoaXMuc3VydmV5LCB0aGlzLmNvbnRyb2xsZXIsIHBhbmVsLCBjdXJyUG9pbnQpO1xuICAgICAgICAgICAgaWYgKHBhbmVsRmxhdHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgY3VyclBvaW50LnlUb3AgPSBTdXJ2ZXlIZWxwZXIubWVyZ2VSZWN0cyguLi5wYW5lbEZsYXRzKS55Qm90O1xuICAgICAgICAgICAgICAgIGN1cnJQb2ludC55VG9wICs9IHRoaXMuY29udHJvbGxlci51bml0SGVpZ2h0ICogRmxhdFBhbmVsRHluYW1pYy5HQVBfQkVUV0VFTl9QQU5FTFM7XG4gICAgICAgICAgICAgICAgZmxhdHMucHVzaCguLi5wYW5lbEZsYXRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxhdHM7XG4gICAgfVxufVxuXG5GbGF0UmVwb3NpdG9yeS5nZXRJbnN0YW5jZSgpLnJlZ2lzdGVyKCdwYW5lbGR5bmFtaWMnLCBGbGF0UGFuZWxEeW5hbWljKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZmxhdF9sYXlvdXQvZmxhdF9wYW5lbGR5bmFtaWMudHMiLCJpbXBvcnQgeyBJUXVlc3Rpb24sIEl0ZW1WYWx1ZSwgUXVlc3Rpb25SYW5raW5nTW9kZWwgfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5pbXBvcnQgeyBTdXJ2ZXlQREYgfSBmcm9tICcuLi9zdXJ2ZXknO1xuaW1wb3J0IHsgSVBvaW50LCBJUmVjdCwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IEZsYXRRdWVzdGlvbiB9IGZyb20gJy4vZmxhdF9xdWVzdGlvbic7XG5pbXBvcnQgeyBGbGF0UmVwb3NpdG9yeSB9IGZyb20gJy4vZmxhdF9yZXBvc2l0b3J5JztcbmltcG9ydCB7IElQZGZCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2JyaWNrJztcbmltcG9ydCB7IFRleHRCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX3RleHQnO1xuaW1wb3J0IHsgUmFua2luZ0l0ZW1CcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX3JhbmtpbmdpdGVtJztcbmltcG9ydCB7IENvbXBvc2l0ZUJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfY29tcG9zaXRlJztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuaW1wb3J0IHsgQ29sb3JlZEJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfY29sb3JlZGJyaWNrJztcblxuZXhwb3J0IGNsYXNzIEZsYXRSYW5raW5nIGV4dGVuZHMgRmxhdFF1ZXN0aW9uIHtcbiAgICBwcm90ZWN0ZWQgcXVlc3Rpb246IFF1ZXN0aW9uUmFua2luZ01vZGVsO1xuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgc3VydmV5OiBTdXJ2ZXlQREYsXG4gICAgICAgIHF1ZXN0aW9uOiBJUXVlc3Rpb24sIHByb3RlY3RlZCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyKSB7XG4gICAgICAgIHN1cGVyKHN1cnZleSwgcXVlc3Rpb24sIGNvbnRyb2xsZXIpO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uID0gPFF1ZXN0aW9uUmFua2luZ01vZGVsPnF1ZXN0aW9uO1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgYXN5bmMgZ2VuZXJhdGVGbGF0Q29tcG9zaXRlKHBvaW50OiBJUG9pbnQsIGl0ZW06IEl0ZW1WYWx1ZSwgaW5kZXg6IG51bWJlciwgdW5yYW5rZWRJdGVtOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPElQZGZCcmljaz4ge1xuICAgICAgICBjb25zdCBpdGVtUmVjdDogSVJlY3QgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlUmVjdChwb2ludCxcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci51bml0V2lkdGgsIHRoaXMuY29udHJvbGxlci51bml0SGVpZ2h0KTtcbiAgICAgICAgY29uc3QgaXRlbVNjYWxlZFJlY3Q6IElSZWN0ID0gU3VydmV5SGVscGVyLm1vdmVSZWN0KFN1cnZleUhlbHBlci5zY2FsZVJlY3QoXG4gICAgICAgICAgICBpdGVtUmVjdCwgU3VydmV5SGVscGVyLlNFTEVDVF9JVEVNX0ZMQVRfU0NBTEUpLCBwb2ludC54TGVmdCk7XG4gICAgICAgIGNvbnN0IGl0ZW1GbGF0OiBJUGRmQnJpY2sgPSBuZXcgUmFua2luZ0l0ZW1Ccmljayh0aGlzLnF1ZXN0aW9uLCB0aGlzLmNvbnRyb2xsZXIsXG4gICAgICAgICAgICBpdGVtU2NhbGVkUmVjdCwgdW5yYW5rZWRJdGVtID8gJy0nIDogdGhpcy5xdWVzdGlvbi5nZXROdW1iZXJCeUluZGV4KGluZGV4KSk7XG4gICAgICAgIGNvbnN0IHRleHRQb2ludDogSVBvaW50ID0gU3VydmV5SGVscGVyLmNsb25lKHBvaW50KTtcbiAgICAgICAgdGV4dFBvaW50LnhMZWZ0ID0gaXRlbUZsYXQueFJpZ2h0ICsgdGhpcy5jb250cm9sbGVyLnVuaXRXaWR0aCAqIFN1cnZleUhlbHBlci5HQVBfQkVUV0VFTl9JVEVNX1RFWFQ7XG4gICAgICAgIGNvbnN0IHRleHRGbGF0OiBJUGRmQnJpY2sgPSBhd2FpdCBTdXJ2ZXlIZWxwZXIuY3JlYXRlVGV4dEZsYXQoXG4gICAgICAgICAgICB0ZXh0UG9pbnQsIHRoaXMucXVlc3Rpb24sIHRoaXMuY29udHJvbGxlciwgaXRlbS5sb2NUZXh0LCBUZXh0QnJpY2spO1xuICAgICAgICByZXR1cm4gbmV3IENvbXBvc2l0ZUJyaWNrKGl0ZW1GbGF0LCB0ZXh0RmxhdCk7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUNob2ljZXNDb2x1bW4ocG9pbnQ6IElQb2ludCwgY2hvaWNlczogSXRlbVZhbHVlW10sIHVucmFua2VkQ2hvaWNlczogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxJUGRmQnJpY2tbXT4ge1xuICAgICAgICBjb25zdCBjdXJyUG9pbnQ6IElQb2ludCA9IFN1cnZleUhlbHBlci5jbG9uZShwb2ludCk7XG4gICAgICAgIGNvbnN0IGZsYXRzOiBJUGRmQnJpY2tbXSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgY2hvaWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaXRlbUZsYXQ6IElQZGZCcmljayA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVGbGF0Q29tcG9zaXRlKGN1cnJQb2ludCwgY2hvaWNlc1tpXSwgaSwgdW5yYW5rZWRDaG9pY2VzKTtcbiAgICAgICAgICAgIGN1cnJQb2ludC55VG9wID0gaXRlbUZsYXQueUJvdCArIFN1cnZleUhlbHBlci5HQVBfQkVUV0VFTl9ST1dTICogdGhpcy5jb250cm9sbGVyLnVuaXRIZWlnaHQ7XG4gICAgICAgICAgICBmbGF0cy5wdXNoKGl0ZW1GbGF0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxhdHM7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZVNlbGVjdFRvUmFua0l0ZW1zVmVydGljYWxseShwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2tbXT4ge1xuICAgICAgICBjb25zdCBjdXJyUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY2xvbmUocG9pbnQpO1xuICAgICAgICBjb25zdCBmbGF0czogSVBkZkJyaWNrW10gPSBbXTtcbiAgICAgICAgaWYodGhpcy5xdWVzdGlvbi5yYW5raW5nQ2hvaWNlcy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZsYXRzLnB1c2goLi4uYXdhaXQgdGhpcy5nZW5lcmF0ZUNob2ljZXNDb2x1bW4oY3VyclBvaW50LCB0aGlzLnF1ZXN0aW9uLnJhbmtpbmdDaG9pY2VzKSk7XG4gICAgICAgICAgICBjdXJyUG9pbnQueVRvcCA9IGZsYXRzW2ZsYXRzLmxlbmd0aCAtIDFdLnlCb3QgKyAyICogKFN1cnZleUhlbHBlci5HQVBfQkVUV0VFTl9ST1dTICogdGhpcy5jb250cm9sbGVyLnVuaXRIZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlcGFyYXRvclJlY3QgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlUmVjdCh7XG4gICAgICAgICAgICB4TGVmdDogY3VyclBvaW50LnhMZWZ0LFxuICAgICAgICAgICAgeVRvcDogY3VyclBvaW50LnlUb3AgLSAoU3VydmV5SGVscGVyLkdBUF9CRVRXRUVOX1JPV1MgKiB0aGlzLmNvbnRyb2xsZXIudW5pdEhlaWdodCkgLSAwLjUsXG4gICAgICAgIH0sIHRoaXMuY29udHJvbGxlci5wYXBlcldpZHRoIC0gdGhpcy5jb250cm9sbGVyLm1hcmdpbnMucmlnaHQgLSBjdXJyUG9pbnQueExlZnQsIDEpO1xuICAgICAgICBmbGF0cy5wdXNoKG5ldyBDb2xvcmVkQnJpY2sodGhpcy5jb250cm9sbGVyLCBzZXBhcmF0b3JSZWN0LCBTdXJ2ZXlIZWxwZXIuRk9STV9CT1JERVJfQ09MT1IpKTtcblxuICAgICAgICBmbGF0cy5wdXNoKC4uLmF3YWl0IHRoaXMuZ2VuZXJhdGVDaG9pY2VzQ29sdW1uKGN1cnJQb2ludCwgdGhpcy5xdWVzdGlvbi51blJhbmtpbmdDaG9pY2VzLCB0cnVlKSk7XG4gICAgICAgIHJldHVybiBmbGF0cztcbiAgICB9XG4gICAgcHVibGljIGFzeW5jIGdlbmVyYXRlU2VsZWN0VG9SYW5rSXRlbXNIb3Jpem9udGFsbHkocG9pbnQ6IElQb2ludCk6IFByb21pc2U8SVBkZkJyaWNrW10+IHtcbiAgICAgICAgY29uc3QgY29sQ291bnQgPSAyO1xuICAgICAgICBjb25zdCBjdXJyUG9pbnQ6IElQb2ludCA9IFN1cnZleUhlbHBlci5jbG9uZShwb2ludCk7XG4gICAgICAgIGNvbnN0IGZsYXRzOiBJUGRmQnJpY2tbXSA9IFtdO1xuICAgICAgICBjb25zdCByb3dzQ291bnQgPSBNYXRoLm1heCh0aGlzLnF1ZXN0aW9uLnVuUmFua2luZ0Nob2ljZXMubGVuZ3RoLCB0aGlzLnF1ZXN0aW9uLnJhbmtpbmdDaG9pY2VzLmxlbmd0aCk7XG4gICAgICAgIGxldCByb3c6IENvbXBvc2l0ZUJyaWNrID0gbmV3IENvbXBvc2l0ZUJyaWNrKCk7XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCByb3dzQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNvbEluZGV4ID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgW3RoaXMucXVlc3Rpb24udW5SYW5raW5nQ2hvaWNlc1tpXSwgdGhpcy5xdWVzdGlvbi5yYW5raW5nQ2hvaWNlc1tpXV0pIHtcbiAgICAgICAgICAgICAgICBpZighIWl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnB1c2hNYXJnaW5zKHRoaXMuY29udHJvbGxlci5tYXJnaW5zLmxlZnQsIHRoaXMuY29udHJvbGxlci5tYXJnaW5zLnJpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgU3VydmV5SGVscGVyLnNldENvbHVtbk1hcmdpbnModGhpcy5jb250cm9sbGVyLCBjb2xDb3VudCwgY29sSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyUG9pbnQueExlZnQgPSB0aGlzLmNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtRmxhdDogSVBkZkJyaWNrID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUZsYXRDb21wb3NpdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyUG9pbnQsIGl0ZW0sIGksIGNvbEluZGV4ID09IDApO1xuICAgICAgICAgICAgICAgICAgICByb3cuYWRkQnJpY2soaXRlbUZsYXQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIucG9wTWFyZ2lucygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb2xJbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgcm93TGluZUZsYXQ6IElQZGZCcmljayA9IFN1cnZleUhlbHBlci5jcmVhdGVSb3dsaW5lRmxhdChcbiAgICAgICAgICAgICAgICBTdXJ2ZXlIZWxwZXIuY3JlYXRlUG9pbnQocm93KSwgdGhpcy5jb250cm9sbGVyKTtcbiAgICAgICAgICAgIGZsYXRzLnB1c2gocm93LCByb3dMaW5lRmxhdCk7XG4gICAgICAgICAgICBjb25zdCBzZXBhcmF0b3JSZWN0ID0gU3VydmV5SGVscGVyLmNyZWF0ZVJlY3Qoe1xuICAgICAgICAgICAgICAgIHhMZWZ0OiB0aGlzLmNvbnRyb2xsZXIubWFyZ2lucy5sZWZ0ICsgU3VydmV5SGVscGVyLmdldFBhZ2VBdmFpbGFibGVXaWR0aCh0aGlzLmNvbnRyb2xsZXIpIC8gMiAtIDAuNSxcbiAgICAgICAgICAgICAgICB5VG9wOiBjdXJyUG9pbnQueVRvcCxcbiAgICAgICAgICAgIH0sIDAsIDApO1xuICAgICAgICAgICAgcm93LmFkZEJyaWNrKG5ldyBDb2xvcmVkQnJpY2sodGhpcy5jb250cm9sbGVyLCBzZXBhcmF0b3JSZWN0LCBTdXJ2ZXlIZWxwZXIuRk9STV9CT1JERVJfQ09MT1IsIDEsIHJvd0xpbmVGbGF0LnlCb3QgLSBjdXJyUG9pbnQueVRvcCArIChpICE9PSByb3dzQ291bnQgLSAxID9cbiAgICAgICAgICAgICAgICBTdXJ2ZXlIZWxwZXIuR0FQX0JFVFdFRU5fUk9XUyAqIHRoaXMuY29udHJvbGxlci51bml0SGVpZ2h0IDogMCkpKTtcblxuICAgICAgICAgICAgY3VyclBvaW50LnlUb3AgPSByb3dMaW5lRmxhdC55Qm90ICtcbiAgICAgICAgICAgICAgICBTdXJ2ZXlIZWxwZXIuR0FQX0JFVFdFRU5fUk9XUyAqIHRoaXMuY29udHJvbGxlci51bml0SGVpZ2h0O1xuICAgICAgICAgICAgcm93ID0gbmV3IENvbXBvc2l0ZUJyaWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsYXRzO1xuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgZ2VuZXJhdGVGbGF0c0NvbnRlbnQocG9pbnQ6IElQb2ludCk6IFByb21pc2U8SVBkZkJyaWNrW10+IHtcbiAgICAgICAgaWYoIXRoaXMucXVlc3Rpb24uc2VsZWN0VG9SYW5rRW5hYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVDaG9pY2VzQ29sdW1uKHBvaW50LCB0aGlzLnF1ZXN0aW9uLnJhbmtpbmdDaG9pY2VzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHRoaXMucXVlc3Rpb24uc2VsZWN0VG9SYW5rQXJlYXNMYXlvdXQgPT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVTZWxlY3RUb1JhbmtJdGVtc1ZlcnRpY2FsbHkocG9pbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVTZWxlY3RUb1JhbmtJdGVtc0hvcml6b250YWxseShwb2ludCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkZsYXRSZXBvc2l0b3J5LmdldEluc3RhbmNlKCkucmVnaXN0ZXIoJ3JhbmtpbmcnLCBGbGF0UmFua2luZyk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2ZsYXRfbGF5b3V0L2ZsYXRfcmFua2luZy50cyIsImltcG9ydCB7IElRdWVzdGlvbiwgSXRlbVZhbHVlLCBRdWVzdGlvblJhdGluZ01vZGVsLCBMb2NhbGl6YWJsZVN0cmluZyB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCB7IFN1cnZleVBERiB9IGZyb20gJy4uL3N1cnZleSc7XG5pbXBvcnQgeyBJUG9pbnQsIElSZWN0LCBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgRmxhdFJhZGlvZ3JvdXAgfSBmcm9tICcuL2ZsYXRfcmFkaW9ncm91cCc7XG5pbXBvcnQgeyBGbGF0UmVwb3NpdG9yeSB9IGZyb20gJy4vZmxhdF9yZXBvc2l0b3J5JztcbmltcG9ydCB7IElQZGZCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2JyaWNrJztcbmltcG9ydCB7IFRleHRCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX3RleHQnO1xuaW1wb3J0IHsgQ29tcG9zaXRlQnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9jb21wb3NpdGUnO1xuaW1wb3J0IHsgU3VydmV5SGVscGVyIH0gZnJvbSAnLi4vaGVscGVyX3N1cnZleSc7XG5cbmV4cG9ydCBjbGFzcyBGbGF0UmF0aW5nIGV4dGVuZHMgRmxhdFJhZGlvZ3JvdXAge1xuICAgIHByb3RlY3RlZCBxdWVzdGlvblJhdGluZzogUXVlc3Rpb25SYXRpbmdNb2RlbDtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHJvdGVjdGVkIHN1cnZleTogU3VydmV5UERGLFxuICAgICAgICBxdWVzdGlvbjogSVF1ZXN0aW9uLCBwcm90ZWN0ZWQgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcikge1xuICAgICAgICBzdXBlcihzdXJ2ZXksIHF1ZXN0aW9uLCBjb250cm9sbGVyKTtcbiAgICAgICAgdGhpcy5xdWVzdGlvblJhdGluZyA9IDxRdWVzdGlvblJhdGluZ01vZGVsPnF1ZXN0aW9uO1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgYXN5bmMgZ2VuZXJhdGVGbGF0SG9yaXNvbnRhbENvbXBvc2l0ZShwb2ludDogSVBvaW50LCBpdGVtOiBJdGVtVmFsdWUsIGluZGV4OiBudW1iZXIpOiBQcm9taXNlPElQZGZCcmljaz4ge1xuICAgICAgICBjb25zdCBpdGVtVGV4dDogTG9jYWxpemFibGVTdHJpbmcgPSBTdXJ2ZXlIZWxwZXIuZ2V0UmF0aW5nSXRlbVRleHQoXG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uUmF0aW5nLCBpbmRleCwgaXRlbS5sb2NUZXh0KTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLnB1c2hNYXJnaW5zKCk7XG4gICAgICAgIGNvbnN0IGhhbGZXaWR0aDogbnVtYmVyID0gdGhpcy5jb250cm9sbGVyLnVuaXRXaWR0aCAvIDIuMDtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLm1hcmdpbnMubGVmdCArPSBoYWxmV2lkdGg7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5tYXJnaW5zLnJpZ2h0ICs9IGhhbGZXaWR0aDtcbiAgICAgICAgY29uc3QgdGV4dFBvaW50OiBJUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY2xvbmUocG9pbnQpO1xuICAgICAgICB0ZXh0UG9pbnQueExlZnQgKz0gaGFsZldpZHRoO1xuICAgICAgICBjb25zdCBjb21wb3NpdGVGbGF0OiBDb21wb3NpdGVCcmljayA9IG5ldyBDb21wb3NpdGVCcmljayhhd2FpdCBTdXJ2ZXlIZWxwZXIuXG4gICAgICAgICAgICBjcmVhdGVCb2xkVGV4dEZsYXQodGV4dFBvaW50LCB0aGlzLnF1ZXN0aW9uUmF0aW5nLCB0aGlzLmNvbnRyb2xsZXIsIGl0ZW1UZXh0KSk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5wb3BNYXJnaW5zKCk7XG4gICAgICAgIGxldCB0ZXh0V2lkdGg6IG51bWJlciA9IGNvbXBvc2l0ZUZsYXQud2lkdGg7XG4gICAgICAgIGlmICh0ZXh0V2lkdGggPCBTdXJ2ZXlIZWxwZXIuZ2V0UmF0aW5nTWluV2lkdGgodGhpcy5jb250cm9sbGVyKSkge1xuICAgICAgICAgICAgY29tcG9zaXRlRmxhdC54TGVmdCArPSAoU3VydmV5SGVscGVyLmdldFJhdGluZ01pbldpZHRoKFxuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlcikgLSB0ZXh0V2lkdGgpIC8gMi4wIC0gaGFsZldpZHRoO1xuICAgICAgICAgICAgdGV4dFdpZHRoID0gU3VydmV5SGVscGVyLmdldFJhdGluZ01pbldpZHRoKHRoaXMuY29udHJvbGxlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0ZXh0V2lkdGggKz0gdGhpcy5jb250cm9sbGVyLnVuaXRXaWR0aDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByYWRpb1BvaW50OiBJUG9pbnQgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlUG9pbnQoY29tcG9zaXRlRmxhdCk7XG4gICAgICAgIHJhZGlvUG9pbnQueExlZnQgPSBwb2ludC54TGVmdDtcbiAgICAgICAgY29tcG9zaXRlRmxhdC5hZGRCcmljayh0aGlzLmdlbmVyYXRlRmxhdEl0ZW0oU3VydmV5SGVscGVyLmNyZWF0ZVJlY3QoXG4gICAgICAgICAgICByYWRpb1BvaW50LCB0ZXh0V2lkdGgsIHRoaXMuY29udHJvbGxlci51bml0SGVpZ2h0KSwgaXRlbSwgaW5kZXgsIHVuZGVmaW5lZCwgdGhpcy5xdWVzdGlvbi52YWx1ZSA9PSBpdGVtLnZhbHVlKSk7XG4gICAgICAgIHJldHVybiBjb21wb3NpdGVGbGF0O1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgYXN5bmMgZ2VuZXJhdGVGbGF0Q29tcG9zaXRlKHBvaW50OiBJUG9pbnQsIGl0ZW06IEl0ZW1WYWx1ZSwgaW5kZXg6IG51bWJlcik6IFByb21pc2U8SVBkZkJyaWNrPiB7XG4gICAgICAgIGNvbnN0IGNvbXBvc2l0ZUZsYXQ6IENvbXBvc2l0ZUJyaWNrID0gbmV3IENvbXBvc2l0ZUJyaWNrKCk7XG4gICAgICAgIGNvbnN0IGl0ZW1SZWN0OiBJUmVjdCA9IFN1cnZleUhlbHBlci5jcmVhdGVSZWN0KHBvaW50LFxuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnVuaXRIZWlnaHQsIHRoaXMuY29udHJvbGxlci51bml0SGVpZ2h0KTtcbiAgICAgICAgY29uc3QgaXRlbUZsYXQ6IElQZGZCcmljayA9IHRoaXMuZ2VuZXJhdGVGbGF0SXRlbShTdXJ2ZXlIZWxwZXIubW92ZVJlY3QoXG4gICAgICAgICAgICBTdXJ2ZXlIZWxwZXIuc2NhbGVSZWN0KGl0ZW1SZWN0LCBTdXJ2ZXlIZWxwZXIuU0VMRUNUX0lURU1fRkxBVF9TQ0FMRSksXG4gICAgICAgICAgICBwb2ludC54TGVmdCksIGl0ZW0sIGluZGV4LCB1bmRlZmluZWQsIHRoaXMucXVlc3Rpb24udmFsdWUgPT0gaXRlbS52YWx1ZSk7XG4gICAgICAgIGNvbXBvc2l0ZUZsYXQuYWRkQnJpY2soaXRlbUZsYXQpO1xuICAgICAgICBjb25zdCB0ZXh0UG9pbnQ6IElQb2ludCA9IFN1cnZleUhlbHBlci5jbG9uZShwb2ludCk7XG4gICAgICAgIHRleHRQb2ludC54TGVmdCA9IGl0ZW1GbGF0LnhSaWdodCArIHRoaXMuY29udHJvbGxlci51bml0V2lkdGggKiBTdXJ2ZXlIZWxwZXIuR0FQX0JFVFdFRU5fSVRFTV9URVhUO1xuICAgICAgICBjb25zdCBpdGVtVGV4dDogTG9jYWxpemFibGVTdHJpbmcgPSBTdXJ2ZXlIZWxwZXIuZ2V0UmF0aW5nSXRlbVRleHQodGhpcy5xdWVzdGlvblJhdGluZywgaW5kZXgsIGl0ZW0ubG9jVGV4dCk7XG4gICAgICAgIGl0ZW1UZXh0ID09IG51bGwgfHwgY29tcG9zaXRlRmxhdC5hZGRCcmljayhhd2FpdCBTdXJ2ZXlIZWxwZXIuY3JlYXRlVGV4dEZsYXQoXG4gICAgICAgICAgICB0ZXh0UG9pbnQsIHRoaXMucXVlc3Rpb24sIHRoaXMuY29udHJvbGxlciwgaXRlbVRleHQsIFRleHRCcmljaykpO1xuICAgICAgICByZXR1cm4gY29tcG9zaXRlRmxhdDtcbiAgICB9XG4gICAgcHJvdGVjdGVkIGFzeW5jIGdlbmVyYXRlSG9yaXNvbnRhbGx5SXRlbXMocG9pbnQ6IElQb2ludCkge1xuICAgICAgICBjb25zdCByb3dzRmxhdHM6IENvbXBvc2l0ZUJyaWNrW10gPSBbbmV3IENvbXBvc2l0ZUJyaWNrKCldO1xuICAgICAgICBjb25zdCBjdXJyUG9pbnQ6IElQb2ludCA9IFN1cnZleUhlbHBlci5jbG9uZShwb2ludCk7XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLnF1ZXN0aW9uUmF0aW5nLnZpc2libGVSYXRlVmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtRmxhdDogSVBkZkJyaWNrID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUZsYXRIb3Jpc29udGFsQ29tcG9zaXRlKGN1cnJQb2ludCxcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9uUmF0aW5nLnZpc2libGVSYXRlVmFsdWVzW2ldLCBpKTtcbiAgICAgICAgICAgIHJvd3NGbGF0c1tyb3dzRmxhdHMubGVuZ3RoIC0gMV0uYWRkQnJpY2soaXRlbUZsYXQpO1xuICAgICAgICAgICAgY29uc3QgbGVmdFdpZHRoOiBudW1iZXIgPSB0aGlzLmNvbnRyb2xsZXIucGFwZXJXaWR0aCAtXG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLm1hcmdpbnMucmlnaHQgLSBpdGVtRmxhdC54UmlnaHQ7XG4gICAgICAgICAgICBpZiAoU3VydmV5SGVscGVyLmdldFJhdGluZ01pbldpZHRoKHRoaXMuY29udHJvbGxlcikgPD0gbGVmdFdpZHRoICsgU3VydmV5SGVscGVyLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICBjdXJyUG9pbnQueExlZnQgPSBpdGVtRmxhdC54UmlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXJyUG9pbnQueExlZnQgPSBwb2ludC54TGVmdDtcbiAgICAgICAgICAgICAgICBjdXJyUG9pbnQueVRvcCA9IGl0ZW1GbGF0LnlCb3Q7XG4gICAgICAgICAgICAgICAgaWYgKGkgIT09IHRoaXMucXVlc3Rpb25SYXRpbmcudmlzaWJsZVJhdGVWYWx1ZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICByb3dzRmxhdHNbcm93c0ZsYXRzLmxlbmd0aCAtIDFdLmFkZEJyaWNrKFxuICAgICAgICAgICAgICAgICAgICAgICAgU3VydmV5SGVscGVyLmNyZWF0ZVJvd2xpbmVGbGF0KGN1cnJQb2ludCwgdGhpcy5jb250cm9sbGVyKSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJQb2ludC55VG9wICs9IFN1cnZleUhlbHBlci5FUFNJTE9OO1xuICAgICAgICAgICAgICAgICAgICByb3dzRmxhdHMucHVzaChuZXcgQ29tcG9zaXRlQnJpY2soKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByb3dzRmxhdHM7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUZsYXRzQ29udGVudChwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2tbXT4ge1xuICAgICAgICBsZXQgaXNWZXJ0aWNhbDogYm9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5xdWVzdGlvblJhdGluZy52aXNpYmxlUmF0ZVZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaXRlbVRleHQ6IExvY2FsaXphYmxlU3RyaW5nID0gU3VydmV5SGVscGVyLmdldFJhdGluZ0l0ZW1UZXh0KFxuICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb25SYXRpbmcsIGksIHRoaXMucXVlc3Rpb25SYXRpbmcudmlzaWJsZVJhdGVWYWx1ZXNbaV0ubG9jVGV4dCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jb250cm9sbGVyLm1lYXN1cmVUZXh0KGl0ZW1UZXh0KS53aWR0aCA+IHRoaXMuY29udHJvbGxlci5tZWFzdXJlVGV4dChTdXJ2ZXlIZWxwZXIuUkFUSU5HX0NPTFVNTl9XSURUSCkud2lkdGgpIHtcbiAgICAgICAgICAgICAgICBpc1ZlcnRpY2FsID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNWZXJ0aWNhbCA/IHRoaXMuZ2VuZXJhdGVWZXJ0aWNhbGx5SXRlbXMocG9pbnQsIHRoaXMucXVlc3Rpb25SYXRpbmcudmlzaWJsZVJhdGVWYWx1ZXMpIDogdGhpcy5nZW5lcmF0ZUhvcmlzb250YWxseUl0ZW1zKHBvaW50KTtcbiAgICB9XG59XG5cbkZsYXRSZXBvc2l0b3J5LmdldEluc3RhbmNlKCkucmVnaXN0ZXIoJ3JhdGluZycsIEZsYXRSYXRpbmcpO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9mbGF0X2xheW91dC9mbGF0X3JhdGluZy50cyIsImltcG9ydCB7IElRdWVzdGlvbiwgUXVlc3Rpb25TaWduYXR1cmVQYWRNb2RlbCB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCB7IFN1cnZleVBERiB9IGZyb20gJy4uL3N1cnZleSc7XG5pbXBvcnQgeyBGbGF0UXVlc3Rpb24gfSBmcm9tICcuL2ZsYXRfcXVlc3Rpb24nO1xuaW1wb3J0IHsgRmxhdFJlcG9zaXRvcnkgfSBmcm9tICcuL2ZsYXRfcmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBJUG9pbnQsIERvY0NvbnRyb2xsZXIsIElSZWN0LCBJU2l6ZSB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IElQZGZCcmljaywgUGRmQnJpY2sgfSBmcm9tICcuLi9wZGZfcmVuZGVyL3BkZl9icmljayc7XG5pbXBvcnQgeyBJQm9yZGVyRGVzY3JpcHRpb24sIFN1cnZleUhlbHBlciB9IGZyb20gJy4uL2hlbHBlcl9zdXJ2ZXknO1xuaW1wb3J0IHsgRW1wdHlCcmljayB9IGZyb20gJy4uL3BkZl9yZW5kZXIvcGRmX2VtcHR5JztcbmltcG9ydCB7IENvbXBvc2l0ZUJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfY29tcG9zaXRlJztcblxuZXhwb3J0IGNsYXNzIEZsYXRTaWduYXR1cmVQYWQgZXh0ZW5kcyBGbGF0UXVlc3Rpb24ge1xuICAgIHByb3RlY3RlZCBxdWVzdGlvbjogUXVlc3Rpb25TaWduYXR1cmVQYWRNb2RlbDtcbiAgICBwdWJsaWMgc3RhdGljIEJPUkRFUl9TVFlMRTogJ2Rhc2hlZCcgfCAnc29saWQnIHwgJ25vbmUnID0gJ2Rhc2hlZCc7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBzdXJ2ZXk6IFN1cnZleVBERixcbiAgICAgICAgcXVlc3Rpb246IElRdWVzdGlvbiwgY29udHJvbGxlcjogRG9jQ29udHJvbGxlcikge1xuICAgICAgICBzdXBlcihzdXJ2ZXksIHF1ZXN0aW9uLCBjb250cm9sbGVyKTtcbiAgICAgICAgdGhpcy5xdWVzdGlvbiA9IDxRdWVzdGlvblNpZ25hdHVyZVBhZE1vZGVsPnF1ZXN0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUJhY2tncm91bmRJbWFnZShwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2s+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IFN1cnZleUhlbHBlci5jcmVhdGVJbWFnZUZsYXQocG9pbnQsIHRoaXMucXVlc3Rpb24sIHRoaXMuY29udHJvbGxlciwgeyBsaW5rOiB0aGlzLnF1ZXN0aW9uLmJhY2tncm91bmRJbWFnZSwgd2lkdGg6IFN1cnZleUhlbHBlci5weFRvUHQoPGFueT50aGlzLnF1ZXN0aW9uLnNpZ25hdHVyZVdpZHRoKSwgaGVpZ2h0OiBTdXJ2ZXlIZWxwZXIucHhUb1B0KDxhbnk+dGhpcy5xdWVzdGlvbi5zaWduYXR1cmVIZWlnaHQpLCBvYmplY3RGaXQ6ICdjb3ZlcicgfSwgdHJ1ZSk7XG4gICAgfVxuICAgIHByaXZhdGUgZ2V0U2lnbkltYWdlVXJsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbi5zdG9yZURhdGFBc1RleHQgfHwgIXRoaXMucXVlc3Rpb24ubG9hZGVkRGF0YSA/IHRoaXMucXVlc3Rpb24udmFsdWUgOiB0aGlzLnF1ZXN0aW9uLmxvYWRlZERhdGE7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZVNpZ24ocG9pbnQ6IElQb2ludCk6IFByb21pc2U8SVBkZkJyaWNrPiB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gU3VydmV5SGVscGVyLnB4VG9QdCg8YW55PnRoaXMucXVlc3Rpb24uc2lnbmF0dXJlV2lkdGgpO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBTdXJ2ZXlIZWxwZXIucHhUb1B0KDxhbnk+dGhpcy5xdWVzdGlvbi5zaWduYXR1cmVIZWlnaHQpO1xuICAgICAgICBsZXQgYnJpY2s6IFBkZkJyaWNrO1xuICAgICAgICBpZih0aGlzLnF1ZXN0aW9uLnZhbHVlKSB7XG4gICAgICAgICAgICBicmljayA9IGF3YWl0IFN1cnZleUhlbHBlci5jcmVhdGVJbWFnZUZsYXQocG9pbnQsXG4gICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbiwgdGhpcy5jb250cm9sbGVyLCB7IGxpbms6IHRoaXMuZ2V0U2lnbkltYWdlVXJsKCksXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQgfSwgZmFsc2VcbiAgICAgICAgICAgICkgYXMgUGRmQnJpY2s7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBicmljayA9IG5ldyBFbXB0eUJyaWNrKFN1cnZleUhlbHBlci5jcmVhdGVSZWN0KHBvaW50LCB3aWR0aCwgaGVpZ2h0KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoRmxhdFNpZ25hdHVyZVBhZC5CT1JERVJfU1RZTEUgIT09ICdub25lJykge1xuICAgICAgICAgICAgYnJpY2suYWZ0ZXJSZW5kZXJDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBib3JkZXJPcHRpb25zOiBJQm9yZGVyRGVzY3JpcHRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogYnJpY2sud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBicmljay53aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgeVRvcDogYnJpY2sueVRvcCxcbiAgICAgICAgICAgICAgICAgICAgeUJvdDogYnJpY2sueUJvdCxcbiAgICAgICAgICAgICAgICAgICAgeExlZnQ6IGJyaWNrLnhMZWZ0LFxuICAgICAgICAgICAgICAgICAgICB4UmlnaHQ6IGJyaWNrLnhSaWdodCxcbiAgICAgICAgICAgICAgICAgICAgZm9ybUJvcmRlckNvbG9yOiBicmljay5mb3JtQm9yZGVyQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgIHJvdW5kZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBvdXRzaWRlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXNoU3R5bGU6IEZsYXRTaWduYXR1cmVQYWQuQk9SREVSX1NUWUxFID09ICdkYXNoZWQnID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGFzaEFycmF5OiBbNV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXNoUGhhc2U6IDBcbiAgICAgICAgICAgICAgICAgICAgfSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgU3VydmV5SGVscGVyLnJlbmRlckZsYXRCb3JkZXJzKHRoaXMuY29udHJvbGxlciwgYm9yZGVyT3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJyaWNrO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUZsYXRzQ29udGVudChwb2ludDogSVBvaW50KTogUHJvbWlzZTxJUGRmQnJpY2tbXT4ge1xuICAgICAgICBjb25zdCBjb21wb3NpdGVCcmljayA9IG5ldyBDb21wb3NpdGVCcmljaygpO1xuICAgICAgICBpZih0aGlzLnF1ZXN0aW9uLmJhY2tncm91bmRJbWFnZSkge1xuICAgICAgICAgICAgY29tcG9zaXRlQnJpY2suYWRkQnJpY2soYXdhaXQgdGhpcy5nZW5lcmF0ZUJhY2tncm91bmRJbWFnZShwb2ludCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbXBvc2l0ZUJyaWNrLmFkZEJyaWNrKGF3YWl0IHRoaXMuZ2VuZXJhdGVTaWduKHBvaW50KSk7XG4gICAgICAgIHJldHVybiBbY29tcG9zaXRlQnJpY2tdO1xuICAgIH1cbn1cblxuRmxhdFJlcG9zaXRvcnkuZ2V0SW5zdGFuY2UoKS5yZWdpc3Rlcignc2lnbmF0dXJlcGFkJywgRmxhdFNpZ25hdHVyZVBhZCk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2ZsYXRfbGF5b3V0L2ZsYXRfc2lnbmF0dXJlcGFkLnRzIiwiaW1wb3J0IHsgSVF1ZXN0aW9uLCBRdWVzdGlvblRleHRNb2RlbCB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCB7IFN1cnZleVBERiB9IGZyb20gJy4uL3N1cnZleSc7XG5pbXBvcnQgeyBJUG9pbnQsIElSZWN0LCBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgRmxhdFF1ZXN0aW9uIH0gZnJvbSAnLi9mbGF0X3F1ZXN0aW9uJztcbmltcG9ydCB7IEZsYXRSZXBvc2l0b3J5IH0gZnJvbSAnLi9mbGF0X3JlcG9zaXRvcnknO1xuaW1wb3J0IHsgSVBkZkJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfYnJpY2snO1xuaW1wb3J0IHsgVGV4dEJveEJyaWNrIH0gZnJvbSAnLi4vcGRmX3JlbmRlci9wZGZfdGV4dGJveCc7XG5pbXBvcnQgeyBTdXJ2ZXlIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXJfc3VydmV5JztcblxuZXhwb3J0IGNsYXNzIEZsYXRUZXh0Ym94IGV4dGVuZHMgRmxhdFF1ZXN0aW9uIHtcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE1VTFRJTElORV9URVhUX1JPV1NfQ09VTlQ6IG51bWJlciA9IDE7XG4gICAgcHJvdGVjdGVkIHF1ZXN0aW9uOiBRdWVzdGlvblRleHRNb2RlbDtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHJvdGVjdGVkIHN1cnZleTogU3VydmV5UERGLFxuICAgICAgICBxdWVzdGlvbjogSVF1ZXN0aW9uLCBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyKSB7XG4gICAgICAgIHN1cGVyKHN1cnZleSwgcXVlc3Rpb24sIGNvbnRyb2xsZXIpO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uID0gPFF1ZXN0aW9uVGV4dE1vZGVsPnF1ZXN0aW9uO1xuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgZ2VuZXJhdGVGbGF0c0NvbnRlbnQocG9pbnQ6IElQb2ludCk6IFByb21pc2U8SVBkZkJyaWNrW10+IHtcbiAgICAgICAgaWYgKCF0aGlzLnNob3VsZFJlbmRlckFzQ29tbWVudCkge1xuICAgICAgICAgICAgY29uc3QgcmVjdDogSVJlY3QgPSBTdXJ2ZXlIZWxwZXIuY3JlYXRlVGV4dEZpZWxkUmVjdChwb2ludCwgdGhpcy5jb250cm9sbGVyKTtcbiAgICAgICAgICAgIHJldHVybiBbbmV3IFRleHRCb3hCcmljayh0aGlzLnF1ZXN0aW9uLCB0aGlzLmNvbnRyb2xsZXIsIHJlY3QpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW2F3YWl0IFN1cnZleUhlbHBlci5jcmVhdGVDb21tZW50RmxhdChwb2ludCwgdGhpcy5xdWVzdGlvbixcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlciwgdHJ1ZSwgeyByb3dzOiBGbGF0VGV4dGJveC5NVUxUSUxJTkVfVEVYVF9ST1dTX0NPVU5UIH0pXTtcbiAgICB9XG59XG5cbkZsYXRSZXBvc2l0b3J5LmdldEluc3RhbmNlKCkucmVnaXN0ZXIoJ3RleHQnLCBGbGF0VGV4dGJveCk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2ZsYXRfbGF5b3V0L2ZsYXRfdGV4dGJveC50cyIsImltcG9ydCB7IFBkZkJyaWNrIH0gZnJvbSAnLi9wZGZfYnJpY2snO1xuaW1wb3J0IHsgRG9jQ29udHJvbGxlciwgSVJlY3QgfSBmcm9tICcuLi9kb2NfY29udHJvbGxlcic7XG5pbXBvcnQgeyBJUXVlc3Rpb24gfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5cbmV4cG9ydCBjbGFzcyBDdXN0b21CcmljayBleHRlbmRzIFBkZkJyaWNrIHtcblxuICAgIGNvbnN0cnVjdG9yKHF1ZXN0aW9uOiBJUXVlc3Rpb24sIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsIHByaXZhdGUgcmVuZGVyRnVuYzogKGRvYzogYW55LCBxdWVzdGlvbjogYW55LCB4TGVmdDogbnVtYmVyLCB5VG9wOiBudW1iZXIpID0+IElSZWN0KSB7XG4gICAgICAgIHN1cGVyKHF1ZXN0aW9uLCBjb250cm9sbGVyLCByZW5kZXJGdW5jKGNvbnRyb2xsZXIuaGVscGVyRG9jLCBxdWVzdGlvbiwgMCwgMCkpO1xuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgcmVuZGVySW50ZXJhY3RpdmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckZ1bmModGhpcy5jb250cm9sbGVyLmRvYywgdGhpcy5xdWVzdGlvbiwgdGhpcy54TGVmdCwgdGhpcy55VG9wKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9wZGZfcmVuZGVyL3BkZl9jdXN0b20udHMiLCJpbXBvcnQgeyBTdXJ2ZXlNb2RlbCwgUXVlc3Rpb24sIEV2ZW50QmFzZSB9IGZyb20gJ3N1cnZleS1jb3JlJztcbmltcG9ydCAqIGFzIFN1cnZleUNvcmUgZnJvbSAnc3VydmV5LWNvcmUnO1xuaW1wb3J0IHsgSURvY09wdGlvbnMsIERvY0NvbnRyb2xsZXIgfSBmcm9tICcuL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IEZsYXRTdXJ2ZXkgfSBmcm9tICcuL2ZsYXRfbGF5b3V0L2ZsYXRfc3VydmV5JztcbmltcG9ydCB7IFBhZ2VQYWNrZXIgfSBmcm9tICcuL3BhZ2VfbGF5b3V0L3BhZ2VfcGFja2VyJztcbmltcG9ydCB7IElQZGZCcmljayB9IGZyb20gJy4vcGRmX3JlbmRlci9wZGZfYnJpY2snO1xuaW1wb3J0IHsgRXZlbnRBc3luYywgRXZlbnRIYW5kbGVyIH0gZnJvbSAnLi9ldmVudF9oYW5kbGVyL2V2ZW50X2hhbmRsZXInO1xuaW1wb3J0IHsgRHJhd0NhbnZhcyB9IGZyb20gJy4vZXZlbnRfaGFuZGxlci9kcmF3X2NhbnZhcyc7XG5pbXBvcnQgeyBBZG9ybmVyc09wdGlvbnMsIEFkb3JuZXJzUGFuZWxPcHRpb25zLCBBZG9ybmVyc1BhZ2VPcHRpb25zIH0gZnJvbSAnLi9ldmVudF9oYW5kbGVyL2Fkb3JuZXJzJztcbmltcG9ydCB7IFN1cnZleUhlbHBlciB9IGZyb20gJy4vaGVscGVyX3N1cnZleSc7XG5cbi8qKlxuICogVGhlIGBTdXJ2ZXlQREZgIG9iamVjdCBlbmFibGVzIHlvdSB0byBleHBvcnQgeW91ciBzdXJ2ZXlzIGFuZCBmb3JtcyB0byBQREYgZG9jdW1lbnRzLlxuICpcbiAqIFtWaWV3IERlbW9dKGh0dHBzOi8vc3VydmV5anMuaW8vcGRmLWdlbmVyYXRvci9leGFtcGxlcy8gKGxpbmtTdHlsZSkpXG4gKi9cbmV4cG9ydCBjbGFzcyBTdXJ2ZXlQREYgZXh0ZW5kcyBTdXJ2ZXlNb2RlbCB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgY3VycmVudGx5U2F2aW5nOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBzdGF0aWMgc2F2ZVF1ZXVlOiBhbnlbXSA9IFtdO1xuICAgIHB1YmxpYyBvcHRpb25zOiBJRG9jT3B0aW9ucztcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoanNvbk9iamVjdDogYW55LCBvcHRpb25zPzogSURvY09wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoanNvbk9iamVjdCk7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBTdXJ2ZXlIZWxwZXIuY2xvbmUob3B0aW9ucyk7XG4gICAgfVxuICAgIHB1YmxpYyBnZXQgaGF2ZUNvbW1lcmNpYWxMaWNlbnNlKCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBmID0gU3VydmV5Q29yZS5oYXNMaWNlbnNlO1xuICAgICAgICByZXR1cm4gISFmICYmIGYoMik7XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgaGF2ZUNvbW1lcmNpYWxMaWNlbnNlKHZhbDogYm9vbGVhbikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICBjb25zb2xlLmVycm9yKCdBcyBvZiB2MS45LjEwMSwgdGhlIGhhdmVDb21tZXJjaWFsTGljZW5zZSBwcm9wZXJ0eSBpcyBub3Qgc3VwcG9ydGVkLiBUbyBhY3RpdmF0ZSB5b3VyIGxpY2Vuc2UsIHVzZSB0aGUgc2V0TGljZW5zZUtleShrZXkpIG1ldGhvZCBhcyBzaG93biBvbiB0aGUgZm9sbG93aW5nIHBhZ2U6IGh0dHBzOi8vc3VydmV5anMuaW8vcmVtb3ZlLWFsZXJ0LWJhbm5lcicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbiBldmVudCB0aGF0IGlzIHJhaXNlZCB3aGVuIFN1cnZleUpTIFBERiBHZW5lcmF0b3IgcmVuZGVycyBhIHBhZ2UgaGVhZGVyLiBIYW5kbGUgdGhpcyBldmVudCB0byBjdXN0b21pemUgdGhlIGhlYWRlci5cbiAgICAgKlxuICAgICAqIFBhcmFtZXRlcnM6XG4gICAgICpcbiAgICAgKiAtIGBzZW5kZXJgOiBgU3VydmV5UERGYFxcXG4gICAgICogQSBTdXJ2ZXlQREYgaW5zdGFuY2UgdGhhdCByYWlzZWQgdGhlIGV2ZW50LlxuICAgICAqXG4gICAgICogLSBgY2FudmFzYDogW2BEcmF3Q2FudmFzYF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9wZGYtZ2VuZXJhdG9yL2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9kcmF3Y2FudmFzKVxcXG4gICAgICogQW4gb2JqZWN0IHRoYXQgeW91IGNhbiB1c2UgdG8gZHJhdyB0ZXh0IGFuZCBpbWFnZXMgaW4gdGhlIHBhZ2UgaGVhZGVyLlxuICAgICAqXG4gICAgICogW1ZpZXcgRGVtb10oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9wZGYtZ2VuZXJhdG9yL2V4YW1wbGVzL2N1c3RvbWl6ZS1oZWFkZXItYW5kLWZvb3Rlci1vZi1wZGYtZm9ybS8gKGxpbmtTdHlsZSkpXG4gICAgICovXG4gICAgcHVibGljIG9uUmVuZGVySGVhZGVyOiBFdmVudEFzeW5jPFN1cnZleVBERiwgRHJhd0NhbnZhcz4gPVxuICAgICAgICBuZXcgRXZlbnRBc3luYzxTdXJ2ZXlQREYsIERyYXdDYW52YXM+KCk7XG4gICAgLyoqXG4gICAgICogQW4gZXZlbnQgdGhhdCBpcyByYWlzZWQgd2hlbiBTdXJ2ZXlKUyBQREYgR2VuZXJhdG9yIHJlbmRlcnMgYSBwYWdlIGZvb3Rlci4gSGFuZGxlIHRoaXMgZXZlbnQgdG8gY3VzdG9taXplIHRoZSBmb290ZXIuXG4gICAgICpcbiAgICAgKiBQYXJhbWV0ZXJzOlxuICAgICAqXG4gICAgICogLSBgc2VuZGVyYDogYFN1cnZleVBERmBcXFxuICAgICAqIEEgU3VydmV5UERGIGluc3RhbmNlIHRoYXQgcmFpc2VkIHRoZSBldmVudC5cbiAgICAgKlxuICAgICAqIC0gYGNhbnZhc2A6IFtgRHJhd0NhbnZhc2BdKGh0dHBzOi8vc3VydmV5anMuaW8vcGRmLWdlbmVyYXRvci9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvZHJhd2NhbnZhcylcXFxuICAgICAqIEFuIG9iamVjdCB0aGF0IHlvdSBjYW4gdXNlIHRvIGRyYXcgdGV4dCBhbmQgaW1hZ2VzIGluIHRoZSBwYWdlIGZvb3Rlci5cbiAgICAgKlxuICAgICAqIFtWaWV3IERlbW9dKGh0dHBzOi8vc3VydmV5anMuaW8vcGRmLWdlbmVyYXRvci9leGFtcGxlcy9jdXN0b21pemUtaGVhZGVyLWFuZC1mb290ZXItb2YtcGRmLWZvcm0vIChsaW5rU3R5bGUpKVxuICAgICAqL1xuICAgIHB1YmxpYyBvblJlbmRlckZvb3RlcjogRXZlbnRBc3luYzxTdXJ2ZXlQREYsIERyYXdDYW52YXM+ID1cbiAgICAgICAgbmV3IEV2ZW50QXN5bmM8U3VydmV5UERGLCBEcmF3Q2FudmFzPigpO1xuICAgIC8qKlxuICAgICAqIEFuIGV2ZW50IHRoYXQgaXMgcmFpc2VkIHdoZW4gU3VydmV5SlMgUERGIEdlbmVyYXRvciByZW5kZXJzIGEgc3VydmV5IHF1ZXN0aW9uLiBIYW5kbGUgdGhpcyBldmVudCB0byBjdXN0b21pemUgcXVlc3Rpb24gcmVuZGVyaW5nLlxuICAgICAqXG4gICAgICogUGFyYW1ldGVyczpcbiAgICAgKlxuICAgICAqIC0gYHNlbmRlcmA6IGBTdXJ2ZXlQREZgXFxcbiAgICAgKiBBIFN1cnZleVBERiBpbnN0YW5jZSB0aGF0IHJhaXNlZCB0aGUgZXZlbnQuXG4gICAgICpcbiAgICAgKiAtIGBvcHRpb25zLnF1ZXN0aW9uYDogW2BRdWVzdGlvbmBdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9xdWVzdGlvbilcXFxuICAgICAqIEEgc3VydmV5IHF1ZXN0aW9uIHRoYXQgaXMgYmVpbmcgcmVuZGVyZWQuXG4gICAgICpcbiAgICAgKiAtIGBvcHRpb25zLnBvaW50YDogYElQb2ludGBcXFxuICAgICAqIEFuIG9iamVjdCB3aXRoIGNvb3JkaW5hdGVzIG9mIHRoZSB0b3AtbGVmdCBjb3JuZXIgb2YgdGhlIGVsZW1lbnQgYmVpbmcgcmVuZGVyZWQuIFRoaXMgb2JqZWN0IGNvbnRhaW5zIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczogYHsgeExlZnQ6IG51bWJlciwgeVRvcDogbnVtYmVyIH1gLlxuICAgICAqXG4gICAgICogLSBgb3B0aW9ucy5icmlja3NgOiBbYFBkZkJyaWNrW11gXShodHRwczovL3N1cnZleWpzLmlvL3BkZi1nZW5lcmF0b3IvZG9jdW1lbnRhdGlvbi9hcGktcmVmZXJlbmNlL3BkZmJyaWNrKVxcXG4gICAgICogQW4gYXJyYXkgb2YgW2JyaWNrc10oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9wZGYtZ2VuZXJhdG9yL2RvY3VtZW50YXRpb24vY3VzdG9taXplLXN1cnZleS1xdWVzdGlvbi1yZW5kZXJpbmctaW4tcGRmLWZvcm0jY3VzdG9tLXJlbmRlcmluZykgdXNlZCB0byByZW5kZXIgdGhlIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiAtIGBvcHRpb25zLmNvbnRyb2xsZXJgOiBbYERvY0NvbnRyb2xsZXJgXShodHRwczovL3N1cnZleWpzLmlvL3BkZi1nZW5lcmF0b3IvZG9jdW1lbnRhdGlvbi9hcGktcmVmZXJlbmNlL2RvY2NvbnRyb2xsZXIpXFxcbiAgICAgKiBBbiBvYmplY3QgdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gbWFpbiBQREYgZG9jdW1lbnQgcHJvcGVydGllcyAoZm9udCwgbWFyZ2lucywgcGFnZSB3aWR0aCBhbmQgaGVpZ2h0KSBhbmQgYWxsb3dzIHlvdSB0byBtb2RpZnkgdGhlbS5cbiAgICAgKlxuICAgICAqIC0gYG9wdGlvbnMucmVwb3NpdG9yeWA6IGBGbGF0UmVwb3NpdG9yeWBcXFxuICAgICAqIEEgcmVwb3NpdG9yeSB3aXRoIGNsYXNzZXMgdGhhdCByZW5kZXIgZWxlbWVudHMgdG8gUERGLiBVc2UgaXRzIGBjcmVhdGVgIG1ldGhvZCBpZiB5b3UgbmVlZCB0byBjcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgYSByZW5kZXJpbmcgY2xhc3MuXG4gICAgICpcbiAgICAgKiBbVmlldyBEZW1vXShodHRwczovL3N1cnZleWpzLmlvL3BkZi1nZW5lcmF0b3IvZXhhbXBsZXMvaG93LXRvLXVzZS1hZG9ybmVycy1pbi1wZGYtZm9ybXMvIChsaW5rU3R5bGUpKVxuICAgICAqL1xuICAgIHB1YmxpYyBvblJlbmRlclF1ZXN0aW9uOiBFdmVudEFzeW5jPFN1cnZleVBERiwgQWRvcm5lcnNPcHRpb25zPiA9XG4gICAgICAgIG5ldyBFdmVudEFzeW5jPFN1cnZleVBERiwgQWRvcm5lcnNPcHRpb25zPigpO1xuICAgIC8qKlxuICAgICAqIEFuIGV2ZW50IHRoYXQgaXMgcmFpc2VkIHdoZW4gU3VydmV5SlMgUERGIEdlbmVyYXRvciByZW5kZXJzIGEgcGFuZWwuIEhhbmRsZSB0aGlzIGV2ZW50IHRvIGN1c3RvbWl6ZSBwYW5lbCByZW5kZXJpbmcuXG4gICAgICpcbiAgICAgKiBQYXJhbWV0ZXJzOlxuICAgICAqXG4gICAgICogLSBgc2VuZGVyYDogYFN1cnZleVBERmBcXFxuICAgICAqIEEgU3VydmV5UERGIGluc3RhbmNlIHRoYXQgcmFpc2VkIHRoZSBldmVudC5cbiAgICAgKlxuICAgICAqIC0gYG9wdGlvbnMucGFuZWxgOiBbYFBhbmVsTW9kZWxgXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvcGFuZWwtbW9kZWwpXFxcbiAgICAgKiBBIHBhbmVsIHRoYXQgaXMgYmVpbmcgcmVuZGVyZWQuXG4gICAgICpcbiAgICAgKiAtIGBvcHRpb25zLnBvaW50YDogYElQb2ludGBcXFxuICAgICAqIEFuIG9iamVjdCB3aXRoIGNvb3JkaW5hdGVzIG9mIHRoZSB0b3AtbGVmdCBjb3JuZXIgb2YgdGhlIGVsZW1lbnQgYmVpbmcgcmVuZGVyZWQuIFRoaXMgb2JqZWN0IGNvbnRhaW5zIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczogYHsgeExlZnQ6IG51bWJlciwgeVRvcDogbnVtYmVyIH1gLlxuICAgICAqXG4gICAgICogLSBgb3B0aW9ucy5icmlja3NgOiBbYFBkZkJyaWNrW11gXShodHRwczovL3N1cnZleWpzLmlvL3BkZi1nZW5lcmF0b3IvZG9jdW1lbnRhdGlvbi9hcGktcmVmZXJlbmNlL3BkZmJyaWNrKVxcXG4gICAgICogQW4gYXJyYXkgb2YgW2JyaWNrc10oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9wZGYtZ2VuZXJhdG9yL2RvY3VtZW50YXRpb24vY3VzdG9taXplLXN1cnZleS1xdWVzdGlvbi1yZW5kZXJpbmctaW4tcGRmLWZvcm0jY3VzdG9tLXJlbmRlcmluZykgdXNlZCB0byByZW5kZXIgdGhlIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiAtIGBvcHRpb25zLmNvbnRyb2xsZXJgOiBbYERvY0NvbnRyb2xsZXJgXShodHRwczovL3N1cnZleWpzLmlvL3BkZi1nZW5lcmF0b3IvZG9jdW1lbnRhdGlvbi9hcGktcmVmZXJlbmNlL2RvY2NvbnRyb2xsZXIpXFxcbiAgICAgKiBBbiBvYmplY3QgdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gbWFpbiBQREYgZG9jdW1lbnQgcHJvcGVydGllcyAoZm9udCwgbWFyZ2lucywgcGFnZSB3aWR0aCBhbmQgaGVpZ2h0KSBhbmQgYWxsb3dzIHlvdSB0byBtb2RpZnkgdGhlbS5cbiAgICAgKlxuICAgICAqIC0gYG9wdGlvbnMucmVwb3NpdG9yeWA6IGBGbGF0UmVwb3NpdG9yeWBcXFxuICAgICAqIEEgcmVwb3NpdG9yeSB3aXRoIGNsYXNzZXMgdGhhdCByZW5kZXIgZWxlbWVudHMgdG8gUERGLiBVc2UgaXRzIGBjcmVhdGVgIG1ldGhvZCBpZiB5b3UgbmVlZCB0byBjcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgYSByZW5kZXJpbmcgY2xhc3MuXG4gICAgICpcbiAgICAgKiBbVmlldyBEZW1vXShodHRwczovL3N1cnZleWpzLmlvL3BkZi1nZW5lcmF0b3IvZXhhbXBsZXMvaG93LXRvLXVzZS1hZG9ybmVycy1pbi1wZGYtZm9ybXMvIChsaW5rU3R5bGUpKVxuICAgICAqL1xuICAgIHB1YmxpYyBvblJlbmRlclBhbmVsOiBFdmVudEFzeW5jPFN1cnZleVBERiwgQWRvcm5lcnNQYW5lbE9wdGlvbnM+ID1cbiAgICAgICAgbmV3IEV2ZW50QXN5bmM8U3VydmV5UERGLCBBZG9ybmVyc1BhbmVsT3B0aW9ucz4oKTtcbiAgICAvKipcbiAgICAgKiBBbiBldmVudCB0aGF0IGlzIHJhaXNlZCB3aGVuIFN1cnZleUpTIFBERiBHZW5lcmF0b3IgcmVuZGVycyBhIHBhZ2UuIEhhbmRsZSB0aGlzIGV2ZW50IHRvIGN1c3RvbWl6ZSBwYWdlIHJlbmRlcmluZy5cbiAgICAgKlxuICAgICAqIFBhcmFtZXRlcnM6XG4gICAgICpcbiAgICAgKiAtIGBzZW5kZXJgOiBgU3VydmV5UERGYFxcXG4gICAgICogQSBTdXJ2ZXlQREYgaW5zdGFuY2UgdGhhdCByYWlzZWQgdGhlIGV2ZW50LlxuICAgICAqXG4gICAgICogLSBgb3B0aW9ucy5wYWdlYDogW2BQYWdlTW9kZWxgXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvcGFnZS1tb2RlbClcXFxuICAgICAqIEEgcGFnZSB0aGF0IGlzIGJlaW5nIHJlbmRlcmVkLlxuICAgICAqXG4gICAgICogLSBgb3B0aW9ucy5wb2ludGA6IGBJUG9pbnRgXFxcbiAgICAgKiBBbiBvYmplY3Qgd2l0aCBjb29yZGluYXRlcyBvZiB0aGUgdG9wLWxlZnQgY29ybmVyIG9mIHRoZSBlbGVtZW50IGJlaW5nIHJlbmRlcmVkLiBUaGlzIG9iamVjdCBjb250YWlucyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6IGB7IHhMZWZ0OiBudW1iZXIsIHlUb3A6IG51bWJlciB9YC5cbiAgICAgKlxuICAgICAqIC0gYG9wdGlvbnMuYnJpY2tzYDogW2BQZGZCcmlja1tdYF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9wZGYtZ2VuZXJhdG9yL2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9wZGZicmljaylcXFxuICAgICAqIEFuIGFycmF5IG9mIFticmlja3NdKGh0dHBzOi8vc3VydmV5anMuaW8vcGRmLWdlbmVyYXRvci9kb2N1bWVudGF0aW9uL2N1c3RvbWl6ZS1zdXJ2ZXktcXVlc3Rpb24tcmVuZGVyaW5nLWluLXBkZi1mb3JtI2N1c3RvbS1yZW5kZXJpbmcpIHVzZWQgdG8gcmVuZGVyIHRoZSBlbGVtZW50LlxuICAgICAqXG4gICAgICogLSBgb3B0aW9ucy5jb250cm9sbGVyYDogW2BEb2NDb250cm9sbGVyYF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9wZGYtZ2VuZXJhdG9yL2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9kb2Njb250cm9sbGVyKVxcXG4gICAgICogQW4gb2JqZWN0IHRoYXQgcHJvdmlkZXMgYWNjZXNzIHRvIG1haW4gUERGIGRvY3VtZW50IHByb3BlcnRpZXMgKGZvbnQsIG1hcmdpbnMsIHBhZ2Ugd2lkdGggYW5kIGhlaWdodCkgYW5kIGFsbG93cyB5b3UgdG8gbW9kaWZ5IHRoZW0uXG4gICAgICpcbiAgICAgKiAtIGBvcHRpb25zLnJlcG9zaXRvcnlgOiBgRmxhdFJlcG9zaXRvcnlgXFxcbiAgICAgKiBBIHJlcG9zaXRvcnkgd2l0aCBjbGFzc2VzIHRoYXQgcmVuZGVyIGVsZW1lbnRzIHRvIFBERi4gVXNlIGl0cyBgY3JlYXRlYCBtZXRob2QgaWYgeW91IG5lZWQgdG8gY3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIGEgcmVuZGVyaW5nIGNsYXNzLlxuICAgICAqXG4gICAgICogW1ZpZXcgRGVtb10oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9wZGYtZ2VuZXJhdG9yL2V4YW1wbGVzL2hvdy10by11c2UtYWRvcm5lcnMtaW4tcGRmLWZvcm1zLyAobGlua1N0eWxlKSlcbiAgICAgKi9cbiAgICBwdWJsaWMgb25SZW5kZXJQYWdlOiBFdmVudEFzeW5jPFN1cnZleVBERiwgQWRvcm5lcnNQYWdlT3B0aW9ucz4gPVxuICAgICAgICBuZXcgRXZlbnRBc3luYzxTdXJ2ZXlQREYsIEFkb3JuZXJzUGFnZU9wdGlvbnM+KCk7XG5cbiAgICBwdWJsaWMgb25Eb2NDb250cm9sbGVyQ3JlYXRlZDogRXZlbnRCYXNlPFN1cnZleVBERiwgeyBjb250cm9sbGVyOiBEb2NDb250cm9sbGVyIH0+ID0gbmV3IEV2ZW50QmFzZTxTdXJ2ZXlQREYsIHtjb250cm9sbGVyOiBEb2NDb250cm9sbGVyfT4oKTtcblxuICAgIHB1YmxpYyBvblJlbmRlckNoZWNrSXRlbUFjcm9mb3JtOiBFdmVudEFzeW5jPFN1cnZleVBERiwgYW55PiA9XG4gICAgICAgIG5ldyBFdmVudEFzeW5jPFN1cnZleVBERiwgYW55PigpO1xuXG4gICAgcHVibGljIG9uUmVuZGVyUmFkaW9Hcm91cFdyYXBBY3JvZm9ybTogRXZlbnRBc3luYzxTdXJ2ZXlQREYsIGFueT4gPVxuICAgIG5ldyBFdmVudEFzeW5jPFN1cnZleVBERiwgYW55PigpO1xuXG4gICAgcHVibGljIG9uUmVuZGVyUmFkaW9JdGVtQWNyb2Zvcm06IEV2ZW50QXN5bmM8U3VydmV5UERGLCBhbnk+ID1cbiAgICBuZXcgRXZlbnRBc3luYzxTdXJ2ZXlQREYsIGFueT4oKTtcblxuICAgIHByaXZhdGUgd2FpdEZvclF1ZXN0aW9uSXNSZWFkeShxdWVzdGlvbjogUXVlc3Rpb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGlmIChxdWVzdGlvbi5pc1JlYWR5KSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhZHlDYWxsYmFjazogKHNlbmRlcjogUXVlc3Rpb24sIG9wdGlvbnM6IGFueSkgPT4gdm9pZCA9XG4gICAgICAgICAgICAgICAgKF8sIG9wdGlvbnM6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5pc1JlYWR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbi5vblJlYWR5Q2hhbmdlZC5yZW1vdmUocmVhZHlDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHF1ZXN0aW9uLm9uUmVhZHlDaGFuZ2VkLmFkZChyZWFkeUNhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHByaXZhdGUgYXN5bmMgd2FpdEZvckNvcmVJc1JlYWR5KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBmb3IgKGNvbnN0IHF1ZXN0aW9uIG9mIHRoaXMuZ2V0QWxsUXVlc3Rpb25zKCkpIHtcbiAgICAgICAgICAgIGlmICghISg8YW55PnF1ZXN0aW9uKS5jb250ZW50UGFuZWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0OiBRdWVzdGlvbltdID0gW107XG4gICAgICAgICAgICAgICAgKDxhbnk+cXVlc3Rpb24pLmNvbnRlbnRQYW5lbC5hZGRRdWVzdGlvbnNUb0xpc3QobGlzdCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpbm5lclF1ZXN0aW9uIG9mIGxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy53YWl0Rm9yUXVlc3Rpb25Jc1JlYWR5KGlubmVyUXVlc3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgYXdhaXQgdGhpcy53YWl0Rm9yUXVlc3Rpb25Jc1JlYWR5KFxuICAgICAgICAgICAgICAgIFN1cnZleUhlbHBlci5nZXRDb250ZW50UXVlc3Rpb24oPFF1ZXN0aW9uPnF1ZXN0aW9uKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHVibGljIGdldFVwZGF0ZWRDaGVja0l0ZW1BY3JvZm9ybU9wdGlvbnMob3B0aW9uczogYW55KTogdm9pZCB7XG4gICAgICAgIHRoaXMub25SZW5kZXJDaGVja0l0ZW1BY3JvZm9ybS5maXJlKHRoaXMsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0VXBkYXRlZFJhZGlvR3JvdXBXcmFwT3B0aW9ucyhvcHRpb25zOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vblJlbmRlclJhZGlvR3JvdXBXcmFwQWNyb2Zvcm0uZmlyZSh0aGlzLCBvcHRpb25zKTtcbiAgICB9XG4gICAgcHVibGljIGdldFVwZGF0ZWRSYWRpb0l0ZW1BY3JvZm9ybU9wdGlvbnMob3B0aW9uczogYW55KTogdm9pZCB7XG4gICAgICAgIHRoaXMub25SZW5kZXJSYWRpb0l0ZW1BY3JvZm9ybS5maXJlKHRoaXMsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBwcml2YXRlIGNvcnJlY3RCcmlja3NQb3NpdGlvbihjb250cm9sbGVyOiBEb2NDb250cm9sbGVyLCBmbGF0czogSVBkZkJyaWNrW11bXSkge1xuICAgICAgICBpZihjb250cm9sbGVyLmlzUlRMKSB7XG4gICAgICAgICAgICBmbGF0cy5mb3JFYWNoKGZsYXRzQXJyID0+IHtcbiAgICAgICAgICAgICAgICBmbGF0c0Fyci5mb3JFYWNoKGZsYXQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBmbGF0LnRyYW5zbGF0ZVgoKHhMZWZ0OiBudW1iZXIsIHhSaWdodDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaGlmdFdpZHRoID0gY29udHJvbGxlci5wYXBlcldpZHRoIC0geExlZnQgLSB4UmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB4TGVmdDogeExlZnQgKyBzaGlmdFdpZHRoLCB4UmlnaHQ6IHhSaWdodCArIHNoaWZ0V2lkdGggfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm90ZWN0ZWQgYXN5bmMgcmVuZGVyU3VydmV5KGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy52aXNpYmxlUGFnZXMuZm9yRWFjaChwYWdlID0+IHBhZ2Uub25GaXJzdFJlbmRlcmluZygpKTtcbiAgICAgICAgYXdhaXQgdGhpcy53YWl0Rm9yQ29yZUlzUmVhZHkoKTtcbiAgICAgICAgY29uc3QgZmxhdHM6IElQZGZCcmlja1tdW10gPSBhd2FpdCBGbGF0U3VydmV5LmdlbmVyYXRlRmxhdHModGhpcywgY29udHJvbGxlcik7XG4gICAgICAgIHRoaXMuY29ycmVjdEJyaWNrc1Bvc2l0aW9uKGNvbnRyb2xsZXIsIGZsYXRzKTtcbiAgICAgICAgY29uc3QgcGFja3M6IElQZGZCcmlja1tdW10gPSBQYWdlUGFja2VyLnBhY2soZmxhdHMsIGNvbnRyb2xsZXIpO1xuICAgICAgICBhd2FpdCBFdmVudEhhbmRsZXIucHJvY2Vzc19oZWFkZXJfZXZlbnRzKHRoaXMsIGNvbnRyb2xsZXIsIHBhY2tzKTtcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHBhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqOiBudW1iZXIgPSAwOyBqIDwgcGFja3NbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udHJvbGxlci5nZXROdW1iZXJPZlBhZ2VzKCkgPT09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5hZGRQYWdlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuc2V0UGFnZShpKTtcbiAgICAgICAgICAgICAgICAvL2dpem1vcyBicmlja3MgYm9yZGVycyBmb3IgZGVidWdcbiAgICAgICAgICAgICAgICAvLyBwYWNrc1tpXVtqXS51bmZvbGQoKS5mb3JFYWNoKChyZWN0OiBJUGRmQnJpY2spID0+IHtcbiAgICAgICAgICAgICAgICAvLyAgICAgY29udHJvbGxlci5kb2Muc2V0RHJhd0NvbG9yKCdncmVlbicpO1xuICAgICAgICAgICAgICAgIC8vICAgICBjb250cm9sbGVyLmRvYy5yZWN0KC4uLlN1cnZleUhlbHBlci5jcmVhdGVBY3JvZm9ybVJlY3QocmVjdCkpO1xuICAgICAgICAgICAgICAgIC8vICAgICBjb250cm9sbGVyLmRvYy5zZXREcmF3Q29sb3IoJ2JsYWNrJyk7XG4gICAgICAgICAgICAgICAgLy8gICB9XG4gICAgICAgICAgICAgICAgLy8gKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBwYWNrc1tpXVtqXS5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbiBhc3luY2hyb25vdXMgbWV0aG9kIHRoYXQgc3RhcnRzIGRvd25sb2FkIG9mIHRoZSBnZW5lcmF0ZWQgUERGIGZpbGUgaW4gdGhlIHdlYiBicm93c2VyLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbGVOYW1lICooT3B0aW9uYWwpKiBBIGZpbGUgbmFtZSB3aXRoIHRoZSBcIi5wZGZcIiBleHRlbnNpb24uIERlZmF1bHQgdmFsdWU6IGBcInN1cnZleV9yZXN1bHQucGRmXCJgLlxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBzYXZlKGZpbGVOYW1lOiBzdHJpbmcgPSAnc3VydmV5X3Jlc3VsdC5wZGYnKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgaWYoIVN1cnZleVBERi5jdXJyZW50bHlTYXZpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIgPSBuZXcgRG9jQ29udHJvbGxlcih0aGlzLm9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5vbkRvY0NvbnRyb2xsZXJDcmVhdGVkLmZpcmUodGhpcywgeyBjb250cm9sbGVyOiBjb250cm9sbGVyIH0pO1xuICAgICAgICAgICAgU3VydmV5UERGLmN1cnJlbnRseVNhdmluZyA9IHRydWU7XG4gICAgICAgICAgICBTdXJ2ZXlIZWxwZXIuZml4Rm9udChjb250cm9sbGVyKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyU3VydmV5KGNvbnRyb2xsZXIpO1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IGNvbnRyb2xsZXIuZG9jLnNhdmUoZmlsZU5hbWUsIHsgcmV0dXJuUHJvbWlzZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIHByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgU3VydmV5UERGLmN1cnJlbnRseVNhdmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNhdmVGdW5jID0gU3VydmV5UERGLnNhdmVRdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIGlmKCEhc2F2ZUZ1bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2F2ZUZ1bmMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU3VydmV5UERGLnNhdmVRdWV1ZS5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmUoZmlsZU5hbWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQW4gYXN5bmNocm9ub3VzIG1ldGhvZCB0aGF0IGFsbG93cyB5b3UgdG8gZ2V0IFBERiBjb250ZW50IGluIGRpZmZlcmVudCBmb3JtYXRzLlxuICAgICAqXG4gICAgICogW1ZpZXcgRGVtb10oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9wZGYtZ2VuZXJhdG9yL2V4YW1wbGVzL2NvbnZlcnQtcGRmLWZvcm0tYmxvYi1iYXNlNjQtcmF3LXBkZi1qYXZhc2NyaXB0LyAobGlua1N0eWxlKSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB0eXBlICooT3B0aW9uYWwpKiBPbmUgb2YgYFwiYmxvYlwiYCwgYFwiYmxvYnVybFwiYCwgYFwiZGF0YXVybHN0cmluZ1wiYC4gRG8gbm90IHNwZWNpZnkgdGhpcyBwYXJhbWV0ZXIgaWYgeW91IHdhbnQgdG8gZ2V0IHJhdyBQREYgY29udGVudCBhcyBhIHN0cmluZyB2YWx1ZS5cbiAgICAgKlxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyByYXcodHlwZT86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIgPSBuZXcgRG9jQ29udHJvbGxlcih0aGlzLm9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9uRG9jQ29udHJvbGxlckNyZWF0ZWQuZmlyZSh0aGlzLCB7IGNvbnRyb2xsZXI6IGNvbnRyb2xsZXIgfSk7XG4gICAgICAgIFN1cnZleUhlbHBlci5maXhGb250KGNvbnRyb2xsZXIpO1xuICAgICAgICBhd2FpdCB0aGlzLnJlbmRlclN1cnZleShjb250cm9sbGVyKTtcbiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuZG9jLm91dHB1dCh0eXBlKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc3VydmV5LnRzIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8vIEFuIGF1Z21lbnRlZCBBVkwgVHJlZSB3aGVyZSBlYWNoIG5vZGUgbWFpbnRhaW5zIGEgbGlzdCBvZiByZWNvcmRzIGFuZCB0aGVpciBzZWFyY2ggaW50ZXJ2YWxzLlxyXG4vLyBSZWNvcmQgaXMgY29tcG9zZWQgb2YgYW4gaW50ZXJ2YWwgYW5kIGl0cyB1bmRlcmx5aW5nIGRhdGEsIHNlbnQgYnkgYSBjbGllbnQuIFRoaXMgYWxsb3dzIHRoZVxyXG4vLyBpbnRlcnZhbCB0cmVlIHRvIGhhdmUgdGhlIHNhbWUgaW50ZXJ2YWwgaW5zZXJ0ZWQgbXVsdGlwbGUgdGltZXMsIGFzIGxvbmcgaXRzIGRhdGEgaXMgZGlmZmVyZW50LlxyXG4vLyBCb3RoIGluc2VydGlvbiBhbmQgZGVsZXRpb24gcmVxdWlyZSBPKGxvZyBuKSB0aW1lLiBTZWFyY2hpbmcgcmVxdWlyZXMgTyhrKmxvZ24pIHRpbWUsIHdoZXJlIGBrYFxyXG4vLyBpcyB0aGUgbnVtYmVyIG9mIGludGVydmFscyBpbiB0aGUgb3V0cHV0IGxpc3QuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGlzU2FtZSA9IHJlcXVpcmUoXCJzaGFsbG93ZXF1YWxcIik7XHJcbmZ1bmN0aW9uIGhlaWdodChub2RlKSB7XHJcbiAgICBpZiAobm9kZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG5vZGUuaGVpZ2h0O1xyXG4gICAgfVxyXG59XHJcbnZhciBOb2RlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTm9kZShpbnRlcnZhbFRyZWUsIHJlY29yZCkge1xyXG4gICAgICAgIHRoaXMuaW50ZXJ2YWxUcmVlID0gaW50ZXJ2YWxUcmVlO1xyXG4gICAgICAgIHRoaXMucmVjb3JkcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMDtcclxuICAgICAgICB0aGlzLmtleSA9IHJlY29yZC5sb3c7XHJcbiAgICAgICAgdGhpcy5tYXggPSByZWNvcmQuaGlnaDtcclxuICAgICAgICAvLyBTYXZlIHRoZSBhcnJheSBvZiBhbGwgcmVjb3JkcyB3aXRoIHRoZSBzYW1lIGtleSBmb3IgdGhpcyBub2RlXHJcbiAgICAgICAgdGhpcy5yZWNvcmRzLnB1c2gocmVjb3JkKTtcclxuICAgIH1cclxuICAgIC8vIEdldHMgdGhlIGhpZ2hlc3QgcmVjb3JkLmhpZ2ggdmFsdWUgZm9yIHRoaXMgbm9kZVxyXG4gICAgTm9kZS5wcm90b3R5cGUuZ2V0Tm9kZUhpZ2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGhpZ2ggPSB0aGlzLnJlY29yZHNbMF0uaGlnaDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRoaXMucmVjb3Jkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZWNvcmRzW2ldLmhpZ2ggPiBoaWdoKSB7XHJcbiAgICAgICAgICAgICAgICBoaWdoID0gdGhpcy5yZWNvcmRzW2ldLmhpZ2g7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhpZ2g7XHJcbiAgICB9O1xyXG4gICAgLy8gVXBkYXRlcyBoZWlnaHQgdmFsdWUgb2YgdGhlIG5vZGUuIENhbGxlZCBkdXJpbmcgaW5zZXJ0aW9uLCByZWJhbGFuY2UsIHJlbW92YWxcclxuICAgIE5vZGUucHJvdG90eXBlLnVwZGF0ZUhlaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IE1hdGgubWF4KGhlaWdodCh0aGlzLmxlZnQpLCBoZWlnaHQodGhpcy5yaWdodCkpICsgMTtcclxuICAgIH07XHJcbiAgICAvLyBVcGRhdGVzIHRoZSBtYXggdmFsdWUgb2YgYWxsIHRoZSBwYXJlbnRzIGFmdGVyIGluc2VydGluZyBpbnRvIGFscmVhZHkgZXhpc3Rpbmcgbm9kZSwgYXMgd2VsbCBhc1xyXG4gICAgLy8gcmVtb3ZpbmcgdGhlIG5vZGUgY29tcGxldGVseSBvciByZW1vdmluZyB0aGUgcmVjb3JkIG9mIGFuIGFscmVhZHkgZXhpc3Rpbmcgbm9kZS4gU3RhcnRzIHdpdGhcclxuICAgIC8vIHRoZSBwYXJlbnQgb2YgYW4gYWZmZWN0ZWQgbm9kZSBhbmQgYnViYmxlcyB1cCB0byByb290XHJcbiAgICBOb2RlLnByb3RvdHlwZS51cGRhdGVNYXhPZlBhcmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0aGlzSGlnaCA9IHRoaXMuZ2V0Tm9kZUhpZ2goKTtcclxuICAgICAgICBpZiAodGhpcy5sZWZ0ICE9PSB1bmRlZmluZWQgJiYgdGhpcy5yaWdodCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4ID0gTWF0aC5tYXgoTWF0aC5tYXgodGhpcy5sZWZ0Lm1heCwgdGhpcy5yaWdodC5tYXgpLCB0aGlzSGlnaCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMubGVmdCAhPT0gdW5kZWZpbmVkICYmIHRoaXMucmlnaHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm1heCA9IE1hdGgubWF4KHRoaXMubGVmdC5tYXgsIHRoaXNIaWdoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5sZWZ0ID09PSB1bmRlZmluZWQgJiYgdGhpcy5yaWdodCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4ID0gTWF0aC5tYXgodGhpcy5yaWdodC5tYXgsIHRoaXNIaWdoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4ID0gdGhpc0hpZ2g7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBhcmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudC51cGRhdGVNYXhPZlBhcmVudHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLypcclxuICAgIExlZnQtTGVmdCBjYXNlOlxyXG4gIFxyXG4gICAgICAgICAgIHogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlcclxuICAgICAgICAgIC8gXFwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8gICBcXFxyXG4gICAgICAgICB5ICAgVDQgICAgICBSaWdodCBSb3RhdGUgKHopICAgICAgICAgIHggICAgIHpcclxuICAgICAgICAvIFxcICAgICAgICAgIC0gLSAtIC0gLSAtIC0gLSAtPiAgICAgICAvIFxcICAgLyBcXFxyXG4gICAgICAgeCAgIFQzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUMSBUMiBUMyBUNFxyXG4gICAgICAvIFxcXHJcbiAgICBUMSAgIFQyXHJcbiAgXHJcbiAgICBMZWZ0LVJpZ2h0IGNhc2U6XHJcbiAgXHJcbiAgICAgICAgIHogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeiAgICAgICAgICAgICAgICAgICAgICAgICAgIHhcclxuICAgICAgICAvIFxcICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIFxcICAgICAgICAgICAgICAgICAgICAgICAgLyAgIFxcXHJcbiAgICAgICB5ICAgVDQgIExlZnQgUm90YXRlICh5KSAgICAgICAgIHggIFQ0ICBSaWdodCBSb3RhdGUoeikgICAgIHkgICAgIHpcclxuICAgICAgLyBcXCAgICAgIC0gLSAtIC0gLSAtIC0gLSAtPiAgICAgLyBcXCAgICAgIC0gLSAtIC0gLSAtIC0gLT4gIC8gXFwgICAvIFxcXHJcbiAgICBUMSAgIHggICAgICAgICAgICAgICAgICAgICAgICAgICB5ICBUMyAgICAgICAgICAgICAgICAgICAgICBUMSBUMiBUMyBUNFxyXG4gICAgICAgIC8gXFwgICAgICAgICAgICAgICAgICAgICAgICAgLyBcXFxyXG4gICAgICBUMiAgIFQzICAgICAgICAgICAgICAgICAgICAgIFQxIFQyXHJcbiAgICAqL1xyXG4gICAgLy8gSGFuZGxlcyBMZWZ0LUxlZnQgY2FzZSBhbmQgTGVmdC1SaWdodCBjYXNlIGFmdGVyIHJlYmFsYW5jaW5nIEFWTCB0cmVlXHJcbiAgICBOb2RlLnByb3RvdHlwZS5fdXBkYXRlTWF4QWZ0ZXJSaWdodFJvdGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XHJcbiAgICAgICAgdmFyIGxlZnQgPSBwYXJlbnQubGVmdDtcclxuICAgICAgICAvLyBVcGRhdGUgbWF4IG9mIGxlZnQgc2libGluZyAoeCBpbiBmaXJzdCBjYXNlLCB5IGluIHNlY29uZClcclxuICAgICAgICB2YXIgdGhpc1BhcmVudExlZnRIaWdoID0gbGVmdC5nZXROb2RlSGlnaCgpO1xyXG4gICAgICAgIGlmIChsZWZ0LmxlZnQgPT09IHVuZGVmaW5lZCAmJiBsZWZ0LnJpZ2h0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGVmdC5tYXggPSBNYXRoLm1heCh0aGlzUGFyZW50TGVmdEhpZ2gsIGxlZnQucmlnaHQubWF4KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobGVmdC5sZWZ0ICE9PSB1bmRlZmluZWQgJiYgbGVmdC5yaWdodCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxlZnQubWF4ID0gTWF0aC5tYXgodGhpc1BhcmVudExlZnRIaWdoLCBsZWZ0LmxlZnQubWF4KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobGVmdC5sZWZ0ID09PSB1bmRlZmluZWQgJiYgbGVmdC5yaWdodCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxlZnQubWF4ID0gdGhpc1BhcmVudExlZnRIaWdoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbGVmdC5tYXggPSBNYXRoLm1heChNYXRoLm1heChsZWZ0LmxlZnQubWF4LCBsZWZ0LnJpZ2h0Lm1heCksIHRoaXNQYXJlbnRMZWZ0SGlnaCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFVwZGF0ZSBtYXggb2YgaXRzZWxmICh6KVxyXG4gICAgICAgIHZhciB0aGlzSGlnaCA9IHRoaXMuZ2V0Tm9kZUhpZ2goKTtcclxuICAgICAgICBpZiAodGhpcy5sZWZ0ID09PSB1bmRlZmluZWQgJiYgdGhpcy5yaWdodCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4ID0gTWF0aC5tYXgodGhpc0hpZ2gsIHRoaXMucmlnaHQubWF4KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5sZWZ0ICE9PSB1bmRlZmluZWQgJiYgdGhpcy5yaWdodCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4ID0gTWF0aC5tYXgodGhpc0hpZ2gsIHRoaXMubGVmdC5tYXgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmxlZnQgPT09IHVuZGVmaW5lZCAmJiB0aGlzLnJpZ2h0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXggPSB0aGlzSGlnaDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4ID0gTWF0aC5tYXgoTWF0aC5tYXgodGhpcy5sZWZ0Lm1heCwgdGhpcy5yaWdodC5tYXgpLCB0aGlzSGlnaCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFVwZGF0ZSBtYXggb2YgcGFyZW50ICh5IGluIGZpcnN0IGNhc2UsIHggaW4gc2Vjb25kKVxyXG4gICAgICAgIHBhcmVudC5tYXggPSBNYXRoLm1heChNYXRoLm1heChwYXJlbnQubGVmdC5tYXgsIHBhcmVudC5yaWdodC5tYXgpLCBwYXJlbnQuZ2V0Tm9kZUhpZ2goKSk7XHJcbiAgICB9O1xyXG4gICAgLypcclxuICAgIFJpZ2h0LVJpZ2h0IGNhc2U6XHJcbiAgXHJcbiAgICAgIHogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeVxyXG4gICAgIC8gXFwgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyAgIFxcXHJcbiAgICBUMSAgeSAgICAgTGVmdCBSb3RhdGUoeikgICAgICAgeiAgICAgeFxyXG4gICAgICAgLyBcXCAgIC0gLSAtIC0gLSAtIC0gLT4gICAgIC8gXFwgICAvIFxcXHJcbiAgICAgIFQyICB4ICAgICAgICAgICAgICAgICAgICAgIFQxIFQyIFQzIFQ0XHJcbiAgICAgICAgIC8gXFxcclxuICAgICAgICBUMyBUNFxyXG4gIFxyXG4gICAgUmlnaHQtTGVmdCBjYXNlOlxyXG4gIFxyXG4gICAgICAgeiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhcclxuICAgICAgLyBcXCAgICAgICAgICAgICAgICAgICAgICAgICAgLyBcXCAgICAgICAgICAgICAgICAgICAgICAgICAvICAgXFxcclxuICAgICBUMSAgeSAgIFJpZ2h0IFJvdGF0ZSAoeSkgICAgIFQxICB4ICAgICAgTGVmdCBSb3RhdGUoeikgICB6ICAgICB5XHJcbiAgICAgICAgLyBcXCAgLSAtIC0gLSAtIC0gLSAtIC0+ICAgICAgLyBcXCAgIC0gLSAtIC0gLSAtIC0gLT4gIC8gXFwgICAvIFxcXHJcbiAgICAgICB4ICBUNCAgICAgICAgICAgICAgICAgICAgICAgIFQyICB5ICAgICAgICAgICAgICAgICAgIFQxIFQyIFQzIFQ0XHJcbiAgICAgIC8gXFwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIFxcXHJcbiAgICBUMiAgIFQzICAgICAgICAgICAgICAgICAgICAgICAgICAgVDMgVDRcclxuICAgICovXHJcbiAgICAvLyBIYW5kbGVzIFJpZ2h0LVJpZ2h0IGNhc2UgYW5kIFJpZ2h0LUxlZnQgY2FzZSBpbiByZWJhbGFuY2luZyBBVkwgdHJlZVxyXG4gICAgTm9kZS5wcm90b3R5cGUuX3VwZGF0ZU1heEFmdGVyTGVmdFJvdGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XHJcbiAgICAgICAgdmFyIHJpZ2h0ID0gcGFyZW50LnJpZ2h0O1xyXG4gICAgICAgIC8vIFVwZGF0ZSBtYXggb2YgcmlnaHQgc2libGluZyAoeCBpbiBmaXJzdCBjYXNlLCB5IGluIHNlY29uZClcclxuICAgICAgICB2YXIgdGhpc1BhcmVudFJpZ2h0SGlnaCA9IHJpZ2h0LmdldE5vZGVIaWdoKCk7XHJcbiAgICAgICAgaWYgKHJpZ2h0LmxlZnQgPT09IHVuZGVmaW5lZCAmJiByaWdodC5yaWdodCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJpZ2h0Lm1heCA9IE1hdGgubWF4KHRoaXNQYXJlbnRSaWdodEhpZ2gsIHJpZ2h0LnJpZ2h0Lm1heCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHJpZ2h0LmxlZnQgIT09IHVuZGVmaW5lZCAmJiByaWdodC5yaWdodCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJpZ2h0Lm1heCA9IE1hdGgubWF4KHRoaXNQYXJlbnRSaWdodEhpZ2gsIHJpZ2h0LmxlZnQubWF4KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocmlnaHQubGVmdCA9PT0gdW5kZWZpbmVkICYmIHJpZ2h0LnJpZ2h0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmlnaHQubWF4ID0gdGhpc1BhcmVudFJpZ2h0SGlnaDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJpZ2h0Lm1heCA9IE1hdGgubWF4KE1hdGgubWF4KHJpZ2h0LmxlZnQubWF4LCByaWdodC5yaWdodC5tYXgpLCB0aGlzUGFyZW50UmlnaHRIaWdoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVXBkYXRlIG1heCBvZiBpdHNlbGYgKHopXHJcbiAgICAgICAgdmFyIHRoaXNIaWdoID0gdGhpcy5nZXROb2RlSGlnaCgpO1xyXG4gICAgICAgIGlmICh0aGlzLmxlZnQgPT09IHVuZGVmaW5lZCAmJiB0aGlzLnJpZ2h0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXggPSBNYXRoLm1heCh0aGlzSGlnaCwgdGhpcy5yaWdodC5tYXgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmxlZnQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnJpZ2h0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXggPSBNYXRoLm1heCh0aGlzSGlnaCwgdGhpcy5sZWZ0Lm1heCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMubGVmdCA9PT0gdW5kZWZpbmVkICYmIHRoaXMucmlnaHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm1heCA9IHRoaXNIaWdoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5tYXggPSBNYXRoLm1heChNYXRoLm1heCh0aGlzLmxlZnQubWF4LCB0aGlzLnJpZ2h0Lm1heCksIHRoaXNIaWdoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVXBkYXRlIG1heCBvZiBwYXJlbnQgKHkgaW4gZmlyc3QgY2FzZSwgeCBpbiBzZWNvbmQpXHJcbiAgICAgICAgcGFyZW50Lm1heCA9IE1hdGgubWF4KE1hdGgubWF4KHBhcmVudC5sZWZ0Lm1heCwgcmlnaHQubWF4KSwgcGFyZW50LmdldE5vZGVIaWdoKCkpO1xyXG4gICAgfTtcclxuICAgIE5vZGUucHJvdG90eXBlLl9sZWZ0Um90YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByaWdodENoaWxkID0gdGhpcy5yaWdodDtcclxuICAgICAgICByaWdodENoaWxkLnBhcmVudCA9IHRoaXMucGFyZW50O1xyXG4gICAgICAgIGlmIChyaWdodENoaWxkLnBhcmVudCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWxUcmVlLnJvb3QgPSByaWdodENoaWxkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHJpZ2h0Q2hpbGQucGFyZW50LmxlZnQgPT09IHRoaXMpIHtcclxuICAgICAgICAgICAgICAgIHJpZ2h0Q2hpbGQucGFyZW50LmxlZnQgPSByaWdodENoaWxkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHJpZ2h0Q2hpbGQucGFyZW50LnJpZ2h0ID09PSB0aGlzKSB7XHJcbiAgICAgICAgICAgICAgICByaWdodENoaWxkLnBhcmVudC5yaWdodCA9IHJpZ2h0Q2hpbGQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yaWdodCA9IHJpZ2h0Q2hpbGQubGVmdDtcclxuICAgICAgICBpZiAodGhpcy5yaWdodCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmlnaHQucGFyZW50ID0gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmlnaHRDaGlsZC5sZWZ0ID0gdGhpcztcclxuICAgICAgICB0aGlzLnBhcmVudCA9IHJpZ2h0Q2hpbGQ7XHJcbiAgICAgICAgdGhpcy51cGRhdGVIZWlnaHQoKTtcclxuICAgICAgICByaWdodENoaWxkLnVwZGF0ZUhlaWdodCgpO1xyXG4gICAgfTtcclxuICAgIE5vZGUucHJvdG90eXBlLl9yaWdodFJvdGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbGVmdENoaWxkID0gdGhpcy5sZWZ0O1xyXG4gICAgICAgIGxlZnRDaGlsZC5wYXJlbnQgPSB0aGlzLnBhcmVudDtcclxuICAgICAgICBpZiAobGVmdENoaWxkLnBhcmVudCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWxUcmVlLnJvb3QgPSBsZWZ0Q2hpbGQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAobGVmdENoaWxkLnBhcmVudC5sZWZ0ID09PSB0aGlzKSB7XHJcbiAgICAgICAgICAgICAgICBsZWZ0Q2hpbGQucGFyZW50LmxlZnQgPSBsZWZ0Q2hpbGQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAobGVmdENoaWxkLnBhcmVudC5yaWdodCA9PT0gdGhpcykge1xyXG4gICAgICAgICAgICAgICAgbGVmdENoaWxkLnBhcmVudC5yaWdodCA9IGxlZnRDaGlsZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxlZnQgPSBsZWZ0Q2hpbGQucmlnaHQ7XHJcbiAgICAgICAgaWYgKHRoaXMubGVmdCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGVmdC5wYXJlbnQgPSB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZWZ0Q2hpbGQucmlnaHQgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMucGFyZW50ID0gbGVmdENoaWxkO1xyXG4gICAgICAgIHRoaXMudXBkYXRlSGVpZ2h0KCk7XHJcbiAgICAgICAgbGVmdENoaWxkLnVwZGF0ZUhlaWdodCgpO1xyXG4gICAgfTtcclxuICAgIC8vIFJlYmFsYW5jZXMgdGhlIHRyZWUgaWYgdGhlIGhlaWdodCB2YWx1ZSBiZXR3ZWVuIHR3byBub2RlcyBvZiB0aGUgc2FtZSBwYXJlbnQgaXMgZ3JlYXRlciB0aGFuXHJcbiAgICAvLyB0d28uIFRoZXJlIGFyZSA0IGNhc2VzIHRoYXQgY2FuIGhhcHBlbiB3aGljaCBhcmUgb3V0bGluZWQgaW4gdGhlIGdyYXBoaWNzIGFib3ZlXHJcbiAgICBOb2RlLnByb3RvdHlwZS5fcmViYWxhbmNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChoZWlnaHQodGhpcy5sZWZ0KSA+PSAyICsgaGVpZ2h0KHRoaXMucmlnaHQpKSB7XHJcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gdGhpcy5sZWZ0O1xyXG4gICAgICAgICAgICBpZiAoaGVpZ2h0KGxlZnQubGVmdCkgPj0gaGVpZ2h0KGxlZnQucmlnaHQpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBMZWZ0LUxlZnQgY2FzZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmlnaHRSb3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU1heEFmdGVyUmlnaHRSb3RhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIExlZnQtUmlnaHQgY2FzZVxyXG4gICAgICAgICAgICAgICAgbGVmdC5fbGVmdFJvdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmlnaHRSb3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU1heEFmdGVyUmlnaHRSb3RhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChoZWlnaHQodGhpcy5yaWdodCkgPj0gMiArIGhlaWdodCh0aGlzLmxlZnQpKSB7XHJcbiAgICAgICAgICAgIHZhciByaWdodCA9IHRoaXMucmlnaHQ7XHJcbiAgICAgICAgICAgIGlmIChoZWlnaHQocmlnaHQucmlnaHQpID49IGhlaWdodChyaWdodC5sZWZ0KSkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmlnaHQtUmlnaHQgY2FzZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGVmdFJvdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWF4QWZ0ZXJMZWZ0Um90YXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSaWdodC1MZWZ0IGNhc2VcclxuICAgICAgICAgICAgICAgIHJpZ2h0Ll9yaWdodFJvdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGVmdFJvdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWF4QWZ0ZXJMZWZ0Um90YXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTm9kZS5wcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24gKHJlY29yZCkge1xyXG4gICAgICAgIGlmIChyZWNvcmQubG93IDwgdGhpcy5rZXkpIHtcclxuICAgICAgICAgICAgLy8gSW5zZXJ0IGludG8gbGVmdCBzdWJ0cmVlXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxlZnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sZWZ0ID0gbmV3IE5vZGUodGhpcy5pbnRlcnZhbFRyZWUsIHJlY29yZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxlZnQucGFyZW50ID0gdGhpcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGVmdC5pbnNlcnQocmVjb3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSW5zZXJ0IGludG8gcmlnaHQgc3VidHJlZVxyXG4gICAgICAgICAgICBpZiAodGhpcy5yaWdodCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0ID0gbmV3IE5vZGUodGhpcy5pbnRlcnZhbFRyZWUsIHJlY29yZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0LnBhcmVudCA9IHRoaXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0Lmluc2VydChyZWNvcmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgbWF4IHZhbHVlIG9mIHRoaXMgYW5jZXN0b3IgaWYgbmVlZGVkXHJcbiAgICAgICAgaWYgKHRoaXMubWF4IDwgcmVjb3JkLmhpZ2gpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXggPSByZWNvcmQuaGlnaDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVXBkYXRlIGhlaWdodCBvZiBlYWNoIG5vZGVcclxuICAgICAgICB0aGlzLnVwZGF0ZUhlaWdodCgpO1xyXG4gICAgICAgIC8vIFJlYmFsYW5jZSB0aGUgdHJlZSB0byBlbnN1cmUgYWxsIG9wZXJhdGlvbnMgYXJlIGV4ZWN1dGVkIGluIE8obG9nbikgdGltZS4gVGhpcyBpcyBlc3BlY2lhbGx5XHJcbiAgICAgICAgLy8gaW1wb3J0YW50IGluIHNlYXJjaGluZywgYXMgdGhlIHRyZWUgaGFzIGEgaGlnaCBjaGFuY2Ugb2YgZGVnZW5lcmF0aW5nIHdpdGhvdXQgdGhlIHJlYmFsYW5jaW5nXHJcbiAgICAgICAgdGhpcy5fcmViYWxhbmNlKCk7XHJcbiAgICB9O1xyXG4gICAgTm9kZS5wcm90b3R5cGUuX2dldE92ZXJsYXBwaW5nUmVjb3JkcyA9IGZ1bmN0aW9uIChjdXJyZW50Tm9kZSwgbG93LCBoaWdoKSB7XHJcbiAgICAgICAgaWYgKGN1cnJlbnROb2RlLmtleSA8PSBoaWdoICYmIGxvdyA8PSBjdXJyZW50Tm9kZS5nZXROb2RlSGlnaCgpKSB7XHJcbiAgICAgICAgICAgIC8vIE5vZGVzIGFyZSBvdmVybGFwcGluZywgY2hlY2sgaWYgaW5kaXZpZHVhbCByZWNvcmRzIGluIHRoZSBub2RlIGFyZSBvdmVybGFwcGluZ1xyXG4gICAgICAgICAgICB2YXIgdGVtcFJlc3VsdHMgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXJyZW50Tm9kZS5yZWNvcmRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5vZGUucmVjb3Jkc1tpXS5oaWdoID49IGxvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBSZXN1bHRzLnB1c2goY3VycmVudE5vZGUucmVjb3Jkc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRlbXBSZXN1bHRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9O1xyXG4gICAgTm9kZS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKGxvdywgaGlnaCkge1xyXG4gICAgICAgIC8vIERvbid0IHNlYXJjaCBub2RlcyB0aGF0IGRvbid0IGV4aXN0XHJcbiAgICAgICAgaWYgKHRoaXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBsZWZ0U2VhcmNoID0gW107XHJcbiAgICAgICAgdmFyIG93blNlYXJjaCA9IFtdO1xyXG4gICAgICAgIHZhciByaWdodFNlYXJjaCA9IFtdO1xyXG4gICAgICAgIC8vIElmIGludGVydmFsIGlzIHRvIHRoZSByaWdodCBvZiB0aGUgcmlnaHRtb3N0IHBvaW50IG9mIGFueSBpbnRlcnZhbCBpbiB0aGlzIG5vZGUgYW5kIGFsbCBpdHNcclxuICAgICAgICAvLyBjaGlsZHJlbiwgdGhlcmUgd29uJ3QgYmUgYW55IG1hdGNoZXNcclxuICAgICAgICBpZiAobG93ID4gdGhpcy5tYXgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTZWFyY2ggbGVmdCBjaGlsZHJlblxyXG4gICAgICAgIGlmICh0aGlzLmxlZnQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmxlZnQubWF4ID49IGxvdykge1xyXG4gICAgICAgICAgICBsZWZ0U2VhcmNoID0gdGhpcy5sZWZ0LnNlYXJjaChsb3csIGhpZ2gpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDaGVjayB0aGlzIG5vZGVcclxuICAgICAgICBvd25TZWFyY2ggPSB0aGlzLl9nZXRPdmVybGFwcGluZ1JlY29yZHModGhpcywgbG93LCBoaWdoKTtcclxuICAgICAgICAvLyBJZiBpbnRlcnZhbCBpcyB0byB0aGUgbGVmdCBvZiB0aGUgc3RhcnQgb2YgdGhpcyBpbnRlcnZhbCwgdGhlbiBpdCBjYW4ndCBiZSBpbiBhbnkgY2hpbGQgdG9cclxuICAgICAgICAvLyB0aGUgcmlnaHRcclxuICAgICAgICBpZiAoaGlnaCA8IHRoaXMua2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsZWZ0U2VhcmNoLmNvbmNhdChvd25TZWFyY2gpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBPdGhlcndpc2UsIHNlYXJjaCByaWdodCBjaGlsZHJlblxyXG4gICAgICAgIGlmICh0aGlzLnJpZ2h0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmlnaHRTZWFyY2ggPSB0aGlzLnJpZ2h0LnNlYXJjaChsb3csIGhpZ2gpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSZXR1cm4gYWNjdW11bGF0ZWQgcmVzdWx0cywgaWYgYW55XHJcbiAgICAgICAgcmV0dXJuIGxlZnRTZWFyY2guY29uY2F0KG93blNlYXJjaCwgcmlnaHRTZWFyY2gpO1xyXG4gICAgfTtcclxuICAgIC8vIFNlYXJjaGVzIGZvciBhIG5vZGUgYnkgYSBga2V5YCB2YWx1ZVxyXG4gICAgTm9kZS5wcm90b3R5cGUuc2VhcmNoRXhpc3RpbmcgPSBmdW5jdGlvbiAobG93KSB7XHJcbiAgICAgICAgaWYgKHRoaXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5rZXkgPT09IGxvdykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobG93IDwgdGhpcy5rZXkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGVmdCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LnNlYXJjaEV4aXN0aW5nKGxvdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJpZ2h0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LnNlYXJjaEV4aXN0aW5nKGxvdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBzbWFsbGVzdCBub2RlIG9mIHRoZSBzdWJ0cmVlXHJcbiAgICBOb2RlLnByb3RvdHlwZS5fbWluVmFsdWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGVmdCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5fbWluVmFsdWUoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTm9kZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XHJcbiAgICAgICAgaWYgKG5vZGUua2V5IDwgdGhpcy5rZXkpIHtcclxuICAgICAgICAgICAgLy8gTm9kZSB0byBiZSByZW1vdmVkIGlzIG9uIHRoZSBsZWZ0IHNpZGVcclxuICAgICAgICAgICAgaWYgKHRoaXMubGVmdCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LnJlbW92ZShub2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobm9kZS5rZXkgPiB0aGlzLmtleSkge1xyXG4gICAgICAgICAgICAvLyBOb2RlIHRvIGJlIHJlbW92ZWQgaXMgb24gdGhlIHJpZ2h0IHNpZGVcclxuICAgICAgICAgICAgaWYgKHRoaXMucmlnaHQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQucmVtb3ZlKG5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGVmdCAhPT0gdW5kZWZpbmVkICYmIHRoaXMucmlnaHQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gTm9kZSBoYXMgdHdvIGNoaWxkcmVuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWluVmFsdWUgPSB0aGlzLnJpZ2h0Ll9taW5WYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5rZXkgPSBtaW5WYWx1ZS5rZXk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlY29yZHMgPSBtaW5WYWx1ZS5yZWNvcmRzO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQucmVtb3ZlKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcmVudC5sZWZ0ID09PSB0aGlzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBPbmUgY2hpbGQgb3Igbm8gY2hpbGQgY2FzZSBvbiBsZWZ0IHNpZGVcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJpZ2h0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQubGVmdCA9IHRoaXMucmlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yaWdodC5wYXJlbnQgPSBwYXJlbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQubGVmdCA9IHRoaXMubGVmdDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sZWZ0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0LnBhcmVudCA9IHBhcmVudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQudXBkYXRlTWF4T2ZQYXJlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQudXBkYXRlSGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuX3JlYmFsYW5jZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocGFyZW50LnJpZ2h0ID09PSB0aGlzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBPbmUgY2hpbGQgb3Igbm8gY2hpbGQgY2FzZSBvbiByaWdodCBzaWRlXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yaWdodCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJpZ2h0ID0gdGhpcy5yaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0LnBhcmVudCA9IHBhcmVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5yaWdodCA9IHRoaXMubGVmdDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sZWZ0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0LnBhcmVudCA9IHBhcmVudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQudXBkYXRlTWF4T2ZQYXJlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQudXBkYXRlSGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuX3JlYmFsYW5jZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE5vZGU7XHJcbn0oKSk7XHJcbmV4cG9ydHMuTm9kZSA9IE5vZGU7XHJcbnZhciBJbnRlcnZhbFRyZWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJbnRlcnZhbFRyZWUoKSB7XHJcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XHJcbiAgICB9XHJcbiAgICBJbnRlcnZhbFRyZWUucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChyZWNvcmQpIHtcclxuICAgICAgICBpZiAocmVjb3JkLmxvdyA+IHJlY29yZC5oaWdoKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYGxvd2AgdmFsdWUgbXVzdCBiZSBsb3dlciBvciBlcXVhbCB0byBgaGlnaGAgdmFsdWUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucm9vdCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIC8vIEJhc2UgY2FzZTogVHJlZSBpcyBlbXB0eSwgbmV3IG5vZGUgYmVjb21lcyByb290XHJcbiAgICAgICAgICAgIHRoaXMucm9vdCA9IG5ldyBOb2RlKHRoaXMsIHJlY29yZCk7XHJcbiAgICAgICAgICAgIHRoaXMuY291bnQrKztcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UsIGNoZWNrIGlmIG5vZGUgYWxyZWFkeSBleGlzdHMgd2l0aCB0aGUgc2FtZSBrZXlcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLnJvb3Quc2VhcmNoRXhpc3RpbmcocmVjb3JkLmxvdyk7XHJcbiAgICAgICAgICAgIGlmIChub2RlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIHRoZSByZWNvcmRzIGluIHRoaXMgbm9kZSBpZiB0aGVyZSBhbHJlYWR5IGlzIHRoZSBvbmUgd2l0aCBzYW1lIGxvdywgaGlnaCwgZGF0YVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLnJlY29yZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTYW1lKG5vZGUucmVjb3Jkc1tpXSwgcmVjb3JkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHJlY29yZCBpcyBzYW1lIGFzIHRoZSBvbmUgd2UncmUgdHJ5aW5nIHRvIGluc2VydDsgcmV0dXJuIGZhbHNlIHRvIGluZGljYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmcgaGFzIGJlZW4gaW5zZXJ0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgcmVjb3JkIHRvIHRoZSBub2RlXHJcbiAgICAgICAgICAgICAgICBub2RlLnJlY29yZHMucHVzaChyZWNvcmQpO1xyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIG1heCBvZiB0aGUgbm9kZSBhbmQgaXRzIHBhcmVudHMgaWYgbmVjZXNzYXJ5XHJcbiAgICAgICAgICAgICAgICBpZiAocmVjb3JkLmhpZ2ggPiBub2RlLm1heCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUubWF4ID0gcmVjb3JkLmhpZ2g7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUucGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUucGFyZW50LnVwZGF0ZU1heE9mUGFyZW50cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuY291bnQrKztcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gTm9kZSB3aXRoIHRoaXMga2V5IGRvZXNuJ3QgYWxyZWFkeSBleGlzdC4gQ2FsbCBpbnNlcnQgZnVuY3Rpb24gb24gcm9vdCdzIG5vZGVcclxuICAgICAgICAgICAgICAgIHRoaXMucm9vdC5pbnNlcnQocmVjb3JkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY291bnQrKztcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEludGVydmFsVHJlZS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKGxvdywgaGlnaCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJvb3QgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAvLyBUcmVlIGlzIGVtcHR5OyByZXR1cm4gZW1wdHkgYXJyYXlcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5zZWFyY2gobG93LCBoaWdoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW50ZXJ2YWxUcmVlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAocmVjb3JkKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucm9vdCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIC8vIFRyZWUgaXMgZW1wdHk7IG5vdGhpbmcgdG8gcmVtb3ZlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5yb290LnNlYXJjaEV4aXN0aW5nKHJlY29yZC5sb3cpO1xyXG4gICAgICAgICAgICBpZiAobm9kZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAobm9kZS5yZWNvcmRzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZW1vdmVkUmVjb3JkID0gdm9pZCAwO1xyXG4gICAgICAgICAgICAgICAgLy8gTm9kZSB3aXRoIHRoaXMga2V5IGhhcyAyIG9yIG1vcmUgcmVjb3Jkcy4gRmluZCB0aGUgb25lIHdlIG5lZWQgYW5kIHJlbW92ZSBpdFxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLnJlY29yZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTYW1lKG5vZGUucmVjb3Jkc1tpXSwgcmVjb3JkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVkUmVjb3JkID0gbm9kZS5yZWNvcmRzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnJlY29yZHMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocmVtb3ZlZFJlY29yZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZWRSZWNvcmQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIG1heCBvZiB0aGF0IG5vZGUgYW5kIGl0cyBwYXJlbnRzIGlmIG5lY2Vzc2FyeVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWNvcmQuaGlnaCA9PT0gbm9kZS5tYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVIaWdoID0gbm9kZS5nZXROb2RlSGlnaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5sZWZ0ICE9PSB1bmRlZmluZWQgJiYgbm9kZS5yaWdodCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLm1heCA9IE1hdGgubWF4KE1hdGgubWF4KG5vZGUubGVmdC5tYXgsIG5vZGUucmlnaHQubWF4KSwgbm9kZUhpZ2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUubGVmdCAhPT0gdW5kZWZpbmVkICYmIG5vZGUucmlnaHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5tYXggPSBNYXRoLm1heChub2RlLmxlZnQubWF4LCBub2RlSGlnaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobm9kZS5sZWZ0ID09PSB1bmRlZmluZWQgJiYgbm9kZS5yaWdodCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLm1heCA9IE1hdGgubWF4KG5vZGUucmlnaHQubWF4LCBub2RlSGlnaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLm1heCA9IG5vZGVIaWdoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlLnBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5wYXJlbnQudXBkYXRlTWF4T2ZQYXJlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3VudC0tO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUucmVjb3Jkcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5vZGUgd2l0aCB0aGlzIGtleSBoYXMgb25seSAxIHJlY29yZC4gQ2hlY2sgaWYgdGhlIHJlbWFpbmluZyByZWNvcmQgaW4gdGhpcyBub2RlIGlzXHJcbiAgICAgICAgICAgICAgICAvLyBhY3R1YWxseSB0aGUgb25lIHdlIHdhbnQgdG8gcmVtb3ZlXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNTYW1lKG5vZGUucmVjb3Jkc1swXSwgcmVjb3JkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSByZW1haW5pbmcgcmVjb3JkIGlzIHRoZSBvbmUgd2Ugd2FudCB0byByZW1vdmUuIFJlbW92ZSB0aGUgd2hvbGUgbm9kZSBmcm9tIHRoZSB0cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucm9vdC5rZXkgPT09IG5vZGUua2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlJ3JlIHJlbW92aW5nIHRoZSByb290IGVsZW1lbnQuIENyZWF0ZSBhIGR1bW15IG5vZGUgdGhhdCB3aWxsIHRlbXBvcmFyaWx5IHRha2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm9vdCdzIHBhcmVudCByb2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb290UGFyZW50ID0gbmV3IE5vZGUodGhpcywgeyBsb3c6IHJlY29yZC5sb3csIGhpZ2g6IHJlY29yZC5sb3cgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQYXJlbnQubGVmdCA9IHRoaXMucm9vdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb290LnBhcmVudCA9IHJvb3RQYXJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZW1vdmVkTm9kZSA9IHRoaXMucm9vdC5yZW1vdmUobm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm9vdCA9IHJvb3RQYXJlbnQubGVmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucm9vdCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3QucGFyZW50ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdmVkTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZE5vZGUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvdW50LS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbW92ZWROb2RlID0gdGhpcy5yb290LnJlbW92ZShub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW92ZWROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVkTm9kZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY291bnQtLTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHJlbWFpbmluZyByZWNvcmQgaXMgbm90IHRoZSBvbmUgd2Ugd2FudCB0byByZW1vdmVcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBObyByZWNvcmRzIGF0IGFsbCBpbiB0aGlzIG5vZGU/ISBTaG91bGRuJ3QgaGFwcGVuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW50ZXJ2YWxUcmVlLnByb3RvdHlwZS5pbk9yZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW5PcmRlcih0aGlzLnJvb3QpO1xyXG4gICAgfTtcclxuICAgIEludGVydmFsVHJlZS5wcm90b3R5cGUucHJlT3JkZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcmVPcmRlcih0aGlzLnJvb3QpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBJbnRlcnZhbFRyZWU7XHJcbn0oKSk7XHJcbmV4cG9ydHMuSW50ZXJ2YWxUcmVlID0gSW50ZXJ2YWxUcmVlO1xyXG52YXIgRGF0YUludGVydmFsVHJlZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERhdGFJbnRlcnZhbFRyZWUoKSB7XHJcbiAgICAgICAgdGhpcy50cmVlID0gbmV3IEludGVydmFsVHJlZSgpO1xyXG4gICAgfVxyXG4gICAgRGF0YUludGVydmFsVHJlZS5wcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24gKGxvdywgaGlnaCwgZGF0YSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRyZWUuaW5zZXJ0KHsgbG93OiBsb3csIGhpZ2g6IGhpZ2gsIGRhdGE6IGRhdGEgfSk7XHJcbiAgICB9O1xyXG4gICAgRGF0YUludGVydmFsVHJlZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGxvdywgaGlnaCwgZGF0YSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRyZWUucmVtb3ZlKHsgbG93OiBsb3csIGhpZ2g6IGhpZ2gsIGRhdGE6IGRhdGEgfSk7XHJcbiAgICB9O1xyXG4gICAgRGF0YUludGVydmFsVHJlZS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKGxvdywgaGlnaCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRyZWUuc2VhcmNoKGxvdywgaGlnaCkubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2LmRhdGE7IH0pO1xyXG4gICAgfTtcclxuICAgIERhdGFJbnRlcnZhbFRyZWUucHJvdG90eXBlLmluT3JkZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHJlZS5pbk9yZGVyKCk7XHJcbiAgICB9O1xyXG4gICAgRGF0YUludGVydmFsVHJlZS5wcm90b3R5cGUucHJlT3JkZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHJlZS5wcmVPcmRlcigpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEYXRhSW50ZXJ2YWxUcmVlLnByb3RvdHlwZSwgXCJjb3VudFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyZWUuY291bnQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gRGF0YUludGVydmFsVHJlZTtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gRGF0YUludGVydmFsVHJlZTtcclxudmFyIEluT3JkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJbk9yZGVyKHN0YXJ0Tm9kZSkge1xyXG4gICAgICAgIHRoaXMuc3RhY2sgPSBbXTtcclxuICAgICAgICBpZiAoc3RhcnROb2RlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5wdXNoKHN0YXJ0Tm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgSW5PcmRlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBXaWxsIG9ubHkgaGFwcGVuIGlmIHN0YWNrIGlzIGVtcHR5IGFuZCBwb3AgaXMgY2FsbGVkXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudE5vZGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZG9uZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByb2Nlc3MgdGhpcyBub2RlXHJcbiAgICAgICAgaWYgKHRoaXMuaSA8IHRoaXMuY3VycmVudE5vZGUucmVjb3Jkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuY3VycmVudE5vZGUucmVjb3Jkc1t0aGlzLmkrK10sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnROb2RlLnJpZ2h0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5wdXNoKHRoaXMuY3VycmVudE5vZGUucmlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gTWlnaHQgcG9wIHRoZSBsYXN0IGFuZCBzZXQgdGhpcy5jdXJyZW50Tm9kZSA9IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICB0aGlzLnBvcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5uZXh0KCk7XHJcbiAgICB9O1xyXG4gICAgSW5PcmRlci5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IG5vZGU7XHJcbiAgICAgICAgdGhpcy5pID0gMDtcclxuICAgICAgICB3aGlsZSAodGhpcy5jdXJyZW50Tm9kZS5sZWZ0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFjay5wdXNoKHRoaXMuY3VycmVudE5vZGUpO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnROb2RlID0gdGhpcy5jdXJyZW50Tm9kZS5sZWZ0O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbk9yZGVyLnByb3RvdHlwZS5wb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IHRoaXMuc3RhY2sucG9wKCk7XHJcbiAgICAgICAgdGhpcy5pID0gMDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSW5PcmRlcjtcclxufSgpKTtcclxuZXhwb3J0cy5Jbk9yZGVyID0gSW5PcmRlcjtcclxuaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicpIHtcclxuICAgIEluT3JkZXIucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9O1xyXG59XHJcbnZhciBQcmVPcmRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFByZU9yZGVyKHN0YXJ0Tm9kZSkge1xyXG4gICAgICAgIHRoaXMuc3RhY2sgPSBbXTtcclxuICAgICAgICB0aGlzLmkgPSAwO1xyXG4gICAgICAgIHRoaXMuY3VycmVudE5vZGUgPSBzdGFydE5vZGU7XHJcbiAgICB9XHJcbiAgICBQcmVPcmRlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBXaWxsIG9ubHkgaGFwcGVuIGlmIHN0YWNrIGlzIGVtcHR5IGFuZCBwb3AgaXMgY2FsbGVkLFxyXG4gICAgICAgIC8vIHdoaWNoIG9ubHkgaGFwcGVucyBpZiB0aGVyZSBpcyBubyByaWdodCBub2RlIChpLmUgd2UgYXJlIGRvbmUpXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudE5vZGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZG9uZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByb2Nlc3MgdGhpcyBub2RlXHJcbiAgICAgICAgaWYgKHRoaXMuaSA8IHRoaXMuY3VycmVudE5vZGUucmVjb3Jkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuY3VycmVudE5vZGUucmVjb3Jkc1t0aGlzLmkrK10sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnROb2RlLnJpZ2h0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5wdXNoKHRoaXMuY3VycmVudE5vZGUucmlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50Tm9kZS5sZWZ0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5wdXNoKHRoaXMuY3VycmVudE5vZGUubGVmdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucG9wKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dCgpO1xyXG4gICAgfTtcclxuICAgIFByZU9yZGVyLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICB0aGlzLnN0YWNrLnB1c2gobm9kZSk7XHJcbiAgICB9O1xyXG4gICAgUHJlT3JkZXIucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnROb2RlID0gdGhpcy5zdGFjay5wb3AoKTtcclxuICAgICAgICB0aGlzLmkgPSAwO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQcmVPcmRlcjtcclxufSgpKTtcclxuZXhwb3J0cy5QcmVPcmRlciA9IFByZU9yZGVyO1xyXG5pZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgUHJlT3JkZXIucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9O1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9ub2RlLWludGVydmFsLXRyZWUvbGliL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA1NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNoYWxsb3dFcXVhbChvYmpBLCBvYmpCLCBjb21wYXJlLCBjb21wYXJlQ29udGV4dCkge1xuICB2YXIgcmV0ID0gY29tcGFyZSA/IGNvbXBhcmUuY2FsbChjb21wYXJlQ29udGV4dCwgb2JqQSwgb2JqQikgOiB2b2lkIDA7XG5cbiAgaWYgKHJldCAhPT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuICEhcmV0O1xuICB9XG5cbiAgaWYgKG9iakEgPT09IG9iakIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygb2JqQSAhPT0gXCJvYmplY3RcIiB8fCAhb2JqQSB8fCB0eXBlb2Ygb2JqQiAhPT0gXCJvYmplY3RcIiB8fCAhb2JqQikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBrZXlzQSA9IE9iamVjdC5rZXlzKG9iakEpO1xuICB2YXIga2V5c0IgPSBPYmplY3Qua2V5cyhvYmpCKTtcblxuICBpZiAoa2V5c0EubGVuZ3RoICE9PSBrZXlzQi5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgYkhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5iaW5kKG9iakIpO1xuXG4gIC8vIFRlc3QgZm9yIEEncyBrZXlzIGRpZmZlcmVudCBmcm9tIEIuXG4gIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGtleXNBLmxlbmd0aDsgaWR4KyspIHtcbiAgICB2YXIga2V5ID0ga2V5c0FbaWR4XTtcblxuICAgIGlmICghYkhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgdmFsdWVBID0gb2JqQVtrZXldO1xuICAgIHZhciB2YWx1ZUIgPSBvYmpCW2tleV07XG5cbiAgICByZXQgPSBjb21wYXJlID8gY29tcGFyZS5jYWxsKGNvbXBhcmVDb250ZXh0LCB2YWx1ZUEsIHZhbHVlQiwga2V5KSA6IHZvaWQgMDtcblxuICAgIGlmIChyZXQgPT09IGZhbHNlIHx8IChyZXQgPT09IHZvaWQgMCAmJiB2YWx1ZUEgIT09IHZhbHVlQikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vc2hhbGxvd2VxdWFsL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA1N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXRSYWRpb0FwcGVhcmFuY2UoZG9jOiBhbnkpOiBhbnkge1xuICAgIGNvbnN0IG9sZEFwcGVhcmFuY2VGdW5jaXRpb246IEZ1bmN0aW9uID0gZG9jLkFjcm9Gb3JtQXBwZWFyYW5jZS5SYWRpb0J1dHRvbi5DaXJjbGUuWWVzTm9ybWFsO1xuICAgIGRvYy5BY3JvRm9ybUFwcGVhcmFuY2UuUmFkaW9CdXR0b24uQ2lyY2xlLlllc05vcm1hbCA9IGZ1bmN0aW9uKGZvcm1PYmplY3Q6IGFueSkge1xuICAgICAgICBjb25zdCB4b2JqOiBhbnkgPSBvbGRBcHBlYXJhbmNlRnVuY2l0aW9uKGZvcm1PYmplY3QpO1xuICAgICAgICBjb25zdCBzdHJlYW06IHN0cmluZ1tdID0geG9iai5zdHJlYW0uc3BsaXQoJ1xcbicpO1xuICAgICAgICBjb25zdCBlbmNvZGVDb2xvcjogc3RyaW5nID0gZG9jLl9fcHJpdmF0ZV9fLmVuY29kZUNvbG9yU3RyaW5nKGZvcm1PYmplY3QuY29sb3IpO1xuICAgICAgICBzdHJlYW1bMF0gPSBzdHJlYW1bMF0gKyAnXFxuJyArIGVuY29kZUNvbG9yICsgJ1xcbicgKyBlbmNvZGVDb2xvci50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB4b2JqLnN0cmVhbSA9IHN0cmVhbS5qb2luKCdcXG4nKTtcbiAgICAgICAgcmV0dXJuIHhvYmo7XG4gICAgfTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanNwZGZfcGx1Z2lucy9hY3JvZm9ybS50cyIsImltcG9ydCB7IElSZWN0LCBEb2NDb250cm9sbGVyIH0gZnJvbSAnLi4vZG9jX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgUGRmQnJpY2sgfSBmcm9tICcuL3BkZl9icmljayc7XG5cbmV4cG9ydCBjbGFzcyBDb2xvcmVkQnJpY2sgZXh0ZW5kcyBQZGZCcmljayB7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsXG4gICAgICAgIHJlY3Q6IElSZWN0LCBwcml2YXRlIGNvbG9yOiBzdHJpbmcsIHByaXZhdGUgcmVuZGVyV2lkdGg/OiBudW1iZXIsIHByaXZhdGUgcmVuZGVySGVpZ2h0PzogbnVtYmVyKSB7XG4gICAgICAgIHN1cGVyKHVuZGVmaW5lZCwgY29udHJvbGxlciwgcmVjdCk7XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyByZW5kZXJJbnRlcmFjdGl2ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgbGV0IG9sZEZpbGxDb2xvcjogc3RyaW5nID0gdGhpcy5jb250cm9sbGVyLmRvYy5nZXRGaWxsQ29sb3IoKTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLmRvYy5zZXRGaWxsQ29sb3IodGhpcy5jb2xvciB8fCAnYmxhY2snKTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLmRvYy5yZWN0KHRoaXMueExlZnQsIHRoaXMueVRvcCxcbiAgICAgICAgICAgIHRoaXMucmVuZGVyV2lkdGggPz8gdGhpcy53aWR0aCwgdGhpcy5yZW5kZXJIZWlnaHQgPz8gdGhpcy5oZWlnaHQsICdGJyk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5kb2Muc2V0RmlsbENvbG9yKG9sZEZpbGxDb2xvcik7XG4gICAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9wZGZfcmVuZGVyL3BkZl9jb2xvcmVkYnJpY2sudHMiLCJpbXBvcnQgeyBJUXVlc3Rpb24gfSBmcm9tICdzdXJ2ZXktY29yZSc7XG5pbXBvcnQgeyBJUmVjdCwgRG9jQ29udHJvbGxlciB9IGZyb20gJy4uL2RvY19jb250cm9sbGVyJztcbmltcG9ydCB7IFRleHRCcmljayB9IGZyb20gJy4vcGRmX3RleHQnO1xuXG5leHBvcnQgY2xhc3MgRGVzY3JpcHRpb25CcmljayBleHRlbmRzIFRleHRCcmljayB7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHF1ZXN0aW9uOiBJUXVlc3Rpb24sIGNvbnRyb2xsZXI6IERvY0NvbnRyb2xsZXIsXG4gICAgICAgIHJlY3Q6IElSZWN0LCB0ZXh0OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIocXVlc3Rpb24sIGNvbnRyb2xsZXIsIHJlY3QsIHRleHQpO1xuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcGRmX3JlbmRlci9wZGZfZGVzY3JpcHRpb24udHMiLCJ2YXIgZztcclxuXHJcbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXHJcbmcgPSAoZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIHRoaXM7XHJcbn0pKCk7XHJcblxyXG50cnkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxyXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSxldmFsKShcInRoaXNcIik7XHJcbn0gY2F0Y2goZSkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXHJcblx0aWYodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIilcclxuXHRcdGcgPSB3aW5kb3c7XHJcbn1cclxuXHJcbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cclxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3NcclxuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanNcbi8vIG1vZHVsZSBpZCA9IDYxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIGdsb2JhbCBqc1BERiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE2IEFsZXhhbmRlciBXZWlkdCxcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9CaWdnQTk0XG4gKiBcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKi9cblxuLyoqIFxuKiBqc1BERiBBY3JvRm9ybSBQbHVnaW5cbiogQG1vZHVsZSBBY3JvRm9ybVxuKi9cbnZhciBqc3BkZiA9IHJlcXVpcmUoJ2pzcGRmJyk7XG4oZnVuY3Rpb24gKGpzUERGLCBnbG9iYWxPYmopIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIganNQREZBUEkgPSBqc1BERi5BUEk7XG4gICAgdmFyIHNjb3BlO1xuICAgIHZhciBzY2FsZUZhY3RvciA9IDE7XG4gICAgZnVuY3Rpb24gdG9Vbmljb2RlKHN0cikge1xuICAgICAgICB2YXIgdW5pY29kZVN0cmluZyA9ICcnO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRoZVVuaWNvZGUgPSBzdHIuY2hhckNvZGVBdChpKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIHdoaWxlICh0aGVVbmljb2RlLmxlbmd0aCA8IDQpIHtcbiAgICAgICAgICAgICAgICB0aGVVbmljb2RlID0gJzAnICsgdGhlVW5pY29kZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB1bmljb2RlU3RyaW5nICs9IHRoZVVuaWNvZGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICc8RkVGRicgKyB1bmljb2RlU3RyaW5nICsgJz4nO1xuICAgIH1cbiAgICB2YXIgcGRmRXNjYXBlID0gZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZS5yZXBsYWNlKC9cXFxcL2csICdcXFxcXFxcXCcpLnJlcGxhY2UoL1xcKC9nLCAnXFxcXCgnKS5yZXBsYWNlKC9cXCkvZywgJ1xcXFwpJykgfTtcbiAgICB2YXIgcGRmVW5lc2NhcGUgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlLnJlcGxhY2UoL1xcXFxcXFxcL2csICdcXFxcJykucmVwbGFjZSgvXFxcXFxcKC9nLCAnKCcpLnJlcGxhY2UoL1xcXFxcXCkvZywgJyknKTsgfTtcbiAgICBmdW5jdGlvbiBhcnJheVRvUGRmVW5pY29kZUFycmF5KHZhbHVlKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSAnWyAnO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gdG9Vbmljb2RlKHZhbHVlW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgKz0gJyBdJ1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICB2YXIgZjIgPSBmdW5jdGlvbiAobnVtYmVyKSB7XG4gICAgICAgIHJldHVybiBudW1iZXIudG9GaXhlZCgyKTsgLy8gSWUsICUuMmZcbiAgICB9O1xuXG4gICAgdmFyIGY1ID0gZnVuY3Rpb24gKG51bWJlcikge1xuICAgICAgICByZXR1cm4gbnVtYmVyLnRvRml4ZWQoNSk7IC8vIEllLCAlLjJmXG4gICAgfTtcblxuICAgIGpzUERGQVBJLl9fYWNyb2Zvcm1fXyA9IHt9O1xuICAgIHZhciBpbmhlcml0ID0gZnVuY3Rpb24gKGNoaWxkLCBwYXJlbnQpIHtcbiAgICAgICAgY2hpbGQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQucHJvdG90eXBlKTtcbiAgICAgICAgY2hpbGQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY2hpbGQ7XG4gICAgfTtcblxuICAgIHZhciBzY2FsZSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHJldHVybiAoeCAqIHNjYWxlRmFjdG9yKTtcbiAgICB9O1xuICAgIHZhciBhbnRpU2NhbGUgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICByZXR1cm4gKHggLyBzY2FsZUZhY3Rvcik7XG4gICAgfTtcblxuICAgIHZhciBjcmVhdGVGb3JtWE9iamVjdCA9IGZ1bmN0aW9uIChmb3JtT2JqZWN0KSB7XG4gICAgICAgIHZhciB4b2JqID0gbmV3IEFjcm9Gb3JtWE9iamVjdCgpO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldEhlaWdodChmb3JtT2JqZWN0KSB8fCAwO1xuICAgICAgICB2YXIgd2lkdGggPSBBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0V2lkdGgoZm9ybU9iamVjdCkgfHwgMDtcbiAgICAgICAgeG9iai5CQm94ID0gWzAsIDAsIE51bWJlcihmMih3aWR0aCkpLCBOdW1iZXIoZjIoaGVpZ2h0KSldO1xuICAgICAgICByZXR1cm4geG9iajtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgKiBCaXQtT3BlcmF0aW9uc1xuICAgICovXG4gICAgdmFyIHNldEJpdCA9IGpzUERGQVBJLl9fYWNyb2Zvcm1fXy5zZXRCaXQgPSBmdW5jdGlvbiAobnVtYmVyLCBiaXRQb3NpdGlvbikge1xuICAgICAgICBudW1iZXIgPSBudW1iZXIgfHwgMDtcbiAgICAgICAgYml0UG9zaXRpb24gPSBiaXRQb3NpdGlvbiB8fCAwO1xuXG4gICAgICAgIGlmIChpc05hTihudW1iZXIpIHx8IGlzTmFOKGJpdFBvc2l0aW9uKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50cyBwYXNzZWQgdG8ganNQREYuQVBJLl9fYWNyb2Zvcm1fXy5zZXRCaXQnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYml0TWFzayA9IDEgPDwgYml0UG9zaXRpb247XG5cbiAgICAgICAgbnVtYmVyIHw9IGJpdE1hc2s7XG5cbiAgICAgICAgcmV0dXJuIG51bWJlcjtcbiAgICB9O1xuXG4gICAgdmFyIGNsZWFyQml0ID0ganNQREZBUEkuX19hY3JvZm9ybV9fLmNsZWFyQml0ID0gZnVuY3Rpb24gKG51bWJlciwgYml0UG9zaXRpb24pIHtcbiAgICAgICAgbnVtYmVyID0gbnVtYmVyIHx8IDA7XG4gICAgICAgIGJpdFBvc2l0aW9uID0gYml0UG9zaXRpb24gfHwgMDtcblxuICAgICAgICBpZiAoaXNOYU4obnVtYmVyKSB8fCBpc05hTihiaXRQb3NpdGlvbikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLkFQSS5fX2Fjcm9mb3JtX18uY2xlYXJCaXQnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYml0TWFzayA9IDEgPDwgYml0UG9zaXRpb247XG5cbiAgICAgICAgbnVtYmVyICY9IH5iaXRNYXNrO1xuXG4gICAgICAgIHJldHVybiBudW1iZXI7XG4gICAgfTtcblxuICAgIHZhciBnZXRCaXQgPSBqc1BERkFQSS5fX2Fjcm9mb3JtX18uZ2V0Qml0ID0gZnVuY3Rpb24gKG51bWJlciwgYml0UG9zaXRpb24pIHtcbiAgICAgICAgaWYgKGlzTmFOKG51bWJlcikgfHwgaXNOYU4oYml0UG9zaXRpb24pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnRzIHBhc3NlZCB0byBqc1BERi5BUEkuX19hY3JvZm9ybV9fLmdldEJpdCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobnVtYmVyICYgKDEgPDwgYml0UG9zaXRpb24pKSA9PT0gMCA/IDAgOiAxO1xuICAgIH07XG5cbiAgICAvKlxuICAgICogRmYgc3RhcnRzIGNvdW50aW5nIHRoZSBiaXQgcG9zaXRpb24gYXQgMSBhbmQgbm90IGxpa2UgamF2YXNjcmlwdCBhdCAwXG4gICAgKi9cbiAgICB2YXIgZ2V0Qml0Rm9yUGRmID0ganNQREZBUEkuX19hY3JvZm9ybV9fLmdldEJpdEZvclBkZiA9IGZ1bmN0aW9uIChudW1iZXIsIGJpdFBvc2l0aW9uKSB7XG4gICAgICAgIGlmIChpc05hTihudW1iZXIpIHx8IGlzTmFOKGJpdFBvc2l0aW9uKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50cyBwYXNzZWQgdG8ganNQREYuQVBJLl9fYWNyb2Zvcm1fXy5nZXRCaXRGb3JQZGYnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2V0Qml0KG51bWJlciwgYml0UG9zaXRpb24gLSAxKTtcbiAgICB9O1xuXG4gICAgdmFyIHNldEJpdEZvclBkZiA9IGpzUERGQVBJLl9fYWNyb2Zvcm1fXy5zZXRCaXRGb3JQZGYgPSBmdW5jdGlvbiAobnVtYmVyLCBiaXRQb3NpdGlvbikge1xuICAgICAgICBpZiAoaXNOYU4obnVtYmVyKSB8fCBpc05hTihiaXRQb3NpdGlvbikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLkFQSS5fX2Fjcm9mb3JtX18uc2V0Qml0Rm9yUGRmJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNldEJpdChudW1iZXIsIGJpdFBvc2l0aW9uIC0gMSk7XG4gICAgfTtcblxuICAgIHZhciBjbGVhckJpdEZvclBkZiA9IGpzUERGQVBJLl9fYWNyb2Zvcm1fXy5jbGVhckJpdEZvclBkZiA9IGZ1bmN0aW9uIChudW1iZXIsIGJpdFBvc2l0aW9uKSB7XG4gICAgICAgIGlmIChpc05hTihudW1iZXIpIHx8IGlzTmFOKGJpdFBvc2l0aW9uKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50cyBwYXNzZWQgdG8ganNQREYuQVBJLl9fYWNyb2Zvcm1fXy5jbGVhckJpdEZvclBkZicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbGVhckJpdChudW1iZXIsIGJpdFBvc2l0aW9uIC0gMSk7XG4gICAgfTtcblxuICAgIHZhciBjYWxjdWxhdGVDb29yZGluYXRlcyA9IGpzUERGQVBJLl9fYWNyb2Zvcm1fXy5jYWxjdWxhdGVDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgIHZhciBnZXRIb3Jpem9udGFsQ29vcmRpbmF0ZSA9IHRoaXMuaW50ZXJuYWwuZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGU7XG4gICAgICAgIHZhciBnZXRWZXJ0aWNhbENvb3JkaW5hdGUgPSB0aGlzLmludGVybmFsLmdldFZlcnRpY2FsQ29vcmRpbmF0ZTtcbiAgICAgICAgdmFyIHggPSBhcmdzWzBdO1xuICAgICAgICB2YXIgeSA9IGFyZ3NbMV07XG4gICAgICAgIHZhciB3ID0gYXJnc1syXTtcbiAgICAgICAgdmFyIGggPSBhcmdzWzNdO1xuXG4gICAgICAgIHZhciBjb29yZGluYXRlcyA9IHt9O1xuXG4gICAgICAgIGNvb3JkaW5hdGVzLmxvd2VyTGVmdF9YID0gZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGUoeCkgfHwgMDtcbiAgICAgICAgY29vcmRpbmF0ZXMubG93ZXJMZWZ0X1kgPSBnZXRWZXJ0aWNhbENvb3JkaW5hdGUoeSArIGgpIHx8IDA7XG4gICAgICAgIGNvb3JkaW5hdGVzLnVwcGVyUmlnaHRfWCA9IGdldEhvcml6b250YWxDb29yZGluYXRlKHggKyB3KSB8fCAwO1xuICAgICAgICBjb29yZGluYXRlcy51cHBlclJpZ2h0X1kgPSBnZXRWZXJ0aWNhbENvb3JkaW5hdGUoeSkgfHwgMDtcblxuICAgICAgICByZXR1cm4gW051bWJlcihmMihjb29yZGluYXRlcy5sb3dlckxlZnRfWCkpLCBOdW1iZXIoZjIoY29vcmRpbmF0ZXMubG93ZXJMZWZ0X1kpKSwgTnVtYmVyKGYyKGNvb3JkaW5hdGVzLnVwcGVyUmlnaHRfWCkpLCBOdW1iZXIoZjIoY29vcmRpbmF0ZXMudXBwZXJSaWdodF9ZKSldO1xuICAgIH07XG5cbiAgICB2YXIgY2FsY3VsYXRlQXBwZWFyYW5jZVN0cmVhbSA9IGZ1bmN0aW9uIChmb3JtT2JqZWN0KSB7XG4gICAgICAgIGlmIChmb3JtT2JqZWN0LmFwcGVhcmFuY2VTdHJlYW1Db250ZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZm9ybU9iamVjdC5hcHBlYXJhbmNlU3RyZWFtQ29udGVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZm9ybU9iamVjdC5WICYmICFmb3JtT2JqZWN0LkRWKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBlbHNlIGNhbGN1bGF0ZSBpdFxuXG4gICAgICAgIHZhciBzdHJlYW0gPSBbXTtcbiAgICAgICAgdmFyIHRleHQgPSBmb3JtT2JqZWN0LlYgfHwgZm9ybU9iamVjdC5EVjtcbiAgICAgICAgdmFyIGNhbGNSZXMgPSBjYWxjdWxhdGVYKGZvcm1PYmplY3QsIHRleHQpO1xuICAgICAgICB2YXIgZm9udEtleSA9IHNjb3BlLmludGVybmFsLmdldEZvbnQoZm9ybU9iamVjdC5mb250TmFtZSwgZm9ybU9iamVjdC5mb250U3R5bGUpLmlkO1xuXG4gICAgICAgIC8vUERGIDMyMDAwLTE6MjAwOCwgcGFnZSA0NDRcbiAgICAgICAgc3RyZWFtLnB1c2goJy9UeCBCTUMnKTtcbiAgICAgICAgc3RyZWFtLnB1c2goJ3EnKTtcbiAgICAgICAgc3RyZWFtLnB1c2goJ0JUJyk7IC8vIEJlZ2luIFRleHRcbiAgICAgICAgc3RyZWFtLnB1c2goc2NvcGUuX19wcml2YXRlX18uZW5jb2RlQ29sb3JTdHJpbmcoZm9ybU9iamVjdC5jb2xvcikpO1xuICAgICAgICBzdHJlYW0ucHVzaCgnLycgKyBmb250S2V5ICsgJyAnICsgZjIoY2FsY1Jlcy5mb250U2l6ZSkgKyAnIFRmJyk7XG4gICAgICAgIHN0cmVhbS5wdXNoKCcxIDAgMCAxIDAgMCBUbScpOy8vIFRyYW5zZm9ybWF0aW9uIE1hdHJpeFxuICAgICAgICBzdHJlYW0ucHVzaChjYWxjUmVzLnRleHQpO1xuICAgICAgICBzdHJlYW0ucHVzaCgnRVQnKTsgLy8gRW5kIFRleHQgICAgXG4gICAgICAgIHN0cmVhbS5wdXNoKCdRJyk7XG4gICAgICAgIHN0cmVhbS5wdXNoKCdFTUMnKTtcblxuICAgICAgICB2YXIgYXBwZWFyYW5jZVN0cmVhbUNvbnRlbnQgPSBuZXcgY3JlYXRlRm9ybVhPYmplY3QoZm9ybU9iamVjdCk7XG4gICAgICAgIGFwcGVhcmFuY2VTdHJlYW1Db250ZW50LnN0cmVhbSA9IHN0cmVhbS5qb2luKFwiXFxuXCIpO1xuICAgICAgICByZXR1cm4gYXBwZWFyYW5jZVN0cmVhbUNvbnRlbnQ7XG4gICAgfTtcblxuICAgIHZhciBjYWxjdWxhdGVYID0gZnVuY3Rpb24gKGZvcm1PYmplY3QsIHRleHQpIHtcbiAgICAgICAgaWYgKGZvcm1PYmplY3QuaXNVbmljb2RlKSB0ZXh0ID0gZm9ybU9iamVjdC50cnVlVmFsdWU7XG4gICAgICAgICB2YXIgbWF4Rm9udFNpemUgPVxuICAgICAgICAgICAgZm9ybU9iamVjdC5mb250U2l6ZSA9PT0gMCA/IGZvcm1PYmplY3QubWF4Rm9udFNpemUgOiBmb3JtT2JqZWN0LmZvbnRTaXplO1xuICAgICAgICB2YXIgcmV0dXJuVmFsdWUgPSB7XG4gICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgZm9udFNpemU6IFwiXCJcbiAgICAgICAgfTtcbiAgICAgICAgLy8gUmVtb3ZlIEJyYWNrZXRzXG4gICAgICAgIHRleHQgPSB0ZXh0LnN1YnN0cigwLCAxKSA9PSBcIihcIiA/IHRleHQuc3Vic3RyKDEpIDogdGV4dDtcbiAgICAgICAgdGV4dCA9XG4gICAgICAgICAgICB0ZXh0LnN1YnN0cih0ZXh0Lmxlbmd0aCAtIDEpID09IFwiKVwiXG4gICAgICAgICAgICA/IHRleHQuc3Vic3RyKDAsIHRleHQubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgIDogdGV4dDtcbiAgICAgICAgLy8gc3BsaXQgaW50byBhcnJheSBvZiB3b3Jkc1xuICAgICAgICB2YXIgdGV4dFNwbGl0ID0gdGV4dC5zcGxpdChcIiBcIik7XG4gICAgICAgIHRleHRTcGxpdCA9IHRleHRTcGxpdC5tYXAoZnVuY3Rpb24gKHdvcmQpIHtcbiAgICAgICAgICAgIHJldHVybiB3b3JkLnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFmb3JtT2JqZWN0Lm11bHRpbGluZSkge1xuICAgICAgICAgICAgdGV4dFNwbGl0ID0gdGV4dFNwbGl0Lm1hcChmdW5jdGlvbiAoYXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFthcnIuam9pbihcIiBcIildXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmb250U2l6ZSA9IG1heEZvbnRTaXplOyAvLyBUaGUgU3RhcnRpbmcgZm9udFNpemUgKFRoZSBNYXhpbXVtKVxuICAgICAgICB2YXIgbGluZVNwYWNpbmcgPSAyO1xuICAgICAgICB2YXIgYm9yZGVyUGFkZGluZyA9IDI7XG5cbiAgICAgICAgdmFyIGhlaWdodCA9IEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdCkgfHwgMDtcbiAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0IDwgMCA/IC1oZWlnaHQgOiBoZWlnaHQ7XG4gICAgICAgIHZhciB3aWR0aCA9IEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRXaWR0aChmb3JtT2JqZWN0KSB8fCAwO1xuICAgICAgICB3aWR0aCA9IHdpZHRoIDwgMCA/IC13aWR0aCA6IHdpZHRoO1xuXG4gICAgICAgIHZhciBpc1NtYWxsZXJUaGFuV2lkdGggPSBmdW5jdGlvbihpLCBsYXN0TGluZSwgZm9udFNpemUpIHtcbiAgICAgICAgICAgIGlmIChpICsgMSA8IHRleHRTcGxpdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciB0bXAgPSBsYXN0TGluZSArIFwiIFwiICsgdGV4dFNwbGl0W2kgKyAxXVswXTtcbiAgICAgICAgICAgIHZhciBUZXh0V2lkdGggPSBjYWxjdWxhdGVGb250U3BhY2UodG1wLCBmb3JtT2JqZWN0LCBmb250U2l6ZSkud2lkdGg7XG4gICAgICAgICAgICB2YXIgRmllbGRXaWR0aCA9IHdpZHRoIC0gMiAqIGJvcmRlclBhZGRpbmc7XG4gICAgICAgICAgICByZXR1cm4gVGV4dFdpZHRoIDw9IEZpZWxkV2lkdGg7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZvbnRTaXplKys7XG4gICAgICAgIEZvbnRTaXplOiB3aGlsZSAoZm9udFNpemUgPiAwKSB7XG4gICAgICAgICAgICB0ZXh0ID0gXCJcIjtcbiAgICAgICAgICAgIGZvbnRTaXplLS07XG4gICAgICAgICAgICB2YXIgdGV4dEhlaWdodCA9IGNhbGN1bGF0ZUZvbnRTcGFjZShcIjNcIiwgZm9ybU9iamVjdCwgZm9udFNpemUpLmhlaWdodDtcbiAgICAgICAgICAgIHZhciBzdGFydFkgPSBmb3JtT2JqZWN0Lm11bHRpbGluZVxuICAgICAgICAgICAgPyBoZWlnaHQgLSBmb250U2l6ZVxuICAgICAgICAgICAgOiAoaGVpZ2h0IC0gdGV4dEhlaWdodCkgLyAyO1xuICAgICAgICAgICAgc3RhcnRZICs9IGxpbmVTcGFjaW5nO1xuICAgICAgICAgICAgdmFyIHN0YXJ0WDtcblxuICAgICAgICAgICAgdmFyIGxhc3RZID0gc3RhcnRZO1xuICAgICAgICAgICAgdmFyIGZpcnN0V29yZEluTGluZSA9IDAsXG4gICAgICAgICAgICBsYXN0V29yZEluTGluZSA9IDA7XG4gICAgICAgICAgICB2YXIgbGFzdExlbmd0aDtcbiAgICAgICAgICAgIHZhciBjdXJyV29yZCA9IDA7XG5cbiAgICAgICAgICAgIGlmIChmb250U2l6ZSA8PSAwKSB7XG4gICAgICAgICAgICAvLyBJbiBjYXNlLCB0aGUgVGV4dCBkb2Vzbid0IGZpdCBhdCBhbGxcbiAgICAgICAgICAgIGZvbnRTaXplID0gMTI7XG4gICAgICAgICAgICB0ZXh0ID0gXCIoLi4uKSBUalxcblwiO1xuICAgICAgICAgICAgdGV4dCArPVxuICAgICAgICAgICAgICAgIFwiJSBXaWR0aCBvZiBUZXh0OiBcIiArXG4gICAgICAgICAgICAgICAgY2FsY3VsYXRlRm9udFNwYWNlKHRleHQsIGZvcm1PYmplY3QsIGZvbnRTaXplKS53aWR0aCArXG4gICAgICAgICAgICAgICAgXCIsIEZpZWxkV2lkdGg6XCIgK1xuICAgICAgICAgICAgICAgIHdpZHRoICtcbiAgICAgICAgICAgICAgICBcIlxcblwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBsYXN0TGluZSA9IFwiXCI7XG4gICAgICAgICAgICB2YXIgbGluZUNvdW50ID0gMDtcbiAgICAgICAgICAgIExpbmU6IGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dFNwbGl0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGV4dFNwbGl0Lmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzV2l0aE5ld0xpbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAodGV4dFNwbGl0W2ldLmxlbmd0aCAhPT0gMSAmJiBjdXJyV29yZCAhPT0gdGV4dFNwbGl0W2ldLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICh0ZXh0SGVpZ2h0ICsgbGluZVNwYWNpbmcpICogKGxpbmVDb3VudCArIDIpICsgbGluZVNwYWNpbmcgPlxuICAgICAgICAgICAgICAgICAgICBoZWlnaHRcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWUgRm9udFNpemU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGFzdExpbmUgKz0gdGV4dFNwbGl0W2ldW2N1cnJXb3JkXTtcbiAgICAgICAgICAgICAgICBpc1dpdGhOZXdMaW5lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBsYXN0V29yZEluTGluZSA9IGk7XG4gICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGFzdExpbmUgKz0gdGV4dFNwbGl0W2ldW2N1cnJXb3JkXSArIFwiIFwiO1xuICAgICAgICAgICAgICAgIGxhc3RMaW5lID1cbiAgICAgICAgICAgICAgICAgICAgbGFzdExpbmUuc3Vic3RyKGxhc3RMaW5lLmxlbmd0aCAtIDEpID09IFwiIFwiXG4gICAgICAgICAgICAgICAgICAgID8gbGFzdExpbmUuc3Vic3RyKDAsIGxhc3RMaW5lLmxlbmd0aCAtIDEpXG4gICAgICAgICAgICAgICAgICAgIDogbGFzdExpbmU7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IHBhcnNlSW50KGkpO1xuICAgICAgICAgICAgICAgIHZhciBuZXh0TGluZUlzU21hbGxlciA9IGlzU21hbGxlclRoYW5XaWR0aChrZXksIGxhc3RMaW5lLCBmb250U2l6ZSk7XG4gICAgICAgICAgICAgICAgdmFyIGlzTGFzdFdvcmQgPSBpID49IHRleHRTcGxpdC5sZW5ndGggLSAxO1xuXG4gICAgICAgICAgICAgICAgaWYgKG5leHRMaW5lSXNTbWFsbGVyICYmICFpc0xhc3RXb3JkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RMaW5lICs9IFwiIFwiO1xuICAgICAgICAgICAgICAgICAgICBjdXJyV29yZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBMaW5lXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghbmV4dExpbmVJc1NtYWxsZXIgJiYgIWlzTGFzdFdvcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3JtT2JqZWN0Lm11bHRpbGluZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBGb250U2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgKHRleHRIZWlnaHQgKyBsaW5lU3BhY2luZykgKiAobGluZUNvdW50ICsgMikgKyBsaW5lU3BhY2luZyA+XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgVGV4dCBpcyBoaWdoZXIgdGhhbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpZWxkT2JqZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBGb250U2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsYXN0V29yZEluTGluZSA9IGtleTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZ28gb25cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNMYXN0V29yZCkge1xuICAgICAgICAgICAgICAgICAgICBsYXN0V29yZEluTGluZSA9IGtleTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGZvcm1PYmplY3QubXVsdGlsaW5lICYmXG4gICAgICAgICAgICAgICAgICAgICh0ZXh0SGVpZ2h0ICsgbGluZVNwYWNpbmcpICogKGxpbmVDb3VudCArIDIpICsgbGluZVNwYWNpbmcgPlxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgVGV4dCBpcyBoaWdoZXIgdGhhbiB0aGUgRmllbGRPYmplY3RcbiAgICAgICAgICAgICAgICAgICAgY29udGludWUgRm9udFNpemU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBsYXN0IGJsYW5rXG5cbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IFwiXCI7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gZmlyc3RXb3JkSW5MaW5lOyB4IDw9IGxhc3RXb3JkSW5MaW5lOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJMaW5lID0gdGV4dFNwbGl0W3hdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybU9iamVjdC5tdWx0aWxpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4ID09PSBsYXN0V29yZEluTGluZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluZSArPSBjdXJyTGluZVtjdXJyV29yZF0gKyBcIiBcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJXb3JkID0gKGN1cnJXb3JkICsgMSkgJSBjdXJyTGluZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4ID09PSBmaXJzdFdvcmRJbkxpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUgKz0gY3VyckxpbmVbY3VyckxpbmUubGVuZ3RoIC0gMV0gKyBcIiBcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxpbmUgKz0gY3VyckxpbmVbMF0gKyBcIiBcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgbGFzdCBibGFua1xuICAgICAgICAgICAgICAgIGxpbmUgPVxuICAgICAgICAgICAgICAgIGxpbmUuc3Vic3RyKGxpbmUubGVuZ3RoIC0gMSkgPT0gXCIgXCJcbiAgICAgICAgICAgICAgICAgICAgPyBsaW5lLnN1YnN0cigwLCBsaW5lLmxlbmd0aCAtIDEpXG4gICAgICAgICAgICAgICAgICAgIDogbGluZTtcbiAgICAgICAgICAgICAgICAvLyBsYXN0TGVuZ3RoIC09IGJsYW5rU3BhY2Uud2lkdGg7XG4gICAgICAgICAgICAgICAgbGFzdExlbmd0aCA9IGNhbGN1bGF0ZUZvbnRTcGFjZShsaW5lLCBmb3JtT2JqZWN0LCBmb250U2l6ZSkud2lkdGg7XG5cbiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgc3RhcnRYXG4gICAgICAgICAgICAgICAgc3dpdGNoIChmb3JtT2JqZWN0LnRleHRBbGlnbikge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgICAgICAgICAgICAgICBzdGFydFggPSB3aWR0aCAtIGxhc3RMZW5ndGggLSBib3JkZXJQYWRkaW5nO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiY2VudGVyXCI6XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0WCA9ICh3aWR0aCAtIGxhc3RMZW5ndGgpIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImxlZnRcIjpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBzdGFydFggPSBib3JkZXJQYWRkaW5nO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGV4dCArPSBmMihzdGFydFgpICsgXCIgXCIgKyBmMihsYXN0WSkgKyBcIiBUZFxcblwiO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZvcm1PYmplY3QuaXNVbmljb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmb250TGlzdCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBmb250TGlzdFtzY29wZS5pbnRlcm5hbC5nZXRGb250KCkuaWRdID0gc2NvcGUuaW50ZXJuYWwuZ2V0Rm9udCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGxpbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICB4OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgeTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5nOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbXV0ZXg6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZGZFc2NhcGU6IHBkZkVzY2FwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVGb250S2V5OiBzY29wZS5pbnRlcm5hbC5nZXRGb250KCkuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udHM6IGZvbnRMaXN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUZvbnRTaXplOiBmb3JtT2JqZWN0LmZvbnRTaXplXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLmludGVybmFsLmV2ZW50cy5wdWJsaXNoKCdwb3N0UHJvY2Vzc1RleHQnLCBwYXlsb2FkKTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCArPSAnPCcgKyBwYXlsb2FkLnRleHQgKyAnPiBUalxcbic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9ICcoJyArIHBkZkVzY2FwZShsaW5lKSArICcpIFRqXFxuJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gcmVzZXQgWCBpbiBQREZcbiAgICAgICAgICAgICAgICB0ZXh0ICs9IC1mMihzdGFydFgpICsgXCIgMCBUZFxcblwiO1xuXG4gICAgICAgICAgICAgICAgLy8gQWZ0ZXIgYSBMaW5lLCBhZGp1c3QgeSBwb3NpdGlvblxuICAgICAgICAgICAgICAgIGxhc3RZID0gLShmb250U2l6ZSArIGxpbmVTcGFjaW5nKTtcblxuICAgICAgICAgICAgICAgIC8vIFJlc2V0IGZvciBuZXh0IGl0ZXJhdGlvbiBzdGVwXG4gICAgICAgICAgICAgICAgbGFzdExlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgZmlyc3RXb3JkSW5MaW5lID0gaXNXaXRoTmV3TGluZSA/IGxhc3RXb3JkSW5MaW5lIDogbGFzdFdvcmRJbkxpbmUgKyAxO1xuICAgICAgICAgICAgICAgIGxpbmVDb3VudCsrO1xuXG4gICAgICAgICAgICAgICAgbGFzdExpbmUgPSBcIlwiO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlIExpbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVyblZhbHVlLnRleHQgPSB0ZXh0O1xuICAgICAgICByZXR1cm5WYWx1ZS5mb250U2l6ZSA9IGZvbnRTaXplO1xuXG4gICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgKiBTbWFsbCB3b3JrYXJvdW5kIGZvciBjYWxjdWxhdGluZyB0aGUgVGV4dE1ldHJpYyBhcHByb3hpbWF0ZWx5LlxuICAgICogXG4gICAgKiBAcGFyYW0gdGV4dFxuICAgICogQHBhcmFtIGZvbnRzaXplXG4gICAgKiBAcmV0dXJucyB7VGV4dE1ldHJpY3N9IChIYXMgSGVpZ2h0IGFuZCBXaWR0aClcbiAgICAqL1xuICAgIHZhciBjYWxjdWxhdGVGb250U3BhY2UgPSBmdW5jdGlvbiAodGV4dCwgZm9ybU9iamVjdCwgZm9udFNpemUpIHtcbiAgICAgICAgdmFyIGZvbnQgPSBzY29wZS5pbnRlcm5hbC5nZXRGb250KGZvcm1PYmplY3QuZm9udE5hbWUsIGZvcm1PYmplY3QuZm9udFN0eWxlKTtcbiAgICAgICAgdmFyIHdpZHRoID0gc2NvcGUuZ2V0U3RyaW5nVW5pdFdpZHRoKHRleHQsIHsgZm9udDogZm9udCwgZm9udFNpemU6IHBhcnNlRmxvYXQoZm9udFNpemUpLCBjaGFyU3BhY2U6IDAgfSkgKiBwYXJzZUZsb2F0KGZvbnRTaXplKTtcbiAgICAgICAgdmFyIGhlaWdodCA9IHNjb3BlLmdldFN0cmluZ1VuaXRXaWR0aChcIjNcIiwgeyBmb250OiBmb250LCBmb250U2l6ZTogcGFyc2VGbG9hdChmb250U2l6ZSksIGNoYXJTcGFjZTogMCB9KSAqIHBhcnNlRmxvYXQoZm9udFNpemUpICogMS41O1xuICAgICAgICByZXR1cm4geyBoZWlnaHQ6IGhlaWdodCwgd2lkdGg6IHdpZHRoIH07XG4gICAgfTtcblxuICAgIHZhciBhY3JvZm9ybVBsdWdpblRlbXBsYXRlID0ge1xuICAgICAgICBmaWVsZHM6IFtdLFxuICAgICAgICB4Rm9ybXM6IFtdLFxuICAgICAgICAvKipcbiAgICAgICAgKiBhY3JvRm9ybURpY3Rpb25hcnlSb290IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBBY3JvRm9ybVxuICAgICAgICAqIERpY3Rpb25hcnkgMDogVGhlIEV2ZW50LVRva2VuLCB0aGUgQWNyb0Zvcm1EaWN0aW9uYXJ5Q2FsbGJhY2sgaGFzXG4gICAgICAgICogMTogVGhlIE9iamVjdCBJRCBvZiB0aGUgUm9vdFxuICAgICAgICAqL1xuICAgICAgICBhY3JvRm9ybURpY3Rpb25hcnlSb290OiBudWxsLFxuICAgICAgICAvKipcbiAgICAgICAgKiBBZnRlciB0aGUgUERGIGdldHMgZXZhbHVhdGVkLCB0aGUgcmVmZXJlbmNlIHRvIHRoZSByb290IGhhcyB0byBiZVxuICAgICAgICAqIHJlc2V0LCB0aGlzIGluZGljYXRlcywgd2hldGhlciB0aGUgcm9vdCBoYXMgYWxyZWFkeSBiZWVuIHByaW50ZWRcbiAgICAgICAgKiBvdXRcbiAgICAgICAgKi9cbiAgICAgICAgcHJpbnRlZE91dDogZmFsc2UsXG4gICAgICAgIGludGVybmFsOiBudWxsLFxuICAgICAgICBpc0luaXRpYWxpemVkOiBmYWxzZVxuICAgIH07XG5cbiAgICB2YXIgYW5ub3RSZWZlcmVuY2VDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy9zZXQgb2JqSWQgdG8gdW5kZWZpbmVkIGFuZCBmb3JjZSBpdCB0byBnZXQgYSBuZXcgb2JqSWQgb24gYnVpbGREb2N1bWVudFxuICAgICAgICBzY29wZS5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbi5hY3JvRm9ybURpY3Rpb25hcnlSb290Lm9iaklkID0gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgZmllbGRzID0gc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4uYWNyb0Zvcm1EaWN0aW9uYXJ5Um9vdC5GaWVsZHM7XG4gICAgICAgIGZvciAodmFyIGkgaW4gZmllbGRzKSB7XG4gICAgICAgICAgICBpZiAoZmllbGRzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvcm1PYmplY3QgPSBmaWVsZHNbaV07XG4gICAgICAgICAgICAgICAgLy9zZXQgb2JqSWQgdG8gdW5kZWZpbmVkIGFuZCBmb3JjZSBpdCB0byBnZXQgYSBuZXcgb2JqSWQgb24gYnVpbGREb2N1bWVudFxuICAgICAgICAgICAgICAgIGZvcm1PYmplY3Qub2JqSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgLy8gYWRkIEFubm90IFJlZmVyZW5jZSFcbiAgICAgICAgICAgICAgICBpZiAoZm9ybU9iamVjdC5oYXNBbm5vdGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlcyBhbiBBbm5vdGF0aW9uIFdpZGdldCBpbiB0aGUgRm9ybSBPYmplY3QsIHB1dCB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVmZXJlbmNlIGluIHRoZSAvQW5ub3QgYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlQW5ub3RhdGlvblJlZmVyZW5jZS5jYWxsKHNjb3BlLCBmb3JtT2JqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHB1dEZvcm0gPSBmdW5jdGlvbiAoZm9ybU9iamVjdCkge1xuICAgICAgICBpZiAoc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4ucHJpbnRlZE91dCkge1xuICAgICAgICAgICAgc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4ucHJpbnRlZE91dCA9IGZhbHNlO1xuICAgICAgICAgICAgc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4uYWNyb0Zvcm1EaWN0aW9uYXJ5Um9vdCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzY29wZS5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbi5hY3JvRm9ybURpY3Rpb25hcnlSb290KSB7XG4gICAgICAgICAgICBpbml0aWFsaXplQWNyb0Zvcm0uY2FsbChzY29wZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4uYWNyb0Zvcm1EaWN0aW9uYXJ5Um9vdC5GaWVsZHMucHVzaChmb3JtT2JqZWN0KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICogQ3JlYXRlIHRoZSBSZWZlcmVuY2UgdG8gdGhlIHdpZGdldEFubm90YXRpb24sIHNvIHRoYXQgaXQgZ2V0cyByZWZlcmVuY2VkXG4gICAgKiBpbiB0aGUgQW5ub3RbXSBpbnQgdGhlKyAoUmVxdWlyZXMgdGhlIEFubm90YXRpb24gUGx1Z2luKVxuICAgICovXG4gICAgdmFyIGNyZWF0ZUFubm90YXRpb25SZWZlcmVuY2UgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgdHlwZTogJ3JlZmVyZW5jZScsXG4gICAgICAgICAgICBvYmplY3Q6IG9iamVjdFxuICAgICAgICB9O1xuICAgICAgICB2YXIgZmluZEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5KSB7IHJldHVybiAoZW50cnkudHlwZSA9PT0gb3B0aW9ucy50eXBlICYmIGVudHJ5Lm9iamVjdCA9PT0gb3B0aW9ucy5vYmplY3QpOyB9O1xuICAgICAgICBpZiAoc2NvcGUuaW50ZXJuYWwuZ2V0UGFnZUluZm8ob2JqZWN0LnBhZ2UpLnBhZ2VDb250ZXh0LmFubm90YXRpb25zLmZpbmQoZmluZEVudHJ5KSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzY29wZS5pbnRlcm5hbC5nZXRQYWdlSW5mbyhvYmplY3QucGFnZSkucGFnZUNvbnRleHQuYW5ub3RhdGlvbnMucHVzaChvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBDYWxsYmFja3NcblxuICAgIHZhciBwdXRDYXRhbG9nQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIFB1dCByZWZlcmVuY2UgdG8gQWNyb0Zvcm0gdG8gRG9jdW1lbnRDYXRhbG9nXG4gICAgICAgIGlmICh0eXBlb2Ygc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4uYWNyb0Zvcm1EaWN0aW9uYXJ5Um9vdCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgLy8gZm9yIHNhZmV0eSwgc2hvdWxkbid0IG5vcm1hbGx5IGJlIHRoZSBjYXNlXG4gICAgICAgICAgICBzY29wZS5pbnRlcm5hbC53cml0ZSgnL0Fjcm9Gb3JtICcgKyBzY29wZS5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbi5hY3JvRm9ybURpY3Rpb25hcnlSb290Lm9iaklkICsgJyAnICsgMCArICcgUicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwdXRDYXRhbG9nQ2FsbGJhY2s6IFJvb3QgbWlzc2luZy4nKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAqIEFkZHMgL0Fjcm9mb3JtIFggMCBSIHRvIERvY3VtZW50IENhdGFsb2csIGFuZCBjcmVhdGVzIHRoZSBBY3JvRm9ybVxuICAgICogRGljdGlvbmFyeVxuICAgICovXG4gICAgdmFyIEFjcm9Gb3JtRGljdGlvbmFyeUNhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBSZW1vdmUgZXZlbnRcbiAgICAgICAgc2NvcGUuaW50ZXJuYWwuZXZlbnRzLnVuc3Vic2NyaWJlKHNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLmFjcm9Gb3JtRGljdGlvbmFyeVJvb3QuX2V2ZW50SUQpO1xuICAgICAgICBkZWxldGUgc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4uYWNyb0Zvcm1EaWN0aW9uYXJ5Um9vdC5fZXZlbnRJRDtcbiAgICAgICAgc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4ucHJpbnRlZE91dCA9IHRydWU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICogQ3JlYXRlcyB0aGUgc2luZ2xlIEZpZWxkcyBhbmQgd3JpdGVzIHRoZW0gaW50byB0aGUgRG9jdW1lbnRcbiAgICAqIFxuICAgICogSWYgZmllbGRBcnJheSBpcyBzZXQsIHVzZSB0aGUgZmllbGRzIHRoYXQgYXJlIGluc2lkZSBpdCBpbnN0ZWFkIG9mIHRoZVxuICAgICogZmllbGRzIGZyb20gdGhlIEFjcm9Sb290IChmb3IgdGhlIEZvcm1YT2JqZWN0cy4uLilcbiAgICAqL1xuICAgIHZhciBjcmVhdGVGaWVsZENhbGxiYWNrID0gZnVuY3Rpb24gKGZpZWxkQXJyYXkpIHtcbiAgICAgICAgdmFyIHN0YW5kYXJkRmllbGRzID0gKCFmaWVsZEFycmF5KTtcblxuICAgICAgICBpZiAoIWZpZWxkQXJyYXkpIHtcbiAgICAgICAgICAgIC8vIGluIGNhc2UgdGhlcmUgaXMgbm8gZmllbGRBcnJheSBzcGVjaWZpZWQsIHdlIHdhbnQgdG8gcHJpbnQgb3V0XG4gICAgICAgICAgICAvLyB0aGUgRmllbGRzIG9mIHRoZSBBY3JvRm9ybVxuICAgICAgICAgICAgLy8gUHJpbnQgb3V0IFJvb3RcbiAgICAgICAgICAgIHNjb3BlLmludGVybmFsLm5ld09iamVjdERlZmVycmVkQmVnaW4oc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4uYWNyb0Zvcm1EaWN0aW9uYXJ5Um9vdC5vYmpJZCwgdHJ1ZSk7XG4gICAgICAgICAgICBzY29wZS5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbi5hY3JvRm9ybURpY3Rpb25hcnlSb290LnB1dFN0cmVhbSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZmllbGRBcnJheSA9IGZpZWxkQXJyYXkgfHwgc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4uYWNyb0Zvcm1EaWN0aW9uYXJ5Um9vdC5LaWRzO1xuXG4gICAgICAgIGZvciAodmFyIGkgaW4gZmllbGRBcnJheSkge1xuICAgICAgICAgICAgaWYgKGZpZWxkQXJyYXkuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmllbGRPYmplY3QgPSBmaWVsZEFycmF5W2ldO1xuICAgICAgICAgICAgICAgIHZhciBrZXlWYWx1ZUxpc3QgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgb2xkUmVjdCA9IGZpZWxkT2JqZWN0LlJlY3Q7XG5cbiAgICAgICAgICAgICAgICBpZiAoZmllbGRPYmplY3QuUmVjdCkge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZE9iamVjdC5SZWN0ID0gY2FsY3VsYXRlQ29vcmRpbmF0ZXMuY2FsbCh0aGlzLCBmaWVsZE9iamVjdC5SZWN0KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTdGFydCBXcml0aW5nIHRoZSBPYmplY3RcbiAgICAgICAgICAgICAgICBzY29wZS5pbnRlcm5hbC5uZXdPYmplY3REZWZlcnJlZEJlZ2luKGZpZWxkT2JqZWN0Lm9iaklkLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgIGZpZWxkT2JqZWN0LkRBID0gQWNyb0Zvcm1BcHBlYXJhbmNlLmNyZWF0ZURlZmF1bHRBcHBlYXJhbmNlU3RyZWFtKGZpZWxkT2JqZWN0KTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZmllbGRPYmplY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGZpZWxkT2JqZWN0LmdldEtleVZhbHVlTGlzdEZvclN0cmVhbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleVZhbHVlTGlzdCA9IGZpZWxkT2JqZWN0LmdldEtleVZhbHVlTGlzdEZvclN0cmVhbSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZpZWxkT2JqZWN0LlJlY3QgPSBvbGRSZWN0O1xuXG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkT2JqZWN0Lmhhc0FwcGVhcmFuY2VTdHJlYW0gJiYgIWZpZWxkT2JqZWN0LmFwcGVhcmFuY2VTdHJlYW1Db250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBBcHBlYXJhbmNlXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcHBlYXJhbmNlID0gY2FsY3VsYXRlQXBwZWFyYW5jZVN0cmVhbS5jYWxsKHRoaXMsIGZpZWxkT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAga2V5VmFsdWVMaXN0LnB1c2goeyBrZXk6ICdBUCcsIHZhbHVlOiBcIjw8L04gXCIgKyBhcHBlYXJhbmNlICsgXCI+PlwiIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLnhGb3Jtcy5wdXNoKGFwcGVhcmFuY2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEFzc3VtZSBBcHBlYXJhbmNlU3RyZWFtQ29udGVudCBpcyBhIEFycmF5IHdpdGggTixSLEQgKGF0IGxlYXN0XG4gICAgICAgICAgICAgICAgLy8gb25lIG9mIHRoZW0hKVxuICAgICAgICAgICAgICAgIGlmIChmaWVsZE9iamVjdC5hcHBlYXJhbmNlU3RyZWFtQ29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXBwZWFyYW5jZVN0cmVhbVN0cmluZyA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIC8vIEl0ZXJhdGUgb3ZlciBOLFIgYW5kIERcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiBmaWVsZE9iamVjdC5hcHBlYXJhbmNlU3RyZWFtQ29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkT2JqZWN0LmFwcGVhcmFuY2VTdHJlYW1Db250ZW50Lmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZmllbGRPYmplY3QuYXBwZWFyYW5jZVN0cmVhbUNvbnRlbnRba107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwZWFyYW5jZVN0cmVhbVN0cmluZyArPSAoXCIvXCIgKyBrICsgXCIgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVhcmFuY2VTdHJlYW1TdHJpbmcgKz0gXCI8PFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID49IDEgfHwgQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXBwZWFyYW5jZVN0cmVhbSBpcyBhbiBBcnJheSBvciBPYmplY3QhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB2YWx1ZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBGdW5jdGlvbiBpcyByZWZlcmVuY2VkLCBjYWxsIGl0IGluIG9yZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIGdldCB0aGUgRm9ybVhPYmplY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gb2JqLmNhbGwodGhpcywgZmllbGRPYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBlYXJhbmNlU3RyZWFtU3RyaW5nICs9IChcIi9cIiArIGkgKyBcIiBcIiArIG9iaiArIFwiIFwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluIGNhc2UgdGhlIFhGb3JtIGlzIGFscmVhZHkgdXNlZCwgZS5nLiBPZmZTdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIENoZWNrQm94ZXMsIGRvbid0IGFkZCBpdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLnhGb3Jtcy5pbmRleE9mKG9iaikgPj0gMCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLnhGb3Jtcy5wdXNoKG9iaik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgRnVuY3Rpb24gaXMgcmVmZXJlbmNlZCwgY2FsbCBpdCBpbiBvcmRlciB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBGb3JtWE9iamVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gb2JqLmNhbGwodGhpcywgZmllbGRPYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVhcmFuY2VTdHJlYW1TdHJpbmcgKz0gKFwiL1wiICsgaSArIFwiIFwiICsgb2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4ueEZvcm1zLmluZGV4T2Yob2JqKSA+PSAwKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLnhGb3Jtcy5wdXNoKG9iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVhcmFuY2VTdHJlYW1TdHJpbmcgKz0gXCI+PlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gYXBwZWFyYW5jZSBzdHJlYW0gaXMgYSBub3JtYWwgT2JqZWN0Li5cbiAgICAgICAgICAgICAgICAgICAga2V5VmFsdWVMaXN0LnB1c2goeyBrZXk6ICdBUCcsIHZhbHVlOiBcIjw8XFxuXCIgKyBhcHBlYXJhbmNlU3RyZWFtU3RyaW5nICsgXCI+PlwiIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNjb3BlLmludGVybmFsLnB1dFN0cmVhbSh7IGFkZGl0aW9uYWxLZXlWYWx1ZXM6IGtleVZhbHVlTGlzdCB9KTtcblxuICAgICAgICAgICAgICAgIHNjb3BlLmludGVybmFsLm91dChcImVuZG9ialwiKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFuZGFyZEZpZWxkcykge1xuICAgICAgICAgICAgY3JlYXRlWEZvcm1PYmplY3RDYWxsYmFjay5jYWxsKHRoaXMsIHNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLnhGb3Jtcyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGNyZWF0ZVhGb3JtT2JqZWN0Q2FsbGJhY2sgPSBmdW5jdGlvbiAoZmllbGRBcnJheSkge1xuICAgICAgICBmb3IgKHZhciBpIGluIGZpZWxkQXJyYXkpIHtcbiAgICAgICAgICAgIGlmIChmaWVsZEFycmF5Lmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGk7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkT2JqZWN0ID0gZmllbGRBcnJheVtpXTtcbiAgICAgICAgICAgICAgICAvLyBTdGFydCBXcml0aW5nIHRoZSBPYmplY3RcbiAgICAgICAgICAgICAgICBzY29wZS5pbnRlcm5hbC5uZXdPYmplY3REZWZlcnJlZEJlZ2luKGZpZWxkT2JqZWN0ICYmIGZpZWxkT2JqZWN0Lm9iaklkLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZmllbGRPYmplY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGZpZWxkT2JqZWN0LnB1dFN0cmVhbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkT2JqZWN0LnB1dFN0cmVhbSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWxldGUgZmllbGRBcnJheVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBpbml0aWFsaXplQWNyb0Zvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmludGVybmFsICE9PSB1bmRlZmluZWQgJiYgKHRoaXMuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4gPT09IHVuZGVmaW5lZCB8fCB0aGlzLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLmlzSW5pdGlhbGl6ZWQgPT09IGZhbHNlKSkge1xuXG4gICAgICAgICAgICBzY29wZSA9IHRoaXM7XG5cbiAgICAgICAgICAgIEFjcm9Gb3JtRmllbGQuRmllbGROdW0gPSAwO1xuICAgICAgICAgICAgdGhpcy5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYWNyb2Zvcm1QbHVnaW5UZW1wbGF0ZSkpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4uYWNyb0Zvcm1EaWN0aW9uYXJ5Um9vdCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4Y2VwdGlvbiB3aGlsZSBjcmVhdGluZyBBY3JvZm9ybURpY3Rpb25hcnlcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzY2FsZUZhY3RvciA9IHNjb3BlLmludGVybmFsLnNjYWxlRmFjdG9yO1xuICAgICAgICAgICAgLy8gVGhlIE9iamVjdCBOdW1iZXIgb2YgdGhlIEFjcm9Gb3JtIERpY3Rpb25hcnlcbiAgICAgICAgICAgIHNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLmFjcm9Gb3JtRGljdGlvbmFyeVJvb3QgPSBuZXcgQWNyb0Zvcm1EaWN0aW9uYXJ5KCk7XG5cbiAgICAgICAgICAgIC8vIGFkZCBDYWxsYmFjayBmb3IgY3JlYXRpbmcgdGhlIEFjcm9Gb3JtIERpY3Rpb25hcnlcbiAgICAgICAgICAgIHNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLmFjcm9Gb3JtRGljdGlvbmFyeVJvb3QuX2V2ZW50SUQgPSBzY29wZS5pbnRlcm5hbC5ldmVudHMuc3Vic2NyaWJlKCdwb3N0UHV0UmVzb3VyY2VzJywgQWNyb0Zvcm1EaWN0aW9uYXJ5Q2FsbGJhY2spO1xuXG4gICAgICAgICAgICBzY29wZS5pbnRlcm5hbC5ldmVudHMuc3Vic2NyaWJlKCdidWlsZERvY3VtZW50JywgYW5ub3RSZWZlcmVuY2VDYWxsYmFjayk7IC8vIGJ1aWxkRG9jdW1lbnRcblxuICAgICAgICAgICAgLy8gUmVnaXN0ZXIgZXZlbnQsIHRoYXQgaXMgdHJpZ2dlcmVkIHdoZW4gdGhlIERvY3VtZW50Q2F0YWxvZyBpc1xuICAgICAgICAgICAgLy8gd3JpdHRlbiwgaW4gb3JkZXIgdG8gYWRkIC9BY3JvRm9ybVxuICAgICAgICAgICAgc2NvcGUuaW50ZXJuYWwuZXZlbnRzLnN1YnNjcmliZSgncHV0Q2F0YWxvZycsIHB1dENhdGFsb2dDYWxsYmFjayk7XG5cbiAgICAgICAgICAgIC8vIFJlZ2lzdGVyIGV2ZW50LCB0aGF0IGNyZWF0ZXMgYWxsIEZpZWxkc1xuICAgICAgICAgICAgc2NvcGUuaW50ZXJuYWwuZXZlbnRzLnN1YnNjcmliZSgncG9zdFB1dFBhZ2VzJywgY3JlYXRlRmllbGRDYWxsYmFjayk7XG5cbiAgICAgICAgICAgIHNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vUERGIDMyMDAwLTE6MjAwOCwgcGFnZSAyNiwgNy4zLjZcbiAgICB2YXIgYXJyYXlUb1BkZkFycmF5ID0ganNQREZBUEkuX19hY3JvZm9ybV9fLmFycmF5VG9QZGZBcnJheSA9IGZ1bmN0aW9uIChhcnJheSkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnJheSkpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gJ1snO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gJyAnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiBhcnJheVtpXSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYXJyYXlbaV0udG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFycmF5W2ldLnN1YnN0cigwLCAxKSAhPT0gJy8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSAnKCcgKyBwZGZFc2NhcGUoYXJyYXlbaV0udG9TdHJpbmcoKSkgKyAnKSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYXJyYXlbaV0udG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRlbnQgKz0gJ10nO1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50IHBhc3NlZCB0byBqc1BERi5fX2Fjcm9mb3JtX18uYXJyYXlUb1BkZkFycmF5Jyk7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBnZXRNYXRjaGVzKHN0cmluZywgcmVnZXgsIGluZGV4KSB7XG4gICAgICAgIGluZGV4IHx8IChpbmRleCA9IDEpOyAvLyBkZWZhdWx0IHRvIHRoZSBmaXJzdCBjYXB0dXJpbmcgZ3JvdXBcbiAgICAgICAgdmFyIG1hdGNoZXMgPSBbXTtcbiAgICAgICAgdmFyIG1hdGNoO1xuICAgICAgICB3aGlsZSAobWF0Y2ggPSByZWdleC5leGVjKHN0cmluZykpIHtcbiAgICAgICAgICAgIG1hdGNoZXMucHVzaChtYXRjaFtpbmRleF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXRjaGVzO1xuICAgIH1cbiAgICB2YXIgcGRmQXJyYXlUb1N0cmluZ0FycmF5ID0gZnVuY3Rpb24gKGFycmF5KSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgaWYgKHR5cGVvZiBhcnJheSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmVzdWx0ID0gZ2V0TWF0Y2hlcyhhcnJheSwgL1xcKCguKj8pXFwpL2cpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIHZhciB0b1BkZlN0cmluZyA9IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICAgICAgc3RyaW5nID0gc3RyaW5nIHx8IFwiXCI7XG4gICAgICAgIHN0cmluZy50b1N0cmluZygpO1xuICAgICAgICBzdHJpbmcgPSAnKCcgKyBwZGZFc2NhcGUoc3RyaW5nKSArICcpJztcbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICB9O1xuXG4gICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgICAvLyBDbGFzc2VzXG4gICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcblxuICAgIC8qKlxuICAgICogQGNsYXNzIEFjcm9Gb3JtUERGT2JqZWN0XG4gICAgKiBAY2xhc3NkZXNjIEEgQWNyb0Zvcm1QREZPYmplY3RcbiAgICAqL1xuICAgIHZhciBBY3JvRm9ybVBERk9iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9vYmpJZDtcblxuICAgICAgICAvKipcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybVBERk9iamVjdCNvYmpJZFxuICAgICAgICAqIEB0eXBlIHthbnl9XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnb2JqSWQnLCB7XG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9vYmpJZCkge1xuICAgICAgICAgICAgICAgICAgICBfb2JqSWQgPSBzY29wZS5pbnRlcm5hbC5uZXdPYmplY3REZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gX29iaklkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBfb2JqSWQgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICogQGZ1bmN0aW9uIEFjcm9Gb3JtUERGT2JqZWN0LnRvU3RyaW5nXG4gICAgKi9cbiAgICBBY3JvRm9ybVBERk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9iaklkICsgXCIgMCBSXCI7XG4gICAgfTtcblxuICAgIEFjcm9Gb3JtUERGT2JqZWN0LnByb3RvdHlwZS5wdXRTdHJlYW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBrZXlWYWx1ZUxpc3QgPSB0aGlzLmdldEtleVZhbHVlTGlzdEZvclN0cmVhbSgpO1xuICAgICAgICBzY29wZS5pbnRlcm5hbC5wdXRTdHJlYW0oeyBkYXRhOiB0aGlzLnN0cmVhbSwgYWRkaXRpb25hbEtleVZhbHVlczoga2V5VmFsdWVMaXN0IH0pO1xuICAgICAgICBzY29wZS5pbnRlcm5hbC5vdXQoXCJlbmRvYmpcIik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICogUmV0dXJucyBhbiBrZXktdmFsdWUtTGlzdCBvZiBhbGwgbm9uLWNvbmZpZ3VyYWJsZSBWYXJpYWJsZXMgZnJvbSB0aGUgT2JqZWN0XG4gICAgKiBcbiAgICAqIEBuYW1lIGdldEtleVZhbHVlTGlzdEZvclN0cmVhbVxuICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAqL1xuICAgIEFjcm9Gb3JtUERGT2JqZWN0LnByb3RvdHlwZS5nZXRLZXlWYWx1ZUxpc3RGb3JTdHJlYW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjcmVhdGVLZXlWYWx1ZUxpc3RGcm9tRmllbGRPYmplY3QgPSBmdW5jdGlvbiAoZmllbGRPYmplY3QpIHtcbiAgICAgICAgICAgIHZhciBrZXlWYWx1ZUxpc3QgPSBbXTtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZmllbGRPYmplY3QpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChrZXkgIT0gJ2NvbnRlbnQnICYmIGtleSAhPSAnYXBwZWFyYW5jZVN0cmVhbUNvbnRlbnQnICYmIGtleS5zdWJzdHJpbmcoMCwgMSkgIT0gXCJfXCIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4ga2V5cykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGZpZWxkT2JqZWN0LCBrZXlzW2ldKTtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydHlEZXNjcmlwdG9yICYmIHByb3BlcnR5RGVzY3JpcHRvci5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBmaWVsZE9iamVjdFtrZXldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVZhbHVlTGlzdC5wdXNoKHsga2V5OiBrZXksIHZhbHVlOiBhcnJheVRvUGRmQXJyYXkodmFsdWUpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFjcm9Gb3JtUERGT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW4gY2FzZSBpdCBpcyBhIHJlZmVyZW5jZSB0byBhbm90aGVyIFBERk9iamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0YWtlIHRoZSByZWZlcmVuY2UgbnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5VmFsdWVMaXN0LnB1c2goeyBrZXk6IGtleSwgdmFsdWU6IHZhbHVlLm9iaklkICsgXCIgMCBSXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5VmFsdWVMaXN0LnB1c2goeyBrZXk6IGtleSwgdmFsdWU6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGtleVZhbHVlTGlzdDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gY3JlYXRlS2V5VmFsdWVMaXN0RnJvbUZpZWxkT2JqZWN0KHRoaXMpO1xuICAgIH07XG5cbiAgICB2YXIgQWNyb0Zvcm1YT2JqZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBBY3JvRm9ybVBERk9iamVjdC5jYWxsKHRoaXMpO1xuXG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdUeXBlJywge1xuICAgICAgICAgICAgdmFsdWU6IFwiL1hPYmplY3RcIixcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB3cml0ZWFibGU6IHRydWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdTdWJ0eXBlJywge1xuICAgICAgICAgICAgdmFsdWU6IFwiL0Zvcm1cIixcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB3cml0ZWFibGU6IHRydWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdGb3JtVHlwZScsIHtcbiAgICAgICAgICAgIHZhbHVlOiAxLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHdyaXRlYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgX0JCb3ggPSBbXTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdCQm94Jywge1xuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHdyaXRlYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfQkJveDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIF9CQm94ID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnUmVzb3VyY2VzJywge1xuICAgICAgICAgICAgdmFsdWU6IFwiMiAwIFJcIixcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB3cml0ZWFibGU6IHRydWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIF9zdHJlYW07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnc3RyZWFtJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIF9zdHJlYW0gPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9zdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9zdHJlYW07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgaW5oZXJpdChBY3JvRm9ybVhPYmplY3QsIEFjcm9Gb3JtUERGT2JqZWN0KTtcblxuICAgIHZhciBBY3JvRm9ybURpY3Rpb25hcnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIEFjcm9Gb3JtUERGT2JqZWN0LmNhbGwodGhpcyk7XG5cbiAgICAgICAgdmFyIF9LaWRzID0gW107XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdLaWRzJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoX0tpZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX0tpZHM7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ0ZpZWxkcycsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfS2lkcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRGVmYXVsdCBBcHBlYXJhbmNlXG4gICAgICAgIHZhciBfREE7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnREEnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9EQSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gJygnICsgX0RBICsgJyknXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBfREEgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGluaGVyaXQoQWNyb0Zvcm1EaWN0aW9uYXJ5LCBBY3JvRm9ybVBERk9iamVjdCk7XG5cbiAgICAvKipcbiAgICAqIFRoZSBGaWVsZCBPYmplY3QgY29udGFpbnMgdGhlIFZhcmlhYmxlcywgdGhhdCBldmVyeSBGaWVsZCBuZWVkc1xuICAgICogXG4gICAgKiBAY2xhc3MgQWNyb0Zvcm1GaWVsZFxuICAgICogQGNsYXNzZGVzYyBBbiBBY3JvRm9ybSBGaWVsZE9iamVjdFxuICAgICovXG4gICAgdmFyIEFjcm9Gb3JtRmllbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIEFjcm9Gb3JtUERGT2JqZWN0LmNhbGwodGhpcyk7XG5cbiAgICAgICAgLy9Bbm5vdGF0aW9uLUZsYWcgU2VlIFRhYmxlIDE2NVxuICAgICAgICB2YXIgX0YgPSA0O1xuICAgICAgICB0aGlzLmlzVW5pY29kZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnRydWVWYWx1ZSA9ICcnO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ0YnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX0Y7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBfRiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB2YWx1ZSBcIicgKyB2YWx1ZSArICdcIiBmb3IgYXR0cmlidXRlIEYgc3VwcGxpZWQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgKiAoUERGIDEuMikgSWYgc2V0LCBwcmludCB0aGUgYW5ub3RhdGlvbiB3aGVuIHRoZSBwYWdlIGlzIHByaW50ZWQuIElmIGNsZWFyLCBuZXZlciBwcmludCB0aGUgYW5ub3RhdGlvbiwgcmVnYXJkbGVzcyBvZiB3ZXRoZXIgaXMgaXMgZGlzcGxheWVkIG9uIHRoZSBzY3JlZW4uIFxuICAgICAgICAqIE5PVEUgMiBUaGlzIGNhbiBiZSB1c2VmdWwgZm9yIGFubm90YXRpb25zIHJlcHJlc2VudGluZyBpbnRlcmFjdGl2ZSBwdXNoYnV0dG9ucywgd2hpY2ggd291bGQgc2VydmUgbm8gbWVhbmluZ2Z1bCBwdXJwb3NlIG9uIHRoZSBwcmludGVkIHBhZ2UuXG4gICAgICAgICpcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUZpZWxkI3Nob3dXaGVuUHJpbnRlZFxuICAgICAgICAqIEBkZWZhdWx0IHRydWVcbiAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdzaG93V2hlblByaW50ZWQnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4oZ2V0Qml0Rm9yUGRmKF9GLCAzKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoQm9vbGVhbih2YWx1ZSkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5GID0gc2V0Qml0Rm9yUGRmKF9GLCAzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkYgPSBjbGVhckJpdEZvclBkZihfRiwgMyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgX0ZmID0gMDtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdGZicsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfRmY7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBfRmYgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdmFsdWUgXCInICsgdmFsdWUgKyAnXCIgZm9yIGF0dHJpYnV0ZSBGZiBzdXBwbGllZC4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBfUmVjdCA9IFtdO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ1JlY3QnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoX1JlY3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBfUmVjdDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgX1JlY3QgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfUmVjdCA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogVGhlIHgtcG9zaXRpb24gb2YgdGhlIGZpZWxkLlxuICAgICAgICAqXG4gICAgICAgICogQG5hbWUgQWNyb0Zvcm1GaWVsZCN4XG4gICAgICAgICogQGRlZmF1bHQgbnVsbFxuICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAneCcsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9SZWN0IHx8IGlzTmFOKF9SZWN0WzBdKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFudGlTY2FsZShfUmVjdFswXSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBfUmVjdFswXSA9IHNjYWxlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogVGhlIHktcG9zaXRpb24gb2YgdGhlIGZpZWxkLlxuICAgICAgICAqXG4gICAgICAgICogQG5hbWUgQWNyb0Zvcm1GaWVsZCN5XG4gICAgICAgICogQGRlZmF1bHQgbnVsbFxuICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAneScsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9SZWN0IHx8IGlzTmFOKF9SZWN0WzFdKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFudGlTY2FsZShfUmVjdFsxXSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBfUmVjdFsxXSA9IHNjYWxlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogVGhlIHdpZHRoIG9mIHRoZSBmaWVsZC5cbiAgICAgICAgKlxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtRmllbGQjd2lkdGhcbiAgICAgICAgKiBAZGVmYXVsdCBudWxsXG4gICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICd3aWR0aCcsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9SZWN0IHx8IGlzTmFOKF9SZWN0WzJdKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFudGlTY2FsZShfUmVjdFsyXSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBfUmVjdFsyXSA9IHNjYWxlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogVGhlIGhlaWdodCBvZiB0aGUgZmllbGQuXG4gICAgICAgICpcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUZpZWxkI2hlaWdodFxuICAgICAgICAqIEBkZWZhdWx0IG51bGxcbiAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2hlaWdodCcsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9SZWN0IHx8IGlzTmFOKF9SZWN0WzNdKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFudGlTY2FsZShfUmVjdFszXSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBfUmVjdFszXSA9IHNjYWxlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIF9GVCA9IFwiXCI7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnRlQnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfRlRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnL0J0bic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJy9UeCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJy9DaCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJy9TaWcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgX0ZUID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB2YWx1ZSBcIicgKyB2YWx1ZSArICdcIiBmb3IgYXR0cmlidXRlIEZUIHN1cHBsaWVkLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIF9UID0gbnVsbDtcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ1QnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICghX1QgfHwgX1QubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbiBjYXNlIG9mIGEgQ2hpbGQgZnJvbSBhIFJhZGlvwrRHcm91cCwgeW91IGRvbid0IG5lZWQgYSBGaWVsZE5hbWVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBBY3JvRm9ybUNoaWxkQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX1QgPSBcIkZpZWxkT2JqZWN0XCIgKyAoQWNyb0Zvcm1GaWVsZC5GaWVsZE51bSsrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICcoJyArIHBkZkVzY2FwZShfVCkgKyAnKSc7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBfVCA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAqIChPcHRpb25hbCkgVGhlIHBhcnRpYWwgZmllbGQgbmFtZSAoc2VlIDEyLjcuMy4yLCDigJxGaWVsZCBOYW1lc+KAnSkuXG4gICAgICAgICpcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUZpZWxkI2ZpZWxkTmFtZVxuICAgICAgICAqIEBkZWZhdWx0IG51bGxcbiAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2ZpZWxkTmFtZScsIHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX1Q7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBfVCA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgX2ZvbnROYW1lID0gJ2hlbHZldGljYSc7XG4gICAgICAgIC8qKlxuICAgICAgICAqIFRoZSBmb250TmFtZSBvZiB0aGUgZm9udCB0byBiZSB1c2VkLlxuICAgICAgICAqXG4gICAgICAgICogQG5hbWUgQWNyb0Zvcm1GaWVsZCNmb250TmFtZVxuICAgICAgICAqIEBkZWZhdWx0ICdoZWx2ZXRpY2EnXG4gICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdmb250TmFtZScsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2ZvbnROYW1lO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgX2ZvbnROYW1lID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBfZm9udFN0eWxlID0gJ25vcm1hbCc7XG4gICAgICAgIC8qKlxuICAgICAgICAqIFRoZSBmb250U3R5bGUgb2YgdGhlIGZvbnQgdG8gYmUgdXNlZC5cbiAgICAgICAgKlxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtRmllbGQjZm9udFN0eWxlXG4gICAgICAgICogQGRlZmF1bHQgJ25vcm1hbCdcbiAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2ZvbnRTdHlsZScsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2ZvbnRTdHlsZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIF9mb250U3R5bGUgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIF9mb250U2l6ZSA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAqIFRoZSBmb250U2l6ZSBvZiB0aGUgZm9udCB0byBiZSB1c2VkLlxuICAgICAgICAqXG4gICAgICAgICogQG5hbWUgQWNyb0Zvcm1GaWVsZCNmb250U2l6ZVxuICAgICAgICAqIEBkZWZhdWx0IDAgKGZvciBhdXRvKVxuICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnZm9udFNpemUnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFudGlTY2FsZShfZm9udFNpemUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgX2ZvbnRTaXplID0gc2NhbGUodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgX21heEZvbnRTaXplID0gNTA7XG4gICAgICAgIC8qKlxuICAgICAgICAqIFRoZSBtYXhpbXVtIGZvbnRTaXplIG9mIHRoZSBmb250IHRvIGJlIHVzZWQuXG4gICAgICAgICpcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUZpZWxkI21heEZvbnRTaXplXG4gICAgICAgICogQGRlZmF1bHQgMCAoZm9yIGF1dG8pXG4gICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdtYXhGb250U2l6ZScsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYW50aVNjYWxlKF9tYXhGb250U2l6ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBfbWF4Rm9udFNpemUgPSBzY2FsZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBfY29sb3IgPSAnYmxhY2snO1xuICAgICAgICAvKipcbiAgICAgICAgKiBUaGUgY29sb3Igb2YgdGhlIHRleHRcbiAgICAgICAgKlxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtRmllbGQjY29sb3JcbiAgICAgICAgKiBAZGVmYXVsdCAnYmxhY2snXG4gICAgICAgICogQHR5cGUge3N0cmluZ3xyZ2JhfVxuICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2NvbG9yJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfY29sb3I7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBfY29sb3IgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIF9EQSA9ICcvRjEgMCBUZiAwIGcnO1xuICAgICAgICAvLyBEZWZpbmVzIHRoZSBkZWZhdWx0IGFwcGVhcmFuY2UgKE5lZWRlZCBmb3IgdmFyaWFibGUgVGV4dClcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdEQScsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfREFcbiAgICAgICAgICAgICAgICAgICAgfHwgdGhpcyBpbnN0YW5jZW9mIEFjcm9Gb3JtQ2hpbGRDbGFzc1xuICAgICAgICAgICAgICAgICAgICB8fCB0aGlzIGluc3RhbmNlb2YgQWNyb0Zvcm1UZXh0RmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvUGRmU3RyaW5nKF9EQSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgX0RBID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgdmFyIF9EViA9IG51bGw7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnRFYnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9EVikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKHRoaXMgaW5zdGFuY2VvZiBBY3JvRm9ybUJ1dHRvbiA9PT0gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0b1BkZlN0cmluZyhfRFYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gX0RWO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGlmICgodGhpcyBpbnN0YW5jZW9mIEFjcm9Gb3JtQnV0dG9uID09PSBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLnN1YnN0cigwLCAxKSA9PT0gJygnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfRFYgPSBwZGZVbmVzY2FwZSh2YWx1ZS5zdWJzdHIoMSwgdmFsdWUubGVuZ3RoIC0gMikpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgX0RWID0gcGRmVW5lc2NhcGUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX0RWID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgKiAoT3B0aW9uYWw7IGluaGVyaXRhYmxlKSBUaGUgZGVmYXVsdCB2YWx1ZSB0byB3aGljaCB0aGUgZmllbGQgcmV2ZXJ0cyB3aGVuIGEgcmVzZXQtZm9ybSBhY3Rpb24gaXMgZXhlY3V0ZWQgKHNlZSAxMi43LjUuMywg4oCcUmVzZXQtRm9ybSBBY3Rpb27igJ0pLiBUaGUgZm9ybWF0IG9mIHRoaXMgdmFsdWUgaXMgdGhlIHNhbWUgYXMgdGhhdCBvZiB2YWx1ZS4gXG4gICAgICAgICpcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUZpZWxkI2RlZmF1bHRWYWx1ZVxuICAgICAgICAqIEBkZWZhdWx0IG51bGxcbiAgICAgICAgKiBAdHlwZSB7YW55fVxuICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2RlZmF1bHRWYWx1ZScsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHRoaXMgaW5zdGFuY2VvZiBBY3JvRm9ybUJ1dHRvbiA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBkZlVuZXNjYXBlKF9EVi5zdWJzdHIoMSwgX0RWLmxlbmd0aCAtIDEpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX0RWO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBpZiAoKHRoaXMgaW5zdGFuY2VvZiBBY3JvRm9ybUJ1dHRvbiA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgX0RWID0gJy8nICsgdmFsdWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX0RWID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgX1YgPSBudWxsO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ1YnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1VuaWNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9WO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIV9WKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgodGhpcyBpbnN0YW5jZW9mIEFjcm9Gb3JtQnV0dG9uID09PSBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvUGRmU3RyaW5nKF9WKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9WO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVW5pY29kZSkge1xuICAgICAgICAgICAgICAgICAgICBfViA9IHRvVW5pY29kZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJ1ZVZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMgaW5zdGFuY2VvZiBBY3JvRm9ybUJ1dHRvbiA9PT0gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuc3Vic3RyKDAsIDEpID09PSAnKCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfViA9IHBkZlVuZXNjYXBlKHZhbHVlLnN1YnN0cigxLCB2YWx1ZS5sZW5ndGggLSAyKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9WID0gcGRmVW5lc2NhcGUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgX1YgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogKE9wdGlvbmFsOyBpbmhlcml0YWJsZSkgVGhlIGZpZWxk4oCZcyB2YWx1ZSwgd2hvc2UgZm9ybWF0IHZhcmllcyBkZXBlbmRpbmcgb24gdGhlIGZpZWxkIHR5cGUuIFNlZSB0aGUgZGVzY3JpcHRpb25zIG9mIGluZGl2aWR1YWwgZmllbGQgdHlwZXMgZm9yIGZ1cnRoZXIgaW5mb3JtYXRpb24uIFxuICAgICAgICAqXG4gICAgICAgICogQG5hbWUgQWNyb0Zvcm1GaWVsZCN2YWx1ZVxuICAgICAgICAqIEBkZWZhdWx0IG51bGxcbiAgICAgICAgKiBAdHlwZSB7YW55fVxuICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3ZhbHVlJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICgodGhpcyBpbnN0YW5jZW9mIEFjcm9Gb3JtQnV0dG9uID09PSB0cnVlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGRmVW5lc2NhcGUoX1Yuc3Vic3RyKDEsIF9WLmxlbmd0aCAtIDEpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX1Y7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGlmICgodGhpcyBpbnN0YW5jZW9mIEFjcm9Gb3JtQnV0dG9uID09PSB0cnVlKSkge1xuICAgICAgICAgICAgICAgICAgICBfViA9ICcvJyArIHZhbHVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF9WID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgKiBDaGVjayBpZiBmaWVsZCBoYXMgYW5ub3RhdGlvbnNcbiAgICAgICAgKlxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtRmllbGQjaGFzQW5ub3RhdGlvblxuICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2hhc0Fubm90YXRpb24nLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLlJlY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ1R5cGUnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAodGhpcy5oYXNBbm5vdGF0aW9uKSA/IFwiL0Fubm90XCIgOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ1N1YnR5cGUnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAodGhpcy5oYXNBbm5vdGF0aW9uKSA/IFwiL1dpZGdldFwiIDogbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIF9oYXNBcHBlYXJhbmNlU3RyZWFtID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAqIHRydWUgaWYgZmllbGQgaGFzIGFuIGFwcGVhcmFuY2VTdHJlYW1cbiAgICAgICAgKlxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtRmllbGQjaGFzQXBwZWFyYW5jZVN0cmVhbVxuICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2hhc0FwcGVhcmFuY2VTdHJlYW0nLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGVhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9oYXNBcHBlYXJhbmNlU3RyZWFtO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBCb29sZWFuKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBfaGFzQXBwZWFyYW5jZVN0cmVhbSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgKiBUaGUgcGFnZSBvbiB3aGljaCB0aGUgQWNyb0Zvcm1GaWVsZCBpcyBwbGFjZWRcbiAgICAgICAgKlxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtRmllbGQjcGFnZVxuICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICovXG4gICAgICAgIHZhciBfcGFnZTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdwYWdlJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRlYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICghX3BhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9wYWdlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBfcGFnZSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgKiBJZiBzZXQsIHRoZSB1c2VyIG1heSBub3QgY2hhbmdlIHRoZSB2YWx1ZSBvZiB0aGUgZmllbGQuIEFueSBhc3NvY2lhdGVkIHdpZGdldCBhbm5vdGF0aW9ucyB3aWxsIG5vdCBpbnRlcmFjdCB3aXRoIHRoZSB1c2VyOyB0aGF0IGlzLCB0aGV5IHdpbGwgbm90IHJlc3BvbmQgdG8gbW91c2UgY2xpY2tzIG9yIGNoYW5nZSB0aGVpciBhcHBlYXJhbmNlIGluIHJlc3BvbnNlIHRvIG1vdXNlIG1vdGlvbnMuIFRoaXMgZmxhZyBpcyB1c2VmdWwgZm9yIGZpZWxkcyB3aG9zZSB2YWx1ZXMgYXJlIGNvbXB1dGVkIG9yIGltcG9ydGVkIGZyb20gYSBkYXRhYmFzZS4gXG4gICAgICAgICpcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUZpZWxkI3JlYWRPbmx5XG4gICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdyZWFkT25seScsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMSkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKEJvb2xlYW4odmFsdWUpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRmYgPSBzZXRCaXRGb3JQZGYodGhpcy5GZiwgMSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5GZiA9IGNsZWFyQml0Rm9yUGRmKHRoaXMuRmYsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogSWYgc2V0LCB0aGUgZmllbGQgc2hhbGwgaGF2ZSBhIHZhbHVlIGF0IHRoZSB0aW1lIGl0IGlzIGV4cG9ydGVkIGJ5IGEgc3VibWl0Zm9ybSBhY3Rpb24gKHNlZSAxMi43LjUuMiwg4oCcU3VibWl0LUZvcm0gQWN0aW9u4oCdKS4gXG4gICAgICAgICpcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUZpZWxkI3JlcXVpcmVkXG4gICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdyZXF1aXJlZCcsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMikpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKEJvb2xlYW4odmFsdWUpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRmYgPSBzZXRCaXRGb3JQZGYodGhpcy5GZiwgMik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5GZiA9IGNsZWFyQml0Rm9yUGRmKHRoaXMuRmYsIDIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogSWYgc2V0LCB0aGUgZmllbGQgc2hhbGwgbm90IGJlIGV4cG9ydGVkIGJ5IGEgc3VibWl0LWZvcm0gYWN0aW9uIChzZWUgMTIuNy41LjIsIOKAnFN1Ym1pdC1Gb3JtIEFjdGlvbuKAnSlcbiAgICAgICAgKlxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtRmllbGQjbm9FeHBvcnRcbiAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ25vRXhwb3J0Jywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBCb29sZWFuKGdldEJpdEZvclBkZih0aGlzLkZmLCAzKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoQm9vbGVhbih2YWx1ZSkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5GZiA9IHNldEJpdEZvclBkZih0aGlzLkZmLCAzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkZmID0gY2xlYXJCaXRGb3JQZGYodGhpcy5GZiwgMyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuXG4gICAgICAgIHZhciBfUSA9IG51bGw7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnUScsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9RID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBfUTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChbMCwgMSwgMl0uaW5kZXhPZih2YWx1ZSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIF9RID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHZhbHVlIFwiJyArIHZhbHVlICsgJ1wiIGZvciBhdHRyaWJ1dGUgUSBzdXBwbGllZC4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAqIChPcHRpb25hbDsgaW5oZXJpdGFibGUpIEEgY29kZSBzcGVjaWZ5aW5nIHRoZSBmb3JtIG9mIHF1YWRkaW5nIChqdXN0aWZpY2F0aW9uKSB0aGF0IHNoYWxsIGJlIHVzZWQgaW4gZGlzcGxheWluZyB0aGUgdGV4dDpcbiAgICAgICAgKiAnbGVmdCcsICdjZW50ZXInLCAncmlnaHQnXG4gICAgICAgICpcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUZpZWxkI3RleHRBbGlnblxuICAgICAgICAqIEBkZWZhdWx0ICdsZWZ0J1xuICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAndGV4dEFsaWduJywge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9RKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9ICdsZWZ0JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAnY2VudGVyJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAncmlnaHQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9RID0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjZW50ZXInOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfUSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9RID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuICAgIGluaGVyaXQoQWNyb0Zvcm1GaWVsZCwgQWNyb0Zvcm1QREZPYmplY3QpO1xuXG4gICAgLyoqXG4gICAgKiBAY2xhc3MgQWNyb0Zvcm1DaG9pY2VGaWVsZFxuICAgICogQGV4dGVuZHMgQWNyb0Zvcm1GaWVsZFxuICAgICovXG4gICAgdmFyIEFjcm9Gb3JtQ2hvaWNlRmllbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIEFjcm9Gb3JtRmllbGQuY2FsbCh0aGlzKTtcbiAgICAgICAgLy8gRmllbGQgVHlwZSA9IENob2ljZSBGaWVsZFxuICAgICAgICB0aGlzLkZUID0gXCIvQ2hcIjtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICB0aGlzLlYgPSAnKCknO1xuXG4gICAgICAgIHRoaXMuZm9udE5hbWUgPSAnemFwZmRpbmdiYXRzJztcbiAgICAgICAgLy8gVG9wIEluZGV4XG4gICAgICAgIHZhciBfVEkgPSAwO1xuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnVEknLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfVEk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBfVEkgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gTUsgZml4IGZvciBBY3JvYmF0XG4gICAgICAgIHZhciBfTUsgPSAnPDwgL0JHIFsgMC45NzUgMC45NzUgMC45NzUgXSAgPj4nO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ01LJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX01LO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgX01LID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAqIChPcHRpb25hbCkgRm9yIHNjcm9sbGFibGUgbGlzdCBib3hlcywgdGhlIHRvcCBpbmRleCAodGhlIGluZGV4IGluIHRoZSBPcHQgYXJyYXkgb2YgdGhlIGZpcnN0IG9wdGlvbiB2aXNpYmxlIGluIHRoZSBsaXN0KS4gRGVmYXVsdCB2YWx1ZTogMC5cbiAgICAgICAgKiBcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUNob2ljZUZpZWxkI3RvcEluZGV4XG4gICAgICAgICogQGRlZmF1bHQgMFxuICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAndG9wSW5kZXgnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9USTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIF9USSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgX09wdCA9IFtdO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ09wdCcsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNVbmljb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJheVRvUGRmVW5pY29kZUFycmF5KF9PcHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXlUb1BkZkFycmF5KF9PcHQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgX09wdCA9IHBkZkFycmF5VG9TdHJpbmdBcnJheSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICogQG1lbWJlcm9mIEFjcm9Gb3JtQ2hvaWNlRmllbGRcbiAgICAgICAgKiBAbmFtZSBnZXRPcHRpb25zXG4gICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICogQHJldHVybnMge2FycmF5fSBhcnJheSBvZiBPcHRpb25zXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfT3B0O1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogQG1lbWJlcm9mIEFjcm9Gb3JtQ2hvaWNlRmllbGRcbiAgICAgICAgKiBAbmFtZSBzZXRPcHRpb25zXG4gICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICogQHBhcmFtIHthcnJheX0gdmFsdWVcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZXRPcHRpb25zID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBfT3B0ID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAodGhpcy5zb3J0KSB7XG4gICAgICAgICAgICAgICAgX09wdC5zb3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgKiBAbWVtYmVyb2YgQWNyb0Zvcm1DaG9pY2VGaWVsZFxuICAgICAgICAqIEBuYW1lIGFkZE9wdGlvblxuICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmFkZE9wdGlvbiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSB8fCBcIlwiO1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgX09wdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNvcnQpIHtcbiAgICAgICAgICAgICAgICBfT3B0LnNvcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAqIEBtZW1iZXJvZiBBY3JvRm9ybUNob2ljZUZpZWxkXG4gICAgICAgICogQG5hbWUgcmVtb3ZlT3B0aW9uXG4gICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICAgICogQHBhcmFtIHtib29sZWFufSBhbGxFbnRyaWVzIChkZWZhdWx0OiBmYWxzZSlcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZW1vdmVPcHRpb24gPSBmdW5jdGlvbiAodmFsdWUsIGFsbEVudHJpZXMpIHtcbiAgICAgICAgICAgIGFsbEVudHJpZXMgPSBhbGxFbnRyaWVzIHx8IGZhbHNlXG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlIHx8IFwiXCI7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgICAgIHdoaWxlIChfT3B0LmluZGV4T2YodmFsdWUpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIF9PcHQuc3BsaWNlKF9PcHQuaW5kZXhPZih2YWx1ZSksIDEpO1xuICAgICAgICAgICAgICAgIGlmIChhbGxFbnRyaWVzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogSWYgc2V0LCB0aGUgZmllbGQgaXMgYSBjb21ibyBib3g7IGlmIGNsZWFyLCB0aGUgZmllbGQgaXMgYSBsaXN0IGJveC4gXG4gICAgICAgICpcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUNob2ljZUZpZWxkI2NvbWJvXG4gICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdjb21ibycsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMTgpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChCb29sZWFuKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkZmID0gc2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDE4KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkZmID0gY2xlYXJCaXRGb3JQZGYodGhpcy5GZiwgMTgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogSWYgc2V0LCB0aGUgY29tYm8gYm94IHNoYWxsIGluY2x1ZGUgYW4gZWRpdGFibGUgdGV4dCBib3ggYXMgd2VsbCBhcyBhIGRyb3AtZG93biBsaXN0OyBpZiBjbGVhciwgaXQgc2hhbGwgaW5jbHVkZSBvbmx5IGEgZHJvcC1kb3duIGxpc3QuIFRoaXMgZmxhZyBzaGFsbCBiZSB1c2VkIG9ubHkgaWYgdGhlIENvbWJvIGZsYWcgaXMgc2V0LiBcbiAgICAgICAgKlxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtQ2hvaWNlRmllbGQjZWRpdFxuICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnZWRpdCcsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMTkpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIC8vUERGIDMyMDAwLTE6MjAwOCwgcGFnZSA0NDRcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb21ibyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoQm9vbGVhbih2YWx1ZSkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuRmYgPSBzZXRCaXRGb3JQZGYodGhpcy5GZiwgMTkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5GZiA9IGNsZWFyQml0Rm9yUGRmKHRoaXMuRmYsIDE5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogSWYgc2V0LCB0aGUgZmllbGTigJlzIG9wdGlvbiBpdGVtcyBzaGFsbCBiZSBzb3J0ZWQgYWxwaGFiZXRpY2FsbHkuIFRoaXMgZmxhZyBpcyBpbnRlbmRlZCBmb3IgdXNlIGJ5IHdyaXRlcnMsIG5vdCBieSByZWFkZXJzLiBDb25mb3JtaW5nIHJlYWRlcnMgc2hhbGwgZGlzcGxheSB0aGUgb3B0aW9ucyBpbiB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSBvY2N1ciBpbiB0aGUgT3B0IGFycmF5IChzZWUgVGFibGUgMjMxKS4gXG4gICAgICAgICpcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUNob2ljZUZpZWxkI3NvcnRcbiAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3NvcnQnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4oZ2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDIwKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoQm9vbGVhbih2YWx1ZSkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5GZiA9IHNldEJpdEZvclBkZih0aGlzLkZmLCAyMCk7XG4gICAgICAgICAgICAgICAgICAgIF9PcHQuc29ydCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRmYgPSBjbGVhckJpdEZvclBkZih0aGlzLkZmLCAyMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgKiAoUERGIDEuNCkgSWYgc2V0LCBtb3JlIHRoYW4gb25lIG9mIHRoZSBmaWVsZOKAmXMgb3B0aW9uIGl0ZW1zIG1heSBiZSBzZWxlY3RlZCBzaW11bHRhbmVvdXNseTsgaWYgY2xlYXIsIGF0IG1vc3Qgb25lIGl0ZW0gc2hhbGwgYmUgc2VsZWN0ZWQgXG4gICAgICAgICpcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUNob2ljZUZpZWxkI211bHRpU2VsZWN0XG4gICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdtdWx0aVNlbGVjdCcsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMjIpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChCb29sZWFuKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkZmID0gc2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDIyKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRmYgPSBjbGVhckJpdEZvclBkZih0aGlzLkZmLCAyMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgKiAoUERGIDEuNCkgSWYgc2V0LCB0ZXh0IGVudGVyZWQgaW4gdGhlIGZpZWxkIHNoYWxsIG5vdCBiZSBzcGVsbGNoZWNrZWQuIFRoaXMgZmxhZyBzaGFsbCBub3QgYmUgdXNlZCB1bmxlc3MgdGhlIENvbWJvIGFuZCBFZGl0IGZsYWdzIGFyZSBib3RoIHNldC4gXG4gICAgICAgICpcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUNob2ljZUZpZWxkI2RvTm90U3BlbGxDaGVja1xuICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnZG9Ob3RTcGVsbENoZWNrJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBCb29sZWFuKGdldEJpdEZvclBkZih0aGlzLkZmLCAyMykpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKEJvb2xlYW4odmFsdWUpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRmYgPSBzZXRCaXRGb3JQZGYodGhpcy5GZiwgMjMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRmYgPSBjbGVhckJpdEZvclBkZih0aGlzLkZmLCAyMyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgKiAoUERGIDEuNSkgSWYgc2V0LCB0aGUgbmV3IHZhbHVlIHNoYWxsIGJlIGNvbW1pdHRlZCBhcyBzb29uIGFzIGEgc2VsZWN0aW9uIGlzIG1hZGUgKGNvbW1vbmx5IHdpdGggdGhlIHBvaW50aW5nIGRldmljZSkuIEluIHRoaXMgY2FzZSwgc3VwcGx5aW5nIGEgdmFsdWUgZm9yIGEgZmllbGQgaW52b2x2ZXMgdGhyZWUgYWN0aW9uczogc2VsZWN0aW5nIHRoZSBmaWVsZCBmb3IgZmlsbC1pbiwgc2VsZWN0aW5nIGEgY2hvaWNlIGZvciB0aGUgZmlsbC1pbiB2YWx1ZSwgYW5kIGxlYXZpbmcgdGhhdCBmaWVsZCwgd2hpY2ggZmluYWxpemVzIG9yIOKAnGNvbW1pdHPigJ0gdGhlIGRhdGEgY2hvaWNlIGFuZCB0cmlnZ2VycyBhbnkgYWN0aW9ucyBhc3NvY2lhdGVkIHdpdGggdGhlIGVudHJ5IG9yIGNoYW5naW5nIG9mIHRoaXMgZGF0YS4gSWYgdGhpcyBmbGFnIGlzIG9uLCB0aGVuIHByb2Nlc3NpbmcgZG9lcyBub3Qgd2FpdCBmb3IgbGVhdmluZyB0aGUgZmllbGQgYWN0aW9uIHRvIG9jY3VyLCBidXQgaW1tZWRpYXRlbHkgcHJvY2VlZHMgdG8gdGhlIHRoaXJkIHN0ZXAuXG4gICAgICAgICogVGhpcyBvcHRpb24gZW5hYmxlcyBhcHBsaWNhdGlvbnMgdG8gcGVyZm9ybSBhbiBhY3Rpb24gb25jZSBhIHNlbGVjdGlvbiBpcyBtYWRlLCB3aXRob3V0IHJlcXVpcmluZyB0aGUgdXNlciB0byBleGl0IHRoZSBmaWVsZC4gSWYgY2xlYXIsIHRoZSBuZXcgdmFsdWUgaXMgbm90IGNvbW1pdHRlZCB1bnRpbCB0aGUgdXNlciBleGl0cyB0aGUgZmllbGQuXG4gICAgICAgICpcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUNob2ljZUZpZWxkI2NvbW1pdE9uU2VsQ2hhbmdlXG4gICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdjb21taXRPblNlbENoYW5nZScsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMjcpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChCb29sZWFuKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkZmID0gc2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDI3KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkZmID0gY2xlYXJCaXRGb3JQZGYodGhpcy5GZiwgMjcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cblxuICAgICAgICB0aGlzLmhhc0FwcGVhcmFuY2VTdHJlYW0gPSBmYWxzZTtcbiAgICB9O1xuICAgIGluaGVyaXQoQWNyb0Zvcm1DaG9pY2VGaWVsZCwgQWNyb0Zvcm1GaWVsZCk7XG5cbiAgICAvKipcbiAgICAqIEBjbGFzcyBBY3JvRm9ybUxpc3RCb3hcbiAgICAqIEBleHRlbmRzIEFjcm9Gb3JtQ2hvaWNlRmllbGRcbiAgICAqIEBleHRlbmRzIEFjcm9Gb3JtRmllbGRcbiAgICAqL1xuICAgIHZhciBBY3JvRm9ybUxpc3RCb3ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIEFjcm9Gb3JtQ2hvaWNlRmllbGQuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5mb250TmFtZSA9ICdoZWx2ZXRpY2EnO1xuXG4gICAgICAgIC8vUERGIDMyMDAwLTE6MjAwOCwgcGFnZSA0NDRcbiAgICAgICAgdGhpcy5jb21ibyA9IGZhbHNlO1xuICAgIH07XG4gICAgaW5oZXJpdChBY3JvRm9ybUxpc3RCb3gsIEFjcm9Gb3JtQ2hvaWNlRmllbGQpO1xuXG4gICAgLyoqXG4gICAgKiBAY2xhc3MgQWNyb0Zvcm1Db21ib0JveCBcbiAgICAqIEBleHRlbmRzIEFjcm9Gb3JtTGlzdEJveFxuICAgICogQGV4dGVuZHMgQWNyb0Zvcm1DaG9pY2VGaWVsZFxuICAgICogQGV4dGVuZHMgQWNyb0Zvcm1GaWVsZFxuICAgICovXG4gICAgdmFyIEFjcm9Gb3JtQ29tYm9Cb3ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIEFjcm9Gb3JtTGlzdEJveC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmNvbWJvID0gdHJ1ZTtcbiAgICB9O1xuICAgIGluaGVyaXQoQWNyb0Zvcm1Db21ib0JveCwgQWNyb0Zvcm1MaXN0Qm94KTtcblxuICAgIC8qKlxuICAgICogQGNsYXNzIEFjcm9Gb3JtRWRpdEJveCBcbiAgICAqIEBleHRlbmRzIEFjcm9Gb3JtQ29tYm9Cb3hcbiAgICAqIEBleHRlbmRzIEFjcm9Gb3JtTGlzdEJveFxuICAgICogQGV4dGVuZHMgQWNyb0Zvcm1DaG9pY2VGaWVsZFxuICAgICogQGV4dGVuZHMgQWNyb0Zvcm1GaWVsZFxuICAgICovXG4gICAgdmFyIEFjcm9Gb3JtRWRpdEJveCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgQWNyb0Zvcm1Db21ib0JveC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmVkaXQgPSB0cnVlO1xuICAgIH07XG4gICAgaW5oZXJpdChBY3JvRm9ybUVkaXRCb3gsIEFjcm9Gb3JtQ29tYm9Cb3gpO1xuXG4gICAgLyoqXG4gICAgKiBAY2xhc3MgQWNyb0Zvcm1CdXR0b25cbiAgICAqIEBleHRlbmRzIEFjcm9Gb3JtRmllbGRcbiAgICAqL1xuICAgIHZhciBBY3JvRm9ybUJ1dHRvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgQWNyb0Zvcm1GaWVsZC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLkZUID0gXCIvQnRuXCI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogKFJhZGlvIGJ1dHRvbnMgb25seSkgSWYgc2V0LCBleGFjdGx5IG9uZSByYWRpbyBidXR0b24gc2hhbGwgYmUgc2VsZWN0ZWQgYXQgYWxsIHRpbWVzOyBzZWxlY3RpbmcgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBidXR0b24gaGFzIG5vIGVmZmVjdC4gSWYgY2xlYXIsIGNsaWNraW5nIHRoZSBzZWxlY3RlZCBidXR0b24gZGVzZWxlY3RzIGl0LCBsZWF2aW5nIG5vIGJ1dHRvbiBzZWxlY3RlZC5cbiAgICAgICAgKiBcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUJ1dHRvbiNub1RvZ2dsZVRvT2ZmXG4gICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbm9Ub2dnbGVUb09mZicsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMTUpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChCb29sZWFuKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkZmID0gc2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDE1KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkZmID0gY2xlYXJCaXRGb3JQZGYodGhpcy5GZiwgMTUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogSWYgc2V0LCB0aGUgZmllbGQgaXMgYSBzZXQgb2YgcmFkaW8gYnV0dG9uczsgaWYgY2xlYXIsIHRoZSBmaWVsZCBpcyBhIGNoZWNrYm94LiBUaGlzIGZsYWcgbWF5IGJlIHNldCBvbmx5IGlmIHRoZSBQdXNoYnV0dG9uIGZsYWcgaXMgY2xlYXIuIFxuICAgICAgICAqIFxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtQnV0dG9uI3JhZGlvXG4gICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAncmFkaW8nLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4oZ2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDE2KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoQm9vbGVhbih2YWx1ZSkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5GZiA9IHNldEJpdEZvclBkZih0aGlzLkZmLCAxNik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5GZiA9IGNsZWFyQml0Rm9yUGRmKHRoaXMuRmYsIDE2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAqIElmIHNldCwgdGhlIGZpZWxkIGlzIGEgcHVzaGJ1dHRvbiB0aGF0IGRvZXMgbm90IHJldGFpbiBhIHBlcm1hbmVudCB2YWx1ZS4gXG4gICAgICAgICpcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUJ1dHRvbiNwdXNoQnV0dG9uXG4gICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAncHVzaEJ1dHRvbicsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMTcpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChCb29sZWFuKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkZmID0gc2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDE3KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkZmID0gY2xlYXJCaXRGb3JQZGYodGhpcy5GZiwgMTcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogKFBERiAxLjUpIElmIHNldCwgYSBncm91cCBvZiByYWRpbyBidXR0b25zIHdpdGhpbiBhIHJhZGlvIGJ1dHRvbiBmaWVsZCB0aGF0IHVzZSB0aGUgc2FtZSB2YWx1ZSBmb3IgdGhlIG9uIHN0YXRlIHdpbGwgdHVybiBvbiBhbmQgb2ZmIGluIHVuaXNvbjsgdGhhdCBpcyBpZiBvbmUgaXMgY2hlY2tlZCwgdGhleSBhcmUgYWxsIGNoZWNrZWQuIElmIGNsZWFyLCB0aGUgYnV0dG9ucyBhcmUgbXV0dWFsbHkgZXhjbHVzaXZlICh0aGUgc2FtZSBiZWhhdmlvciBhcyBIVE1MIHJhZGlvIGJ1dHRvbnMpLlxuICAgICAgICAqXG4gICAgICAgICogQG5hbWUgQWNyb0Zvcm1CdXR0b24jcmFkaW9Jc1VuaXNvblxuICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3JhZGlvSXNVbmlzb24nLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4oZ2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDI2KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoQm9vbGVhbih2YWx1ZSkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5GZiA9IHNldEJpdEZvclBkZih0aGlzLkZmLCAyNik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5GZiA9IGNsZWFyQml0Rm9yUGRmKHRoaXMuRmYsIDI2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBfTUsgPSB7fTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdNSycsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhfTUspLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKCc8PCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5O1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGtleSBpbiBfTUspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKCcvJyArIGtleSArICcgKCcgKyBfTUtba2V5XSArICcpJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goJz4+Jyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQuam9pbignXFxuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIF9NSyA9IHZhbHVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgKiBGcm9tIHRoZSBQREYgcmVmZXJlbmNlOlxuICAgICAgICAqIChPcHRpb25hbCwgYnV0dG9uIGZpZWxkcyBvbmx5KSBUaGUgd2lkZ2V0IGFubm90YXRpb24ncyBub3JtYWwgY2FwdGlvbiB3aGljaCBzaGFsbCBiZSBkaXNwbGF5ZWQgd2hlbiBpdCBpcyBub3QgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgdXNlci4gXG4gICAgICAgICogVW5saWtlIHRoZSByZW1haW5pbmcgZW50cmllcyBsaXN0ZWQgaW4gdGhpcyBUYWJsZSB3aGljaCBhcHBseSBvbmx5IHRvIHdpZGdldCBhbm5vdGF0aW9ucyBhc3NvY2lhdGVkIHdpdGggcHVzaGJ1dHRvbiBmaWVsZHMgKHNlZSBQdXNoYnV0dG9ucyBpbiAxMi43LjQuMiwgXCJCdXR0b24gRmllbGRzXCIpLCB0aGUgQ0EgZW50cnkgbWF5IGJlIHVzZWQgd2l0aCBhbnkgdHlwZSBvZiBidXR0b24gZmllbGQsIGluY2x1ZGluZyBjaGVjayBib3hlcyAoc2VlIENoZWNrIEJveGVzIGluIDEyLjcuNC4yLCBcIkJ1dHRvbiBGaWVsZHNcIikgYW5kIHJhZGlvIGJ1dHRvbnMgKFJhZGlvIEJ1dHRvbnMgaW4gMTIuNy40LjIsIFwiQnV0dG9uIEZpZWxkc1wiKS5cbiAgICAgICAgKlxuICAgICAgICAqIC0gJzgnID0gQ3Jvc3MsIFxuICAgICAgICAqIC0gJ2wnID0gIENpcmNsZSxcbiAgICAgICAgKiAtICcnID0gbm90aGluZ1xuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtQnV0dG9uI2NhcHRpb25cbiAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2NhcHRpb24nLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9NSy5DQSB8fCAnJztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgX01LLkNBID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgX0FTO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ0FTJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9BUztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIF9BUyA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgICAqIChSZXF1aXJlZCBpZiB0aGUgYXBwZWFyYW5jZSBkaWN0aW9uYXJ5IEFQIGNvbnRhaW5zIG9uZSBvciBtb3JlIHN1YmRpY3Rpb25hcmllczsgUERGIDEuMikgVGhlIGFubm90YXRpb24ncyBhcHBlYXJhbmNlIHN0YXRlLCB3aGljaCBzZWxlY3RzIHRoZSBhcHBsaWNhYmxlIGFwcGVhcmFuY2Ugc3RyZWFtIGZyb20gYW4gYXBwZWFyYW5jZSBzdWJkaWN0aW9uYXJ5IChzZWUgU2VjdGlvbiAxMi41LjUsIFwiQXBwZWFyYW5jZSBTdHJlYW1zXCIpXG4gICAgICAgICpcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUJ1dHRvbiNhcHBlYXJhbmNlU3RhdGVcbiAgICAgICAgKiBAdHlwZSB7YW55fVxuICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2FwcGVhcmFuY2VTdGF0ZScsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX0FTLnN1YnN0cigxLCBfQVMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBfQVMgPSAnLycgKyB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9O1xuICAgIGluaGVyaXQoQWNyb0Zvcm1CdXR0b24sIEFjcm9Gb3JtRmllbGQpO1xuXG4gICAgLyoqXG4gICAgKiBAY2xhc3MgQWNyb0Zvcm1QdXNoQnV0dG9uXG4gICAgKiBAZXh0ZW5kcyBBY3JvRm9ybUJ1dHRvblxuICAgICogQGV4dGVuZHMgQWNyb0Zvcm1GaWVsZFxuICAgICovXG4gICAgdmFyIEFjcm9Gb3JtUHVzaEJ1dHRvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgQWNyb0Zvcm1CdXR0b24uY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5wdXNoQnV0dG9uID0gdHJ1ZTtcbiAgICB9O1xuICAgIGluaGVyaXQoQWNyb0Zvcm1QdXNoQnV0dG9uLCBBY3JvRm9ybUJ1dHRvbik7XG5cbiAgICAvKipcbiAgICAqIEBjbGFzcyBBY3JvRm9ybVJhZGlvQnV0dG9uXG4gICAgKiBAZXh0ZW5kcyBBY3JvRm9ybUJ1dHRvblxuICAgICogQGV4dGVuZHMgQWNyb0Zvcm1GaWVsZFxuICAgICovXG4gICAgdmFyIEFjcm9Gb3JtUmFkaW9CdXR0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIEFjcm9Gb3JtQnV0dG9uLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMucmFkaW8gPSB0cnVlO1xuICAgICAgICB0aGlzLnB1c2hCdXR0b24gPSBmYWxzZTtcblxuICAgICAgICB2YXIgX0tpZHMgPSBbXTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdLaWRzJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX0tpZHM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIF9LaWRzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX0tpZHMgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgaW5oZXJpdChBY3JvRm9ybVJhZGlvQnV0dG9uLCBBY3JvRm9ybUJ1dHRvbik7XG5cbiAgICAvKipcbiAgICAqIFRoZSBDaGlsZCBjbGFzcyBvZiBhIFJhZGlvQnV0dG9uICh0aGUgcmFkaW9Hcm91cCkgLT4gVGhlIHNpbmdsZSBCdXR0b25zXG4gICAgKiBcbiAgICAqIEBjbGFzcyBBY3JvRm9ybUNoaWxkQ2xhc3NcbiAgICAqIEBleHRlbmRzIEFjcm9Gb3JtRmllbGRcbiAgICAqIEBpZ25vcmVcbiAgICAqL1xuICAgIHZhciBBY3JvRm9ybUNoaWxkQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIEFjcm9Gb3JtRmllbGQuY2FsbCh0aGlzKTtcblxuICAgICAgICB2YXIgX3BhcmVudDtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdQYXJlbnQnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3BhcmVudDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIF9wYXJlbnQgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIF9vcHRpb25OYW1lO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ29wdGlvbk5hbWUnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfb3B0aW9uTmFtZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIF9vcHRpb25OYW1lID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBfTUsgPSB7fTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdNSycsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCgnPDwnKTtcbiAgICAgICAgICAgICAgICB2YXIga2V5O1xuICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIF9NSykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCgnLycgKyBrZXkgKyAnICgnICsgX01LW2tleV0gKyAnKScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCgnPj4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LmpvaW4oJ1xcbicpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICBfTUsgPSB2YWx1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogRnJvbSB0aGUgUERGIHJlZmVyZW5jZTpcbiAgICAgICAgKiAoT3B0aW9uYWwsIGJ1dHRvbiBmaWVsZHMgb25seSkgVGhlIHdpZGdldCBhbm5vdGF0aW9uJ3Mgbm9ybWFsIGNhcHRpb24gd2hpY2ggc2hhbGwgYmUgZGlzcGxheWVkIHdoZW4gaXQgaXMgbm90IGludGVyYWN0aW5nIHdpdGggdGhlIHVzZXIuIFxuICAgICAgICAqIFVubGlrZSB0aGUgcmVtYWluaW5nIGVudHJpZXMgbGlzdGVkIGluIHRoaXMgVGFibGUgd2hpY2ggYXBwbHkgb25seSB0byB3aWRnZXQgYW5ub3RhdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHB1c2hidXR0b24gZmllbGRzIChzZWUgUHVzaGJ1dHRvbnMgaW4gMTIuNy40LjIsIFwiQnV0dG9uIEZpZWxkc1wiKSwgdGhlIENBIGVudHJ5IG1heSBiZSB1c2VkIHdpdGggYW55IHR5cGUgb2YgYnV0dG9uIGZpZWxkLCBpbmNsdWRpbmcgY2hlY2sgYm94ZXMgKHNlZSBDaGVjayBCb3hlcyBpbiAxMi43LjQuMiwgXCJCdXR0b24gRmllbGRzXCIpIGFuZCByYWRpbyBidXR0b25zIChSYWRpbyBCdXR0b25zIGluIDEyLjcuNC4yLCBcIkJ1dHRvbiBGaWVsZHNcIikuXG4gICAgICAgICpcbiAgICAgICAgKiAtICc4JyA9IENyb3NzLCBcbiAgICAgICAgKiAtICdsJyA9ICBDaXJjbGUsXG4gICAgICAgICogLSAnJyA9IG5vdGhpbmdcbiAgICAgICAgKiBAbmFtZSBBY3JvRm9ybUJ1dHRvbiNjYXB0aW9uXG4gICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdjYXB0aW9uJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfTUsuQ0EgfHwgJyc7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIF9NSy5DQSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIF9BUztcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdBUycsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfQVM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBfQVMgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogKFJlcXVpcmVkIGlmIHRoZSBhcHBlYXJhbmNlIGRpY3Rpb25hcnkgQVAgY29udGFpbnMgb25lIG9yIG1vcmUgc3ViZGljdGlvbmFyaWVzOyBQREYgMS4yKSBUaGUgYW5ub3RhdGlvbidzIGFwcGVhcmFuY2Ugc3RhdGUsIHdoaWNoIHNlbGVjdHMgdGhlIGFwcGxpY2FibGUgYXBwZWFyYW5jZSBzdHJlYW0gZnJvbSBhbiBhcHBlYXJhbmNlIHN1YmRpY3Rpb25hcnkgKHNlZSBTZWN0aW9uIDEyLjUuNSwgXCJBcHBlYXJhbmNlIFN0cmVhbXNcIilcbiAgICAgICAgKlxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtQnV0dG9uI2FwcGVhcmFuY2VTdGF0ZVxuICAgICAgICAqIEB0eXBlIHthbnl9XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnYXBwZWFyYW5jZVN0YXRlJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfQVMuc3Vic3RyKDEsIF9BUy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIF9BUyA9ICcvJyArIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jYXB0aW9uID0gJ2wnO1xuICAgICAgICB0aGlzLmFwcGVhcmFuY2VTdGF0ZSA9ICdPZmYnO1xuICAgICAgICAvLyB0b2RvOiBzZXQgQXBwZWFyYW5jZVR5cGUgYXMgdmFyaWFibGUgdGhhdCBjYW4gYmUgc2V0IGZyb20gdGhlXG4gICAgICAgIC8vIG91dHNpZGUuLi5cbiAgICAgICAgdGhpcy5fQXBwZWFyYW5jZVR5cGUgPSBBY3JvRm9ybUFwcGVhcmFuY2UuUmFkaW9CdXR0b24uQ2lyY2xlO1xuICAgICAgICAvLyBUaGUgRGVmYXVsdCBhcHBlYXJhbmNlVHlwZSBpcyB0aGUgQ2lyY2xlXG4gICAgICAgIHRoaXMuYXBwZWFyYW5jZVN0cmVhbUNvbnRlbnQgPSB0aGlzLl9BcHBlYXJhbmNlVHlwZS5jcmVhdGVBcHBlYXJhbmNlU3RyZWFtKHRoaXMub3B0aW9uTmFtZSk7XG4gICAgfTtcbiAgICBpbmhlcml0KEFjcm9Gb3JtQ2hpbGRDbGFzcywgQWNyb0Zvcm1GaWVsZCk7XG5cbiAgICBBY3JvRm9ybVJhZGlvQnV0dG9uLnByb3RvdHlwZS5zZXRBcHBlYXJhbmNlID0gZnVuY3Rpb24gKGFwcGVhcmFuY2UpIHtcbiAgICAgICAgaWYgKCEoJ2NyZWF0ZUFwcGVhcmFuY2VTdHJlYW0nIGluIGFwcGVhcmFuY2UgJiYgJ2dldENBJyBpbiBhcHBlYXJhbmNlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgYXNzaWduIEFwcGVhcmFuY2UgdG8gUmFkaW9CdXR0b24uIEFwcGVhcmFuY2Ugd2FzIEludmFsaWQhXCIpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIG9iaklkIGluIHRoaXMuS2lkcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuS2lkcy5oYXNPd25Qcm9wZXJ0eShvYmpJZCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLktpZHNbb2JqSWRdO1xuICAgICAgICAgICAgICAgIGNoaWxkLmFwcGVhcmFuY2VTdHJlYW1Db250ZW50ID0gYXBwZWFyYW5jZS5jcmVhdGVBcHBlYXJhbmNlU3RyZWFtKGNoaWxkLm9wdGlvbk5hbWUpO1xuICAgICAgICAgICAgICAgIGNoaWxkLmNhcHRpb24gPSBhcHBlYXJhbmNlLmdldENBKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQWNyb0Zvcm1SYWRpb0J1dHRvbi5wcm90b3R5cGUuY3JlYXRlT3B0aW9uID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgLy8gQ3JlYXRlIG5ldyBDaGlsZCBmb3IgUmFkaW9Hcm91cFxuICAgICAgICB2YXIgY2hpbGQgPSBuZXcgQWNyb0Zvcm1DaGlsZENsYXNzKCk7XG4gICAgICAgIGNoaWxkLlBhcmVudCA9IHRoaXM7XG4gICAgICAgIGNoaWxkLm9wdGlvbk5hbWUgPSBuYW1lO1xuICAgICAgICAvLyBBZGQgdG8gUGFyZW50XG4gICAgICAgIHRoaXMuS2lkcy5wdXNoKGNoaWxkKTtcblxuICAgICAgICBhZGRGaWVsZC5jYWxsKHRoaXMsIGNoaWxkKTtcblxuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICogQGNsYXNzIEFjcm9Gb3JtQ2hlY2tCb3hcbiAgICAqIEBleHRlbmRzIEFjcm9Gb3JtQnV0dG9uXG4gICAgKiBAZXh0ZW5kcyBBY3JvRm9ybUZpZWxkXG4gICAgKi9cbiAgICB2YXIgQWNyb0Zvcm1DaGVja0JveCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgQWNyb0Zvcm1CdXR0b24uY2FsbCh0aGlzKTtcblxuICAgICAgICB0aGlzLmZvbnROYW1lID0gJ3phcGZkaW5nYmF0cyc7XG4gICAgICAgIHRoaXMuY2FwdGlvbiA9ICczJztcbiAgICAgICAgdGhpcy5hcHBlYXJhbmNlU3RhdGUgPSAnT24nO1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJPblwiO1xuICAgICAgICB0aGlzLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICB0aGlzLmFwcGVhcmFuY2VTdHJlYW1Db250ZW50ID0gQWNyb0Zvcm1BcHBlYXJhbmNlLkNoZWNrQm94LmNyZWF0ZUFwcGVhcmFuY2VTdHJlYW0oKTtcbiAgICB9O1xuICAgIGluaGVyaXQoQWNyb0Zvcm1DaGVja0JveCwgQWNyb0Zvcm1CdXR0b24pO1xuXG4gICAgLyoqXG4gICAgKiBAY2xhc3MgQWNyb0Zvcm1UZXh0RmllbGRcbiAgICAqIEBleHRlbmRzIEFjcm9Gb3JtRmllbGRcbiAgICAqL1xuICAgIHZhciBBY3JvRm9ybVRleHRGaWVsZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgQWNyb0Zvcm1GaWVsZC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLkZUID0gJy9UeCc7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogSWYgc2V0LCB0aGUgZmllbGQgbWF5IGNvbnRhaW4gbXVsdGlwbGUgbGluZXMgb2YgdGV4dDsgaWYgY2xlYXIsIHRoZSBmaWVsZOKAmXMgdGV4dCBzaGFsbCBiZSByZXN0cmljdGVkIHRvIGEgc2luZ2xlIGxpbmUuIFxuICAgICAgICAqXG4gICAgICAgICogQG5hbWUgQWNyb0Zvcm1UZXh0RmllbGQjbXVsdGlsaW5lXG4gICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbXVsdGlsaW5lJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBCb29sZWFuKGdldEJpdEZvclBkZih0aGlzLkZmLCAxMykpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKEJvb2xlYW4odmFsdWUpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRmYgPSBzZXRCaXRGb3JQZGYodGhpcy5GZiwgMTMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRmYgPSBjbGVhckJpdEZvclBkZih0aGlzLkZmLCAxMyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgKiAoUERGIDEuNCkgSWYgc2V0LCB0aGUgdGV4dCBlbnRlcmVkIGluIHRoZSBmaWVsZCByZXByZXNlbnRzIHRoZSBwYXRobmFtZSBvZiBhIGZpbGUgd2hvc2UgY29udGVudHMgc2hhbGwgYmUgc3VibWl0dGVkIGFzIHRoZSB2YWx1ZSBvZiB0aGUgZmllbGQuIFxuICAgICAgICAqIFxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtVGV4dEZpZWxkI2ZpbGVTZWxlY3RcbiAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdmaWxlU2VsZWN0Jywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBCb29sZWFuKGdldEJpdEZvclBkZih0aGlzLkZmLCAyMSkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKEJvb2xlYW4odmFsdWUpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRmYgPSBzZXRCaXRGb3JQZGYodGhpcy5GZiwgMjEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRmYgPSBjbGVhckJpdEZvclBkZih0aGlzLkZmLCAyMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgKiAoUERGIDEuNCkgSWYgc2V0LCB0ZXh0IGVudGVyZWQgaW4gdGhlIGZpZWxkIHNoYWxsIG5vdCBiZSBzcGVsbC1jaGVja2VkLiBcbiAgICAgICAgKlxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtVGV4dEZpZWxkI2RvTm90U3BlbGxDaGVja1xuICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2RvTm90U3BlbGxDaGVjaycsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMjMpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChCb29sZWFuKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkZmID0gc2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDIzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkZmID0gY2xlYXJCaXRGb3JQZGYodGhpcy5GZiwgMjMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogKFBERiAxLjQpIElmIHNldCwgdGhlIGZpZWxkIHNoYWxsIG5vdCBzY3JvbGwgKGhvcml6b250YWxseSBmb3Igc2luZ2xlLWxpbmUgZmllbGRzLCB2ZXJ0aWNhbGx5IGZvciBtdWx0aXBsZS1saW5lIGZpZWxkcykgdG8gYWNjb21tb2RhdGUgbW9yZSB0ZXh0IHRoYW4gZml0cyB3aXRoaW4gaXRzIGFubm90YXRpb24gcmVjdGFuZ2xlLiBPbmNlIHRoZSBmaWVsZCBpcyBmdWxsLCBubyBmdXJ0aGVyIHRleHQgc2hhbGwgYmUgYWNjZXB0ZWQgZm9yIGludGVyYWN0aXZlIGZvcm0gZmlsbGluZzsgZm9yIG5vbmludGVyYWN0aXZlIGZvcm0gZmlsbGluZywgdGhlIGZpbGxlciBzaG91bGQgdGFrZSBjYXJlIG5vdCB0byBhZGQgbW9yZSBjaGFyYWN0ZXIgdGhhbiB3aWxsIHZpc2libHkgZml0IGluIHRoZSBkZWZpbmVkIGFyZWEuIFxuICAgICAgICAqIFxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtVGV4dEZpZWxkI2RvTm90U2Nyb2xsXG4gICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnZG9Ob3RTY3JvbGwnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4oZ2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDI0KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoQm9vbGVhbih2YWx1ZSkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5GZiA9IHNldEJpdEZvclBkZih0aGlzLkZmLCAyNCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5GZiA9IGNsZWFyQml0Rm9yUGRmKHRoaXMuRmYsIDI0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAqIChQREYgMS41KSBNYXkgYmUgc2V0IG9ubHkgaWYgdGhlIE1heExlbiBlbnRyeSBpcyBwcmVzZW50IGluIHRoZSB0ZXh0IGZpZWxkIGRpY3Rpb25hcnkgKHNlZSBUYWJsZSAyMjkpIGFuZCBpZiB0aGUgTXVsdGlsaW5lLCBQYXNzd29yZCwgYW5kIEZpbGVTZWxlY3QgZmxhZ3MgYXJlIGNsZWFyLiBJZiBzZXQsIHRoZSBmaWVsZCBzaGFsbCBiZSBhdXRvbWF0aWNhbGx5IGRpdmlkZWQgaW50byBhcyBtYW55IGVxdWFsbHkgc3BhY2VkIHBvc2l0aW9ucywgb3IgY29tYnMsIGFzIHRoZSB2YWx1ZSBvZiBNYXhMZW4sIGFuZCB0aGUgdGV4dCBpcyBsYWlkIG91dCBpbnRvIHRob3NlIGNvbWJzLlxuICAgICAgICAqIFxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtVGV4dEZpZWxkI2NvbWJcbiAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdjb21iJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBCb29sZWFuKGdldEJpdEZvclBkZih0aGlzLkZmLCAyNSkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKEJvb2xlYW4odmFsdWUpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRmYgPSBzZXRCaXRGb3JQZGYodGhpcy5GZiwgMjUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRmYgPSBjbGVhckJpdEZvclBkZih0aGlzLkZmLCAyNSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgKiAoUERGIDEuNSkgSWYgc2V0LCB0aGUgdmFsdWUgb2YgdGhpcyBmaWVsZCBzaGFsbCBiZSBhIHJpY2ggdGV4dCBzdHJpbmcgKHNlZSAxMi43LjMuNCwg4oCcUmljaCBUZXh0IFN0cmluZ3PigJ0pLiBJZiB0aGUgZmllbGQgaGFzIGEgdmFsdWUsIHRoZSBSViBlbnRyeSBvZiB0aGUgZmllbGQgZGljdGlvbmFyeSAoVGFibGUgMjIyKSBzaGFsbCBzcGVjaWZ5IHRoZSByaWNoIHRleHQgc3RyaW5nLlxuICAgICAgICAqIFxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtVGV4dEZpZWxkI3JpY2hUZXh0XG4gICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAncmljaFRleHQnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4oZ2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDI2KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoQm9vbGVhbih2YWx1ZSkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5GZiA9IHNldEJpdEZvclBkZih0aGlzLkZmLCAyNik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5GZiA9IGNsZWFyQml0Rm9yUGRmKHRoaXMuRmYsIDI2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBfTWF4TGVuID0gbnVsbDtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdNYXhMZW4nLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfTWF4TGVuO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgX01heExlbiA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgKiAoT3B0aW9uYWw7IGluaGVyaXRhYmxlKSBUaGUgbWF4aW11bSBsZW5ndGggb2YgdGhlIGZpZWxk4oCZcyB0ZXh0LCBpbiBjaGFyYWN0ZXJzLiBcbiAgICAgICAgKlxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtVGV4dEZpZWxkI21heExlbmd0aFxuICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbWF4TGVuZ3RoJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfTWF4TGVuO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKE51bWJlci5pc0ludGVnZXIodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIF9NYXhMZW4gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdoYXNBcHBlYXJhbmNlU3RyZWFtJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAodGhpcy5WIHx8IHRoaXMuRFYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH07XG4gICAgaW5oZXJpdChBY3JvRm9ybVRleHRGaWVsZCwgQWNyb0Zvcm1GaWVsZCk7XG5cbiAgICAvKipcbiAgICAqIEBjbGFzcyBBY3JvRm9ybVBhc3N3b3JkRmllbGRcbiAgICAqIEBleHRlbmRzIEFjcm9Gb3JtVGV4dEZpZWxkXG4gICAgKiBAZXh0ZW5kcyBBY3JvRm9ybUZpZWxkXG4gICAgKi9cbiAgICB2YXIgQWNyb0Zvcm1QYXNzd29yZEZpZWxkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBBY3JvRm9ybVRleHRGaWVsZC5jYWxsKHRoaXMpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAqIElmIHNldCwgdGhlIGZpZWxkIGlzIGludGVuZGVkIGZvciBlbnRlcmluZyBhIHNlY3VyZSBwYXNzd29yZCB0aGF0IHNob3VsZCBub3QgYmUgZWNob2VkIHZpc2libHkgdG8gdGhlIHNjcmVlbi4gQ2hhcmFjdGVycyB0eXBlZCBmcm9tIHRoZSBrZXlib2FyZCBzaGFsbCBpbnN0ZWFkIGJlIGVjaG9lZCBpbiBzb21lIHVucmVhZGFibGUgZm9ybSwgc3VjaCBhcyBhc3Rlcmlza3Mgb3IgYnVsbGV0IGNoYXJhY3RlcnMuXG4gICAgICAgICogTk9URSBUbyBwcm90ZWN0IHBhc3N3b3JkIGNvbmZpZGVudGlhbGl0eSwgcmVhZGVycyBzaG91bGQgbmV2ZXIgc3RvcmUgdGhlIHZhbHVlIG9mIHRoZSB0ZXh0IGZpZWxkIGluIHRoZSBQREYgZmlsZSBpZiB0aGlzIGZsYWcgaXMgc2V0LiBcbiAgICAgICAgKlxuICAgICAgICAqIEBuYW1lIEFjcm9Gb3JtVGV4dEZpZWxkI3Bhc3N3b3JkXG4gICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAncGFzc3dvcmQnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4oZ2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDE0KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoQm9vbGVhbih2YWx1ZSkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5GZiA9IHNldEJpdEZvclBkZih0aGlzLkZmLCAxNCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5GZiA9IGNsZWFyQml0Rm9yUGRmKHRoaXMuRmYsIDE0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gdHJ1ZTtcbiAgICB9O1xuICAgIGluaGVyaXQoQWNyb0Zvcm1QYXNzd29yZEZpZWxkLCBBY3JvRm9ybVRleHRGaWVsZCk7XG5cblxuICAgIC8vIENvbnRhaW5zIE1ldGhvZHMgZm9yIGNyZWF0aW5nIHN0YW5kYXJkIGFwcGVhcmFuY2VzXG4gICAgdmFyIEFjcm9Gb3JtQXBwZWFyYW5jZSA9IHtcbiAgICAgICAgQ2hlY2tCb3g6IHtcbiAgICAgICAgICAgIGNyZWF0ZUFwcGVhcmFuY2VTdHJlYW06IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXBwZWFyYW5jZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgTjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgT246IEFjcm9Gb3JtQXBwZWFyYW5jZS5DaGVja0JveC5ZZXNOb3JtYWxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgRDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgT246IEFjcm9Gb3JtQXBwZWFyYW5jZS5DaGVja0JveC5ZZXNQdXNoRG93bixcbiAgICAgICAgICAgICAgICAgICAgICAgIE9mZjogQWNyb0Zvcm1BcHBlYXJhbmNlLkNoZWNrQm94Lk9mZlB1c2hEb3duXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcGVhcmFuY2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICogUmV0dXJucyB0aGUgc3RhbmRhcmQgT24gQXBwZWFyYW5jZSBmb3IgYSBDaGVja0JveFxuICAgICAgICAgICAgICAqIFxuICAgICAgICAgICAgICAqIEByZXR1cm5zIHtBY3JvRm9ybVhPYmplY3R9XG4gICAgICAgICAgICAgICovXG4gICAgICAgICAgICBZZXNQdXNoRG93bjogZnVuY3Rpb24gKGZvcm1PYmplY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgeG9iaiA9IG5ldyBjcmVhdGVGb3JtWE9iamVjdChmb3JtT2JqZWN0KTtcbiAgICAgICAgICAgICAgICB2YXIgc3RyZWFtID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGZvbnRLZXkgPSBzY29wZS5pbnRlcm5hbC5nZXRGb250KGZvcm1PYmplY3QuZm9udE5hbWUsIGZvcm1PYmplY3QuZm9udFN0eWxlKS5pZDtcbiAgICAgICAgICAgICAgICB2YXIgZW5jb2RlZENvbG9yID0gc2NvcGUuX19wcml2YXRlX18uZW5jb2RlQ29sb3JTdHJpbmcoZm9ybU9iamVjdC5jb2xvcik7XG4gICAgICAgICAgICAgICAgdmFyIGNhbGNSZXMgPSBjYWxjdWxhdGVYKGZvcm1PYmplY3QsIGZvcm1PYmplY3QuY2FwdGlvbik7XG4gICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCIwLjc0OTAyMyBnXCIpO1xuICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiMCAwIFwiICsgZjIoQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldFdpZHRoKGZvcm1PYmplY3QpKSArIFwiIFwiICsgZjIoQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldEhlaWdodChmb3JtT2JqZWN0KSkgKyBcIiByZVwiKTtcbiAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcImZcIik7XG4gICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCJCTUNcIik7XG4gICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCJxXCIpO1xuICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiMCAwIDEgcmdcIik7XG4gICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCIvXCIgKyBmb250S2V5ICsgXCIgXCIgKyBmMihjYWxjUmVzLmZvbnRTaXplKSArIFwiIFRmIFwiICsgZW5jb2RlZENvbG9yKTtcbiAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcIkJUXCIpO1xuICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKGNhbGNSZXMudGV4dCk7XG4gICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCJFVFwiKTtcbiAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcIlFcIik7XG4gICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCJFTUNcIik7XG4gICAgICAgICAgICAgICAgeG9iai5zdHJlYW0gPSBzdHJlYW0uam9pbihcIlxcblwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geG9iajtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIFllc05vcm1hbDogZnVuY3Rpb24gKGZvcm1PYmplY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgeG9iaiA9IG5ldyBjcmVhdGVGb3JtWE9iamVjdChmb3JtT2JqZWN0KTtcbiAgICAgICAgICAgICAgICB2YXIgZm9udEtleSA9IHNjb3BlLmludGVybmFsLmdldEZvbnQoZm9ybU9iamVjdC5mb250TmFtZSwgZm9ybU9iamVjdC5mb250U3R5bGUpLmlkO1xuICAgICAgICAgICAgICAgIHZhciBlbmNvZGVkQ29sb3IgPSBzY29wZS5fX3ByaXZhdGVfXy5lbmNvZGVDb2xvclN0cmluZyhmb3JtT2JqZWN0LmNvbG9yKTtcbiAgICAgICAgICAgICAgICB2YXIgc3RyZWFtID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdCk7XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldFdpZHRoKGZvcm1PYmplY3QpO1xuICAgICAgICAgICAgICAgIHZhciBjYWxjUmVzID0gY2FsY3VsYXRlWChmb3JtT2JqZWN0LCBmb3JtT2JqZWN0LmNhcHRpb24pO1xuICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiMSBnXCIpO1xuICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiMCAwIFwiICsgZjIod2lkdGgpICsgXCIgXCIgKyBmMihoZWlnaHQpICsgXCIgcmVcIik7XG4gICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCJmXCIpO1xuICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwicVwiKTtcbiAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcIjAgMCAxIHJnXCIpO1xuICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiMCAwIFwiICsgZjIod2lkdGggLSAxKSArIFwiIFwiICsgZjIoaGVpZ2h0IC0gMSkgKyBcIiByZVwiKTtcbiAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcIldcIik7XG4gICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCJuXCIpO1xuICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiMCBnXCIpO1xuICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiQlRcIik7XG4gICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCIvXCIgKyBmb250S2V5ICsgXCIgXCIgKyBmMihjYWxjUmVzLmZvbnRTaXplKSArIFwiIFRmIFwiICsgZW5jb2RlZENvbG9yKTtcbiAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChjYWxjUmVzLnRleHQpO1xuICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiRVRcIik7XG4gICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCJRXCIpO1xuICAgICAgICAgICAgICAgIHhvYmouc3RyZWFtID0gc3RyZWFtLmpvaW4oXCJcXG5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHhvYmo7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgKiBSZXR1cm5zIHRoZSBzdGFuZGFyZCBPZmYgQXBwZWFyYW5jZSBmb3IgYSBDaGVja0JveFxuICAgICAgICAgICAgICAqIFxuICAgICAgICAgICAgICAqIEByZXR1cm5zIHtBY3JvRm9ybVhPYmplY3R9XG4gICAgICAgICAgICAgICovXG4gICAgICAgICAgICBPZmZQdXNoRG93bjogZnVuY3Rpb24gKGZvcm1PYmplY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgeG9iaiA9IG5ldyBjcmVhdGVGb3JtWE9iamVjdChmb3JtT2JqZWN0KTtcbiAgICAgICAgICAgICAgICB2YXIgc3RyZWFtID0gW107XG4gICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCIwLjc0OTAyMyBnXCIpO1xuICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiMCAwIFwiICsgZjIoQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldFdpZHRoKGZvcm1PYmplY3QpKSArIFwiIFwiICsgZjIoQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldEhlaWdodChmb3JtT2JqZWN0KSkgKyBcIiByZVwiKTtcbiAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcImZcIik7XG4gICAgICAgICAgICAgICAgeG9iai5zdHJlYW0gPSBzdHJlYW0uam9pbihcIlxcblwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geG9iajtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBSYWRpb0J1dHRvbjoge1xuICAgICAgICAgICAgQ2lyY2xlOiB7XG4gICAgICAgICAgICAgICAgY3JlYXRlQXBwZWFyYW5jZVN0cmVhbTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFwcGVhcmFuY2VTdHJlYW1Db250ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgRDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdPZmYnOiBBY3JvRm9ybUFwcGVhcmFuY2UuUmFkaW9CdXR0b24uQ2lyY2xlLk9mZlB1c2hEb3duXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgTjoge31cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgYXBwZWFyYW5jZVN0cmVhbUNvbnRlbnQuTltuYW1lXSA9IEFjcm9Gb3JtQXBwZWFyYW5jZS5SYWRpb0J1dHRvbi5DaXJjbGUuWWVzTm9ybWFsO1xuICAgICAgICAgICAgICAgICAgICBhcHBlYXJhbmNlU3RyZWFtQ29udGVudC5EW25hbWVdID0gQWNyb0Zvcm1BcHBlYXJhbmNlLlJhZGlvQnV0dG9uLkNpcmNsZS5ZZXNQdXNoRG93bjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwcGVhcmFuY2VTdHJlYW1Db250ZW50O1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0Q0E6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdsJztcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgWWVzTm9ybWFsOiBmdW5jdGlvbiAoZm9ybU9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgeG9iaiA9IG5ldyBjcmVhdGVGb3JtWE9iamVjdChmb3JtT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cmVhbSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIHRoZSBSYWRpdXMgb2YgdGhlIENpcmNsZSByZWxhdGl2ZSB0byBtaW4oaGVpZ2h0LCB3aWR0aCkgb2YgZm9ybU9iamVjdFxuICAgICAgICAgICAgICAgICAgICB2YXIgRG90UmFkaXVzID0gKEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRXaWR0aChmb3JtT2JqZWN0KSA8PSBBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0SGVpZ2h0KGZvcm1PYmplY3QpKSA/IEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRXaWR0aChmb3JtT2JqZWN0KSAvIDQgOiBBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0SGVpZ2h0KGZvcm1PYmplY3QpIC8gNDtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIEJvcmRlcnBhZGRpbmcuLi5cbiAgICAgICAgICAgICAgICAgICAgRG90UmFkaXVzID0gTnVtYmVyKChEb3RSYWRpdXMgKiAwLjkpLnRvRml4ZWQoNSkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5CZXppZXJfQztcbiAgICAgICAgICAgICAgICAgICAgdmFyIERvdFJhZGl1c0JlemllciA9IE51bWJlcigoRG90UmFkaXVzICogYykudG9GaXhlZCg1KSk7XG4gICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgKiBUaGUgRm9sbG93aW5nIGlzIGEgQ2lyY2xlIGNyZWF0ZWQgd2l0aCBCZXppZXItQ3VydmVzLlxuICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwicVwiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCIxIDAgMCAxIFwiICsgZjUoQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldFdpZHRoKGZvcm1PYmplY3QpIC8gMikgKyBcIiBcIiArIGY1KEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdCkgLyAyKSArIFwiIGNtXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChEb3RSYWRpdXMgKyBcIiAwIG1cIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKERvdFJhZGl1cyArIFwiIFwiICsgRG90UmFkaXVzQmV6aWVyICsgXCIgXCIgKyBEb3RSYWRpdXNCZXppZXIgKyBcIiBcIiArIERvdFJhZGl1cyArIFwiIDAgXCIgKyBEb3RSYWRpdXMgKyBcIiBjXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcIi1cIiArIERvdFJhZGl1c0JlemllciArIFwiIFwiICsgRG90UmFkaXVzICsgXCIgLVwiICsgRG90UmFkaXVzICsgXCIgXCIgKyBEb3RSYWRpdXNCZXppZXIgKyBcIiAtXCIgKyBEb3RSYWRpdXMgKyBcIiAwIGNcIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiLVwiICsgRG90UmFkaXVzICsgXCIgLVwiICsgRG90UmFkaXVzQmV6aWVyICsgXCIgLVwiICsgRG90UmFkaXVzQmV6aWVyICsgXCIgLVwiICsgRG90UmFkaXVzICsgXCIgMCAtXCIgKyBEb3RSYWRpdXMgKyBcIiBjXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChEb3RSYWRpdXNCZXppZXIgKyBcIiAtXCIgKyBEb3RSYWRpdXMgKyBcIiBcIiArIERvdFJhZGl1cyArIFwiIC1cIiArIERvdFJhZGl1c0JlemllciArIFwiIFwiICsgRG90UmFkaXVzICsgXCIgMCBjXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcImZcIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiUVwiKTtcbiAgICAgICAgICAgICAgICAgICAgeG9iai5zdHJlYW0gPSBzdHJlYW0uam9pbihcIlxcblwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHhvYmo7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBZZXNQdXNoRG93bjogZnVuY3Rpb24gKGZvcm1PYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHhvYmogPSBuZXcgY3JlYXRlRm9ybVhPYmplY3QoZm9ybU9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHJlYW0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIERvdFJhZGl1cyA9IChBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0V2lkdGgoZm9ybU9iamVjdCkgPD0gQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldEhlaWdodChmb3JtT2JqZWN0KSkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldFdpZHRoKGZvcm1PYmplY3QpIC8gNCA6IEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdCkgLyA0O1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgQm9yZGVycGFkZGluZy4uLlxuICAgICAgICAgICAgICAgICAgICB2YXIgRG90UmFkaXVzID0gTnVtYmVyKChEb3RSYWRpdXMgKiAwLjkpLnRvRml4ZWQoNSkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBTYXZlIHJlc3VsdHMgZm9yIGxhdGVyIHVzZTsgbm8gbmVlZCB0byB3YXN0ZVxuICAgICAgICAgICAgICAgICAgICAvLyBwcm9jZXNzb3IgdGlja3Mgb24gZG9pbmcgbWF0aFxuICAgICAgICAgICAgICAgICAgICB2YXIgayA9IE51bWJlcigoRG90UmFkaXVzICogMikudG9GaXhlZCg1KSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrYyA9IE51bWJlcigoayAqIEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5CZXppZXJfQykudG9GaXhlZCg1KSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYyA9IE51bWJlcigoRG90UmFkaXVzICogQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLkJlemllcl9DKS50b0ZpeGVkKDUpKTtcblxuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcIjAuNzQ5MDIzIGdcIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwicVwiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCIxIDAgMCAxIFwiICsgZjUoQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldFdpZHRoKGZvcm1PYmplY3QpIC8gMikgKyBcIiBcIiArIGY1KEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdCkgLyAyKSArIFwiIGNtXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChrICsgXCIgMCBtXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChrICsgXCIgXCIgKyBrYyArIFwiIFwiICsga2MgKyBcIiBcIiArIGsgKyBcIiAwIFwiICsgayArIFwiIGNcIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiLVwiICsga2MgKyBcIiBcIiArIGsgKyBcIiAtXCIgKyBrICsgXCIgXCIgKyBrYyArIFwiIC1cIiArIGsgKyBcIiAwIGNcIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiLVwiICsgayArIFwiIC1cIiArIGtjICsgXCIgLVwiICsga2MgKyBcIiAtXCIgKyBrICsgXCIgMCAtXCIgKyBrICsgXCIgY1wiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goa2MgKyBcIiAtXCIgKyBrICsgXCIgXCIgKyBrICsgXCIgLVwiICsga2MgKyBcIiBcIiArIGsgKyBcIiAwIGNcIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiZlwiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCJRXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcIjAgZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCJxXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcIjEgMCAwIDEgXCIgKyBmNShBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0V2lkdGgoZm9ybU9iamVjdCkgLyAyKSArIFwiIFwiICsgZjUoQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldEhlaWdodChmb3JtT2JqZWN0KSAvIDIpICsgXCIgY21cIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKERvdFJhZGl1cyArIFwiIDAgbVwiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCJcIiArIERvdFJhZGl1cyArIFwiIFwiICsgZGMgKyBcIiBcIiArIGRjICsgXCIgXCIgKyBEb3RSYWRpdXMgKyBcIiAwIFwiICsgRG90UmFkaXVzICsgXCIgY1wiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCItXCIgKyBkYyArIFwiIFwiICsgRG90UmFkaXVzICsgXCIgLVwiICsgRG90UmFkaXVzICsgXCIgXCIgKyBkYyArIFwiIC1cIiArIERvdFJhZGl1cyArIFwiIDAgY1wiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCItXCIgKyBEb3RSYWRpdXMgKyBcIiAtXCIgKyBkYyArIFwiIC1cIiArIGRjICsgXCIgLVwiICsgRG90UmFkaXVzICsgXCIgMCAtXCIgKyBEb3RSYWRpdXMgKyBcIiBjXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChkYyArIFwiIC1cIiArIERvdFJhZGl1cyArIFwiIFwiICsgRG90UmFkaXVzICsgXCIgLVwiICsgZGMgKyBcIiBcIiArIERvdFJhZGl1cyArIFwiIDAgY1wiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCJmXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcIlFcIik7XG4gICAgICAgICAgICAgICAgICAgIHhvYmouc3RyZWFtID0gc3RyZWFtLmpvaW4oXCJcXG5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB4b2JqO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgT2ZmUHVzaERvd246IGZ1bmN0aW9uIChmb3JtT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4b2JqID0gbmV3IGNyZWF0ZUZvcm1YT2JqZWN0KGZvcm1PYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RyZWFtID0gW107XG4gICAgICAgICAgICAgICAgICAgIHZhciBEb3RSYWRpdXMgPSAoQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldFdpZHRoKGZvcm1PYmplY3QpIDw9IEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdCkpID9cbiAgICAgICAgICAgICAgICAgICAgICAgIEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRXaWR0aChmb3JtT2JqZWN0KSAvIDQgOiBBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0SGVpZ2h0KGZvcm1PYmplY3QpIC8gNDtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIEJvcmRlcnBhZGRpbmcuLi5cbiAgICAgICAgICAgICAgICAgICAgRG90UmFkaXVzID0gTnVtYmVyKChEb3RSYWRpdXMgKiAwLjkpLnRvRml4ZWQoNSkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBTYXZlIHJlc3VsdHMgZm9yIGxhdGVyIHVzZTsgbm8gbmVlZCB0byB3YXN0ZVxuICAgICAgICAgICAgICAgICAgICAvLyBwcm9jZXNzb3IgdGlja3Mgb24gZG9pbmcgbWF0aFxuICAgICAgICAgICAgICAgICAgICB2YXIgayA9IE51bWJlcigoRG90UmFkaXVzICogMikudG9GaXhlZCg1KSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrYyA9IE51bWJlcigoayAqIEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5CZXppZXJfQykudG9GaXhlZCg1KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCIwLjc0OTAyMyBnXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcInFcIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiMSAwIDAgMSBcIiArIGY1KEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRXaWR0aChmb3JtT2JqZWN0KSAvIDIpICsgXCIgXCIgKyBmNShBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0SGVpZ2h0KGZvcm1PYmplY3QpIC8gMikgKyBcIiBjbVwiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goayArIFwiIDAgbVwiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goayArIFwiIFwiICsga2MgKyBcIiBcIiArIGtjICsgXCIgXCIgKyBrICsgXCIgMCBcIiArIGsgKyBcIiBjXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcIi1cIiArIGtjICsgXCIgXCIgKyBrICsgXCIgLVwiICsgayArIFwiIFwiICsga2MgKyBcIiAtXCIgKyBrICsgXCIgMCBjXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcIi1cIiArIGsgKyBcIiAtXCIgKyBrYyArIFwiIC1cIiArIGtjICsgXCIgLVwiICsgayArIFwiIDAgLVwiICsgayArIFwiIGNcIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKGtjICsgXCIgLVwiICsgayArIFwiIFwiICsgayArIFwiIC1cIiArIGtjICsgXCIgXCIgKyBrICsgXCIgMCBjXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcImZcIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiUVwiKTtcbiAgICAgICAgICAgICAgICAgICAgeG9iai5zdHJlYW0gPSBzdHJlYW0uam9pbihcIlxcblwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHhvYmo7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIENyb3NzOiB7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAqIENyZWF0ZXMgdGhlIEFjdHVhbCBBcHBlYXJhbmNlRGljdGlvbmFyeS1SZWZlcmVuY2VzXG4gICAgICAgICAgICAgICAgICAqIFxuICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAgICAgICAgICAgICAgKiBAaWdub3JlXG4gICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGNyZWF0ZUFwcGVhcmFuY2VTdHJlYW06IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcHBlYXJhbmNlU3RyZWFtQ29udGVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnT2ZmJzogQWNyb0Zvcm1BcHBlYXJhbmNlLlJhZGlvQnV0dG9uLkNyb3NzLk9mZlB1c2hEb3duXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgTjoge31cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgYXBwZWFyYW5jZVN0cmVhbUNvbnRlbnQuTltuYW1lXSA9IEFjcm9Gb3JtQXBwZWFyYW5jZS5SYWRpb0J1dHRvbi5Dcm9zcy5ZZXNOb3JtYWw7XG4gICAgICAgICAgICAgICAgICAgIGFwcGVhcmFuY2VTdHJlYW1Db250ZW50LkRbbmFtZV0gPSBBY3JvRm9ybUFwcGVhcmFuY2UuUmFkaW9CdXR0b24uQ3Jvc3MuWWVzUHVzaERvd247XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcHBlYXJhbmNlU3RyZWFtQ29udGVudDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldENBOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnOCdcbiAgICAgICAgICAgICAgICB9LFxuXG5cbiAgICAgICAgICAgICAgICBZZXNOb3JtYWw6IGZ1bmN0aW9uIChmb3JtT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4b2JqID0gbmV3IGNyZWF0ZUZvcm1YT2JqZWN0KGZvcm1PYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RyZWFtID0gW107XG4gICAgICAgICAgICAgICAgICAgIHZhciBjcm9zcyA9IEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5jYWxjdWxhdGVDcm9zcyhmb3JtT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCJxXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcIjEgMSBcIiArIGYyKEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRXaWR0aChmb3JtT2JqZWN0KSAtIDIpICsgXCIgXCIgKyBmMihBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0SGVpZ2h0KGZvcm1PYmplY3QpIC0gMikgKyBcIiByZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCJXXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcIm5cIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKGYyKGNyb3NzLngxLngpICsgXCIgXCIgKyBmMihjcm9zcy54MS55KSArIFwiIG1cIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKGYyKGNyb3NzLngyLngpICsgXCIgXCIgKyBmMihjcm9zcy54Mi55KSArIFwiIGxcIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKGYyKGNyb3NzLng0LngpICsgXCIgXCIgKyBmMihjcm9zcy54NC55KSArIFwiIG1cIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKGYyKGNyb3NzLngzLngpICsgXCIgXCIgKyBmMihjcm9zcy54My55KSArIFwiIGxcIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwic1wiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCJRXCIpO1xuICAgICAgICAgICAgICAgICAgICB4b2JqLnN0cmVhbSA9IHN0cmVhbS5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geG9iajtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFllc1B1c2hEb3duOiBmdW5jdGlvbiAoZm9ybU9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgeG9iaiA9IG5ldyBjcmVhdGVGb3JtWE9iamVjdChmb3JtT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNyb3NzID0gQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmNhbGN1bGF0ZUNyb3NzKGZvcm1PYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RyZWFtID0gW107XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiMC43NDkwMjMgZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCIwIDAgXCIgKyBmMihBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0V2lkdGgoZm9ybU9iamVjdCkpICsgXCIgXCIgKyBmMihBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0SGVpZ2h0KGZvcm1PYmplY3QpKSArIFwiIHJlXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcImZcIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwicVwiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCIxIDEgXCIgKyBmMihBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0V2lkdGgoZm9ybU9iamVjdCkgLSAyKSArIFwiIFwiICsgZjIoQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldEhlaWdodChmb3JtT2JqZWN0KSAtIDIpICsgXCIgcmVcIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiV1wiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCJuXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChmMihjcm9zcy54MS54KSArIFwiIFwiICsgZjIoY3Jvc3MueDEueSkgKyBcIiBtXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChmMihjcm9zcy54Mi54KSArIFwiIFwiICsgZjIoY3Jvc3MueDIueSkgKyBcIiBsXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChmMihjcm9zcy54NC54KSArIFwiIFwiICsgZjIoY3Jvc3MueDQueSkgKyBcIiBtXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChmMihjcm9zcy54My54KSArIFwiIFwiICsgZjIoY3Jvc3MueDMueSkgKyBcIiBsXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcInNcIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiUVwiKTtcbiAgICAgICAgICAgICAgICAgICAgeG9iai5zdHJlYW0gPSBzdHJlYW0uam9pbihcIlxcblwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHhvYmo7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBPZmZQdXNoRG93bjogZnVuY3Rpb24gKGZvcm1PYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHhvYmogPSBuZXcgY3JlYXRlRm9ybVhPYmplY3QoZm9ybU9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHJlYW0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2goXCIwLjc0OTAyMyBnXCIpO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucHVzaChcIjAgMCBcIiArIGYyKEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRXaWR0aChmb3JtT2JqZWN0KSkgKyBcIiBcIiArIGYyKEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdCkpICsgXCIgcmVcIik7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5wdXNoKFwiZlwiKTtcbiAgICAgICAgICAgICAgICAgICAgeG9iai5zdHJlYW0gPSBzdHJlYW0uam9pbihcIlxcblwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHhvYmo7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICAqIFJldHVybnMgdGhlIHN0YW5kYXJkIEFwcGVhcmFuY2VcbiAgICAgICAgICAqIFxuICAgICAgICAgICogQHJldHVybnMge0Fjcm9Gb3JtWE9iamVjdH1cbiAgICAgICAgICAqL1xuICAgICAgICBjcmVhdGVEZWZhdWx0QXBwZWFyYW5jZVN0cmVhbTogZnVuY3Rpb24gKGZvcm1PYmplY3QpIHtcbiAgICAgICAgICAgIC8vIFNldCBIZWx2ZXRpY2EgdG8gU3RhbmRhcmQgRm9udCAoc2l6ZTogYXV0bylcbiAgICAgICAgICAgIC8vIENvbG9yOiBCbGFja1xuICAgICAgICAgICAgdmFyIGZvbnRLZXkgPSBzY29wZS5pbnRlcm5hbC5nZXRGb250KGZvcm1PYmplY3QuZm9udE5hbWUsIGZvcm1PYmplY3QuZm9udFN0eWxlKS5pZDtcbiAgICAgICAgICAgIHZhciBlbmNvZGVkQ29sb3IgPSBzY29wZS5fX3ByaXZhdGVfXy5lbmNvZGVDb2xvclN0cmluZyhmb3JtT2JqZWN0LmNvbG9yKTtcbiAgICAgICAgICAgIHZhciBmb250U2l6ZSA9IGZvcm1PYmplY3QuZm9udFNpemU7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gJy8nICsgZm9udEtleSArICcgJyArIGZvbnRTaXplICsgJyBUZiAnICsgZW5jb2RlZENvbG9yO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwgPSB7XG4gICAgICAgIEJlemllcl9DOiAwLjU1MTkxNTAyNDQ5NCxcblxuICAgICAgICBjYWxjdWxhdGVDcm9zczogZnVuY3Rpb24gKGZvcm1PYmplY3QpIHtcblxuICAgICAgICAgICAgdmFyIHdpZHRoID0gQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldFdpZHRoKGZvcm1PYmplY3QpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdCk7XG4gICAgICAgICAgICB2YXIgYSA9IE1hdGgubWluKHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgICAgICB2YXIgY3Jvc3MgPSB7XG4gICAgICAgICAgICAgICAgeDE6IHsgLy8gdXBwZXJMZWZ0XG4gICAgICAgICAgICAgICAgICAgIHg6ICh3aWR0aCAtIGEpIC8gMixcbiAgICAgICAgICAgICAgICAgICAgeTogKChoZWlnaHQgLSBhKSAvIDIpICsgYSwvLyBoZWlnaHQgLSBib3JkZXJQYWRkaW5nXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB4MjogeyAvLyBsb3dlclJpZ2h0XG4gICAgICAgICAgICAgICAgICAgIHg6ICgod2lkdGggLSBhKSAvIDIpICsgYSxcbiAgICAgICAgICAgICAgICAgICAgeTogKChoZWlnaHQgLSBhKSAvIDIpLy8gYm9yZGVyUGFkZGluZ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeDM6IHsgLy8gbG93ZXJMZWZ0XG4gICAgICAgICAgICAgICAgICAgIHg6ICh3aWR0aCAtIGEpIC8gMixcbiAgICAgICAgICAgICAgICAgICAgeTogKChoZWlnaHQgLSBhKSAvIDIpLy8gYm9yZGVyUGFkZGluZ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeDQ6IHsgLy8gdXBwZXJSaWdodFxuICAgICAgICAgICAgICAgICAgICB4OiAoKHdpZHRoIC0gYSkgLyAyKSArIGEsXG4gICAgICAgICAgICAgICAgICAgIHk6ICgoaGVpZ2h0IC0gYSkgLyAyKSArIGEsLy8gaGVpZ2h0IC0gYm9yZGVyUGFkZGluZ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBjcm9zcztcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRXaWR0aCA9IGZ1bmN0aW9uIChmb3JtT2JqZWN0KSB7XG4gICAgICAgIHZhciByZXN1bHQgPSAwO1xuICAgICAgICBpZiAodHlwZW9mIGZvcm1PYmplY3QgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHNjYWxlKGZvcm1PYmplY3QuUmVjdFsyXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoZm9ybU9iamVjdCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gMDtcbiAgICAgICAgaWYgKHR5cGVvZiBmb3JtT2JqZWN0ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBzY2FsZShmb3JtT2JqZWN0LlJlY3RbM10pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIC8vIFB1YmxpYzpcblxuICAgIC8qKlxuICAgICogQWRkIGFuIEFjcm9Gb3JtLUZpZWxkIHRvIHRoZSBqc1BERi1pbnN0YW5jZVxuICAgICpcbiAgICAqIEBuYW1lIGFkZEZpZWxkXG4gICAgKiBAZnVuY3Rpb24gXG4gICAgKiBAaW5zdGFuY2VcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWVsZE9iamVjdFxuICAgICogQHJldHVybnMge2pzUERGfVxuICAgICovXG4gICAgdmFyIGFkZEZpZWxkID0ganNQREZBUEkuYWRkRmllbGQgPSBmdW5jdGlvbiAoZmllbGRPYmplY3QpIHtcbiAgICAgICAgaW5pdGlhbGl6ZUFjcm9Gb3JtLmNhbGwodGhpcyk7XG5cbiAgICAgICAgaWYgKGZpZWxkT2JqZWN0IGluc3RhbmNlb2YgQWNyb0Zvcm1GaWVsZCkge1xuICAgICAgICAgICAgcHV0Rm9ybS5jYWxsKHRoaXMsIGZpZWxkT2JqZWN0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudCBwYXNzZWQgdG8ganNQREYuYWRkRmllbGQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgZmllbGRPYmplY3QucGFnZSA9IHNjb3BlLmludGVybmFsLmdldEN1cnJlbnRQYWdlSW5mbygpLnBhZ2VOdW1iZXI7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAqIEBuYW1lIGFkZEJ1dHRvblxuICAgICogQGZ1bmN0aW9uXG4gICAgKiBAaW5zdGFuY2VcbiAgICAqIEBwYXJhbSB7QWNyb0Zvcm1CdXR0b259IG9wdGlvbnNcbiAgICAqIEByZXR1cm5zIHtqc1BERn1cbiAgICAqIEBkZXByZWNhdGVkXG4gICAgKi9cbiAgICBqc1BERkFQSS5hZGRCdXR0b24gPSBmdW5jdGlvbiAoYnV0dG9uKSB7XG4gICAgICAgIGlmIChidXR0b24gaW5zdGFuY2VvZiBBY3JvRm9ybUJ1dHRvbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudCBwYXNzZWQgdG8ganNQREYuYWRkQnV0dG9uLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhZGRGaWVsZC5jYWxsKHRoaXMsIGJ1dHRvbik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICogQG5hbWUgYWRkVGV4dEZpZWxkXG4gICAgKiBAZnVuY3Rpb25cbiAgICAqIEBpbnN0YW5jZVxuICAgICogQHBhcmFtIHtBY3JvRm9ybVRleHRGaWVsZH0gdGV4dEZpZWxkXG4gICAgKiBAcmV0dXJucyB7anNQREZ9XG4gICAgKiBAZGVwcmVjYXRlZFxuICAgICovXG4gICAganNQREZBUEkuYWRkVGV4dEZpZWxkID0gZnVuY3Rpb24gKHRleHRGaWVsZCkge1xuICAgICAgICBpZiAodGV4dEZpZWxkIGluc3RhbmNlb2YgQWNyb0Zvcm1UZXh0RmllbGQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnQgcGFzc2VkIHRvIGpzUERGLmFkZFRleHRGaWVsZC4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWRkRmllbGQuY2FsbCh0aGlzLCB0ZXh0RmllbGQpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAqIEBuYW1lIGFkZENob2ljZUZpZWxkXG4gICAgKiBAZnVuY3Rpb25cbiAgICAqIEBpbnN0YW5jZVxuICAgICogQHBhcmFtIHtBY3JvRm9ybUNob2ljZUZpZWxkfSBcbiAgICAqIEByZXR1cm5zIHtqc1BERn1cbiAgICAqIEBkZXByZWNhdGVkXG4gICAgKi9cbiAgICBqc1BERkFQSS5hZGRDaG9pY2VGaWVsZCA9IGZ1bmN0aW9uIChjaG9pY2VGaWVsZCkge1xuICAgICAgICBpZiAoY2hvaWNlRmllbGQgaW5zdGFuY2VvZiBBY3JvRm9ybUNob2ljZUZpZWxkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50IHBhc3NlZCB0byBqc1BERi5hZGRDaG9pY2VGaWVsZC4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWRkRmllbGQuY2FsbCh0aGlzLCBjaG9pY2VGaWVsZCk7XG4gICAgfTtcblxuICAgIGlmICh0eXBlb2YgZ2xvYmFsT2JqID09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgdHlwZW9mIChnbG9iYWxPYmpbXCJDaG9pY2VGaWVsZFwiXSkgPT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgdHlwZW9mIChnbG9iYWxPYmpbXCJMaXN0Qm94XCJdKSA9PT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICB0eXBlb2YgKGdsb2JhbE9ialtcIkNvbWJvQm94XCJdKSA9PT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICB0eXBlb2YgKGdsb2JhbE9ialtcIkVkaXRCb3hcIl0pID09PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIHR5cGVvZiAoZ2xvYmFsT2JqW1wiQnV0dG9uXCJdKSA9PT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICB0eXBlb2YgKGdsb2JhbE9ialtcIlB1c2hCdXR0b25cIl0pID09PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIHR5cGVvZiAoZ2xvYmFsT2JqW1wiUmFkaW9CdXR0b25cIl0pID09PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIHR5cGVvZiAoZ2xvYmFsT2JqW1wiQ2hlY2tCb3hcIl0pID09PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIHR5cGVvZiAoZ2xvYmFsT2JqW1wiVGV4dEZpZWxkXCJdKSA9PT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICB0eXBlb2YgKGdsb2JhbE9ialtcIlBhc3N3b3JkRmllbGRcIl0pID09PSBcInVuZGVmaW5lZFwiXG4gICAgKSB7XG4gICAgICAgIGdsb2JhbE9ialtcIkNob2ljZUZpZWxkXCJdID0gQWNyb0Zvcm1DaG9pY2VGaWVsZDtcbiAgICAgICAgZ2xvYmFsT2JqW1wiTGlzdEJveFwiXSA9IEFjcm9Gb3JtTGlzdEJveDtcbiAgICAgICAgZ2xvYmFsT2JqW1wiQ29tYm9Cb3hcIl0gPSBBY3JvRm9ybUNvbWJvQm94O1xuICAgICAgICBnbG9iYWxPYmpbXCJFZGl0Qm94XCJdID0gQWNyb0Zvcm1FZGl0Qm94O1xuICAgICAgICBnbG9iYWxPYmpbXCJCdXR0b25cIl0gPSBBY3JvRm9ybUJ1dHRvbjtcbiAgICAgICAgZ2xvYmFsT2JqW1wiUHVzaEJ1dHRvblwiXSA9IEFjcm9Gb3JtUHVzaEJ1dHRvbjtcbiAgICAgICAgZ2xvYmFsT2JqW1wiUmFkaW9CdXR0b25cIl0gPSBBY3JvRm9ybVJhZGlvQnV0dG9uO1xuICAgICAgICBnbG9iYWxPYmpbXCJDaGVja0JveFwiXSA9IEFjcm9Gb3JtQ2hlY2tCb3g7XG4gICAgICAgIGdsb2JhbE9ialtcIlRleHRGaWVsZFwiXSA9IEFjcm9Gb3JtVGV4dEZpZWxkO1xuICAgICAgICBnbG9iYWxPYmpbXCJQYXNzd29yZEZpZWxkXCJdID0gQWNyb0Zvcm1QYXNzd29yZEZpZWxkO1xuXG4gICAgICAgIC8vIGJhY2t3YXJkc0NvbXBhdGliaWxpdHlcbiAgICAgICAgZ2xvYmFsT2JqW1wiQWNyb0Zvcm1cIl0gPSB7IEFwcGVhcmFuY2U6IEFjcm9Gb3JtQXBwZWFyYW5jZSB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIC8vIGNvbnNvbGUud2FybihcIkFjcm9Gb3JtLUNsYXNzZXMgYXJlIG5vdCBwb3B1bGF0ZWQgaW50byBnbG9iYWwtbmFtZXNwYWNlLCBiZWNhdXNlIHRoZSBjbGFzcy1OYW1lcyBleGlzdCBhbHJlYWR5LiBUaGlzIGF2b2lkcyBjb25mbGljdHMgd2l0aCB0aGUgYWxyZWFkeSB1c2VkIGZyYW1ld29yay5cIik7XG4gICAgfVxuXG4gICAganNQREZBUEkuQWNyb0Zvcm1DaG9pY2VGaWVsZCA9IEFjcm9Gb3JtQ2hvaWNlRmllbGQ7XG4gICAganNQREZBUEkuQWNyb0Zvcm1MaXN0Qm94ID0gQWNyb0Zvcm1MaXN0Qm94O1xuICAgIGpzUERGQVBJLkFjcm9Gb3JtQ29tYm9Cb3ggPSBBY3JvRm9ybUNvbWJvQm94O1xuICAgIGpzUERGQVBJLkFjcm9Gb3JtRWRpdEJveCA9IEFjcm9Gb3JtRWRpdEJveDtcbiAgICBqc1BERkFQSS5BY3JvRm9ybUJ1dHRvbiA9IEFjcm9Gb3JtQnV0dG9uO1xuICAgIGpzUERGQVBJLkFjcm9Gb3JtUHVzaEJ1dHRvbiA9IEFjcm9Gb3JtUHVzaEJ1dHRvbjtcbiAgICBqc1BERkFQSS5BY3JvRm9ybVJhZGlvQnV0dG9uID0gQWNyb0Zvcm1SYWRpb0J1dHRvbjtcbiAgICBqc1BERkFQSS5BY3JvRm9ybUNoZWNrQm94ID0gQWNyb0Zvcm1DaGVja0JveDtcbiAgICBqc1BERkFQSS5BY3JvRm9ybVRleHRGaWVsZCA9IEFjcm9Gb3JtVGV4dEZpZWxkO1xuICAgIGpzUERGQVBJLkFjcm9Gb3JtUGFzc3dvcmRGaWVsZCA9IEFjcm9Gb3JtUGFzc3dvcmRGaWVsZDtcbiAgICBqc1BERkFQSS5BY3JvRm9ybUFwcGVhcmFuY2UgPSBBY3JvRm9ybUFwcGVhcmFuY2U7XG5cbiAgICBqc1BERkFQSS5BY3JvRm9ybSA9IHtcbiAgICAgICAgQ2hvaWNlRmllbGQ6IEFjcm9Gb3JtQ2hvaWNlRmllbGQsXG4gICAgICAgIExpc3RCb3g6IEFjcm9Gb3JtTGlzdEJveCxcbiAgICAgICAgQ29tYm9Cb3g6IEFjcm9Gb3JtQ29tYm9Cb3gsXG4gICAgICAgIEVkaXRCb3g6IEFjcm9Gb3JtRWRpdEJveCxcbiAgICAgICAgQnV0dG9uOiBBY3JvRm9ybUJ1dHRvbixcbiAgICAgICAgUHVzaEJ1dHRvbjogQWNyb0Zvcm1QdXNoQnV0dG9uLFxuICAgICAgICBSYWRpb0J1dHRvbjogQWNyb0Zvcm1SYWRpb0J1dHRvbixcbiAgICAgICAgQ2hlY2tCb3g6IEFjcm9Gb3JtQ2hlY2tCb3gsXG4gICAgICAgIFRleHRGaWVsZDogQWNyb0Zvcm1UZXh0RmllbGQsXG4gICAgICAgIFBhc3N3b3JkRmllbGQ6IEFjcm9Gb3JtUGFzc3dvcmRGaWVsZCxcbiAgICAgICAgQXBwZWFyYW5jZTogQWNyb0Zvcm1BcHBlYXJhbmNlXG4gICAgfTtcblxuICAgIGpzUERGLkFjcm9Gb3JtID0ge1xuICAgICAgICBDaG9pY2VGaWVsZDogQWNyb0Zvcm1DaG9pY2VGaWVsZCxcbiAgICAgICAgTGlzdEJveDogQWNyb0Zvcm1MaXN0Qm94LFxuICAgICAgICBDb21ib0JveDogQWNyb0Zvcm1Db21ib0JveCxcbiAgICAgICAgRWRpdEJveDogQWNyb0Zvcm1FZGl0Qm94LFxuICAgICAgICBCdXR0b246IEFjcm9Gb3JtQnV0dG9uLFxuICAgICAgICBQdXNoQnV0dG9uOiBBY3JvRm9ybVB1c2hCdXR0b24sXG4gICAgICAgIFJhZGlvQnV0dG9uOiBBY3JvRm9ybVJhZGlvQnV0dG9uLFxuICAgICAgICBDaGVja0JveDogQWNyb0Zvcm1DaGVja0JveCxcbiAgICAgICAgVGV4dEZpZWxkOiBBY3JvRm9ybVRleHRGaWVsZCxcbiAgICAgICAgUGFzc3dvcmRGaWVsZDogQWNyb0Zvcm1QYXNzd29yZEZpZWxkLFxuICAgICAgICBBcHBlYXJhbmNlOiBBY3JvRm9ybUFwcGVhcmFuY2VcbiAgICB9O1xufSkoanNwZGYuanNQREYsICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cgfHwgdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsKSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanNwZGZfcGx1Z2lucy9hY3JvZm9ybS5qc1xuLy8gbW9kdWxlIGlkID0gNjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiICAvKipcbiAgICoganNQREYgZnJvbUhUTUwgcGx1Z2luLiBCRVRBIHN0YWdlLiBBUEkgc3ViamVjdCB0byBjaGFuZ2UuIE5lZWRzIGJyb3dzZXJcbiAgICogQ29weXJpZ2h0IChjKSAyMDEyIFdpbGxvdyBTeXN0ZW1zIENvcnBvcmF0aW9uLCB3aWxsb3ctc3lzdGVtcy5jb21cbiAgICogICAgICAgICAgICAgICAyMDE0IEp1YW4gUGFibG8gR2F2aXJpYSwgaHR0cHM6Ly9naXRodWIuY29tL2p1YW5wZ2F2aXJpYVxuICAgKiAgICAgICAgICAgICAgIDIwMTQgRGllZ28gQ2Fzb3JyYW4sIGh0dHBzOi8vZ2l0aHViLmNvbS9kaWVnb2NyXG4gICAqICAgICAgICAgICAgICAgMjAxNCBEYW5pZWwgSHVzYXIsIGh0dHBzOi8vZ2l0aHViLmNvbS9kYW5pZWxodXNhclxuICAgKiAgICAgICAgICAgICAgIDIwMTQgV29sZmdhbmcgR2Fzc2xlciwgaHR0cHM6Ly9naXRodWIuY29tL3dvb2xmZ1xuICAgKiAgICAgICAgICAgICAgIDIwMTQgU3RldmVuIFNwdW5naW4sIGh0dHBzOi8vZ2l0aHViLmNvbS9mbGFtZW5jb1xuICAgKlxuICAgKiBAbGljZW5zZVxuICAgKiBcbiAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICovXG4gIHZhciBqc3BkZiA9IHJlcXVpcmUoXCJqc3BkZlwiKTtcblxuICAoZnVuY3Rpb24gKGpzUERGQVBJKSB7XG4gICAgdmFyIGNsb25lLCBfRHJpbGxGb3JDb250ZW50LCBGb250TmFtZURCLCBGb250U3R5bGVNYXAsIFRleHRBbGlnbk1hcCwgRm9udFdlaWdodE1hcCwgRmxvYXRNYXAsIENsZWFyTWFwLCBHZXRDU1MsIFB1cmdlV2hpdGVTcGFjZSwgUmVuZGVyZXIsIFJlc29sdmVGb250LCBSZXNvbHZlVW5pdGVkTnVtYmVyLCBVbml0ZWROdW1iZXJNYXAsIGVsZW1lbnRIYW5kbGVkRWxzZXdoZXJlLCBpbWFnZXMsIGxvYWRJbWdzLCBjaGVja0ZvckZvb3RlciwgcHJvY2VzcywgdGFibGVUb0pzb247XG5cbiAgICBjbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIENsb25lLnByb3RvdHlwZSA9IG9iajtcbiAgICAgICAgcmV0dXJuIG5ldyBDbG9uZSgpO1xuICAgICAgfTtcblxuICAgICAgZnVuY3Rpb24gQ2xvbmUoKSB7fVxuICAgIH0oKTtcblxuICAgIFB1cmdlV2hpdGVTcGFjZSA9IGZ1bmN0aW9uIFB1cmdlV2hpdGVTcGFjZShhcnJheSkge1xuICAgICAgdmFyIGZyYWdtZW50LCBpLCBsLCBsVHJpbW1lZCwgciwgclRyaW1tZWQsIHRyYWlsaW5nU3BhY2U7XG4gICAgICBpID0gMDtcbiAgICAgIGwgPSBhcnJheS5sZW5ndGg7XG4gICAgICBmcmFnbWVudCA9IHZvaWQgMDtcbiAgICAgIGxUcmltbWVkID0gZmFsc2U7XG4gICAgICByVHJpbW1lZCA9IGZhbHNlO1xuXG4gICAgICB3aGlsZSAoIWxUcmltbWVkICYmIGkgIT09IGwpIHtcbiAgICAgICAgZnJhZ21lbnQgPSBhcnJheVtpXSA9IGFycmF5W2ldLnRyaW1MZWZ0KCk7XG5cbiAgICAgICAgaWYgKGZyYWdtZW50KSB7XG4gICAgICAgICAgbFRyaW1tZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaSsrO1xuICAgICAgfVxuXG4gICAgICBpID0gbCAtIDE7XG5cbiAgICAgIHdoaWxlIChsICYmICFyVHJpbW1lZCAmJiBpICE9PSAtMSkge1xuICAgICAgICBmcmFnbWVudCA9IGFycmF5W2ldID0gYXJyYXlbaV0udHJpbVJpZ2h0KCk7XG5cbiAgICAgICAgaWYgKGZyYWdtZW50KSB7XG4gICAgICAgICAgclRyaW1tZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaS0tO1xuICAgICAgfVxuXG4gICAgICByID0gL1xccyskL2c7XG4gICAgICB0cmFpbGluZ1NwYWNlID0gdHJ1ZTtcbiAgICAgIGkgPSAwO1xuXG4gICAgICB3aGlsZSAoaSAhPT0gbCkge1xuICAgICAgICAvLyBMZWF2ZSB0aGUgbGluZSBicmVha3MgaW50YWN0XG4gICAgICAgIGlmIChhcnJheVtpXSAhPSBcIlxcdTIwMjhcIikge1xuICAgICAgICAgIGZyYWdtZW50ID0gYXJyYXlbaV0ucmVwbGFjZSgvXFxzKy9nLCBcIiBcIik7XG5cbiAgICAgICAgICBpZiAodHJhaWxpbmdTcGFjZSkge1xuICAgICAgICAgICAgZnJhZ21lbnQgPSBmcmFnbWVudC50cmltTGVmdCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChmcmFnbWVudCkge1xuICAgICAgICAgICAgdHJhaWxpbmdTcGFjZSA9IHIudGVzdChmcmFnbWVudCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYXJyYXlbaV0gPSBmcmFnbWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGkrKztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH07XG5cbiAgICBSZW5kZXJlciA9IGZ1bmN0aW9uIFJlbmRlcmVyKHBkZiwgeCwgeSwgc2V0dGluZ3MpIHtcbiAgICAgIHRoaXMucGRmID0gcGRmO1xuICAgICAgdGhpcy54ID0geDtcbiAgICAgIHRoaXMueSA9IHk7XG4gICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7IC8vbGlzdCBvZiBmdW5jdGlvbnMgd2hpY2ggYXJlIGNhbGxlZCBhZnRlciBlYWNoIGVsZW1lbnQtcmVuZGVyaW5nIHByb2Nlc3NcblxuICAgICAgdGhpcy53YXRjaEZ1bmN0aW9ucyA9IFtdO1xuICAgICAgdGhpcy5pbml0KCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgUmVzb2x2ZUZvbnQgPSBmdW5jdGlvbiBSZXNvbHZlRm9udChjc3NfZm9udF9mYW1pbHlfc3RyaW5nKSB7XG4gICAgICB2YXIgbmFtZSwgcGFydCwgcGFydHM7XG4gICAgICBuYW1lID0gdm9pZCAwO1xuICAgICAgcGFydHMgPSBjc3NfZm9udF9mYW1pbHlfc3RyaW5nLnNwbGl0KFwiLFwiKTtcbiAgICAgIHBhcnQgPSBwYXJ0cy5zaGlmdCgpO1xuXG4gICAgICB3aGlsZSAoIW5hbWUgJiYgcGFydCkge1xuICAgICAgICBuYW1lID0gRm9udE5hbWVEQltwYXJ0LnRyaW0oKS50b0xvd2VyQ2FzZSgpXTtcbiAgICAgICAgcGFydCA9IHBhcnRzLnNoaWZ0KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuYW1lO1xuICAgIH07XG5cbiAgICBSZXNvbHZlVW5pdGVkTnVtYmVyID0gZnVuY3Rpb24gUmVzb2x2ZVVuaXRlZE51bWJlcihjc3NfbGluZV9oZWlnaHRfc3RyaW5nKSB7XG4gICAgICAvL0lFOCBpc3N1ZXNcbiAgICAgIGNzc19saW5lX2hlaWdodF9zdHJpbmcgPSBjc3NfbGluZV9oZWlnaHRfc3RyaW5nID09PSBcImF1dG9cIiA/IFwiMHB4XCIgOiBjc3NfbGluZV9oZWlnaHRfc3RyaW5nO1xuXG4gICAgICBpZiAoY3NzX2xpbmVfaGVpZ2h0X3N0cmluZy5pbmRleE9mKFwiZW1cIikgPiAtMSAmJiAhaXNOYU4oTnVtYmVyKGNzc19saW5lX2hlaWdodF9zdHJpbmcucmVwbGFjZShcImVtXCIsIFwiXCIpKSkpIHtcbiAgICAgICAgY3NzX2xpbmVfaGVpZ2h0X3N0cmluZyA9IE51bWJlcihjc3NfbGluZV9oZWlnaHRfc3RyaW5nLnJlcGxhY2UoXCJlbVwiLCBcIlwiKSkgKiAxOC43MTkgKyBcInB4XCI7XG4gICAgICB9XG5cbiAgICAgIGlmIChjc3NfbGluZV9oZWlnaHRfc3RyaW5nLmluZGV4T2YoXCJwdFwiKSA+IC0xICYmICFpc05hTihOdW1iZXIoY3NzX2xpbmVfaGVpZ2h0X3N0cmluZy5yZXBsYWNlKFwicHRcIiwgXCJcIikpKSkge1xuICAgICAgICBjc3NfbGluZV9oZWlnaHRfc3RyaW5nID0gTnVtYmVyKGNzc19saW5lX2hlaWdodF9zdHJpbmcucmVwbGFjZShcInB0XCIsIFwiXCIpKSAqIDEuMzMzICsgXCJweFwiO1xuICAgICAgfVxuXG4gICAgICB2YXIgbm9ybWFsLCB1bmRlZiwgdmFsdWU7XG4gICAgICB1bmRlZiA9IHZvaWQgMDtcbiAgICAgIG5vcm1hbCA9IDE2LjAwO1xuICAgICAgdmFsdWUgPSBVbml0ZWROdW1iZXJNYXBbY3NzX2xpbmVfaGVpZ2h0X3N0cmluZ107XG5cbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHZhbHVlID0ge1xuICAgICAgICBcInh4LXNtYWxsXCI6IDksXG4gICAgICAgIFwieC1zbWFsbFwiOiAxMSxcbiAgICAgICAgc21hbGw6IDEzLFxuICAgICAgICBtZWRpdW06IDE2LFxuICAgICAgICBsYXJnZTogMTksXG4gICAgICAgIFwieC1sYXJnZVwiOiAyMyxcbiAgICAgICAgXCJ4eC1sYXJnZVwiOiAyOCxcbiAgICAgICAgYXV0bzogMFxuICAgICAgfVtjc3NfbGluZV9oZWlnaHRfc3RyaW5nXTtcblxuICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZikge1xuICAgICAgICByZXR1cm4gVW5pdGVkTnVtYmVyTWFwW2Nzc19saW5lX2hlaWdodF9zdHJpbmddID0gdmFsdWUgLyBub3JtYWw7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YWx1ZSA9IHBhcnNlRmxvYXQoY3NzX2xpbmVfaGVpZ2h0X3N0cmluZykpIHtcbiAgICAgICAgcmV0dXJuIFVuaXRlZE51bWJlck1hcFtjc3NfbGluZV9oZWlnaHRfc3RyaW5nXSA9IHZhbHVlIC8gbm9ybWFsO1xuICAgICAgfVxuXG4gICAgICB2YWx1ZSA9IGNzc19saW5lX2hlaWdodF9zdHJpbmcubWF0Y2goLyhbXFxkXFwuXSspKHB4KS8pO1xuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIHJldHVybiBVbml0ZWROdW1iZXJNYXBbY3NzX2xpbmVfaGVpZ2h0X3N0cmluZ10gPSBwYXJzZUZsb2F0KHZhbHVlWzFdKSAvIG5vcm1hbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFVuaXRlZE51bWJlck1hcFtjc3NfbGluZV9oZWlnaHRfc3RyaW5nXSA9IDE7XG4gICAgfTtcblxuICAgIEdldENTUyA9IGZ1bmN0aW9uIEdldENTUyhlbGVtZW50KSB7XG4gICAgICB2YXIgY3NzLCB0bXAsIGNvbXB1dGVkQ1NTRWxlbWVudDtcblxuICAgICAgY29tcHV0ZWRDU1NFbGVtZW50ID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHZhciBjb21wQ1NTO1xuXG4gICAgICAgIGNvbXBDU1MgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICBpZiAoZG9jdW1lbnQuZGVmYXVsdFZpZXcgJiYgZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZWwuY3VycmVudFN0eWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gZWwuY3VycmVudFN0eWxlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZWwuc3R5bGU7XG4gICAgICAgICAgfVxuICAgICAgICB9KGVsKTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgICAgICBwcm9wID0gcHJvcC5yZXBsYWNlKC8tXFxEL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBjb21wQ1NTW3Byb3BdO1xuICAgICAgICB9O1xuICAgICAgfShlbGVtZW50KTtcblxuICAgICAgY3NzID0ge307XG4gICAgICB0bXAgPSB2b2lkIDA7XG4gICAgICBjc3NbXCJmb250LWZhbWlseVwiXSA9IFJlc29sdmVGb250KGNvbXB1dGVkQ1NTRWxlbWVudChcImZvbnQtZmFtaWx5XCIpKSB8fCBcInRpbWVzXCI7XG4gICAgICBjc3NbXCJmb250LXN0eWxlXCJdID0gRm9udFN0eWxlTWFwW2NvbXB1dGVkQ1NTRWxlbWVudChcImZvbnQtc3R5bGVcIildIHx8IFwibm9ybWFsXCI7XG4gICAgICBjc3NbXCJ0ZXh0LWFsaWduXCJdID0gVGV4dEFsaWduTWFwW2NvbXB1dGVkQ1NTRWxlbWVudChcInRleHQtYWxpZ25cIildIHx8IFwibGVmdFwiO1xuICAgICAgdG1wID0gRm9udFdlaWdodE1hcFtjb21wdXRlZENTU0VsZW1lbnQoXCJmb250LXdlaWdodFwiKV0gfHwgXCJub3JtYWxcIjtcblxuICAgICAgaWYgKHRtcCA9PT0gXCJib2xkXCIpIHtcbiAgICAgICAgaWYgKGNzc1tcImZvbnQtc3R5bGVcIl0gPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICBjc3NbXCJmb250LXN0eWxlXCJdID0gdG1wO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNzc1tcImZvbnQtc3R5bGVcIl0gPSB0bXAgKyBjc3NbXCJmb250LXN0eWxlXCJdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNzc1tcImZvbnQtc2l6ZVwiXSA9IFJlc29sdmVVbml0ZWROdW1iZXIoY29tcHV0ZWRDU1NFbGVtZW50KFwiZm9udC1zaXplXCIpKSB8fCAxO1xuICAgICAgY3NzW1wibGluZS1oZWlnaHRcIl0gPSBSZXNvbHZlVW5pdGVkTnVtYmVyKGNvbXB1dGVkQ1NTRWxlbWVudChcImxpbmUtaGVpZ2h0XCIpKSB8fCAxO1xuICAgICAgY3NzW1wiZGlzcGxheVwiXSA9IGNvbXB1dGVkQ1NTRWxlbWVudChcImRpc3BsYXlcIikgPT09IFwiaW5saW5lXCIgPyBcImlubGluZVwiIDogXCJibG9ja1wiO1xuICAgICAgdG1wID0gY3NzW1wiZGlzcGxheVwiXSA9PT0gXCJibG9ja1wiO1xuICAgICAgY3NzW1wibWFyZ2luLXRvcFwiXSA9IHRtcCAmJiBSZXNvbHZlVW5pdGVkTnVtYmVyKGNvbXB1dGVkQ1NTRWxlbWVudChcIm1hcmdpbi10b3BcIikpIHx8IDA7XG4gICAgICBjc3NbXCJtYXJnaW4tYm90dG9tXCJdID0gdG1wICYmIFJlc29sdmVVbml0ZWROdW1iZXIoY29tcHV0ZWRDU1NFbGVtZW50KFwibWFyZ2luLWJvdHRvbVwiKSkgfHwgMDtcbiAgICAgIGNzc1tcInBhZGRpbmctdG9wXCJdID0gdG1wICYmIFJlc29sdmVVbml0ZWROdW1iZXIoY29tcHV0ZWRDU1NFbGVtZW50KFwicGFkZGluZy10b3BcIikpIHx8IDA7XG4gICAgICBjc3NbXCJwYWRkaW5nLWJvdHRvbVwiXSA9IHRtcCAmJiBSZXNvbHZlVW5pdGVkTnVtYmVyKGNvbXB1dGVkQ1NTRWxlbWVudChcInBhZGRpbmctYm90dG9tXCIpKSB8fCAwO1xuICAgICAgY3NzW1wibWFyZ2luLWxlZnRcIl0gPSB0bXAgJiYgUmVzb2x2ZVVuaXRlZE51bWJlcihjb21wdXRlZENTU0VsZW1lbnQoXCJtYXJnaW4tbGVmdFwiKSkgfHwgMDtcbiAgICAgIGNzc1tcIm1hcmdpbi1yaWdodFwiXSA9IHRtcCAmJiBSZXNvbHZlVW5pdGVkTnVtYmVyKGNvbXB1dGVkQ1NTRWxlbWVudChcIm1hcmdpbi1yaWdodFwiKSkgfHwgMDtcbiAgICAgIGNzc1tcInBhZGRpbmctbGVmdFwiXSA9IHRtcCAmJiBSZXNvbHZlVW5pdGVkTnVtYmVyKGNvbXB1dGVkQ1NTRWxlbWVudChcInBhZGRpbmctbGVmdFwiKSkgfHwgMDtcbiAgICAgIGNzc1tcInBhZGRpbmctcmlnaHRcIl0gPSB0bXAgJiYgUmVzb2x2ZVVuaXRlZE51bWJlcihjb21wdXRlZENTU0VsZW1lbnQoXCJwYWRkaW5nLXJpZ2h0XCIpKSB8fCAwO1xuICAgICAgY3NzW1wicGFnZS1icmVhay1iZWZvcmVcIl0gPSBjb21wdXRlZENTU0VsZW1lbnQoXCJwYWdlLWJyZWFrLWJlZm9yZVwiKSB8fCBcImF1dG9cIjsgLy9mbG9hdCBhbmQgY2xlYXJpbmcgb2YgZmxvYXRzXG5cbiAgICAgIGNzc1tcImZsb2F0XCJdID0gRmxvYXRNYXBbY29tcHV0ZWRDU1NFbGVtZW50KFwiY3NzRmxvYXRcIildIHx8IFwibm9uZVwiO1xuICAgICAgY3NzW1wiY2xlYXJcIl0gPSBDbGVhck1hcFtjb21wdXRlZENTU0VsZW1lbnQoXCJjbGVhclwiKV0gfHwgXCJub25lXCI7XG4gICAgICBjc3NbXCJjb2xvclwiXSA9IGNvbXB1dGVkQ1NTRWxlbWVudChcImNvbG9yXCIpO1xuICAgICAgcmV0dXJuIGNzcztcbiAgICB9O1xuXG4gICAgZWxlbWVudEhhbmRsZWRFbHNld2hlcmUgPSBmdW5jdGlvbiBlbGVtZW50SGFuZGxlZEVsc2V3aGVyZShlbGVtZW50LCByZW5kZXJlciwgZWxlbWVudEhhbmRsZXJzKSB7XG4gICAgICB2YXIgaGFuZGxlcnMsIGksIGlzSGFuZGxlZEVsc2V3aGVyZSwgbCwgY2xhc3NOYW1lcztcbiAgICAgIGlzSGFuZGxlZEVsc2V3aGVyZSA9IGZhbHNlO1xuICAgICAgaSA9IHZvaWQgMDtcbiAgICAgIGwgPSB2b2lkIDA7XG4gICAgICBoYW5kbGVycyA9IGVsZW1lbnRIYW5kbGVyc1tcIiNcIiArIGVsZW1lbnQuaWRdO1xuXG4gICAgICBpZiAoaGFuZGxlcnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBoYW5kbGVycyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgaXNIYW5kbGVkRWxzZXdoZXJlID0gaGFuZGxlcnMoZWxlbWVudCwgcmVuZGVyZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgIGwgPSBoYW5kbGVycy5sZW5ndGg7XG5cbiAgICAgICAgICB3aGlsZSAoIWlzSGFuZGxlZEVsc2V3aGVyZSAmJiBpICE9PSBsKSB7XG4gICAgICAgICAgICBpc0hhbmRsZWRFbHNld2hlcmUgPSBoYW5kbGVyc1tpXShlbGVtZW50LCByZW5kZXJlcik7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGhhbmRsZXJzID0gZWxlbWVudEhhbmRsZXJzW2VsZW1lbnQubm9kZU5hbWVdO1xuXG4gICAgICBpZiAoIWlzSGFuZGxlZEVsc2V3aGVyZSAmJiBoYW5kbGVycykge1xuICAgICAgICBpZiAodHlwZW9mIGhhbmRsZXJzID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBpc0hhbmRsZWRFbHNld2hlcmUgPSBoYW5kbGVycyhlbGVtZW50LCByZW5kZXJlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgbCA9IGhhbmRsZXJzLmxlbmd0aDtcblxuICAgICAgICAgIHdoaWxlICghaXNIYW5kbGVkRWxzZXdoZXJlICYmIGkgIT09IGwpIHtcbiAgICAgICAgICAgIGlzSGFuZGxlZEVsc2V3aGVyZSA9IGhhbmRsZXJzW2ldKGVsZW1lbnQsIHJlbmRlcmVyKTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gLy8gVHJ5IGNsYXNzIG5hbWVzXG5cblxuICAgICAgY2xhc3NOYW1lcyA9IHR5cGVvZiBlbGVtZW50LmNsYXNzTmFtZSA9PT0gJ3N0cmluZycgPyBlbGVtZW50LmNsYXNzTmFtZS5zcGxpdCgnICcpIDogW107XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBjbGFzc05hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGhhbmRsZXJzID0gZWxlbWVudEhhbmRsZXJzWycuJyArIGNsYXNzTmFtZXNbaV1dO1xuXG4gICAgICAgIGlmICghaXNIYW5kbGVkRWxzZXdoZXJlICYmIGhhbmRsZXJzKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBoYW5kbGVycyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBpc0hhbmRsZWRFbHNld2hlcmUgPSBoYW5kbGVycyhlbGVtZW50LCByZW5kZXJlcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgICAgbCA9IGhhbmRsZXJzLmxlbmd0aDtcblxuICAgICAgICAgICAgd2hpbGUgKCFpc0hhbmRsZWRFbHNld2hlcmUgJiYgaSAhPT0gbCkge1xuICAgICAgICAgICAgICBpc0hhbmRsZWRFbHNld2hlcmUgPSBoYW5kbGVyc1tpXShlbGVtZW50LCByZW5kZXJlcik7XG4gICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGlzSGFuZGxlZEVsc2V3aGVyZTtcbiAgICB9O1xuXG4gICAgdGFibGVUb0pzb24gPSBmdW5jdGlvbiB0YWJsZVRvSnNvbih0YWJsZSwgcmVuZGVyZXIpIHtcbiAgICAgIHZhciBkYXRhLCBoZWFkZXJzLCBpLCBqLCByb3dEYXRhLCB0YWJsZVJvdywgdGFibGVfb2JqLCB0YWJsZV93aXRoLCBjZWxsLCBsO1xuICAgICAgZGF0YSA9IFtdO1xuICAgICAgaGVhZGVycyA9IFtdO1xuICAgICAgaSA9IDA7XG4gICAgICBsID0gMDtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGFibGUucm93c1swXS5jZWxscy5sZW5ndGg7IGorKykge1xuICAgICAgICBsICs9IHRhYmxlLnJvd3NbMF0uY2VsbHNbal0uY29sU3BhbjtcbiAgICAgIH1cbiAgICAgIHRhYmxlX3dpdGggPSB0YWJsZS5jbGllbnRXaWR0aDtcblxuICAgICAgd2hpbGUgKGkgPCBsKSB7XG4gICAgICAgIGNlbGwgPSB0YWJsZS5yb3dzWzBdLmNlbGxzW2ldO1xuXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY2VsbC5jb2xTcGFuOyBqKyspIHtcbiAgICAgICAgICBoZWFkZXJzW2kgKyBqXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IGNlbGwudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICcnKSArICdfJyArIGosXG4gICAgICAgICAgICBwcm9tcHQ6IGNlbGwudGV4dENvbnRlbnQucmVwbGFjZSgvXFxyP1xcbi9nLCAnJyksXG4gICAgICAgICAgICB3aWR0aDogY2VsbC5jbGllbnRXaWR0aCAvIHRhYmxlX3dpdGggKiByZW5kZXJlci5zZXR0aW5ncy53aWR0aCAvIGNlbGwuY29sU3BhblxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpICs9IGo7XG4gICAgICB9XG5cbiAgICAgIGkgPSAxO1xuXG4gICAgICB3aGlsZSAoaSA8IHRhYmxlLnJvd3MubGVuZ3RoKSB7XG4gICAgICAgIHRhYmxlUm93ID0gdGFibGUucm93c1tpXTtcbiAgICAgICAgcm93RGF0YSA9IHt9O1xuICAgICAgICBqID0gMDtcblxuICAgICAgICB3aGlsZSAoaiA8IHRhYmxlUm93LmNlbGxzLmxlbmd0aCkge1xuICAgICAgICAgIHJvd0RhdGFbaGVhZGVyc1tqXS5uYW1lXSA9IHRhYmxlUm93LmNlbGxzW2pdLnRleHRDb250ZW50LnJlcGxhY2UoL1xccj9cXG4vZywgJycpO1xuICAgICAgICAgIGorKztcbiAgICAgICAgfVxuXG4gICAgICAgIGRhdGEucHVzaChyb3dEYXRhKTtcbiAgICAgICAgaSsrO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGFibGVfb2JqID0ge1xuICAgICAgICByb3dzOiBkYXRhLFxuICAgICAgICBoZWFkZXJzOiBoZWFkZXJzXG4gICAgICB9O1xuICAgIH07XG5cbiAgICB2YXIgU2tpcE5vZGUgPSB7XG4gICAgICBTQ1JJUFQ6IDEsXG4gICAgICBTVFlMRTogMSxcbiAgICAgIE5PU0NSSVBUOiAxLFxuICAgICAgT0JKRUNUOiAxLFxuICAgICAgRU1CRUQ6IDEsXG4gICAgICBTRUxFQ1Q6IDFcbiAgICB9O1xuICAgIHZhciBsaXN0Q291bnQgPSAxO1xuXG4gICAgX0RyaWxsRm9yQ29udGVudCA9IGZ1bmN0aW9uIERyaWxsRm9yQ29udGVudChlbGVtZW50LCByZW5kZXJlciwgZWxlbWVudEhhbmRsZXJzKSB7XG4gICAgICB2YXIgY24sIGNucywgZnJhZ21lbnRDU1MsIGksIGlzQmxvY2ssIGwsIHRhYmxlMmpzb24sIGNiO1xuICAgICAgY25zID0gZWxlbWVudC5jaGlsZE5vZGVzO1xuICAgICAgY24gPSB2b2lkIDA7XG4gICAgICBmcmFnbWVudENTUyA9IEdldENTUyhlbGVtZW50KTtcbiAgICAgIGlzQmxvY2sgPSBmcmFnbWVudENTUy5kaXNwbGF5ID09PSBcImJsb2NrXCI7XG5cbiAgICAgIGlmIChpc0Jsb2NrKSB7XG4gICAgICAgIHJlbmRlcmVyLnNldEJsb2NrQm91bmRhcnkoKTtcbiAgICAgICAgcmVuZGVyZXIuc2V0QmxvY2tTdHlsZShmcmFnbWVudENTUyk7XG4gICAgICB9XG4gICAgICBpID0gMDtcbiAgICAgIGwgPSBjbnMubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoaSA8IGwpIHtcbiAgICAgICAgY24gPSBjbnNbaV07XG5cbiAgICAgICAgaWYgKHR5cGVvZihjbikgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAvL2V4ZWN1dGUgYWxsIHdhdGNoZXIgZnVuY3Rpb25zIHRvIGUuZy4gcmVzZXQgZmxvYXRpbmdcbiAgICAgICAgICByZW5kZXJlci5leGVjdXRlV2F0Y2hGdW5jdGlvbnMoY24pO1xuICAgICAgICAgIC8qKiogSEVBREVSIHJlbmRlcmluZyAqKi9cblxuICAgICAgICAgIGlmIChjbi5ub2RlVHlwZSA9PT0gMSAmJiBjbi5ub2RlTmFtZSA9PT0gJ0hFQURFUicpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSBjbjsgLy9zdG9yZSBvbGQgdG9wIG1hcmdpblxuXG4gICAgICAgICAgICB2YXIgb2xkTWFyZ2luVG9wID0gcmVuZGVyZXIucGRmLm1hcmdpbnNfZG9jLnRvcDsgLy9zdWJzY3JpYmUgZm9yIG5ldyBwYWdlIGV2ZW50IGFuZCByZW5kZXIgaGVhZGVyIGZpcnN0IG9uIGV2ZXJ5IHBhZ2VcblxuICAgICAgICAgICAgcmVuZGVyZXIucGRmLmludGVybmFsLmV2ZW50cy5zdWJzY3JpYmUoJ2FkZFBhZ2UnLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgICAgICAgLy9zZXQgY3VycmVudCB5IHBvc2l0aW9uIHRvIG9sZCBtYXJnaW5cbiAgICAgICAgICAgICAgcmVuZGVyZXIueSA9IG9sZE1hcmdpblRvcDsgLy9yZW5kZXIgYWxsIGNoaWxkIG5vZGVzIG9mIHRoZSBoZWFkZXIgZWxlbWVudFxuXG4gICAgICAgICAgICAgIF9EcmlsbEZvckNvbnRlbnQoaGVhZGVyLCByZW5kZXJlciwgZWxlbWVudEhhbmRsZXJzKTsgLy9zZXQgbWFyZ2luIHRvIG9sZCBtYXJnaW4gKyByZW5kZXJlZCBoZWFkZXIgKyAxMCBzcGFjZSB0byBwcmV2ZW50IG92ZXJsYXBwaW5nXG4gICAgICAgICAgICAgIC8vaW1wb3J0YW50IGZvciBvdGhlciBwbHVnaW5zIChlLmcuIHRhYmxlKSB0byBzdGFydCByZW5kZXJpbmcgYXQgY29ycmVjdCBwb3NpdGlvbiBhZnRlciBoZWFkZXJcblxuXG4gICAgICAgICAgICAgIHJlbmRlcmVyLnBkZi5tYXJnaW5zX2RvYy50b3AgPSByZW5kZXJlci55ICsgMTA7XG4gICAgICAgICAgICAgIHJlbmRlcmVyLnkgKz0gMTA7XG4gICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGNuLm5vZGVUeXBlID09PSA4ICYmIGNuLm5vZGVOYW1lID09PSBcIiNjb21tZW50XCIpIHtcbiAgICAgICAgICAgIGlmICh+Y24udGV4dENvbnRlbnQuaW5kZXhPZihcIkFERF9QQUdFXCIpKSB7XG4gICAgICAgICAgICAgIHJlbmRlcmVyLnBkZi5hZGRQYWdlKCk7XG4gICAgICAgICAgICAgIHJlbmRlcmVyLnkgPSByZW5kZXJlci5wZGYubWFyZ2luc19kb2MudG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoY24ubm9kZVR5cGUgPT09IDEgJiYgIVNraXBOb2RlW2NuLm5vZGVOYW1lXSkge1xuICAgICAgICAgICAgLyoqKiBJTUFHRSBSRU5ERVJJTkcgKioqL1xuICAgICAgICAgICAgdmFyIGNhY2hlZF9pbWFnZTtcblxuICAgICAgICAgICAgaWYgKGNuLm5vZGVOYW1lID09PSBcIklNR1wiKSB7XG4gICAgICAgICAgICAgIHZhciB1cmwgPSBjbi5nZXRBdHRyaWJ1dGUoXCJzcmNcIik7XG4gICAgICAgICAgICAgIGNhY2hlZF9pbWFnZSA9IGltYWdlc1socmVuZGVyZXIucGRmLnNIYXNoQ29kZSAmJiByZW5kZXJlci5wZGYuc0hhc2hDb2RlKHVybCkpIHx8IHVybF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjYWNoZWRfaW1hZ2UpIHtcbiAgICAgICAgICAgICAgaWYgKHJlbmRlcmVyLnBkZi5pbnRlcm5hbC5wYWdlU2l6ZS5nZXRIZWlnaHQoKSAtIHJlbmRlcmVyLnBkZi5tYXJnaW5zX2RvYy5ib3R0b20gPCByZW5kZXJlci55ICsgY24uaGVpZ2h0ICYmIHJlbmRlcmVyLnkgPiByZW5kZXJlci5wZGYubWFyZ2luc19kb2MudG9wKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIucGRmLmFkZFBhZ2UoKTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci55ID0gcmVuZGVyZXIucGRmLm1hcmdpbnNfZG9jLnRvcDsgLy9jaGVjayBpZiB3ZSBoYXZlIHRvIHNldCBiYWNrIHNvbWUgdmFsdWVzIGR1ZSB0byBlLmcuIGhlYWRlciByZW5kZXJpbmcgZm9yIG5ldyBwYWdlXG5cbiAgICAgICAgICAgICAgICByZW5kZXJlci5leGVjdXRlV2F0Y2hGdW5jdGlvbnMoY24pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdmFyIGltYWdlc0NTUyA9IEdldENTUyhjbik7XG4gICAgICAgICAgICAgIHZhciBpbWFnZVggPSByZW5kZXJlci54O1xuICAgICAgICAgICAgICB2YXIgZm9udFRvVW5pdFJhdGlvID0gMTIgLyByZW5kZXJlci5wZGYuaW50ZXJuYWwuc2NhbGVGYWN0b3I7IC8vZGVmaW5lIGFkZGl0aW9uYWwgcGFkZGluZ3MsIG1hcmdpbnMgd2hpY2ggaGF2ZSB0byBiZSB0YWtlbiBpbnRvIGFjY291bnQgZm9yIG1hcmdpbiBjYWxjdWxhdGlvbnNcblxuICAgICAgICAgICAgICB2YXIgYWRkaXRpb25hbFNwYWNlTGVmdCA9IChpbWFnZXNDU1NbXCJtYXJnaW4tbGVmdFwiXSArIGltYWdlc0NTU1tcInBhZGRpbmctbGVmdFwiXSkgKiBmb250VG9Vbml0UmF0aW87XG4gICAgICAgICAgICAgIHZhciBhZGRpdGlvbmFsU3BhY2VSaWdodCA9IChpbWFnZXNDU1NbXCJtYXJnaW4tcmlnaHRcIl0gKyBpbWFnZXNDU1NbXCJwYWRkaW5nLXJpZ2h0XCJdKSAqIGZvbnRUb1VuaXRSYXRpbztcbiAgICAgICAgICAgICAgdmFyIGFkZGl0aW9uYWxTcGFjZVRvcCA9IChpbWFnZXNDU1NbXCJtYXJnaW4tdG9wXCJdICsgaW1hZ2VzQ1NTW1wicGFkZGluZy10b3BcIl0pICogZm9udFRvVW5pdFJhdGlvO1xuICAgICAgICAgICAgICB2YXIgYWRkaXRpb25hbFNwYWNlQm90dG9tID0gKGltYWdlc0NTU1tcIm1hcmdpbi1ib3R0b21cIl0gKyBpbWFnZXNDU1NbXCJwYWRkaW5nLWJvdHRvbVwiXSkgKiBmb250VG9Vbml0UmF0aW87IC8vaWYgZmxvYXQgaXMgc2V0IHRvIHJpZ2h0LCBtb3ZlIHRoZSBpbWFnZSB0byB0aGUgcmlnaHQgYm9yZGVyXG4gICAgICAgICAgICAgIC8vYWRkIHNwYWNlIGlmIG1hcmdpbiBpcyBzZXRcblxuICAgICAgICAgICAgICBpZiAoaW1hZ2VzQ1NTWydmbG9hdCddICE9PSB1bmRlZmluZWQgJiYgaW1hZ2VzQ1NTWydmbG9hdCddID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgaW1hZ2VYICs9IHJlbmRlcmVyLnNldHRpbmdzLndpZHRoIC0gY24ud2lkdGggLSBhZGRpdGlvbmFsU3BhY2VSaWdodDtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbWFnZVggKz0gYWRkaXRpb25hbFNwYWNlTGVmdDtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJlbmRlcmVyLnBkZi5hZGRJbWFnZShjYWNoZWRfaW1hZ2UsIGltYWdlWCwgcmVuZGVyZXIueSArIGFkZGl0aW9uYWxTcGFjZVRvcCwgY24ud2lkdGgsIGNuLmhlaWdodCk7XG4gICAgICAgICAgICAgIGNhY2hlZF9pbWFnZSA9IHVuZGVmaW5lZDsgLy9pZiB0aGUgZmxvYXQgcHJvcCBpcyBzcGVjaWZpZWQgd2UgaGF2ZSB0byBmbG9hdCB0aGUgdGV4dCBhcm91bmQgdGhlIGltYWdlXG5cbiAgICAgICAgICAgICAgaWYgKGltYWdlc0NTU1snZmxvYXQnXSA9PT0gJ3JpZ2h0JyB8fCBpbWFnZXNDU1NbJ2Zsb2F0J10gPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgIC8vYWRkIGZ1bmN0aW9udCB0byBzZXQgYmFjayBjb29yZGluYXRlcyBhZnRlciBpbWFnZSByZW5kZXJpbmdcbiAgICAgICAgICAgICAgICByZW5kZXJlci53YXRjaEZ1bmN0aW9ucy5wdXNoKGZ1bmN0aW9uIChkaWZmWCwgdGhyZXNob2xkWSwgZGlmZldpZHRoLCBlbCkge1xuICAgICAgICAgICAgICAgICAgLy91bmRvIGRyYXdpbmcgYm94IGFkYXB0aW9ucyB3aGljaCB3ZXJlIHNldCBieSBmbG9hdGluZ1xuICAgICAgICAgICAgICAgICAgaWYgKHJlbmRlcmVyLnkgPj0gdGhyZXNob2xkWSkge1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJlci54ICs9IGRpZmZYO1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5zZXR0aW5ncy53aWR0aCArPSBkaWZmV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbCAmJiBlbC5ub2RlVHlwZSA9PT0gMSAmJiAhU2tpcE5vZGVbZWwubm9kZU5hbWVdICYmIHJlbmRlcmVyLnggKyBlbC53aWR0aCA+IHJlbmRlcmVyLnBkZi5tYXJnaW5zX2RvYy5sZWZ0ICsgcmVuZGVyZXIucGRmLm1hcmdpbnNfZG9jLndpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLnggKz0gZGlmZlg7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLnkgPSB0aHJlc2hvbGRZO1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5zZXR0aW5ncy53aWR0aCArPSBkaWZmV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzLCBpbWFnZXNDU1NbJ2Zsb2F0J10gPT09ICdsZWZ0JyA/IC1jbi53aWR0aCAtIGFkZGl0aW9uYWxTcGFjZUxlZnQgLSBhZGRpdGlvbmFsU3BhY2VSaWdodCA6IDAsIHJlbmRlcmVyLnkgKyBjbi5oZWlnaHQgKyBhZGRpdGlvbmFsU3BhY2VUb3AgKyBhZGRpdGlvbmFsU3BhY2VCb3R0b20sIGNuLndpZHRoKSk7IC8vcmVzZXQgZmxvYXRpbmcgYnkgY2xlYXI6Ym90aCBkaXZzXG4gICAgICAgICAgICAgICAgLy9qdXN0IHNldCBjdXJzb3JZIGFmdGVyIHRoZSBmbG9hdGluZyBlbGVtZW50XG5cbiAgICAgICAgICAgICAgICByZW5kZXJlci53YXRjaEZ1bmN0aW9ucy5wdXNoKGZ1bmN0aW9uICh5UG9zaXRpb25BZnRlckZsb2F0aW5nLCBwYWdlcywgZWwpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChyZW5kZXJlci55IDwgeVBvc2l0aW9uQWZ0ZXJGbG9hdGluZyAmJiBwYWdlcyA9PT0gcmVuZGVyZXIucGRmLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWwubm9kZVR5cGUgPT09IDEgJiYgR2V0Q1NTKGVsKS5jbGVhciA9PT0gJ2JvdGgnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIueSA9IHlQb3NpdGlvbkFmdGVyRmxvYXRpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcywgcmVuZGVyZXIueSArIGNuLmhlaWdodCwgcmVuZGVyZXIucGRmLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKSkpOyAvL2lmIGZsb2F0aW5nIGlzIHNldCB3ZSBkZWNyZWFzZSB0aGUgYXZhaWxhYmxlIHdpZHRoIGJ5IHRoZSBpbWFnZSB3aWR0aFxuXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuc2V0dGluZ3Mud2lkdGggLT0gY24ud2lkdGggKyBhZGRpdGlvbmFsU3BhY2VMZWZ0ICsgYWRkaXRpb25hbFNwYWNlUmlnaHQ7IC8vaWYgbGVmdCBqdXN0IGFkZCB0aGUgaW1hZ2Ugd2lkdGggdG8gdGhlIFggY29vcmRpbmF0ZVxuXG4gICAgICAgICAgICAgICAgaWYgKGltYWdlc0NTU1snZmxvYXQnXSA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgICByZW5kZXJlci54ICs9IGNuLndpZHRoICsgYWRkaXRpb25hbFNwYWNlTGVmdCArIGFkZGl0aW9uYWxTcGFjZVJpZ2h0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvL2lmIG5vIGZsb2F0aW5nIGlzIHNldCwgbW92ZSB0aGUgcmVuZGVyaW5nIGN1cnNvciBhZnRlciB0aGUgaW1hZ2UgaGVpZ2h0XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIueSArPSBjbi5oZWlnaHQgKyBhZGRpdGlvbmFsU3BhY2VUb3AgKyBhZGRpdGlvbmFsU3BhY2VCb3R0b207XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLyoqKiBUQUJMRSBSRU5ERVJJTkcgKioqL1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNuLm5vZGVOYW1lID09PSBcIlRBQkxFXCIpIHtcbiAgICAgICAgICAgICAgaWYoIXJlbmRlcmVyLnBkZi5hdXRvVGFibGUpIHtcbiAgICAgICAgICAgICAgICB0YWJsZTJqc29uID0gdGFibGVUb0pzb24oY24sIHJlbmRlcmVyKTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci55ICs9IDEwO1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLnBkZi50YWJsZShyZW5kZXJlci54LCByZW5kZXJlci55LCB0YWJsZTJqc29uLnJvd3MsIHRhYmxlMmpzb24uaGVhZGVycywge1xuICAgICAgICAgICAgICAgICAgYXV0b1NpemU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgcHJpbnRIZWFkZXJzOiBlbGVtZW50SGFuZGxlcnMucHJpbnRIZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgbWFyZ2luczogcmVuZGVyZXIucGRmLm1hcmdpbnNfZG9jLFxuICAgICAgICAgICAgICAgICAgY3NzOiBHZXRDU1MoY24pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIueSA9IHJlbmRlcmVyLnBkZi5pbnRlcm5hbC5fX2NlbGxfXy5sYXN0Q2VsbC55ICtcbiAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLnBkZi5pbnRlcm5hbC5fX2NlbGxfXy5sYXN0Q2VsbC5oZWlnaHQ7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIueSArPSAxMDtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5wZGYuYXV0b1RhYmxlKHsgdGhlbWU6IFwiZ3JpZFwiLCBodG1sOiBjbiwgc3RhcnRZOiByZW5kZXJlci55LFxuICAgICAgICAgICAgICAgICAgc3R5bGVzOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQ6IHJlbmRlcmVyLnBkZi5nZXRGb250KCkuZm9udE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiByZW5kZXJlci5wZGYuZ2V0Rm9udFNpemUoKSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yOiByZW5kZXJlci5wZGYuZ2V0VGV4dENvbG9yKClcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBtYXJnaW46IHsgXG4gICAgICAgICAgICAgICAgICAgIHRvcDogcmVuZGVyZXIucGRmLm1hcmdpbnNfZG9jLnRvcCwgXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHJlbmRlcmVyLngsIFxuICAgICAgICAgICAgICAgICAgICByaWdodDogcmVuZGVyZXIucGRmLmludGVybmFsLnBhZ2VTaXplLmdldFdpZHRoKCkgLSAocmVuZGVyZXIueCAgKyByZW5kZXJlci5zZXR0aW5ncy53aWR0aCksIFxuICAgICAgICAgICAgICAgICAgICBib3R0b206IHJlbmRlcmVyLnBkZi5tYXJnaW5zX2RvYy5ib3R0b20gfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci55ID0gcmVuZGVyZXIucGRmLmxhc3RBdXRvVGFibGUuZmluYWxZO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNuLm5vZGVOYW1lID09PSBcIk9MXCIgfHwgY24ubm9kZU5hbWUgPT09IFwiVUxcIikge1xuICAgICAgICAgICAgICBsaXN0Q291bnQgPSAxO1xuXG4gICAgICAgICAgICAgIGlmICghZWxlbWVudEhhbmRsZWRFbHNld2hlcmUoY24sIHJlbmRlcmVyLCBlbGVtZW50SGFuZGxlcnMpKSB7XG4gICAgICAgICAgICAgICAgX0RyaWxsRm9yQ29udGVudChjbiwgcmVuZGVyZXIsIGVsZW1lbnRIYW5kbGVycyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZW5kZXJlci55ICs9IDEwO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjbi5ub2RlTmFtZSA9PT0gXCJMSVwiKSB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcmVuZGVyZXIueDtcbiAgICAgICAgICAgICAgcmVuZGVyZXIueCArPSAyMCAvIHJlbmRlcmVyLnBkZi5pbnRlcm5hbC5zY2FsZUZhY3RvcjtcbiAgICAgICAgICAgICAgcmVuZGVyZXIueSArPSAzO1xuXG4gICAgICAgICAgICAgIGlmICghZWxlbWVudEhhbmRsZWRFbHNld2hlcmUoY24sIHJlbmRlcmVyLCBlbGVtZW50SGFuZGxlcnMpKSB7XG4gICAgICAgICAgICAgICAgX0RyaWxsRm9yQ29udGVudChjbiwgcmVuZGVyZXIsIGVsZW1lbnRIYW5kbGVycyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZW5kZXJlci54ID0gdGVtcDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY24ubm9kZU5hbWUgPT09IFwiQlJcIikge1xuICAgICAgICAgICAgICByZW5kZXJlci55ICs9IGZyYWdtZW50Q1NTW1wiZm9udC1zaXplXCJdICogcmVuZGVyZXIucGRmLmludGVybmFsLnNjYWxlRmFjdG9yO1xuICAgICAgICAgICAgICByZW5kZXJlci5hZGRUZXh0KFwiXFx1MjAyOFwiLCBjbG9uZShmcmFnbWVudENTUykpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKCFlbGVtZW50SGFuZGxlZEVsc2V3aGVyZShjbiwgcmVuZGVyZXIsIGVsZW1lbnRIYW5kbGVycykpIHtcbiAgICAgICAgICAgICAgICBfRHJpbGxGb3JDb250ZW50KGNuLCByZW5kZXJlciwgZWxlbWVudEhhbmRsZXJzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoY24ubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNuLm5vZGVWYWx1ZTtcblxuICAgICAgICAgICAgaWYgKGNuLm5vZGVWYWx1ZSAmJiBjbi5wYXJlbnROb2RlLm5vZGVOYW1lID09PSBcIkxJXCIpIHtcbiAgICAgICAgICAgICAgaWYgKGNuLnBhcmVudE5vZGUucGFyZW50Tm9kZS5ub2RlTmFtZSA9PT0gXCJPTFwiKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBsaXN0Q291bnQrKyArICcuICcgKyB2YWx1ZTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZm9udFNpemUgPSBmcmFnbWVudENTU1tcImZvbnQtc2l6ZVwiXTtcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0WCA9ICgzIC0gZm9udFNpemUgKiAwLjc1KSAqIHJlbmRlcmVyLnBkZi5pbnRlcm5hbC5zY2FsZUZhY3RvcjtcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0WSA9IGZvbnRTaXplICogMC43NSAqIHJlbmRlcmVyLnBkZi5pbnRlcm5hbC5zY2FsZUZhY3RvcjtcbiAgICAgICAgICAgICAgICB2YXIgcmFkaXVzID0gZm9udFNpemUgKiAxLjc0IC8gcmVuZGVyZXIucGRmLmludGVybmFsLnNjYWxlRmFjdG9yO1xuXG4gICAgICAgICAgICAgICAgY2IgPSBmdW5jdGlvbiBjYih4LCB5KSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnBkZi5jaXJjbGUoeCArIG9mZnNldFgsIHkgKyBvZmZzZXRZLCByYWRpdXMsICdGRCcpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gLy8gT25seSBhZGQgdGhlIHRleHQgaWYgdGhlIHRleHQgbm9kZSBpcyBpbiB0aGUgYm9keSBlbGVtZW50XG4gICAgICAgICAgICAvLyBBZGQgY29tcGF0aWJpbGl0eSB3aXRoIElFMTFcblxuXG4gICAgICAgICAgICBpZiAoISEoY24ub3duZXJEb2N1bWVudC5ib2R5LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGNuKSAmIDE2KSkge1xuICAgICAgICAgICAgICByZW5kZXJlci5hZGRUZXh0KHZhbHVlLCBmcmFnbWVudENTUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY24gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJlbmRlcmVyLmFkZFRleHQoY24sIGZyYWdtZW50Q1NTKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpKys7XG4gICAgICB9XG5cbiAgICAgIGVsZW1lbnRIYW5kbGVycy5vdXRZID0gcmVuZGVyZXIueTtcblxuICAgICAgaWYgKGlzQmxvY2spIHtcbiAgICAgICAgcmV0dXJuIHJlbmRlcmVyLnNldEJsb2NrQm91bmRhcnkoY2IpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpbWFnZXMgPSB7fTtcblxuICAgIGxvYWRJbWdzID0gZnVuY3Rpb24gbG9hZEltZ3MoZWxlbWVudCwgcmVuZGVyZXIsIGVsZW1lbnRIYW5kbGVycywgY2IpIHtcbiAgICAgIHZhciBpbWdzID0gZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW1nJyksXG4gICAgICAgICAgbCA9IGltZ3MubGVuZ3RoLFxuICAgICAgICAgIGZvdW5kX2ltYWdlcyxcbiAgICAgICAgICB4ID0gMDtcblxuICAgICAgZnVuY3Rpb24gZG9uZSgpIHtcbiAgICAgICAgcmVuZGVyZXIucGRmLmludGVybmFsLmV2ZW50cy5wdWJsaXNoKCdpbWFnZXNMb2FkZWQnKTtcbiAgICAgICAgY2IoZm91bmRfaW1hZ2VzKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbG9hZEltYWdlKHVybCwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICBpZiAoIXVybCkgcmV0dXJuO1xuICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGZvdW5kX2ltYWdlcyA9ICsreDtcbiAgICAgICAgaW1nLmNyb3NzT3JpZ2luID0gJyc7XG5cbiAgICAgICAgaW1nLm9uZXJyb3IgPSBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChpbWcuY29tcGxldGUpIHtcbiAgICAgICAgICAgIC8vdG8gc3VwcG9ydCBkYXRhIHVybHMgaW4gaW1hZ2VzLCBzZXQgd2lkdGggYW5kIGhlaWdodFxuICAgICAgICAgICAgLy9hcyB0aG9zZSB2YWx1ZXMgYXJlIG5vdCByZWNvZ25pemVkIGF1dG9tYXRpY2FsbHlcbiAgICAgICAgICAgIGlmIChpbWcuc3JjLmluZGV4T2YoJ2RhdGE6aW1hZ2UvJykgPT09IDApIHtcbiAgICAgICAgICAgICAgaW1nLndpZHRoID0gd2lkdGggfHwgaW1nLndpZHRoIHx8IDA7XG4gICAgICAgICAgICAgIGltZy5oZWlnaHQgPSBoZWlnaHQgfHwgaW1nLmhlaWdodCB8fCAwO1xuICAgICAgICAgICAgfSAvL2lmIHZhbGlkIGltYWdlIGFkZCB0byBrbm93biBpbWFnZXMgYXJyYXlcblxuXG4gICAgICAgICAgICBpZiAoaW1nLndpZHRoICsgaW1nLmhlaWdodCkge1xuICAgICAgICAgICAgICB2YXIgaGFzaCA9IChyZW5kZXJlci5wZGYuc0hhc2hDb2RlICYmIHJlbmRlcmVyLnBkZi5zSGFzaENvZGUodXJsKSkgfHwgdXJsO1xuICAgICAgICAgICAgICBpbWFnZXNbaGFzaF0gPSBpbWFnZXNbaGFzaF0gfHwgaW1nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghIC0teCkge1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpbWcuc3JjID0gdXJsO1xuICAgICAgfVxuXG4gICAgICB3aGlsZSAobC0tKSB7XG4gICAgICAgIGxvYWRJbWFnZShpbWdzW2xdLmdldEF0dHJpYnV0ZShcInNyY1wiKSwgaW1nc1tsXS53aWR0aCwgaW1nc1tsXS5oZWlnaHQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4geCB8fCBkb25lKCk7XG4gICAgfTtcblxuICAgIGNoZWNrRm9yRm9vdGVyID0gZnVuY3Rpb24gY2hlY2tGb3JGb290ZXIoZWxlbSwgcmVuZGVyZXIsIGVsZW1lbnRIYW5kbGVycykge1xuICAgICAgLy9jaGVjayBpZiB3ZSBjYW4gZm91bmQgYSA8Zm9vdGVyPiBlbGVtZW50XG4gICAgICB2YXIgZm9vdGVyID0gZWxlbS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImZvb3RlclwiKTtcblxuICAgICAgaWYgKGZvb3Rlci5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvb3RlciA9IGZvb3RlclswXTsgLy9iYWQgaGFjayB0byBnZXQgaGVpZ2h0IG9mIGZvb3RlclxuICAgICAgICAvL2NyZWF0IGR1bW15IG91dCBhbmQgY2hlY2sgbmV3IHkgYWZ0ZXIgZmFrZSByZW5kZXJpbmdcblxuICAgICAgICB2YXIgb2xkT3V0ID0gcmVuZGVyZXIucGRmLmludGVybmFsLndyaXRlO1xuICAgICAgICB2YXIgb2xkWSA9IHJlbmRlcmVyLnk7XG5cbiAgICAgICAgcmVuZGVyZXIucGRmLmludGVybmFsLndyaXRlID0gZnVuY3Rpb24gKCkge307XG5cbiAgICAgICAgX0RyaWxsRm9yQ29udGVudChmb290ZXIsIHJlbmRlcmVyLCBlbGVtZW50SGFuZGxlcnMpO1xuXG4gICAgICAgIHZhciBmb290ZXJIZWlnaHQgPSBNYXRoLmNlaWwocmVuZGVyZXIueSAtIG9sZFkpICsgNTtcbiAgICAgICAgcmVuZGVyZXIueSA9IG9sZFk7XG4gICAgICAgIHJlbmRlcmVyLnBkZi5pbnRlcm5hbC53cml0ZSA9IG9sZE91dDsgLy9hZGQgMjAlIHRvIHByZXZlbnQgb3ZlcmxhcHBpbmdcblxuICAgICAgICByZW5kZXJlci5wZGYubWFyZ2luc19kb2MuYm90dG9tICs9IGZvb3RlckhlaWdodDsgLy9DcmVhdGUgZnVuY3Rpb24gcmVuZGVyIGhlYWRlciBvbiBldmVyeSBwYWdlXG5cbiAgICAgICAgdmFyIHJlbmRlckZvb3RlciA9IGZ1bmN0aW9uIHJlbmRlckZvb3RlcihwYWdlSW5mbykge1xuICAgICAgICAgIHZhciBwYWdlTnVtYmVyID0gcGFnZUluZm8gIT09IHVuZGVmaW5lZCA/IHBhZ2VJbmZvLnBhZ2VOdW1iZXIgOiAxOyAvL3NldCBjdXJyZW50IHkgcG9zaXRpb24gdG8gb2xkIG1hcmdpblxuXG4gICAgICAgICAgdmFyIG9sZFBvc2l0aW9uID0gcmVuZGVyZXIueTsgLy9yZW5kZXIgYWxsIGNoaWxkIG5vZGVzIG9mIHRoZSBoZWFkZXIgZWxlbWVudFxuXG4gICAgICAgICAgcmVuZGVyZXIueSA9IHJlbmRlcmVyLnBkZi5pbnRlcm5hbC5wYWdlU2l6ZS5nZXRIZWlnaHQoKSAtIHJlbmRlcmVyLnBkZi5tYXJnaW5zX2RvYy5ib3R0b207XG4gICAgICAgICAgcmVuZGVyZXIucGRmLm1hcmdpbnNfZG9jLmJvdHRvbSAtPSBmb290ZXJIZWlnaHQ7IC8vY2hlY2sgaWYgd2UgaGF2ZSB0byBhZGQgcGFnZSBudW1iZXJzXG5cbiAgICAgICAgICB2YXIgc3BhbnMgPSBmb290ZXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NwYW4nKTtcblxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIC8vaWYgd2UgZmluZCBzb21lIHNwYW4gZWxlbWVudCB3aXRoIGNsYXNzIHBhZ2VDb3VudGVyLCBzZXQgdGhlIHBhZ2VcbiAgICAgICAgICAgIGlmICgoXCIgXCIgKyBzcGFuc1tpXS5jbGFzc05hbWUgKyBcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZywgXCIgXCIpLmluZGV4T2YoXCIgcGFnZUNvdW50ZXIgXCIpID4gLTEpIHtcbiAgICAgICAgICAgICAgc3BhbnNbaV0uaW5uZXJIVE1MID0gcGFnZU51bWJlcjtcbiAgICAgICAgICAgIH0gLy9pZiB3ZSBmaW5kIHNvbWUgc3BhbiBlbGVtZW50IHdpdGggY2xhc3MgdG90YWxQYWdlcywgc2V0IGEgdmFyaWFibGUgd2hpY2ggaXMgcmVwbGFjZWQgYWZ0ZXIgcmVuZGVyaW5nIG9mIGFsbCBwYWdlc1xuXG5cbiAgICAgICAgICAgIGlmICgoXCIgXCIgKyBzcGFuc1tpXS5jbGFzc05hbWUgKyBcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZywgXCIgXCIpLmluZGV4T2YoXCIgdG90YWxQYWdlcyBcIikgPiAtMSkge1xuICAgICAgICAgICAgICBzcGFuc1tpXS5pbm5lckhUTUwgPSAnIyMjanNQREZWYXJUb3RhbFBhZ2VzIyMjJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IC8vcmVuZGVyIGZvb3RlciBjb250ZW50XG5cblxuICAgICAgICAgIF9EcmlsbEZvckNvbnRlbnQoZm9vdGVyLCByZW5kZXJlciwgZWxlbWVudEhhbmRsZXJzKTsgLy9zZXQgYm90dG9tIG1hcmdpbiB0byBwcmV2aW91cyBoZWlnaHQgaW5jbHVkaW5nIHRoZSBmb290ZXIgaGVpZ2h0XG5cblxuICAgICAgICAgIHJlbmRlcmVyLnBkZi5tYXJnaW5zX2RvYy5ib3R0b20gKz0gZm9vdGVySGVpZ2h0OyAvL2ltcG9ydGFudCBmb3Igb3RoZXIgcGx1Z2lucyAoZS5nLiB0YWJsZSkgdG8gc3RhcnQgcmVuZGVyaW5nIGF0IGNvcnJlY3QgcG9zaXRpb24gYWZ0ZXIgaGVhZGVyXG5cbiAgICAgICAgICByZW5kZXJlci55ID0gb2xkUG9zaXRpb247XG4gICAgICAgIH07IC8vY2hlY2sgaWYgZm9vdGVyIGNvbnRhaW5zIHRvdGFsUGFnZXMgd2hpY2ggc2hvdWxkIGJlIHJlcGxhY2UgYXQgdGhlIGRpc29wb3NhbCBvZiB0aGUgZG9jdW1lbnRcblxuXG4gICAgICAgIHZhciBzcGFucyA9IGZvb3Rlci5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3BhbicpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBpZiAoKFwiIFwiICsgc3BhbnNbaV0uY2xhc3NOYW1lICsgXCIgXCIpLnJlcGxhY2UoL1tcXG5cXHRdL2csIFwiIFwiKS5pbmRleE9mKFwiIHRvdGFsUGFnZXMgXCIpID4gLTEpIHtcbiAgICAgICAgICAgIHJlbmRlcmVyLnBkZi5pbnRlcm5hbC5ldmVudHMuc3Vic2NyaWJlKCdodG1sUmVuZGVyaW5nRmluaXNoZWQnLCByZW5kZXJlci5wZGYucHV0VG90YWxQYWdlcy5iaW5kKHJlbmRlcmVyLnBkZiwgJyMjI2pzUERGVmFyVG90YWxQYWdlcyMjIycpLCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gLy9yZWdpc3RlciBldmVudCB0byByZW5kZXIgZm9vdGVyIG9uIGV2ZXJ5IG5ldyBwYWdlXG5cblxuICAgICAgICByZW5kZXJlci5wZGYuaW50ZXJuYWwuZXZlbnRzLnN1YnNjcmliZSgnYWRkUGFnZScsIHJlbmRlckZvb3RlciwgZmFsc2UpOyAvL3JlbmRlciBmb290ZXIgb24gZmlyc3QgcGFnZVxuXG4gICAgICAgIHJlbmRlckZvb3RlcigpOyAvL3ByZXZlbnQgZm9vdGVyIHJlbmRlcmluZ1xuXG4gICAgICAgIFNraXBOb2RlWydGT09URVInXSA9IDE7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHByb2Nlc3MgPSBmdW5jdGlvbiBwcm9jZXNzKHBkZiwgZWxlbWVudCwgeCwgeSwgc2V0dGluZ3MsIGNhbGxiYWNrKSB7XG4gICAgICBpZiAoIWVsZW1lbnQpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmICh0eXBlb2YgZWxlbWVudCAhPT0gXCJzdHJpbmdcIiAmJiAhZWxlbWVudC5wYXJlbnROb2RlKSBlbGVtZW50ID0gJycgKyBlbGVtZW50LmlubmVySFRNTDtcblxuICAgICAgaWYgKHR5cGVvZiBlbGVtZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgIHZhciAkZnJhbWUsICRoaWRkZW5kaXYsIGZyYW1lbmFtZSwgdmlzdWFsbHloaWRkZW47XG4gICAgICAgICAgZnJhbWVuYW1lID0gXCJqc1BERmh0bWxUZXh0XCIgKyBEYXRlLm5vdygpLnRvU3RyaW5nKCkgKyAoTWF0aC5yYW5kb20oKSAqIDEwMDApLnRvRml4ZWQoMCk7XG4gICAgICAgICAgdmlzdWFsbHloaWRkZW4gPSBcInBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50O1wiICsgXCJjbGlwOiByZWN0KDFweCAxcHggMXB4IDFweCk7IC8qIElFNiwgSUU3ICovXCIgKyBcImNsaXA6IHJlY3QoMXB4LCAxcHgsIDFweCwgMXB4KTtcIiArIFwicGFkZGluZzowICFpbXBvcnRhbnQ7XCIgKyBcImJvcmRlcjowICFpbXBvcnRhbnQ7XCIgKyBcImhlaWdodDogMXB4ICFpbXBvcnRhbnQ7XCIgKyBcIndpZHRoOiAxcHggIWltcG9ydGFudDsgXCIgKyBcInRvcDphdXRvO1wiICsgXCJsZWZ0Oi0xMDBweDtcIiArIFwib3ZlcmZsb3c6IGhpZGRlbjtcIjtcbiAgICAgICAgICAkaGlkZGVuZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgJGhpZGRlbmRpdi5jbGFzc05hbWUgPSBcInNqcy1wZGYtaGlkZGVuLWh0bWwtZGl2XCI7XG4gICAgICAgICAgJGhpZGRlbmRpdi5zdHlsZS5jc3NUZXh0ID0gdmlzdWFsbHloaWRkZW47XG4gICAgICAgICAgJGhpZGRlbmRpdi5pbm5lckhUTUwgPSBcIjxpZnJhbWUgc3R5bGU9XFxcImhlaWdodDoxcHg7d2lkdGg6MXB4XFxcIiBuYW1lPVxcXCJcIiArIGZyYW1lbmFtZSArIFwiXFxcIiAvPlwiO1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoJGhpZGRlbmRpdik7XG4gICAgICAgICAgJGZyYW1lID0gd2luZG93LmZyYW1lc1tmcmFtZW5hbWVdO1xuICAgICAgICAgICRmcmFtZS5kb2N1bWVudC5vcGVuKCk7XG4gICAgICAgICAgJGZyYW1lLmRvY3VtZW50LndyaXRlbG4oZWxlbWVudCk7XG4gICAgICAgICAgJGZyYW1lLmRvY3VtZW50LmNsb3NlKCk7XG4gICAgICAgICAgcmV0dXJuICRmcmFtZS5kb2N1bWVudC5ib2R5O1xuICAgICAgICB9KGVsZW1lbnQucmVwbGFjZSgvPFxcLz9zY3JpcHRbXj5dKj8+L2dpLCAnJykpO1xuICAgICAgfVxuXG4gICAgICB2YXIgYXZhaWxhYmxlRm9udHMgPSBPYmplY3Qua2V5cyhwZGYuZ2V0Rm9udExpc3QoKSk7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYXZhaWxhYmxlRm9udHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGZvbnROYW1lID0gYXZhaWxhYmxlRm9udHNbaV07XG4gICAgICAgIHZhciBmb250RmFtaWx5ID0gZm9udE5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYoIUZvbnROYW1lREJbZm9udEZhbWlseV0pIHtcbiAgICAgICAgICBGb250TmFtZURCW2ZvbnRGYW1pbHldID0gZm9udE5hbWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHIgPSBuZXcgUmVuZGVyZXIocGRmLCB4LCB5LCBzZXR0aW5ncyksXG4gICAgICAgICAgb3V0OyAvLyAxLiBsb2FkIGltYWdlc1xuICAgICAgLy8gMi4gcHJlcGFyZSBvcHRpb25hbCBmb290ZXIgZWxlbWVudHNcbiAgICAgIC8vIDMuIHJlbmRlciBjb250ZW50XG5cbiAgICAgIGxvYWRJbWdzLmNhbGwodGhpcywgZWxlbWVudCwgciwgc2V0dGluZ3MuZWxlbWVudEhhbmRsZXJzLCBmdW5jdGlvbiAoZm91bmRfaW1hZ2VzKSB7XG4gICAgICAgIGNoZWNrRm9yRm9vdGVyKGVsZW1lbnQsIHIsIHNldHRpbmdzLmVsZW1lbnRIYW5kbGVycyk7XG5cbiAgICAgICAgX0RyaWxsRm9yQ29udGVudChlbGVtZW50LCByLCBzZXR0aW5ncy5lbGVtZW50SGFuZGxlcnMpOyAvL3NlbmQgZXZlbnQgZGlzcG9zZSBmb3IgZmluYWwgdGFrcyAoZS5nLiBmb290ZXIgdG90YWxwYWdlIHJlcGxhY2VtZW50KVxuXG5cbiAgICAgICAgci5wZGYuaW50ZXJuYWwuZXZlbnRzLnB1Ymxpc2goJ2h0bWxSZW5kZXJpbmdGaW5pc2hlZCcpO1xuICAgICAgICBvdXQgPSByLmRpc3Bvc2UoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgY2FsbGJhY2sob3V0KTtlbHNlIGlmIChmb3VuZF9pbWFnZXMpIGNvbnNvbGUuZXJyb3IoJ2pzUERGIFdhcm5pbmc6IHJlbmRlcmluZyBpc3N1ZXM/IHByb3ZpZGUgYSBjYWxsYmFjayB0byBmcm9tSFRNTCEnKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG91dCB8fCB7XG4gICAgICAgIHg6IHIueCxcbiAgICAgICAgeTogci55XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBSZW5kZXJlci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMucGFyYWdyYXBoID0ge1xuICAgICAgICB0ZXh0OiBbXSxcbiAgICAgICAgc3R5bGU6IFtdXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRoaXMucGRmLmludGVybmFsLndyaXRlKFwicVwiKTtcbiAgICB9O1xuXG4gICAgUmVuZGVyZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnBkZi5pbnRlcm5hbC53cml0ZShcIlFcIik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB4OiB0aGlzLngsXG4gICAgICAgIHk6IHRoaXMueSxcbiAgICAgICAgcmVhZHk6IHRydWVcbiAgICAgIH07XG4gICAgfTsgLy9DaGVja3MgaWYgd2UgaGF2ZSB0byBleGVjdXRlIHNvbWUgd2F0Y2hlciBmdW5jdGlvbnNcbiAgICAvL2UuZy4gdG8gZW5kIHRleHQgZmxvYXRpbmcgYXJvdW5kIGFuIGltYWdlXG5cblxuICAgIFJlbmRlcmVyLnByb3RvdHlwZS5leGVjdXRlV2F0Y2hGdW5jdGlvbnMgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICAgIHZhciByZXQgPSBmYWxzZTtcbiAgICAgIHZhciBuYXJyYXkgPSBbXTtcblxuICAgICAgaWYgKHRoaXMud2F0Y2hGdW5jdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMud2F0Y2hGdW5jdGlvbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBpZiAodGhpcy53YXRjaEZ1bmN0aW9uc1tpXShlbCkgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldCA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5hcnJheS5wdXNoKHRoaXMud2F0Y2hGdW5jdGlvbnNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMud2F0Y2hGdW5jdGlvbnMgPSBuYXJyYXk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcblxuICAgIFJlbmRlcmVyLnByb3RvdHlwZS5zcGxpdEZyYWdtZW50c0ludG9MaW5lcyA9IGZ1bmN0aW9uIChmcmFnbWVudHMsIHN0eWxlcykge1xuICAgICAgdmFyIGN1cnJlbnRMaW5lTGVuZ3RoLCBkZWZhdWx0Rm9udFNpemUsIGZmLCBmb250TWV0cmljcywgZm9udE1ldHJpY3NDYWNoZSwgZnJhZ21lbnQsIGZyYWdtZW50Q2hvcHBlZCwgZnJhZ21lbnRMZW5ndGgsIGZyYWdtZW50U3BlY2lmaWNNZXRyaWNzLCBmcywgaywgbGluZSwgbGluZXMsIG1heExpbmVMZW5ndGgsIHN0eWxlO1xuICAgICAgZGVmYXVsdEZvbnRTaXplID0gMTI7XG4gICAgICBrID0gdGhpcy5wZGYuaW50ZXJuYWwuc2NhbGVGYWN0b3I7XG4gICAgICBmb250TWV0cmljc0NhY2hlID0ge307XG4gICAgICBmZiA9IHZvaWQgMDtcbiAgICAgIGZzID0gdm9pZCAwO1xuICAgICAgZm9udE1ldHJpY3MgPSB2b2lkIDA7XG4gICAgICBmcmFnbWVudCA9IHZvaWQgMDtcbiAgICAgIHN0eWxlID0gdm9pZCAwO1xuICAgICAgZnJhZ21lbnRTcGVjaWZpY01ldHJpY3MgPSB2b2lkIDA7XG4gICAgICBmcmFnbWVudExlbmd0aCA9IHZvaWQgMDtcbiAgICAgIGZyYWdtZW50Q2hvcHBlZCA9IHZvaWQgMDtcbiAgICAgIGxpbmUgPSBbXTtcbiAgICAgIGxpbmVzID0gW2xpbmVdO1xuICAgICAgY3VycmVudExpbmVMZW5ndGggPSAwO1xuICAgICAgbWF4TGluZUxlbmd0aCA9IHRoaXMuc2V0dGluZ3Mud2lkdGg7XG5cbiAgICAgIHdoaWxlIChmcmFnbWVudHMubGVuZ3RoKSB7XG4gICAgICAgIGZyYWdtZW50ID0gZnJhZ21lbnRzLnNoaWZ0KCk7XG4gICAgICAgIHN0eWxlID0gc3R5bGVzLnNoaWZ0KCk7XG5cbiAgICAgICAgaWYgKGZyYWdtZW50KSB7XG4gICAgICAgICAgZmYgPSBzdHlsZVtcImZvbnQtZmFtaWx5XCJdO1xuICAgICAgICAgIGZzID0gc3R5bGVbXCJmb250LXN0eWxlXCJdO1xuICAgICAgICAgIGZvbnRNZXRyaWNzID0gZm9udE1ldHJpY3NDYWNoZVtmZiArIGZzXTtcblxuICAgICAgICAgIGlmICghZm9udE1ldHJpY3MpIHtcbiAgICAgICAgICAgIGZvbnRNZXRyaWNzID0gdGhpcy5wZGYuaW50ZXJuYWwuZ2V0Rm9udChmZiwgZnMpLm1ldGFkYXRhLlVuaWNvZGU7XG4gICAgICAgICAgICBmb250TWV0cmljc0NhY2hlW2ZmICsgZnNdID0gZm9udE1ldHJpY3M7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnJhZ21lbnRTcGVjaWZpY01ldHJpY3MgPSB7XG4gICAgICAgICAgICB3aWR0aHM6IGZvbnRNZXRyaWNzLndpZHRocyxcbiAgICAgICAgICAgIGtlcm5pbmc6IGZvbnRNZXRyaWNzLmtlcm5pbmcsXG4gICAgICAgICAgICBmb250U2l6ZTogc3R5bGVbXCJmb250LXNpemVcIl0gKiBkZWZhdWx0Rm9udFNpemUsXG4gICAgICAgICAgICB0ZXh0SW5kZW50OiBjdXJyZW50TGluZUxlbmd0aFxuICAgICAgICAgIH07XG4gICAgICAgICAgZnJhZ21lbnRMZW5ndGggPSB0aGlzLnBkZi5nZXRTdHJpbmdVbml0V2lkdGgoZnJhZ21lbnQsIGZyYWdtZW50U3BlY2lmaWNNZXRyaWNzKSAqIGZyYWdtZW50U3BlY2lmaWNNZXRyaWNzLmZvbnRTaXplIC8gaztcblxuICAgICAgICAgIGlmIChmcmFnbWVudCA9PSBcIlxcdTIwMjhcIikge1xuICAgICAgICAgICAgbGluZSA9IFtdO1xuICAgICAgICAgICAgbGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRMaW5lTGVuZ3RoICsgZnJhZ21lbnRMZW5ndGggPiBtYXhMaW5lTGVuZ3RoKSB7XG4gICAgICAgICAgICBmcmFnbWVudENob3BwZWQgPSB0aGlzLnBkZi5zcGxpdFRleHRUb1NpemUoZnJhZ21lbnQsIG1heExpbmVMZW5ndGgsIGZyYWdtZW50U3BlY2lmaWNNZXRyaWNzKTtcbiAgICAgICAgICAgIGxpbmUucHVzaChbZnJhZ21lbnRDaG9wcGVkLnNoaWZ0KCksIHN0eWxlXSk7XG5cbiAgICAgICAgICAgIHdoaWxlIChmcmFnbWVudENob3BwZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGxpbmUgPSBbW2ZyYWdtZW50Q2hvcHBlZC5zaGlmdCgpLCBzdHlsZV1dO1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjdXJyZW50TGluZUxlbmd0aCA9IHRoaXMucGRmLmdldFN0cmluZ1VuaXRXaWR0aChsaW5lWzBdWzBdLCBmcmFnbWVudFNwZWNpZmljTWV0cmljcykgKiBmcmFnbWVudFNwZWNpZmljTWV0cmljcy5mb250U2l6ZSAvIGs7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxpbmUucHVzaChbZnJhZ21lbnQsIHN0eWxlXSk7XG4gICAgICAgICAgICBjdXJyZW50TGluZUxlbmd0aCArPSBmcmFnbWVudExlbmd0aDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gLy9pZiB0ZXh0IGFsaWdubWVudCB3YXMgc2V0LCBzZXQgbWFyZ2luL2luZGVudCBvZiBlYWNoIGxpbmVcblxuXG4gICAgICBpZiAoc3R5bGVbJ3RleHQtYWxpZ24nXSAhPT0gdW5kZWZpbmVkICYmIChzdHlsZVsndGV4dC1hbGlnbiddID09PSAnY2VudGVyJyB8fCBzdHlsZVsndGV4dC1hbGlnbiddID09PSAncmlnaHQnIHx8IHN0eWxlWyd0ZXh0LWFsaWduJ10gPT09ICdqdXN0aWZ5JykpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLnBkZi5nZXRTdHJpbmdVbml0V2lkdGgobGluZXNbaV1bMF1bMF0sIGZyYWdtZW50U3BlY2lmaWNNZXRyaWNzKSAqIGZyYWdtZW50U3BlY2lmaWNNZXRyaWNzLmZvbnRTaXplIC8gazsgLy9pZiB0aGVyZSBpcyBtb3JlIHRoYW4gb24gbGluZSB3ZSBoYXZlIHRvIGNsb25lIHRoZSBzdHlsZSBvYmplY3QgYXMgYWxsIGxpbmVzIGhvbGQgYSByZWZlcmVuY2Ugb24gdGhpcyBvYmplY3RcblxuICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgbGluZXNbaV1bMF1bMV0gPSBjbG9uZShsaW5lc1tpXVswXVsxXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHNwYWNlID0gbWF4TGluZUxlbmd0aCAtIGxlbmd0aDtcblxuICAgICAgICAgIGlmIChzdHlsZVsndGV4dC1hbGlnbiddID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICBsaW5lc1tpXVswXVsxXVsnbWFyZ2luLWxlZnQnXSA9IHNwYWNlOyAvL2lmIGFsaWdubWVudCBpcyBub3QgcmlnaHQsIGl0IGhhcyB0byBiZSBjZW50ZXIgc28gc3BsaXQgdGhlIHNwYWNlIHRvIHRoZSBsZWZ0IGFuZCB0aGUgcmlnaHRcbiAgICAgICAgICB9IGVsc2UgaWYgKHN0eWxlWyd0ZXh0LWFsaWduJ10gPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgICBsaW5lc1tpXVswXVsxXVsnbWFyZ2luLWxlZnQnXSA9IHNwYWNlIC8gMjsgLy9pZiBqdXN0aWZ5IHdhcyBzZXQsIGNhbGN1bGF0ZSB0aGUgd29yZCBzcGFjaW5nIGFuZCBkZWZpbmUgaW4gYnkgdXNpbmcgdGhlIGNzcyBwcm9wZXJ0eVxuICAgICAgICAgIH0gZWxzZSBpZiAoc3R5bGVbJ3RleHQtYWxpZ24nXSA9PT0gJ2p1c3RpZnknKSB7XG4gICAgICAgICAgICB2YXIgY291bnRTcGFjZXMgPSBsaW5lc1tpXVswXVswXS5zcGxpdCgnICcpLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICBsaW5lc1tpXVswXVsxXVsnd29yZC1zcGFjaW5nJ10gPSBzcGFjZSAvIGNvdW50U3BhY2VzOyAvL2lnbm9yZSB0aGUgbGFzdCBsaW5lIGluIGp1c3RpZnkgbW9kZVxuXG4gICAgICAgICAgICBpZiAoaSA9PT0gbGluZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICBsaW5lc1tpXVswXVsxXVsnd29yZC1zcGFjaW5nJ10gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbGluZXM7XG4gICAgfTtcblxuICAgIFJlbmRlcmVyLnByb3RvdHlwZS5SZW5kZXJUZXh0RnJhZ21lbnQgPSBmdW5jdGlvbiAodGV4dCwgc3R5bGUpIHtcbiAgICAgIHZhciBkZWZhdWx0Rm9udFNpemUsIGZvbnQsIG1heExpbmVIZWlnaHQ7XG4gICAgICBtYXhMaW5lSGVpZ2h0ID0gMDtcbiAgICAgIGRlZmF1bHRGb250U2l6ZSA9IDEyO1xuXG4gICAgICBpZiAodGhpcy5wZGYuaW50ZXJuYWwucGFnZVNpemUuZ2V0SGVpZ2h0KCkgLSB0aGlzLnBkZi5tYXJnaW5zX2RvYy5ib3R0b20gPCB0aGlzLnkgKyB0aGlzLnBkZi5pbnRlcm5hbC5nZXRGb250U2l6ZSgpKSB7XG4gICAgICAgIHRoaXMucGRmLmludGVybmFsLndyaXRlKFwiRVRcIiwgXCJRXCIsIFwiUVwiKTtcbiAgICAgICAgY29uc3QgY3VycmVudFBhZ2VOdW1iZXIgPSB0aGlzLnBkZi5nZXRDdXJyZW50UGFnZUluZm8oKS5wYWdlTnVtYmVyO1xuICAgICAgICBpZiAodGhpcy5wZGYuZ2V0TnVtYmVyT2ZQYWdlcygpID09PSBjdXJyZW50UGFnZU51bWJlcikgdGhpcy5wZGYuYWRkUGFnZSgpO1xuICAgICAgICBlbHNlIHRoaXMucGRmLnNldFBhZ2UoY3VycmVudFBhZ2VOdW1iZXIgKyAxKTtcbiAgICAgICAgdGhpcy55ID0gdGhpcy5wZGYubWFyZ2luc19kb2MudG9wO1xuICAgICAgICB0aGlzLnBkZi5pbnRlcm5hbC53cml0ZShcInFcIiwgXCJxXCIsIFwiQlRcIiwgdGhpcy5nZXRQZGZDb2xvcihzdHlsZS5jb2xvciksIHRoaXMucGRmLmludGVybmFsLmdldENvb3JkaW5hdGVTdHJpbmcodGhpcy54KSwgdGhpcy5wZGYuaW50ZXJuYWwuZ2V0VmVydGljYWxDb29yZGluYXRlU3RyaW5nKHRoaXMueSksIFwiVGRcIik7IC8vbW92ZSBjdXJzb3IgYnkgb25lIGxpbmUgb24gbmV3IHBhZ2VcblxuICAgICAgICBtYXhMaW5lSGVpZ2h0ID0gTWF0aC5tYXgobWF4TGluZUhlaWdodCwgc3R5bGVbXCJsaW5lLWhlaWdodFwiXSwgc3R5bGVbXCJmb250LXNpemVcIl0pO1xuICAgICAgICB0aGlzLnBkZi5pbnRlcm5hbC53cml0ZSgwLCAoLTEgKiBkZWZhdWx0Rm9udFNpemUgKiBtYXhMaW5lSGVpZ2h0KS50b0ZpeGVkKDIpLCBcIlRkXCIpO1xuICAgICAgfVxuXG4gICAgICBmb250ID0gdGhpcy5wZGYuaW50ZXJuYWwuZ2V0Rm9udChzdHlsZVtcImZvbnQtZmFtaWx5XCJdLCBzdHlsZVtcImZvbnQtc3R5bGVcIl0pOyAvLyB0ZXh0IGNvbG9yXG5cbiAgICAgIHZhciBwZGZUZXh0Q29sb3IgPSB0aGlzLmdldFBkZkNvbG9yKHN0eWxlW1wiY29sb3JcIl0pO1xuXG4gICAgICBpZiAocGRmVGV4dENvbG9yICE9PSB0aGlzLmxhc3RUZXh0Q29sb3IpIHtcbiAgICAgICAgdGhpcy5wZGYuaW50ZXJuYWwud3JpdGUocGRmVGV4dENvbG9yKTtcbiAgICAgICAgdGhpcy5sYXN0VGV4dENvbG9yID0gcGRmVGV4dENvbG9yO1xuICAgICAgfSAvL3NldCB0aGUgd29yZCBzcGFjaW5nIGZvciBlLmcuIGp1c3RpZnkgc3R5bGVcblxuXG4gICAgICBpZiAoc3R5bGVbJ3dvcmQtc3BhY2luZyddICE9PSB1bmRlZmluZWQgJiYgc3R5bGVbJ3dvcmQtc3BhY2luZyddID4gMCkge1xuICAgICAgICB0aGlzLnBkZi5pbnRlcm5hbC53cml0ZShzdHlsZVsnd29yZC1zcGFjaW5nJ10udG9GaXhlZCgyKSwgXCJUd1wiKTtcbiAgICAgIH1cblxuXG4gICAgICB2YXIgcGRmRXNjYXBlMTYgPSBmdW5jdGlvbih0ZXh0LCBmb250KSB7XG4gICAgICAgIHZhciB3aWR0aHMgPSBmb250Lm1ldGFkYXRhLlVuaWNvZGUud2lkdGhzO1xuICAgICAgICB2YXIgcGFkeiA9IFtcIlwiLCBcIjBcIiwgXCIwMFwiLCBcIjAwMFwiLCBcIjAwMDBcIl07XG4gICAgICAgIHZhciBhciA9IFtcIlwiXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0ZXh0Lmxlbmd0aCwgdDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgIHQgPSBmb250Lm1ldGFkYXRhLmNoYXJhY3RlclRvR2x5cGgodGV4dC5jaGFyQ29kZUF0KGkpKTtcbiAgICAgICAgICBmb250Lm1ldGFkYXRhLmdseUlkc1VzZWQucHVzaCh0KTtcbiAgICAgICAgICBmb250Lm1ldGFkYXRhLnRvVW5pY29kZVt0XSA9IHRleHQuY2hhckNvZGVBdChpKTtcbiAgICAgICAgICBpZiAod2lkdGhzLmluZGV4T2YodCkgPT0gLTEpIHtcbiAgICAgICAgICAgIHdpZHRocy5wdXNoKHQpO1xuICAgICAgICAgICAgd2lkdGhzLnB1c2goW3BhcnNlSW50KGZvbnQubWV0YWRhdGEud2lkdGhPZkdseXBoKHQpLCAxMCldKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHQgPT0gXCIwXCIpIHtcbiAgICAgICAgICAgIC8vU3BhY2VzIGFyZSBub3QgYWxsb3dlZCBpbiBjbWFwLlxuICAgICAgICAgICAgcmV0dXJuIGFyLmpvaW4oXCJcIik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHQgPSB0LnRvU3RyaW5nKDE2KTtcbiAgICAgICAgICAgIGFyLnB1c2gocGFkels0IC0gdC5sZW5ndGhdLCB0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFyLmpvaW4oXCJcIik7XG4gICAgICB9O1xuXG4gICAgICB2YXIgdXRmOFRleHRGdW5jdGlvbiA9IGZ1bmN0aW9uKHRleHQsIGZvbnQpIHtcbiAgICAgICAgdmFyIHRleHQgPSB0ZXh0IHx8IFwiXCI7XG4gICAgXG4gICAgICAgIHZhciBzdHIgPSBcIlwiLFxuICAgICAgICAgIHMgPSAwLFxuICAgICAgICAgIGNtYXBDb25maXJtO1xuICAgICAgICB2YXIgc3RyVGV4dCA9IFwiXCI7XG4gICAgICAgIHZhciBlbmNvZGluZyA9IGZvbnQuZW5jb2Rpbmc7XG4gICAgXG4gICAgICAgIGlmIChmb250LmVuY29kaW5nICE9PSBcIklkZW50aXR5LUhcIikge1xuICAgICAgICAgIHJldHVybiB0ZXh0O1xuICAgICAgICB9XG4gICAgICAgIHN0clRleHQgPSB0ZXh0O1xuICAgIFxuICAgICAgICBmb3IgKHMgPSAwOyBzIDwgc3RyVGV4dC5sZW5ndGg7IHMgKz0gMSkge1xuICAgICAgICAgIGlmIChmb250Lm1ldGFkYXRhLmhhc093blByb3BlcnR5KFwiY21hcFwiKSkge1xuICAgICAgICAgICAgY21hcENvbmZpcm0gPSBmb250Lm1ldGFkYXRhLmNtYXAudW5pY29kZS5jb2RlTWFwW3N0clRleHRbc10uY2hhckNvZGVBdCgwKV07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghY21hcENvbmZpcm0pIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgc3RyVGV4dFtzXS5jaGFyQ29kZUF0KDApIDwgMjU2ICYmXG4gICAgICAgICAgICAgIGZvbnQubWV0YWRhdGEuaGFzT3duUHJvcGVydHkoXCJVbmljb2RlXCIpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgc3RyICs9IHN0clRleHRbc107XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzdHIgKz0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyICs9IHN0clRleHRbc107XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciByZXN1bHQgPSBcIlwiO1xuICAgICAgICBpZiAocGFyc2VJbnQoZm9udC5pZC5zbGljZSgxKSkgPCAxNCB8fCBlbmNvZGluZyA9PT0gXCJXaW5BbnNpRW5jb2RpbmdcIikge1xuICAgICAgICAgIHJlc3VsdCA9IHRoaXMucGRmLmludGVybmFsLnBkZkVzY2FwZShzdHIsIGtleSlcbiAgICAgICAgICAgIC5zcGxpdChcIlwiKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbihjdikge1xuICAgICAgICAgICAgICByZXR1cm4gY3YuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoZW5jb2RpbmcgPT09IFwiSWRlbnRpdHktSFwiKSB7XG4gICAgICAgICAgcmVzdWx0ID0gcGRmRXNjYXBlMTYoc3RyLCBmb250KTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTsgICAgICBcblxuICAgICAgLy8gdmFyIGVzY2FwZWRUZXh0ID0gdGhpcy5wZGYuaW50ZXJuYWwucGRmRXNjYXBlKHRleHQpO1xuICAgICAgLy8gdmFyIGVzY2FwZWRUZXh0ID0gdXRmOFRleHRGdW5jdGlvbih0ZXh0LCBmb250KTtcbiAgICAgIC8vIGlmKGVzY2FwZWRUZXh0ICE9IHRleHQpIHtcbiAgICAgIC8vICAgZXNjYXBlZFRleHQgPSBcIjxcIiArIGVzY2FwZWRUZXh0ICsgXCI+XCI7XG4gICAgICAvLyB9IGVsc2Uge1xuICAgICAgLy8gICBlc2NhcGVkVGV4dCA9IFwiKFwiICsgZXNjYXBlZFRleHQgKyBcIilcIjtcbiAgICAgIC8vIH1cblxuICAgICAgdmFyIGVzY2FwZWRUZXh0ID0gXCJcIjtcbiAgICAgIGlmKGZvbnQuZW5jb2RpbmcgIT09IFwiSWRlbnRpdHktSFwiKSB7XG4gICAgICAgIGVzY2FwZWRUZXh0ID0gXCIoXCIgKyB0aGlzLnBkZi5pbnRlcm5hbC5wZGZFc2NhcGUodGV4dCkgKyBcIilcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVzY2FwZWRUZXh0ID0gXCI8XCIgKyB1dGY4VGV4dEZ1bmN0aW9uKHRleHQsIGZvbnQpICsgXCI+XCI7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucGRmLmludGVybmFsLndyaXRlKFwiL1wiICsgZm9udC5pZCwgKGRlZmF1bHRGb250U2l6ZSAqIHN0eWxlW1wiZm9udC1zaXplXCJdKS50b0ZpeGVkKDIpLCBcIlRmXCIsIGVzY2FwZWRUZXh0ICsgXCIgVGpcIik7IC8vc2V0IHRoZSB3b3JkIHNwYWNpbmcgYmFjayB0byBuZXV0cmFsID0+IDBcblxuICAgICAgaWYgKHN0eWxlWyd3b3JkLXNwYWNpbmcnXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMucGRmLmludGVybmFsLndyaXRlKDAsIFwiVHdcIik7XG4gICAgICB9XG4gICAgfTsgLy8gQWNjZXB0cyAjRkZGRkZGLCByZ2IoaW50LGludCxpbnQpLCBvciBDU1MgQ29sb3IgTmFtZVxuXG5cbiAgICBSZW5kZXJlci5wcm90b3R5cGUuZ2V0UGRmQ29sb3IgPSBmdW5jdGlvbiAoc3R5bGUpIHtcbiAgICAgIHZhciB0ZXh0Q29sb3I7XG4gICAgICB2YXIgciwgZywgYjtcbiAgICAgIHZhciByeCA9IC9yZ2JcXHMqXFwoXFxzKihcXGQrKSxcXHMqKFxcZCspLFxccyooXFxkK1xccyopXFwpLztcbiAgICAgIHZhciBtID0gcnguZXhlYyhzdHlsZSk7XG5cbiAgICAgIGlmIChtICE9IG51bGwpIHtcbiAgICAgICAgciA9IHBhcnNlSW50KG1bMV0pO1xuICAgICAgICBnID0gcGFyc2VJbnQobVsyXSk7XG4gICAgICAgIGIgPSBwYXJzZUludChtWzNdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3R5bGUgPT09IFwic3RyaW5nXCIgJiYgc3R5bGUuY2hhckF0KDApICE9ICcjJykge1xuICAgICAgICAgIHZhciByZ2JDb2xvciA9IG5ldyBSR0JDb2xvcihzdHlsZSk7XG5cbiAgICAgICAgICBpZiAocmdiQ29sb3Iub2spIHtcbiAgICAgICAgICAgIHN0eWxlID0gcmdiQ29sb3IudG9IZXgoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3R5bGUgPSAnIzAwMDAwMCc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgciA9IHN0eWxlLnN1YnN0cmluZygxLCAzKTtcbiAgICAgICAgciA9IHBhcnNlSW50KHIsIDE2KTtcbiAgICAgICAgZyA9IHN0eWxlLnN1YnN0cmluZygzLCA1KTtcbiAgICAgICAgZyA9IHBhcnNlSW50KGcsIDE2KTtcbiAgICAgICAgYiA9IHN0eWxlLnN1YnN0cmluZyg1LCA3KTtcbiAgICAgICAgYiA9IHBhcnNlSW50KGIsIDE2KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiByID09PSAnc3RyaW5nJyAmJiAvXiNbMC05QS1GYS1mXXs2fSQvLnRlc3QocikpIHtcbiAgICAgICAgdmFyIGhleCA9IHBhcnNlSW50KHIuc3Vic3RyKDEpLCAxNik7XG4gICAgICAgIHIgPSBoZXggPj4gMTYgJiAyNTU7XG4gICAgICAgIGcgPSBoZXggPj4gOCAmIDI1NTtcbiAgICAgICAgYiA9IGhleCAmIDI1NTtcbiAgICAgIH1cblxuICAgICAgdmFyIGYzID0gdGhpcy5mMztcblxuICAgICAgaWYgKHIgPT09IDAgJiYgZyA9PT0gMCAmJiBiID09PSAwIHx8IHR5cGVvZiBnID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0ZXh0Q29sb3IgPSBmMyhyIC8gMjU1KSArICcgZyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0ZXh0Q29sb3IgPSBbZjMociAvIDI1NSksIGYzKGcgLyAyNTUpLCBmMyhiIC8gMjU1KSwgJ3JnJ10uam9pbignICcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGV4dENvbG9yO1xuICAgIH07XG5cbiAgICBSZW5kZXJlci5wcm90b3R5cGUuZjMgPSBmdW5jdGlvbiAobnVtYmVyKSB7XG4gICAgICByZXR1cm4gbnVtYmVyLnRvRml4ZWQoMyk7IC8vIEllLCAlLjNmXG4gICAgfSwgUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlclBhcmFncmFwaCA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgdmFyIGJsb2Nrc3R5bGUsIGRlZmF1bHRGb250U2l6ZSwgZm9udFRvVW5pdFJhdGlvLCBmcmFnbWVudHMsIGksIGwsIGxpbmUsIGxpbmVzLCBtYXhMaW5lSGVpZ2h0LCBvdXQsIHBhcmFncmFwaHNwYWNpbmdfYWZ0ZXIsIHBhcmFncmFwaHNwYWNpbmdfYmVmb3JlLCBwcmlvcmJsb2Nrc3R5bGUsIHN0eWxlcywgZm9udFNpemU7XG4gICAgICBmcmFnbWVudHMgPSBQdXJnZVdoaXRlU3BhY2UodGhpcy5wYXJhZ3JhcGgudGV4dCk7XG4gICAgICBzdHlsZXMgPSB0aGlzLnBhcmFncmFwaC5zdHlsZTtcbiAgICAgIGJsb2Nrc3R5bGUgPSB0aGlzLnBhcmFncmFwaC5ibG9ja3N0eWxlO1xuICAgICAgcHJpb3JibG9ja3N0eWxlID0gdGhpcy5wYXJhZ3JhcGgucHJpb3JibG9ja3N0eWxlIHx8IHt9O1xuICAgICAgdGhpcy5wYXJhZ3JhcGggPSB7XG4gICAgICAgIHRleHQ6IFtdLFxuICAgICAgICBzdHlsZTogW10sXG4gICAgICAgIGJsb2Nrc3R5bGU6IHt9LFxuICAgICAgICBwcmlvcmJsb2Nrc3R5bGU6IGJsb2Nrc3R5bGVcbiAgICAgIH07XG5cbiAgICAgIGlmICghZnJhZ21lbnRzLmpvaW4oXCJcIikudHJpbSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGluZXMgPSB0aGlzLnNwbGl0RnJhZ21lbnRzSW50b0xpbmVzKGZyYWdtZW50cywgc3R5bGVzKTtcbiAgICAgIGxpbmUgPSB2b2lkIDA7XG4gICAgICBtYXhMaW5lSGVpZ2h0ID0gdm9pZCAwO1xuICAgICAgZGVmYXVsdEZvbnRTaXplID0gMTI7XG4gICAgICBmb250VG9Vbml0UmF0aW8gPSBkZWZhdWx0Rm9udFNpemUgLyB0aGlzLnBkZi5pbnRlcm5hbC5zY2FsZUZhY3RvcjtcbiAgICAgIHRoaXMucHJpb3JNYXJnaW5Cb3R0b20gPSB0aGlzLnByaW9yTWFyZ2luQm90dG9tIHx8IDA7XG4gICAgICBwYXJhZ3JhcGhzcGFjaW5nX2JlZm9yZSA9IChNYXRoLm1heCgoYmxvY2tzdHlsZVtcIm1hcmdpbi10b3BcIl0gfHwgMCkgLSB0aGlzLnByaW9yTWFyZ2luQm90dG9tLCAwKSArIChibG9ja3N0eWxlW1wicGFkZGluZy10b3BcIl0gfHwgMCkpICogZm9udFRvVW5pdFJhdGlvO1xuICAgICAgcGFyYWdyYXBoc3BhY2luZ19hZnRlciA9ICgoYmxvY2tzdHlsZVtcIm1hcmdpbi1ib3R0b21cIl0gfHwgMCkgKyAoYmxvY2tzdHlsZVtcInBhZGRpbmctYm90dG9tXCJdIHx8IDApKSAqIGZvbnRUb1VuaXRSYXRpbztcbiAgICAgIHRoaXMucHJpb3JNYXJnaW5Cb3R0b20gPSBibG9ja3N0eWxlW1wibWFyZ2luLWJvdHRvbVwiXSB8fCAwO1xuXG4gICAgICBpZiAoYmxvY2tzdHlsZVsncGFnZS1icmVhay1iZWZvcmUnXSA9PT0gJ2Fsd2F5cycpIHtcbiAgICAgICAgdGhpcy5wZGYuYWRkUGFnZSgpO1xuICAgICAgICB0aGlzLnkgPSAwO1xuICAgICAgICBwYXJhZ3JhcGhzcGFjaW5nX2JlZm9yZSA9ICgoYmxvY2tzdHlsZVtcIm1hcmdpbi10b3BcIl0gfHwgMCkgKyAoYmxvY2tzdHlsZVtcInBhZGRpbmctdG9wXCJdIHx8IDApKSAqIGZvbnRUb1VuaXRSYXRpbztcbiAgICAgIH1cblxuICAgICAgb3V0ID0gdGhpcy5wZGYuaW50ZXJuYWwud3JpdGU7XG4gICAgICBpID0gdm9pZCAwO1xuICAgICAgbCA9IHZvaWQgMDtcbiAgICAgIHRoaXMueSArPSBwYXJhZ3JhcGhzcGFjaW5nX2JlZm9yZTtcbiAgICAgIG91dChcInFcIiwgXCJCVCAwIGdcIiwgdGhpcy5wZGYuaW50ZXJuYWwuZ2V0Q29vcmRpbmF0ZVN0cmluZyh0aGlzLngpLCB0aGlzLnBkZi5pbnRlcm5hbC5nZXRWZXJ0aWNhbENvb3JkaW5hdGVTdHJpbmcodGhpcy55KSwgXCJUZFwiKTsgLy9zdG9yZXMgdGhlIGN1cnJlbnQgaW5kZW50IG9mIGN1cnNvciBwb3NpdGlvblxuXG4gICAgICB2YXIgY3VycmVudEluZGVudCA9IDA7XG5cbiAgICAgIHdoaWxlIChsaW5lcy5sZW5ndGgpIHtcbiAgICAgICAgbGluZSA9IGxpbmVzLnNoaWZ0KCk7XG4gICAgICAgIG1heExpbmVIZWlnaHQgPSAwO1xuICAgICAgICBpID0gMDtcbiAgICAgICAgbCA9IGxpbmUubGVuZ3RoO1xuXG4gICAgICAgIHdoaWxlIChpICE9PSBsKSB7XG4gICAgICAgICAgaWYgKGxpbmVbaV1bMF0udHJpbSgpKSB7XG4gICAgICAgICAgICBtYXhMaW5lSGVpZ2h0ID0gTWF0aC5tYXgobWF4TGluZUhlaWdodCwgbGluZVtpXVsxXVtcImxpbmUtaGVpZ2h0XCJdLCBsaW5lW2ldWzFdW1wiZm9udC1zaXplXCJdKTtcbiAgICAgICAgICAgIGZvbnRTaXplID0gbGluZVtpXVsxXVtcImZvbnQtc2l6ZVwiXSAqIDc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaSsrO1xuICAgICAgICB9IC8vaWYgd2UgaGF2ZSB0byBtb3ZlIHRoZSBjdXJzb3IgdG8gYWRhcHQgdGhlIGluZGVudFxuXG5cbiAgICAgICAgdmFyIGluZGVudE1vdmUgPSAwO1xuICAgICAgICB2YXIgd2FudGVkSW5kZW50ID0gMDsgLy9pZiBhIG1hcmdpbiB3YXMgYWRkZWQgKGJ5IGUuZy4gYSB0ZXh0LWFsaWdubWVudCksIG1vdmUgdGhlIGN1cnNvclxuXG4gICAgICAgIGlmIChsaW5lWzBdWzFdW1wibWFyZ2luLWxlZnRcIl0gIT09IHVuZGVmaW5lZCAmJiBsaW5lWzBdWzFdW1wibWFyZ2luLWxlZnRcIl0gPiAwKSB7XG4gICAgICAgICAgd2FudGVkSW5kZW50ID0gdGhpcy5wZGYuaW50ZXJuYWwuZ2V0Q29vcmRpbmF0ZVN0cmluZyhsaW5lWzBdWzFdW1wibWFyZ2luLWxlZnRcIl0pO1xuICAgICAgICAgIGluZGVudE1vdmUgPSB3YW50ZWRJbmRlbnQgLSBjdXJyZW50SW5kZW50O1xuICAgICAgICAgIGN1cnJlbnRJbmRlbnQgPSB3YW50ZWRJbmRlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaW5kZW50TW9yZSA9IE1hdGgubWF4KGJsb2Nrc3R5bGVbXCJtYXJnaW4tbGVmdFwiXSB8fCAwLCAwKSAqIGZvbnRUb1VuaXRSYXRpbzsgLy9tb3ZlIHRoZSBjdXJzb3JcblxuICAgICAgICBvdXQoaW5kZW50TW92ZSArIGluZGVudE1vcmUsICgtMSAqIGRlZmF1bHRGb250U2l6ZSAqIG1heExpbmVIZWlnaHQpLnRvRml4ZWQoMiksIFwiVGRcIik7XG4gICAgICAgIGkgPSAwO1xuICAgICAgICBsID0gbGluZS5sZW5ndGg7XG5cbiAgICAgICAgd2hpbGUgKGkgIT09IGwpIHtcbiAgICAgICAgICBpZiAobGluZVtpXVswXSkge1xuICAgICAgICAgICAgdGhpcy5SZW5kZXJUZXh0RnJhZ21lbnQobGluZVtpXVswXSwgbGluZVtpXVsxXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaSsrO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy55ICs9IG1heExpbmVIZWlnaHQgKiBmb250VG9Vbml0UmF0aW87IC8vaWYgc29tZSB3YXRjaGVyIGZ1bmN0aW9uIHdhcyBleGVjdXRlZCBzdWNjZXNzZnVsLCBzbyBlLmcuIG1hcmdpbiBhbmQgd2lkdGhzIHdlcmUgY2hhbmdlZCxcbiAgICAgICAgLy9yZXNldCBsaW5lIGRyYXdpbmcgYW5kIGNhbGN1bGF0ZSBwb3NpdGlvbiBhbmQgbGluZXMgYWdhaW5cbiAgICAgICAgLy9lLmcuIHRvIHN0b3AgdGV4dCBmbG9hdGluZyBhcm91bmQgYW4gaW1hZ2VcblxuICAgICAgICBpZiAodGhpcy5leGVjdXRlV2F0Y2hGdW5jdGlvbnMobGluZVswXVsxXSkgJiYgbGluZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZhciBsb2NhbEZyYWdtZW50cyA9IFtdO1xuICAgICAgICAgIHZhciBsb2NhbFN0eWxlcyA9IFtdOyAvL2NyZWF0ZSBmcmFnbWVudCBhcnJheSBvZlxuXG4gICAgICAgICAgbGluZXMuZm9yRWFjaChmdW5jdGlvbiAobG9jYWxMaW5lKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICB2YXIgbCA9IGxvY2FsTGluZS5sZW5ndGg7XG5cbiAgICAgICAgICAgIHdoaWxlIChpICE9PSBsKSB7XG4gICAgICAgICAgICAgIGlmIChsb2NhbExpbmVbaV1bMF0pIHtcbiAgICAgICAgICAgICAgICBsb2NhbEZyYWdtZW50cy5wdXNoKGxvY2FsTGluZVtpXVswXSArICcgJyk7XG4gICAgICAgICAgICAgICAgbG9jYWxTdHlsZXMucHVzaChsb2NhbExpbmVbaV1bMV0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pOyAvL3NwbGl0IGxpbmVzIGFnYWluIGR1ZSB0byBwb3NzaWJsZSBjb29yZGluYXRlIGNoYW5nZXNcblxuICAgICAgICAgIGxpbmVzID0gdGhpcy5zcGxpdEZyYWdtZW50c0ludG9MaW5lcyhQdXJnZVdoaXRlU3BhY2UobG9jYWxGcmFnbWVudHMpLCBsb2NhbFN0eWxlcyk7IC8vcmVwb3NpdGlvbiB0aGUgY3VycmVudCBjdXJzb3JcblxuICAgICAgICAgIG91dChcIkVUXCIsIFwiUVwiKTtcbiAgICAgICAgICBvdXQoXCJxXCIsIFwiQlQgMCBnXCIsIHRoaXMucGRmLmludGVybmFsLmdldENvb3JkaW5hdGVTdHJpbmcodGhpcy54KSwgdGhpcy5wZGYuaW50ZXJuYWwuZ2V0VmVydGljYWxDb29yZGluYXRlU3RyaW5nKHRoaXMueSksIFwiVGRcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNiLmNhbGwodGhpcywgdGhpcy54IC0gOSwgdGhpcy55IC0gZm9udFNpemUgLyAyKTtcbiAgICAgIH1cblxuICAgICAgb3V0KFwiRVRcIiwgXCJRXCIpO1xuICAgICAgcmV0dXJuIHRoaXMueSArPSBwYXJhZ3JhcGhzcGFjaW5nX2FmdGVyO1xuICAgIH07XG5cbiAgICBSZW5kZXJlci5wcm90b3R5cGUuc2V0QmxvY2tCb3VuZGFyeSA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgcmV0dXJuIHRoaXMucmVuZGVyUGFyYWdyYXBoKGNiKTtcbiAgICB9O1xuXG4gICAgUmVuZGVyZXIucHJvdG90eXBlLnNldEJsb2NrU3R5bGUgPSBmdW5jdGlvbiAoY3NzKSB7XG4gICAgICByZXR1cm4gdGhpcy5wYXJhZ3JhcGguYmxvY2tzdHlsZSA9IGNzcztcbiAgICB9O1xuXG4gICAgUmVuZGVyZXIucHJvdG90eXBlLmFkZFRleHQgPSBmdW5jdGlvbiAodGV4dCwgY3NzKSB7XG4gICAgICB0aGlzLnBhcmFncmFwaC50ZXh0LnB1c2godGV4dCk7XG4gICAgICByZXR1cm4gdGhpcy5wYXJhZ3JhcGguc3R5bGUucHVzaChjc3MpO1xuICAgIH07XG5cbiAgICBGb250TmFtZURCID0ge1xuICAgICAgaGVsdmV0aWNhOiBcImhlbHZldGljYVwiLFxuICAgICAgXCJzYW5zLXNlcmlmXCI6IFwiaGVsdmV0aWNhXCIsXG4gICAgICBcInRpbWVzIG5ldyByb21hblwiOiBcInRpbWVzXCIsXG4gICAgICBzZXJpZjogXCJ0aW1lc1wiLFxuICAgICAgdGltZXM6IFwidGltZXNcIixcbiAgICAgIG1vbm9zcGFjZTogXCJjb3VyaWVyXCIsXG4gICAgICBjb3VyaWVyOiBcImNvdXJpZXJcIlxuICAgIH07XG4gICAgRm9udFdlaWdodE1hcCA9IHtcbiAgICAgIDEwMDogXCJub3JtYWxcIixcbiAgICAgIDIwMDogXCJub3JtYWxcIixcbiAgICAgIDMwMDogXCJub3JtYWxcIixcbiAgICAgIDQwMDogXCJub3JtYWxcIixcbiAgICAgIDUwMDogXCJib2xkXCIsXG4gICAgICA2MDA6IFwiYm9sZFwiLFxuICAgICAgNzAwOiBcImJvbGRcIixcbiAgICAgIDgwMDogXCJib2xkXCIsXG4gICAgICA5MDA6IFwiYm9sZFwiLFxuICAgICAgbm9ybWFsOiBcIm5vcm1hbFwiLFxuICAgICAgYm9sZDogXCJib2xkXCIsXG4gICAgICBib2xkZXI6IFwiYm9sZFwiLFxuICAgICAgbGlnaHRlcjogXCJub3JtYWxcIlxuICAgIH07XG4gICAgRm9udFN0eWxlTWFwID0ge1xuICAgICAgbm9ybWFsOiBcIm5vcm1hbFwiLFxuICAgICAgaXRhbGljOiBcIml0YWxpY1wiLFxuICAgICAgb2JsaXF1ZTogXCJpdGFsaWNcIlxuICAgIH07XG4gICAgVGV4dEFsaWduTWFwID0ge1xuICAgICAgbGVmdDogXCJsZWZ0XCIsXG4gICAgICByaWdodDogXCJyaWdodFwiLFxuICAgICAgY2VudGVyOiBcImNlbnRlclwiLFxuICAgICAganVzdGlmeTogXCJqdXN0aWZ5XCJcbiAgICB9O1xuICAgIEZsb2F0TWFwID0ge1xuICAgICAgbm9uZTogJ25vbmUnLFxuICAgICAgcmlnaHQ6ICdyaWdodCcsXG4gICAgICBsZWZ0OiAnbGVmdCdcbiAgICB9O1xuICAgIENsZWFyTWFwID0ge1xuICAgICAgbm9uZTogJ25vbmUnLFxuICAgICAgYm90aDogJ2JvdGgnXG4gICAgfTtcbiAgICBVbml0ZWROdW1iZXJNYXAgPSB7XG4gICAgICBub3JtYWw6IDFcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIEhUTUwtZm9ybWF0dGVkIHRleHQgaW50byBmb3JtYXR0ZWQgUERGIHRleHQuXG4gICAgICpcbiAgICAgKiBOb3RlczpcbiAgICAgKiAyMDEyLTA3LTE4XG4gICAgICogUGx1Z2luIHJlbGllcyBvbiBoYXZpbmcgYnJvd3NlciwgRE9NIGFyb3VuZC4gVGhlIEhUTUwgaXMgcHVzaGVkIGludG8gZG9tIGFuZCB0cmF2ZXJzZWQuXG4gICAgICogUGx1Z2luIHJlbGllcyBvbiBqUXVlcnkgZm9yIENTUyBleHRyYWN0aW9uLlxuICAgICAqIFRhcmdldGluZyBIVE1MIG91dHB1dCBmcm9tIE1hcmtkb3duIHRlbXBsYXRpbmcsIHdoaWNoIGlzIGEgdmVyeSBzaW1wbGVcbiAgICAgKiBtYXJrdXAgLSBkaXYsIHNwYW4sIGVtLCBzdHJvbmcsIHAuIE5vIGJyLWJhc2VkIHBhcmFncmFwaCBzZXBhcmF0aW9uIHN1cHBvcnRlZCBleHBsaWNpdGx5IChidXQgc3RpbGwgbWF5IHdvcmsuKVxuICAgICAqIEltYWdlcywgdGFibGVzIGFyZSBOT1Qgc3VwcG9ydGVkLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwYXJhbSBIVE1MIHtTdHJpbmd8T2JqZWN0fSBIVE1MLWZvcm1hdHRlZCB0ZXh0LCBvciBwb2ludGVyIHRvIERPTSBlbGVtZW50IHRoYXQgaXMgdG8gYmUgcmVuZGVyZWQgaW50byBQREYuXG4gICAgICogQHBhcmFtIHgge051bWJlcn0gc3RhcnRpbmcgWCBjb29yZGluYXRlIGluIGpzUERGIGluc3RhbmNlJ3MgZGVjbGFyZWQgdW5pdHMuXG4gICAgICogQHBhcmFtIHkge051bWJlcn0gc3RhcnRpbmcgWSBjb29yZGluYXRlIGluIGpzUERGIGluc3RhbmNlJ3MgZGVjbGFyZWQgdW5pdHMuXG4gICAgICogQHBhcmFtIHNldHRpbmdzIHtPYmplY3R9IEFkZGl0aW9uYWwgLyBvcHRpb25hbCB2YXJpYWJsZXMgY29udHJvbGxpbmcgcGFyc2luZywgcmVuZGVyaW5nLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IGpzUERGIGluc3RhbmNlXG4gICAgICovXG5cbiAgICBqc1BERkFQSS5mcm9tSFRNTCA9IGZ1bmN0aW9uIChIVE1MLCB4LCB5LCBzZXR0aW5ncywgY2FsbGJhY2ssIG1hcmdpbnMpIHtcblxuICAgICAgdGhpcy5tYXJnaW5zX2RvYyA9IG1hcmdpbnMgfHwge1xuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGJvdHRvbTogMFxuICAgICAgfTtcbiAgICAgIGlmICghc2V0dGluZ3MpIHNldHRpbmdzID0ge307XG4gICAgICBpZiAoIXNldHRpbmdzLmVsZW1lbnRIYW5kbGVycykgc2V0dGluZ3MuZWxlbWVudEhhbmRsZXJzID0ge307XG4gICAgICByZXR1cm4gcHJvY2Vzcyh0aGlzLCBIVE1MLCBpc05hTih4KSA/IDQgOiB4LCBpc05hTih5KSA/IDQgOiB5LCBzZXR0aW5ncywgY2FsbGJhY2spO1xuICAgIH07XG4gIH0pKGpzcGRmLmpzUERGLkFQSSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qc3BkZl9wbHVnaW5zL2Zyb21faHRtbC5qc1xuLy8gbW9kdWxlIGlkID0gNjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==